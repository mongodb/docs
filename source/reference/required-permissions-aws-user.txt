==============
AWS IAM Policy
==============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

When |mms| deploys and manages MongoDB instances on AWS infrastructure, |mms|
accesses AWS by way of a user's access keys. The user associated with the
keys must have an attached IAM policy with the following permissions. For
information on attaching the policy, see
:doc:`/tutorial/nav/provision-cloud-servers`.

The example below leaves out the ``Version`` field, which is not required.
Should you want to add the field, you can do so prior to the ``Statement``
field, as indicated in Amazon's `IAM policy documentation
<http://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html>`_.

.. code-block:: javascript

   {
     "Statement": [
       {
         "Effect": "Allow",
         "Action": ["iam:*AccessKey*", "iam:GetUser"],
         "Resource": ["*"]
       },
       {
         "Effect": "Allow",
         "Action": [
           "ec2:AttachVolume",
           "ec2:AuthorizeSecurityGroupIngress",
           "ec2:CreateKeyPair",
           "ec2:CreateSecurityGroup",
           "ec2:CreateTags",
           "ec2:CreateVolume",
           "ec2:DeleteKeyPair",
           "ec2:DeleteSecurityGroup",
           "ec2:DeleteTags",
           "ec2:DeleteVolume",
           "ec2:DescribeAccountAttributes",
           "ec2:DescribeAvailabilityZones",
           "ec2:DescribeInstanceAttribute",
           "ec2:DescribeInstanceStatus",
           "ec2:DescribeInstances",
           "ec2:DescribeKeyPairs",
           "ec2:DescribeRegions",
           "ec2:DescribeSecurityGroups",
           "ec2:DescribeSubnets",
           "ec2:DescribeTags",
           "ec2:DescribeVpcs",
           "ec2:DescribeVpcAttribute",
           "ec2:DescribeVolumeStatus",
           "ec2:DescribeVolumes",
           "ec2:DescribeVolumeAttribute",
           "ec2:ImportKeyPair",
           "ec2:RunInstances",
           "ec2:StartInstances",
           "ec2:StopInstances",
           "ec2:RebootInstances",
           "ec2:TerminateInstances"
         ],
         "Resource": [
           "*"
         ]
       }
     ]
   }
