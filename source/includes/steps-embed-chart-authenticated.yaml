title: Configure an Authenticated Embedding Provider.
ref: configure-auth-provider
level: 4
content: |

  Your authenticated embedded chart will not render until you configure
  an authentication provider and update your application to send a valid
  token.

  Charts supports the following authentication providers:

  - :stitch:`Realm </authentication/>`
  - Google
  - Custom |jwt|

  To learn how to configure an authentication provider, see
  :ref:`configure-auth-providers`.
---
title: Select a dashboard.
ref: select-dashboard
level: 4
content: |

  From your dashboard page, select the dashboard containing the chart
  you wish to embed.
---
title: Select a chart.
ref: select-chart
level: 4
content: |

  From the dashboard, click :icon-mms:`ellipsis` at the top-right of
  the chart to access its embedding information. Select
  :guilabel:`Embed Chart` from the dropdown menu.
---
title: Enable external sharing on the data source
ref: enable-data-source
level: 4
content: |

  If you have already enabled external sharing on the data source this
  chart uses, skip this step. If you haven't yet enabled
  embedding on the data source, you can do so now. Click the
  :guilabel:`Configure external sharing` link.

---
title: Select the :guilabel:`Authenticated` tab in the dialog window.
ref: select-authenticated
level: 4
content: |

  .. figure:: /images/charts/embed-chart-authenticated.png
     :figwidth: 508px
     :alt: Embed authenticated chart
---
title: Toggle :guilabel:`Enable authenticated access` to
  :guilabel:`On`.
ref: toggle-authenticated-on
level: 4
---
title: (*Optional*) Specify a filter function to inject per user.
ref:
level: 4
content: |

   You can specify a function to inject a MongoDB filter document for
   each user who views the chart. The function has access to your
   Embedding Authentication Provider's token via ``context.token``, and
   can filter the chart data based on the token.

   This filter ensures that viewers of an embedded chart see only their
   own data, which is useful when embedding charts with potentially
   sensitive information.

   .. example::

      The following filter function only renders data where the
      ``ownerId`` field of a document matches the value of
      the Embedding Authentication Provider's token's ``sub`` field:

      .. code-block:: javascript

         function getFilter(context) {
           return { ownerId: context.token.sub };
         }
---
title: (*Optional*) Specify filterable fields for your chart.
ref: authenticated-filterable-fields
level: 4
content: |

   Specify the fields on which chart viewers can filter data. By
   default, no fields are whitelisted, meaning the chart cannot be
   filtered until you explicitly whitelist at least one field.

   To learn more about filterable fields, see
   :ref:`specify-filter-fields`.
---
title: Copy the :guilabel:`Chart ID` and :guilabel:`Chart Base URL`
ref: copy-chart-attributes
level: 4
content: |

   Use these values in your application code together with your
   Embedded Authentication Provider attributes to embed your chart.

   For code examples for each Embedded Authentication Provider, see
   the
   `SDK Samples GitHub Repository
   <https://github.com/mongodb-js/charts-embed-sdk/>`__.

...
