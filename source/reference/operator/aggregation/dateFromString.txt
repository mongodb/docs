=============================
$dateFromString (aggregation)
=============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Definition
----------

.. expression:: $dateFromString

   .. versionadded:: 3.6

   Converts a datetime string to a date object

   The :expression:`$dateFromString` expression has the following syntax:

   .. code-block:: javascript

      { $dateFromString: { dateString: <dateStringExpression>, : <timezone: <tzExpression> } }

   The :pipeline:`$dateToString` takes a document with the following fields:

   .. list-table::
      :header-rows: 1
      :widths: 20 80

      * - Field
        - Description

      * - ``dateString``

        - The datetime string to convert to a date object. It should be in 
          ``ISODate`` format. See :doc:`Date </reference/method/Date>` for 
          more information on datetime format. 

          This argument should not include a 'Z' at the end, which indicates 
          Zulu Time and would conflict with the timezone argument. 

      * - ``timezone``

        - Optional. The timezone to use to format the date.

          ``<timezone>`` allows for the following options and expressions 
          that evaluate to them:

          - an `Olson Timezone Identifier
            <https://en.wikipedia.org/wiki/List_of_tz_database_time_zones>`_, 
            such as ``"Europe/London"`` or ``"America/New_York"``, or

          - a UTC offset in the form:

            - ``+/-[hh]:[mm]``, e.g. ``"+04:45"``, or

            - ``+/-[hh][mm]``, e.g. ``"-0530"``, or

            - ``+/-[hh]``, e.g. ``"+03"``, or

          - The strings `"Z"`, `"UTC"`, or `"GMT"`

          For more information on expressions, see
          :ref:`aggregation-expressions`.

If during runtime, the ``dateStringExpression`` or ``tzExpression`` evaluate 
to null, missing or undefined, the result of the $dateToParts expression is 
null.

Example
-------

Consider the following :term:`aggregate` method on the ``tz`` collection:

.. code-block:: javascript

	db.tz.aggregate( { date: { 
	   $dateFromString: {
	      dateString: '2017-02-08T12:10:40.787',
	      timezone: 'America/New_York'
	   }
	} } );

The above aggregation uses the :expression:`$dateFromString` to return
the date object below:

.. code-block:: javascript
   
   { date: ISODate( “2017-02-08T17:10:40.787Z” ) }
