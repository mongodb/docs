(function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p='',t(0)})([function(e,t,r){'use strict';function i(e){let t;return fetch(e).then((e)=>{return t=performance.now(),e.json()}).then((e)=>{return d=s.Index.load(e),o=e.slugs,(performance.now()-t)/1e3})}function n(e){const t=performance.now(),r=d.search(e).map((e)=>{return o[e.ref]});return r}const s=r(1);let d=null,o=[];self.onmessage=function(e){if(e.data.load!==void 0)i(e.data.load).then((e)=>{self.postMessage({loaded:e})});else if(e.data.search!==void 0){const t=n(e.data.search);self.postMessage({results:t})}}},function(e,t,r){var i,n;/**
	 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.1.0
	 * Copyright (C) 2017 Oliver Nightingale
	 * @license MIT
	 */(function(){var d=function(e){var t=new d.Builder;return t.pipeline.add(d.trimmer,d.stopWordFilter,d.stemmer),t.searchPipeline.add(d.stemmer),e.call(t,t),t.build()};d.version='2.1.0',d.utils={},d.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),d.utils.asString=function(e){return void 0===e||null===e?'':e.toString()},d.FieldRef=function(e,t){this.docRef=e,this.fieldName=t,this._stringValue=t+d.FieldRef.joiner+e},d.FieldRef.joiner='/',d.FieldRef.fromString=function(e){var t=e.indexOf(d.FieldRef.joiner);if(-1===t)throw'malformed field ref string';var r=e.slice(0,t),i=e.slice(t+1);return new d.FieldRef(i,r)},d.FieldRef.prototype.toString=function(){return this._stringValue},d.idf=function(e,t){var r=0;for(var i in e)'_index'!=i&&(r+=Object.keys(e[i]).length);var n=(t-r+0.5)/(r+0.5);return Math.log(1+Math.abs(n))},d.Token=function(e,t){this.str=e||'',this.metadata=t||{}},d.Token.prototype.toString=function(){return this.str},d.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},d.Token.prototype.clone=function(e){return e=e||function(e){return e},new d.Token(e(this.str,this.metadata),this.metadata)},d.tokenizer=function(e){if(null==e||e==void 0)return[];if(Array.isArray(e))return e.map(function(e){return new d.Token(d.utils.asString(e).toLowerCase())});for(var t=e.toString().trim().toLowerCase(),r=t.length,i=[],n=0,s=0;n<=r;n++){var o=t.charAt(n),a=n-s;(o.match(d.tokenizer.separator)||n==r)&&(0<a&&i.push(new d.Token(t.slice(s,n),{position:[s,a],index:i.length})),s=n+1)}return i},d.tokenizer.separator=/[\s\-]+/,d.Pipeline=function(){this._stack=[]},d.Pipeline.registeredFunctions=Object.create(null),d.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&d.utils.warn('Overwriting existing registered function: '+t),e.label=t,d.Pipeline.registeredFunctions[e.label]=e},d.Pipeline.warnIfFunctionNotRegistered=function(e){var t=e.label&&e.label in this.registeredFunctions;t||d.utils.warn('Function is not registered with pipeline. This may cause problems when serialising the index.\n',e)},d.Pipeline.load=function(e){var t=new d.Pipeline;return e.forEach(function(e){var r=d.Pipeline.registeredFunctions[e];if(r)t.add(r);else throw new Error('Cannot load unregistered function: '+e)}),t},d.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){d.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},d.Pipeline.prototype.after=function(e,t){d.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error('Cannot find existingFn');++r,this._stack.splice(r,0,t)},d.Pipeline.prototype.before=function(e,t){d.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error('Cannot find existingFn');this._stack.splice(r,0,t)},d.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1==t||this._stack.splice(t,1)},d.Pipeline.prototype.run=function(e){for(var t,r=this._stack.length,n=0;n<r;n++)t=this._stack[n],e=e.reduce(function(r,i,n){var s=t(i,n,e);return void 0===s||''===s?r:r.concat(s)},[]);return e},d.Pipeline.prototype.runString=function(e){var t=new d.Token(e);return this.run([t]).map(function(e){return e.toString()})},d.Pipeline.prototype.reset=function(){this._stack=[]},d.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return d.Pipeline.warnIfFunctionNotRegistered(e),e.label})},d.Vector=function(e){this._magnitude=0,this.elements=e||[]},d.Vector.prototype.positionForIndex=function(e){var t=Math.floor;if(0==this.elements.length)return 0;for(var r=0,i=this.elements.length/2,n=i-r,s=t(n/2),d=this.elements[2*s];1<n&&(d<e&&(r=s),d>e&&(i=s),d!=e);)n=i-r,s=r+t(n/2),d=this.elements[2*s];return d==e?2*s:d>e?2*s:d<e?2*(s+1):void 0},d.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw'duplicate index'})},d.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=r(this.elements[i+1],t):this.elements.splice(i,0,e,t)},d.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e,t=0,r=this.elements.length,n=1;n<r;n+=2)e=this.elements[n],t+=e*e;return this._magnitude=Math.sqrt(t)},d.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,n=e.elements,s=r.length,d=n.length,o=0,a=0,l=0,i=0;l<s&&i<d;)o=r[l],a=n[i],o<a?l+=2:o>a?i+=2:o==a&&(t+=r[l+1]*n[i+1],l+=2,i+=2);return t},d.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},d.Vector.prototype.toArray=function(){for(var e=Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},d.Vector.prototype.toJSON=function(){return this.elements},d.stemmer=function(){var e={ational:'ate',tional:'tion',enci:'ence',anci:'ance',izer:'ize',bli:'ble',alli:'al',entli:'ent',eli:'e',ousli:'ous',ization:'ize',ation:'ate',ator:'ate',alism:'al',iveness:'ive',fulness:'ful',ousness:'ous',aliti:'al',iviti:'ive',biliti:'ble',logi:'log'},t={icate:'ic',ative:'',alize:'al',iciti:'ic',ical:'ic',ful:'',ness:''},r='[aeiouy]',i='[^aeiou]'+'[^aeiouy]*',n=r+'[aeiou]*',s=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,d=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,o=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,a=/^([^aeiou][^aeiouy]*)?[aeiouy]/,l=/^(.+?)(ss|i)es$/,u=/^(.+?)([^s])s$/,p=/^(.+?)eed$/,c=/^(.+?)(ed|ing)$/,m=/.$/,y=/(at|bl|iz)$/,f=/([^aeiouylsz])\1$/,g=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,h=/^(.+?[^aeiou])y$/,x=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,k=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,Q=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,L=/^(.+?)(s|t)(ion)$/,T=/^(.+?)e$/,S=/ll$/,P=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,I=function(r){var i,n,I,R,F,E,w;if(3>r.length)return r;if(I=r.substr(0,1),'y'==I&&(r=I.toUpperCase()+r.substr(1)),R=l,F=u,R.test(r)?r=r.replace(R,'$1$2'):F.test(r)&&(r=r.replace(F,'$1$2')),R=p,F=c,R.test(r)){var _=R.exec(r);R=s,R.test(_[1])&&(R=m,r=r.replace(R,''))}else if(F.test(r)){var _=F.exec(r);i=_[1],F=a,F.test(i)&&(r=i,F=y,E=f,w=g,F.test(r)?r+='e':E.test(r)?(R=m,r=r.replace(R,'')):w.test(r)&&(r+='e'))}if(R=h,R.test(r)){var _=R.exec(r);i=_[1],r=i+'i'}if(R=x,R.test(r)){var _=R.exec(r);i=_[1],n=_[2],R=s,R.test(i)&&(r=i+e[n])}if(R=k,R.test(r)){var _=R.exec(r);i=_[1],n=_[2],R=s,R.test(i)&&(r=i+t[n])}if(R=Q,F=L,R.test(r)){var _=R.exec(r);i=_[1],R=d,R.test(i)&&(r=i)}else if(F.test(r)){var _=F.exec(r);i=_[1]+_[2],F=d,F.test(i)&&(r=i)}if(R=T,R.test(r)){var _=R.exec(r);i=_[1],R=d,F=o,E=P,(R.test(i)||F.test(i)&&!E.test(i))&&(r=i)}return R=S,F=d,R.test(r)&&F.test(r)&&(R=m,r=r.replace(R,'')),'y'==I&&(r=I.toLowerCase()+r.substr(1)),r};return function(e){return e.update(I)}}(),d.Pipeline.registerFunction(d.stemmer,'stemmer'),d.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},d.stopWordFilter=d.generateStopWordFilter(['a','able','about','across','after','all','almost','also','am','among','an','and','any','are','as','at','be','because','been','but','by','can','cannot','could','dear','did','do','does','either','else','ever','every','for','from','get','got','had','has','have','he','her','hers','him','his','how','however','i','if','in','into','is','it','its','just','least','let','like','likely','may','me','might','most','must','my','neither','no','nor','not','of','off','often','on','only','or','other','our','own','rather','said','say','says','she','should','since','so','some','than','that','the','their','them','then','there','these','they','this','tis','to','too','twas','us','wants','was','we','were','what','when','where','which','while','who','whom','why','will','with','would','yet','you','your']),d.Pipeline.registerFunction(d.stopWordFilter,'stopWordFilter'),d.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,'').replace(/\W+$/,'')})},d.Pipeline.registerFunction(d.trimmer,'trimmer'),d.TokenSet=function(){this.final=!1,this.edges={},this.id=d.TokenSet._nextId,d.TokenSet._nextId+=1},d.TokenSet._nextId=1,d.TokenSet.fromArray=function(e){for(var t=new d.TokenSet.Builder,r=0,i=e.length;r<i;r++)t.insert(e[r]);return t.finish(),t.root},d.TokenSet.fromClause=function(e){return'editDistance'in e?d.TokenSet.fromFuzzyString(e.term,e.editDistance):d.TokenSet.fromString(e.term)},d.TokenSet.fromFuzzyString=function(e,t){for(var r,i=new d.TokenSet,n=[{node:i,editsRemaining:t,str:e}];n.length;){if(r=n.pop(),0<r.str.length){var s,o=r.str.charAt(0);o in r.node.edges?s=r.node.edges[o]:(s=new d.TokenSet,r.node.edges[o]=s),1==r.str.length?s.final=!0:n.push({node:s,editsRemaining:r.editsRemaining,str:r.str.slice(1)})}if(0<r.editsRemaining&&1<r.str.length){var a,o=r.str.charAt(1);o in r.node.edges?a=r.node.edges[o]:(a=new d.TokenSet,r.node.edges[o]=a),2>=r.str.length?a.final=!0:n.push({node:a,editsRemaining:r.editsRemaining-1,str:r.str.slice(2)})}if(0<r.editsRemaining&&1==r.str.length&&(r.node.final=!0),0<r.editsRemaining&&1<=r.str.length){if('*'in r.node.edges)var l=r.node.edges['*'];else{var l=new d.TokenSet;r.node.edges['*']=l}1==r.str.length?l.final=!0:n.push({node:l,editsRemaining:r.editsRemaining-1,str:r.str.slice(1)})}if(0<r.editsRemaining){if('*'in r.node.edges)var u=r.node.edges['*'];else{var u=new d.TokenSet;r.node.edges['*']=u}0==r.str.length?u.final=!0:n.push({node:u,editsRemaining:r.editsRemaining-1,str:r.str})}if(0<r.editsRemaining&&1<r.str.length){var p,c=r.str.charAt(0),m=r.str.charAt(1);m in r.node.edges?p=r.node.edges[m]:(p=new d.TokenSet,r.node.edges[m]=p),1==r.str.length?p.final=!0:n.push({node:p,editsRemaining:r.editsRemaining-1,str:c+r.str.slice(2)})}}return i},d.TokenSet.fromString=function(e){for(var t=new d.TokenSet,r=t,n=!1,s=0,i=e.length;s<i;s++){var o=e[s],a=s==i-1;if('*'==o)n=!0,t.edges[o]=t,t.final=a;else{var l=new d.TokenSet;l.final=a,t.edges[o]=l,t=l,n&&(t.edges['*']=r)}}return r},d.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:'',node:this}];t.length;){var r=t.pop(),n=Object.keys(r.node.edges),s=n.length;r.node.final&&e.push(r.prefix);for(var d,o=0;o<s;o++)d=n[o],t.push({prefix:r.prefix.concat(d),node:r.node.edges[d]})}return e},d.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?'1':'0',t=Object.keys(this.edges).sort(),r=t.length,n=0;n<r;n++){var i=t[n],s=this.edges[i];e=e+i+s.id}return e},d.TokenSet.prototype.intersect=function(e){for(var t,r=new d.TokenSet,i=[{qNode:e,output:r,node:this}];i.length;){t=i.pop();for(var s,o=Object.keys(t.qNode.edges),a=o.length,l=Object.keys(t.node.edges),u=l.length,p=0;p<a;p++){s=o[p];for(var c,m=0;m<u;m++)if(c=l[m],c==s||'*'==s){var n=t.node.edges[c],y=t.qNode.edges[s],f=n.final&&y.final,g=void 0;c in t.output.edges?(g=t.output.edges[c],g.final=g.final||f):(g=new d.TokenSet,g.final=f,t.output.edges[c]=g),i.push({qNode:y,output:g,node:n})}}}return r},d.TokenSet.Builder=function(){this.previousWord='',this.root=new d.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},d.TokenSet.Builder.prototype.insert=function(e){var t,r=0;if(e<this.previousWord)throw new Error('Out of order word insertion');for(var n=0;n<e.length&&n<this.previousWord.length&&!(e[n]!=this.previousWord[n]);n++)r++;this.minimize(r),t=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var n=r;n<e.length;n++){var i=new d.TokenSet,s=e[n];t.edges[s]=i,this.uncheckedNodes.push({parent:t,char:s,child:i}),t=i}t.final=!0,this.previousWord=e},d.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},d.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var r=this.uncheckedNodes[t],i=r.child.toString();i in this.minimizedNodes?r.parent.edges[r.char]=this.minimizedNodes[i]:(r.child._str=i,this.minimizedNodes[i]=r.child),this.uncheckedNodes.pop()}},d.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},d.Index.prototype.search=function(e){return this.query(function(t){var r=new d.QueryParser(e,t);r.parse()})},d.Index.prototype.query=function(e){var t=new d.Query(this.fields),r=Object.create(null),n=Object.create(null);e.call(t,t);for(var s=0;s<t.clauses.length;s++){var i=t.clauses[s],o=null;o=i.usePipeline?this.pipeline.runString(i.term):[i.term];for(var a,u=0;u<o.length;u++){a=o[u],i.term=a;for(var p=d.TokenSet.fromClause(i),c=this.tokenSet.intersect(p).toArray(),m=0;m<c.length;m++)for(var y=c[m],f=this.invertedIndex[y],g=f._index,h=0;h<i.fields.length;h++){var x=i.fields[h],k=f[x],Q=Object.keys(k);x in n||(n[x]=new d.Vector),n[x].upsert(g,1*i.boost,function(e,t){return e+t});for(var L=0;L<Q.length;L++){var l,T,S=Q[L],P=new d.FieldRef(S,x);l=k[S],T=new d.MatchData(y,x,l),P in r?r[P].combine(T):r[P]=T}}}}for(var I=Object.keys(r),R={},s=0;s<I.length;s++){var F=d.FieldRef.fromString(I[s]),E=F.docRef,w=this.fieldVectors[F],_=n[F.fieldName].similarity(w);E in R?(R[E].score+=_,R[E].matchData.combine(r[F])):R[E]={ref:E,score:_,matchData:r[F]}}return Object.keys(R).map(function(e){return R[e]}).sort(function(e,t){return t.score-e.score})},d.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),t=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:d.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},d.Index.load=function(e){var t={},r={},n=e.fieldVectors,s={},o=e.invertedIndex,a=new d.TokenSet.Builder,l=d.Pipeline.load(e.pipeline);e.version!=d.version&&d.utils.warn('Version mismatch when loading serialised index. Current version of lunr \''+d.version+'\' does not match serialized index \''+e.version+'\'');for(var u=0;u<n.length;u++){var i=n[u],p=i[0],c=i[1];r[p]=new d.Vector(c)}for(var u=0;u<o.length;u++){var i=o[u],m=i[0],y=i[1];a.insert(m),s[m]=y}return a.finish(),t.fields=e.fields,t.fieldVectors=r,t.invertedIndex=s,t.tokenSet=a.root,t.pipeline=l,new d.Index(t)},d.Builder=function(){this._ref='id',this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=d.tokenizer,this.pipeline=new d.Pipeline,this.searchPipeline=new d.Pipeline,this.documentCount=0,this._b=0.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},d.Builder.prototype.ref=function(e){this._ref=e},d.Builder.prototype.field=function(e){this._fields.push(e)},d.Builder.prototype.b=function(e){this._b=0>e?0:1<e?1:e},d.Builder.prototype.k1=function(e){this._k1=e},d.Builder.prototype.add=function(e){var t=e[this._ref];this.documentCount+=1;for(var r=0;r<this._fields.length;r++){var i=this._fields[r],n=e[i],s=this.tokenizer(n),o=this.pipeline.run(s),a=new d.FieldRef(t,i),u={};this.fieldTermFrequencies[a]=u,this.fieldLengths[a]=0,this.fieldLengths[a]+=o.length;for(var p,c=0;c<o.length;c++){if(p=o[c],void 0==u[p]&&(u[p]=0),u[p]+=1,void 0==this.invertedIndex[p]){var m=Object.create(null);m._index=this.termIndex,this.termIndex+=1;for(var y=0;y<this._fields.length;y++)m[this._fields[y]]=Object.create(null);this.invertedIndex[p]=m}void 0==this.invertedIndex[p][i][t]&&(this.invertedIndex[p][i][t]=Object.create(null));for(var f=0;f<this.metadataWhitelist.length;f++){var l=this.metadataWhitelist[f],g=p.metadata[l];void 0==this.invertedIndex[p][i][t][l]&&(this.invertedIndex[p][i][t][l]=[]),this.invertedIndex[p][i][t][l].push(g)}}}},d.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,r={},n={},s=0;s<t;s++){var i=d.FieldRef.fromString(e[s]),o=i.fieldName;n[o]||(n[o]=0),n[o]+=1,r[o]||(r[o]=0),r[o]+=this.fieldLengths[i]}for(var o,s=0;s<this._fields.length;s++)o=this._fields[s],r[o]/=n[o];this.averageFieldLength=r},d.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),r=t.length,n=0;n<r;n++){for(var i=d.FieldRef.fromString(t[n]),s=i.fieldName,o=this.fieldLengths[i],a=new d.Vector,l=this.fieldTermFrequencies[i],u=Object.keys(l),p=u.length,c=0;c<p;c++){var m=u[c],y=l[m],f=this.invertedIndex[m]._index,g=d.idf(this.invertedIndex[m],this.documentCount),h=g*((this._k1+1)*y)/(this._k1*(1-this._b+this._b*(o/this.averageFieldLength[s]))+y),x=Math.round(1e3*h)/1e3;a.insert(f,x)}e[i]=a}this.fieldVectors=e},d.Builder.prototype.createTokenSet=function(){this.tokenSet=d.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},d.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new d.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},d.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},d.MatchData=function(e,t,r){this.metadata={},this.metadata[e]={},this.metadata[e][t]=r},d.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var i=t[r],n=Object.keys(e.metadata[i]);this.metadata[i]==void 0&&(this.metadata[i]={});for(var s=0;s<n.length;s++){var d=n[s],o=Object.keys(e.metadata[i][d]);this.metadata[i][d]==void 0&&(this.metadata[i][d]={});for(var a,l=0;l<o.length;l++)a=o[l],this.metadata[i][d][a]=void 0==this.metadata[i][d][a]?e.metadata[i][d][a]:this.metadata[i][d][a].concat(e.metadata[i][d][a])}}},d.Query=function(e){this.clauses=[],this.allFields=e},d.Query.wildcard=new String('*'),d.Query.wildcard.NONE=0,d.Query.wildcard.LEADING=1,d.Query.wildcard.TRAILING=2,d.Query.prototype.clause=function(e){return'fields'in e||(e.fields=this.allFields),'boost'in e||(e.boost=1),'usePipeline'in e||(e.usePipeline=!0),'wildcard'in e||(e.wildcard=d.Query.wildcard.NONE),e.wildcard&d.Query.wildcard.LEADING&&e.term.charAt(0)!=d.Query.wildcard&&(e.term='*'+e.term),e.wildcard&d.Query.wildcard.TRAILING&&e.term.slice(-1)!=d.Query.wildcard&&(e.term=''+e.term+'*'),this.clauses.push(e),this},d.Query.prototype.term=function(e,t){var r=t||{};return r.term=e,this.clause(r),this},d.QueryParseError=function(e,t,r){this.name='QueryParseError',this.message=e,this.start=t,this.end=r},d.QueryParseError.prototype=new Error,d.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},d.QueryLexer.prototype.run=function(){for(var e=d.QueryLexer.lexText;e;)e=e(this)},d.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,n=0;n<this.escapeCharPositions.length;n++)r=this.escapeCharPositions[n],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join('')},d.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},d.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},d.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return d.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},d.QueryLexer.prototype.width=function(){return this.pos-this.start},d.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},d.QueryLexer.prototype.backup=function(){this.pos-=1},d.QueryLexer.prototype.acceptDigitRun=function(){var e,t;do e=this.next(),t=e.charCodeAt(0);while(47<t&&58>t);e!=d.QueryLexer.EOS&&this.backup()},d.QueryLexer.prototype.more=function(){return this.pos<this.length},d.QueryLexer.EOS='EOS',d.QueryLexer.FIELD='FIELD',d.QueryLexer.TERM='TERM',d.QueryLexer.EDIT_DISTANCE='EDIT_DISTANCE',d.QueryLexer.BOOST='BOOST',d.QueryLexer.lexField=function(e){return e.backup(),e.emit(d.QueryLexer.FIELD),e.ignore(),d.QueryLexer.lexText},d.QueryLexer.lexTerm=function(e){if(1<e.width()&&(e.backup(),e.emit(d.QueryLexer.TERM)),e.ignore(),e.more())return d.QueryLexer.lexText},d.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(d.QueryLexer.EDIT_DISTANCE),d.QueryLexer.lexText},d.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(d.QueryLexer.BOOST),d.QueryLexer.lexText},d.QueryLexer.lexEOS=function(e){0<e.width()&&e.emit(d.QueryLexer.TERM)},d.QueryLexer.termSeparator=d.tokenizer.separator,d.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==d.QueryLexer.EOS)return d.QueryLexer.lexEOS;if(92==t.charCodeAt(0)){e.escapeCharacter();continue}if(':'==t)return d.QueryLexer.lexField;if('~'==t)return e.backup(),0<e.width()&&e.emit(d.QueryLexer.TERM),d.QueryLexer.lexEditDistance;if('^'==t)return e.backup(),0<e.width()&&e.emit(d.QueryLexer.TERM),d.QueryLexer.lexBoost;if(t.match(d.QueryLexer.termSeparator))return d.QueryLexer.lexTerm}},d.QueryParser=function(e,t){this.lexer=new d.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0},d.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=d.QueryParser.parseFieldOrTerm;e;)e=e(this);return this.query},d.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},d.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},d.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},d.QueryParser.parseFieldOrTerm=function(e){var t=e.peekLexeme();if(void 0!=t)switch(t.type){case d.QueryLexer.FIELD:return d.QueryParser.parseField;case d.QueryLexer.TERM:return d.QueryParser.parseTerm;default:var r='expected either a field or a term, found '+t.type;throw 1<=t.str.length&&(r+=' with value \''+t.str+'\''),new d.QueryParseError(r,t.start,t.end);}},d.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(void 0!=t){if(-1==e.query.allFields.indexOf(t.str)){var r=e.query.allFields.map(function(e){return'\''+e+'\''}).join(', '),i='unrecognised field \''+t.str+'\', possible fields: '+r;throw new d.QueryParseError(i,t.start,t.end)}e.currentClause.fields=[t.str];var n=e.peekLexeme();if(void 0==n){var i='expecting term, found nothing';throw new d.QueryParseError(i,t.start,t.end)}switch(n.type){case d.QueryLexer.TERM:return d.QueryParser.parseTerm;default:var i='expecting term, found \''+n.type+'\'';throw new d.QueryParseError(i,n.start,n.end);}}},d.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(void 0!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf('*')&&(e.currentClause.usePipeline=!1);var r=e.peekLexeme();if(void 0==r)return void e.nextClause();switch(r.type){case d.QueryLexer.TERM:return e.nextClause(),d.QueryParser.parseTerm;case d.QueryLexer.FIELD:return e.nextClause(),d.QueryParser.parseField;case d.QueryLexer.EDIT_DISTANCE:return d.QueryParser.parseEditDistance;case d.QueryLexer.BOOST:return d.QueryParser.parseBoost;default:var i='Unexpected lexeme type \''+r.type+'\'';throw new d.QueryParseError(i,r.start,r.end);}}},d.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(void 0!=t){var r=parseInt(t.str,10);if(isNaN(r)){var i='edit distance must be numeric';throw new d.QueryParseError(i,t.start,t.end)}e.currentClause.editDistance=r;var n=e.peekLexeme();if(void 0==n)return void e.nextClause();switch(n.type){case d.QueryLexer.TERM:return e.nextClause(),d.QueryParser.parseTerm;case d.QueryLexer.FIELD:return e.nextClause(),d.QueryParser.parseField;case d.QueryLexer.EDIT_DISTANCE:return d.QueryParser.parseEditDistance;case d.QueryLexer.BOOST:return d.QueryParser.parseBoost;default:var i='Unexpected lexeme type \''+n.type+'\'';throw new d.QueryParseError(i,n.start,n.end);}}},d.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(void 0!=t){var r=parseInt(t.str,10);if(isNaN(r)){var i='boost must be numeric';throw new d.QueryParseError(i,t.start,t.end)}e.currentClause.boost=r;var n=e.peekLexeme();if(void 0==n)return void e.nextClause();switch(n.type){case d.QueryLexer.TERM:return e.nextClause(),d.QueryParser.parseTerm;case d.QueryLexer.FIELD:return e.nextClause(),d.QueryParser.parseField;case d.QueryLexer.EDIT_DISTANCE:return d.QueryParser.parseEditDistance;case d.QueryLexer.BOOST:return d.QueryParser.parseBoost;default:var i='Unexpected lexeme type \''+n.type+'\'';throw new d.QueryParseError(i,n.start,n.end);}}},function(s,d){i=d,n='function'==typeof i?i.call(t,r,t,e):i,!(n!==void 0&&(e.exports=n))}(this,function(){return d})})()}]);