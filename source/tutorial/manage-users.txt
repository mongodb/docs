.. _atlas_users:

================
|service| Access
================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

To access |service|, you must have an |service| user account. If you
are an existing MongoDB Cloud Manager user, you can use your Cloud
Manager credentials.

To access an organization or a project within that organization, a user
must be a member of that organization. Depending on the user's
:ref:`role in the organization <organization-roles>`, the |service|
user may be required to be a member of the project as well to access a
project.

To access clusters in a project, users must belong to that project.
Users can belong to multiple projects.

Within an organization, you can group users into teams. Users can
belong multiple teams. Teams can be assigned to multiple projects, and
team members' access to the project is determined by the team's
:ref:`project role <project-roles>`.

.. important::

   |service| users are separate from MongoDB users. MongoDB users can
   access MongoDB databases, while |service| users can access the
   |service| application itself.

Manage Organization Users
-------------------------

.. admonition:: Required Permissions
   :class: note

   To perform any of the following actions, you must have the
   :authrole:`Organization Owner` role.

.. _add-org-users:

Add Users to an Organization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. important::

   .. include:: /includes/limits/users-per-org.rst

.. container:: admonition

   .. include:: /includes/steps/add-user-org.rst

View Active Users and Pending Invitations in an Organization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To view users in an organization:

1. From the :guilabel:`Context` menu, select your desired organization.
#. Click :guilabel:`Access`.
#. Click :guilabel:`Users`.

This page lists:

- Users who are members of your |service| organization.
- Pending users who have not accepted to the invitation to join the 
  organization or project within the organization.

To cancel an invitation, click :icon:`trash-alt` to the right of the
pending user.

Edit User's Role in an Organization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To edit roles through |service| for the organization:

1. Click :guilabel:`Access`.

#. Click :guilabel:`Users`.

#. For the organization user to modify, click :guilabel:`Edit Role`.

#. Select the :ref:`new role or roles <organization-roles>` for the
   user from the menu.

#. Click on the checkmark to save.

Remove Users from an Organization 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. note::

   You cannot remove the last :authrole:`Organization Owner` from an
   organization.

.. container:: admonition

   .. include:: /includes/steps/remove-user-org.rst

.. _manage-teams:

Manage Team Access to an Organization
-------------------------------------

In an organization, you can group its users into teams to facilitate
adding and granting roles to multiple users to projects. You assign
project access at the team level. All users in the team share the same
project access.

Organization users can belong to multiple teams.

.. admonition:: Required Permissions
   :class: note

   To perform any of the following actions, you must have the
   :authrole:`Organization Owner` role.

.. _create-team:

Create a Team
~~~~~~~~~~~~~

.. important::

   .. include:: /includes/limits/teams-per-project.rst

.. container:: admonition

   .. include:: /includes/steps/create-team.rst

.. _edit-team-members:

Manage Team Members
~~~~~~~~~~~~~~~~~~~

.. important::

   .. include:: /includes/limits/users-per-team.rst

.. container:: admonition

   .. include:: /includes/steps/manage-team.rst

.. _rename-team:

Rename a Team
~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/steps/rename-team.rst

.. _delete-team:

Delete a Team
~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/steps/delete-team.rst

.. _about-org-api-keys:

Manage Application Access to an Organization
--------------------------------------------

To grant applications access to an organization using only the
:doc:`API </api>`, you can create an |api| Key for that application.

|api| Keys consist of two parts: a Public Key and a Private Key. These
serve the same function as a username and User API Key when making
|api| requests to |service|.

|api| Keys cannot be used to log into |service| through the user
interface. You need to grant roles to |api| Keys as you would Users to
make sure the |api| Keys can call |api| endpoints without errors. |api|
Keys belong to one organization, but can be granted access to any
project in that organization.

.. admonition:: Required Permissions
   :class: note

   To perform any of the following actions, you must have the
   :authrole:`Organization Owner` role.

.. _create-org-api-key:

Create an |api| Key in an Organization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. From the :guilabel:`Context` menu, select the organization that you
   want to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`API Keys`.

#. Select :guilabel:`Create API Key` from the :guilabel:`Manage`
   button menu.

#. From the :guilabel:`API Key Information` step of the
   :guilabel:`Add API Key` page, enter a description for the new |api|
   Key in the :guilabel:`Description` box.

#. Select the :ref:`new role or roles <organization-roles>` for the
   |api| Key from the :guilabel:`Organization Permissions` menu.

#. Click :guilabel:`Next`.

#. From the :guilabel:`Private Key & Whitelist` step of the
   :guilabel:`Add API Key` page, click :guilabel:`Add Whitelist Entry`.

#. Enter an |ipv4| address from which you want |service| to
   accept |api| requests for this |api| Key.

   You can also click :guilabel:`Use Current IP Address` if the host
   you are using to access |service| also will make |api| requests
   using this |api| Key.

#. Click :guilabel:`Save`.

.. admonition:: Copy the Private Key Before Leaving this Page
   :class: warning

   The :guilabel:`Private Key` is only shown once: *on this page*.
   Click the :guilabel:`Copy` button to add the Private Key to the
   clipboard. Save and secure this Private Key as you would any other
   password.

.. _view-org-api-key:

View the Details of an |api| Key in an Organization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. From the :guilabel:`Context` menu, select the organization that you
   want to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`API Keys` to see the available keys.

#. From the ellipsis menu to the right of the |api| Key, click
   :guilabel:`View Details`. 

The :guilabel:`<Public Key> API Key Details` modal displays:

- The obfuscated :guilabel:`Private Key`
- The date the Key was last used
- The date the Key was created
- The |ipv4| addresses on which the key is whitelisted
- The projects to which the Key has been granted access

.. _change-org-api-key-roles:

Change an |api| Key in an Organization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can change the roles, description, or whitelist of an |api| Key in 
an Organization.

1. From the :guilabel:`Context` menu, select the organization that you
   want to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`API Keys` to see the available keys.

#. From the ellipsis menu to the right of the |api| Key you want to
   change, click :guilabel:`Edit`.

#. From the :guilabel:`API Key Information` step of the
   :guilabel:`Add API Key` page, you can change the description of  
   the |api| Key in the :guilabel:`Description` box.

#. You can change existing or add new :ref:`roles <organization-roles>`
   to the |api| Key from the :guilabel:`Organization Permissions` menu.

#. Click :guilabel:`Next`.

#. From the :guilabel:`Private Key & Whitelist` step of the
   :guilabel:`Add API Key` page, you can add or remove an |ipaddr| 
   address to the whitelist.

   - To add an |ipaddr| address from which you want |service| to accept
     |api| requests for this |api| Key, click
     :guilabel:`Add Whitelist Entry` and type an |ipv4| address.

     You can also click :guilabel:`Use Current IP Address` if the host
     you are using to access |service| also will make |api| requests
     using this |api| Key.

   - To remove a whitelisted |ipaddr| address, click :icon:`trash-alt`
     to the right of the whitelisted |ipaddr| address.

#. Click :guilabel:`Save`.

.. _delete-org-api-key:

Delete an |api| Key from an Organization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. From the :guilabel:`Context` menu, select the organization that you
   want to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`API Keys` to see the available keys.

#. Click :icon:`trash-alt` to the right of the |api| Key that you want 
   to delete.

#. Click :guilabel:`Delete` to confirm that you want to delete this
   |api| Key or :guilabel:`Cancel` to leave the key in the
   Organization.

   Removing an |api| Key from an Organization also removes that key
   from any projects to which the key was granted access.

.. _manage-project-access:

Manage Access to a Project
--------------------------

.. admonition:: Required Permissions
   :class: note

   To perform any of the following actions, you must have either the
   :authrole:`Project Owner` or :authrole:`Project User Admin` role.

.. _atlas_add_users:

Add Users/Teams to a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. important::

   Adding a user to a project also adds that user to the
   organization.

   .. include:: /includes/limits/teams-and-users-per-project.rst

.. container:: admonition

   .. include:: /includes/steps/atlas-users-add.rst

View Who Can Access a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To view which users, teams, or |api| Keys can access a project:

1. From the :guilabel:`Context` menu, select the project that you want
   to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`Users`, :guilabel:`Teams`, or
   :guilabel:`API Keys` to see the appropriate access.

Each tab lists the project's users, teams, or |api| Keys along with
their project roles and actions you can take on that user, team, or
|api| Key.

View User Invitations
~~~~~~~~~~~~~~~~~~~~~

The :guilabel:`Users` tab also lists any outstanding invitations to
users to join the project and any requests from users who want to join
the project. A user can request to join a project when they first
register for |service|.

Individual users are ordered by status. They appear in the following
sequence:

1. Users currently in your project.
#. Users with pending invitations to join your project.
#. Users requesting to join your project.

A user can request to join a project when first registering for
|service|.

|service| displays the :guilabel:`Name` of
users who have not accepted their invitation as
:guilabel:`Pending User` and their role as *--invite sent--*.

To cancel an invitation, click :icon:`trash-alt` to the right of the
user's name.

Remove Users or Teams from a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. important::

   Project must have at least one user or team. You cannot delete the
   last member (be it a user or team) from the project. You must
   instead :ref:`close the project
   <how-do-i-remove-my-company-project>`.

   You also cannot delete the last :authrole:`Project Owner` remaining
   in the project. You must first assign the role to at least one
   other user before deleting the original user.

From the project:

.. container:: admonition

   .. include:: /includes/steps/atlas-users-remove.rst

.. _atlas-assign-roles-to-users:

.. _atlas_edit_users:

Edit a User's or Team's Role in a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To edit the project roles for a user/team, from the project:

.. container:: admonition

   .. include:: /includes/steps/atlas-assign-roles.rst

.. _about-project-api-keys:

Manage Application Access to a Project
--------------------------------------

.. admonition:: Required Permissions
   :class: note

   To perform any of the following actions, you must have either the
   :authrole:`Project User Admin` role.

.. _create-project-api-key:

Create an |api| Key for a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. From the :guilabel:`Context` menu, select the project that you want
   to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`API Keys`.

#. Select :guilabel:`Create API Key` from the :guilabel:`Manage`
   button menu.

#. From the :guilabel:`API Key Information` step of the
   :guilabel:`Add API Key` page, enter a description for the new |api|
   Key in the :guilabel:`Description` box.

#. Select the :ref:`new role or roles <project-roles>` for the
   |api| Key from the :guilabel:`Group Permissions` menu.

#. Click :guilabel:`Next`.

#. From the :guilabel:`Private Key & Whitelist` step of the
   :guilabel:`Add API Key` page, click :guilabel:`Add Whitelist Entry`.

#. Enter an |ipv4| address from which you want |service| to
   accept |api| requests for this |api| Key.

   You can also click :guilabel:`Use Current IP Address` if the host
   you are using to access |service| also will make |api| requests
   using this |api| Key.

#. Click :guilabel:`Save`.

.. admonition:: Copy the Private Key Before Leaving this Page
   :class: warning

   The :guilabel:`Private Key` is only shown once: *on this page*.
   Click the :guilabel:`Copy` button to add the Private Key to the
   clipboard. Save and secure this Private Key as you would any other
   password.

.. _view-project-api-key:

View the Details of an |api| Key in a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. From the :guilabel:`Context` menu, select the project that you want
   to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`API Keys` to see the available keys.

#. From the ellipsis menu to the right of the |api| Key, click
   :guilabel:`View Details`. 

The :guilabel:`<Public Key> API Key Details` modal displays the
obfuscated :guilabel:`Private Key`, the date the key was last used,
the date it was created, and the |ipv4| addresses on which
the key is whitelisted.

.. _change-project-api-key-roles:

Change an |api| Key's Roles in a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. From the :guilabel:`Context` menu, select the project that you want
   to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`API Keys` to see the available keys.

#. From the ellipsis menu to the right of the |api| Key, click
   :guilabel:`Edit Permissions`.

#. Select the :ref:`new role or roles <project-roles>` for the
   |api| Key from the menu.

#. Click :icon:`check-square` to save.

.. _delete-project-api-key:

Delete an |api| Key from a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. From the :guilabel:`Context` menu, select the project that you want
   to view.

#. Click :guilabel:`Access`.

#. Click the tab for :guilabel:`API Keys` to see the available keys.

#. Click :icon:`trash-alt` to the right of the |api| Key.

