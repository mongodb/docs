.. _stitch-sdk-tutorial:

=====================================================
Embed a Chart Authenticated with {+atlas-app-services+}
=====================================================

.. meta::
   :description: Embed a chart authenticated with Atlas App Services using the Embedding SDK and control data access through your app service.

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

{+atlas-app-services-link+} is a serverless platform that enables developers
to quickly build applications without having to set up server infrastructure.
{+app-services+} offers several authentication options, including `Google OAuth
<https://developers.google.com/identity/protocols/oauth2>`__, `Facebook Login
<https://developers.facebook.com/docs/facebook-login/>`__, and email/password.
You can use the authentication mechanism from an app service to control 
data access for an embedded chart.

This tutorial shows you how to: 

- Enable authenticated embedding for a chart.
- Use the Embedding SDK to embed a chart authenticated by a custom
  {+atlas-app-services-link+} provider.
- Use your app service to control the data in your embedded chart.

.. note::

   This tutorial does not cover creating an app service with authentication.
   See the :stitch:`Atlas App Services documentation </tutorials/>` for 
   app creation tutorials.

Prerequisites
-------------

- You must be an |service|
  :atlas:`Project Owner </reference/user-roles/#project-roles>` to
  configure embedding authentication providers for your linked 
  |charts-short| instance.

- You must have a chart which uses your app's backing database as
  its :ref:`data source <data-sources>`. For more information about creating
  a chart, see :ref:`Build Charts <build-charts>`.

Procedures
----------

Enable Authenticated Embedding for a Chart
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/enable-embedding-intro.rst

.. include:: /includes/steps/embed-chart-authenticated.rst

Configure |charts-short| to use your Custom {+atlas-app-services+} Provider
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps-add-auth-stitch-tutorial.rst

Create a Web App to Display Your Chart
--------------------------------------

If you already have an app in which to display your chart, you're ready
to add an :ref:`embedded chart <embedding-charts-sdk>`.
If not, proceed with the remaining steps to create a new app.

MongoDB offers a pre-built example app that shows how to use the 
Embedding SDK to display an embedded chart using {+app-services+} authentication.

Clone the :github:`GitHub repository
</mongodb-js/charts-embed-sdk/tree/master/examples/charts/authenticated-realm-web>` and
follow the instructions in the ``Readme`` file to begin using the app. 
You can run the app as-is, or you can customize it to use the chart you 
created earlier.

.. note::

   The example app assumes that your app service uses email/password
   authentication. If your app service uses another authentication mechanism,
   the example app will require additional customization.

Customize the Node.js App
~~~~~~~~~~~~~~~~~~~~~~~~~

All the lines you need to edit are marked with a comment containing
``~REPLACE~``.

.. include:: /includes/steps/customize-realm-auth-app.rst

After you finish customizing the app, it's ready to run. 
