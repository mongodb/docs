==============================
Manage MongoDB Users and Roles
==============================
 
.. default-domain:: mongodb

.. contents:: On this page
  :local:
  :backlinks: none
  :depth: 1
  :class: singlecol
 
Overview
--------

When :doc:`MongoDB access control is enabled <enable-mongodb-access-control>`, 
you provide client access to MongoDB by creating users and assigning
user roles. 

You can specify access using MongoDB's 
:manual:`built-in roles </reference/built-in-roles>` and also by 
:doc:`creating custom roles </tutorial/manage-mongodb-roles>`. 
|mms| provides the interface to create and modify roles. 

You can create users before enabling accessing control or after, but
your MongoDB instances do not require user credentials if access
control is not enabled.

To authenticate, a client must specify the username, password, database and authentication mechanism. 

.. example::

   From the :program:`mongo` shell, a client would specify:

   - :option:`--username <mongo --username>`
   - :option:`--password <mongo --password>`
   - :option:`--authenticationDatabase <mongo --authenticationDatabase>`
   - :option:`--authenticationMechanism <mongo --authenticationMechanism>`
 
MongoDB users are separate from |mms| :doc:`users </tutorial/manage-users>`. 
MongoDB users have access to MongoDB databases, while |mms| users
access the |mms| application itself.
 
Considerations
--------------
 
|mms| has two modes of user and role management:

- The first mode (:guilabel:`Enforce Consistent Set` set to ``YES``)
  enforces a consistent set of users and roles across all deployments
  in an |mms| group. All users and roles specified within the |mms|
  interface are created in all deployments. Any users and roles not
  merged into |mms| upon import, where possible, are deleted.

- The second mode (:guilabel:`Enforce Consistent Set` set to ``NO``)
  allows operators to manage users and roles both within |mms| and
  through direct connections for their MongoDB deployment. Users and
  roles marked as :guilabel:`Sync`\ed in |mms| are created in all
  deployments. Users or roles created outside of |mms| are not deleted.

  .. note::
     :guilabel:`Enforce Consistent Set` set to ``NO`` is the default setting.

Procedures
----------

Add a MongoDB User
~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/add-mongodb-user.rst

Edit a MongoDB User's Roles
~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/edit-mongodb-user.rst

Discover and Synchronize Unmanaged MongoDB Users
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/sync-mongodb-user.rst

Remove a MongoDB User
~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/remove-mongodb-user.rst
