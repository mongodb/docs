title: Configure a load balancer with the pool of MMS app server locations.
stepnum: 1
ref: configure-load-balancer
pre: |
   Because load balancers are specific to their environment and can have
   different configurations, we don't have a recommendation for load
   balancer configurations.
---
title: Update the conf-mms-properties file with load balanced URL.
stepnum: 2
ref: update-load-balanced-url
pre: | 
   Configure the ``mms.centralUrl`` property of each MMS app server
   ``conf-mms.properties`` file to point to the load balanced URL.
---
title: Update the conf-mms-properties file with replication hosts information.
stepnum: 3
ref: update-replication-hosts
pre: | 
   Edit the ``conf-mms-properties`` file on each MMS app server to define the
   replication hosts for the
   :doc:`backing MongoDB </tutorial/prepare-backing-mongodb-instances>`.
action:
  - pre: |
      In the ``<install_dir>/conf/conf-mms.properties`` file specify the
      :doc:`backing database </tutorial/prepare-backing-mongodb-instances>`
      in the ``mongo.mongoUri`` property. For example:
    language: ini
    code: |
      mongo.mongoUri=mongodb://<mms0.example.net>:<27017>,<mms1.example.net>:<27017>,<mms2.example.net>:<27017>/?maxPoolSize=100
      mongo.replicaSet=<mmsReplSet0>
  - pre: |
      If you are deploying |backup|, set the ``mongo.backupdb.mongoUri``
      property to the :manual:`connection string
      </reference/connection-string/>` of the backing database used for
      backup. For example:
    language: ini
    code: |
      mongo.backupdb.mongoUri=mongodb://<mms3.example.net>:<27017>,<mms4.example.net>:<27017>,<mms5.example.net>:<27017>/?maxPoolSize=100
      mongo.backupdb.replicaSet=<mmsBackupReplSet0>
---
title: Synchronize the gen.key file across all application servers.
stepnum: 4
ref: sync-gen-key
pre: | 
   Synchronize the ``/etc/mongodb-mms/gen.key`` file across all application
   servers. In MMS 1.3 and later, the application uses this file to
   encrypt sensitive information before storing the data in a database.
...
