===========================
Create a User Administrator
===========================

.. default-domain:: mongodb

Overview
--------

The user administrator creates users and creates and assigns roles. The
user administrator can grant any privilege in the database and can create
new ones. In a MongoDB deployment, create the user administrator as the
first user. Then let this user create all other users.

To support creation of user administrators, MongoDB provides the
:authrole:`userAdmin` and :authrole:`userAdminAnyDatabase` roles, both of
which grant :ref:`actions <security-user-actions>` specific to user and
role management and confer no additional privileges, in keeping with the
policy of :term:`least privilege`.

Carefully control these roles. A user with either of these roles can grant
*itself* additional privileges. Specifically, a user with the
:authrole:`userAdmin` role can grant itself any privilege in the database.
A user assigned either the :authrole:`userAdmin` role on the ``admin``
database or the :authrole:`userAdminAnyDatabase` can grant itself any
privilege *in the system*.

.. _localhost-exception:

Localhost Exception
-------------------

The localhost exception lets you connect *with* administrative access to an
authentication-enabled :program:`mongod` or :program:`mongos` prior to
creating your first user on the ``admin`` database. The exception applies *if*
there are no users on the ``admin`` database. The bypass exists to support
bootstrapping new deployments.

To use the exception, connect to the :program:`mongod` or :program:`mongos`
from a client running on the same system.

To disable the localhost bypass, set the
:parameter:`enableLocalhostAuthBypass` parameter using
:setting:`setParameter` during startup:

.. code-block:: javascript

   mongod --setParameter enableLocalhostAuthBypass=0

Prerequisites
-------------

.. include:: /includes/access-create-user.rst

A user with either the :authrole:`userAdmin` or
:authrole:`userAdminAnyDatabase` role, or authenticated using the
:ref:`localhost exception <localhost-exception>`, has those privileges.

Procedure
---------

.. include:: /includes/steps/add-user-administrator.rst
