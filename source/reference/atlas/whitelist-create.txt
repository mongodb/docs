.. _mcli-atlas-whitelist-create-command:

===============================
mongocli atlas whitelist create
===============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``whitelist create`` command creates a whitelist for the 
specified |service| project. The whitelist can contain one or more 
trusted IP addresses, |aws| security group IDs, or entries in Classless
Inter-Domain Routing (CIDR) notation. You can create one whitelist per
project.

.. note:: 

   The command does not overwrite existing entries in the 
   whitelist. Instead, it adds the new entries to the list of 
   entries.

You can also create a whitelist using the |service| 
:atlas:`UI </tutorial/whitelist-connection-ip-address/>`
or :atlas:`API </reference/api/whitelist-add-one/>`.

.. _whitelist-create-command-syntax:

Syntax 
------

.. code-block:: text
   :copyable: false

   mongocli atlas whitelist create <whitelist-entry>
        --comment "<description-of-value>"
        --deleteAfter <date-of-deletion>
        [ --profile|-P <name-of-profile> ]
        --projectId <id-of-project>
        [ --type cidrBlock|ipAddress|awsSecurityGroup ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-atlas-whitelist-create-command-options:

Options 
-------

.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option 
     - Type 
     - Description 
     - Required?

   * - ``<whitelist-entry>``
     - string
     - Entry for the whitelist. Value can be: 

       - An IP address
       - A CIDR block
       - An |aws| security group ID
     - yes

   * - ``--comment``
     - string
     - Description of the whitelist entry. Use double quotes 
       to enclose the description if there are one or more spaces 
       in the description.
     - no 

   * - ``--deleteAfter``
     - string
     - Date after which |service| removes the whitelist entry. The specified
       date must be:    

       - In |iso8601| format in |utc|.
       - Within one week in the future from when you run the command.
    
     - no 

   * - ``--profile``, ``-P``
     - string 
     - Name of the profile to use for accessing the |service| 
       project. If omitted, uses the {+default-profile+}.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project for which to create the 
       whitelist.
     - yes

   * - ``--type``
     - string
     - Type of whitelist entry. Valid values are:

       .. list-table::
          :widths: 30 70

          * - ``cidrBlock``
            - Whitelist entry in Classless Inter-Domain 
              Routing (CIDR) notation. Mutually exclusive with
              ``awsSecurityGroup`` and ``ipAddress``.

          * - ``ipAddress``
            - IP address. You can connect to a 
              cluster from only the trusted IP addresses in the 
              whitelist. Mutually exclusive with ``awsSecurityGroup``
              and ``ciderBlock``.

          * - ``awsSecurityGroup``
            - ID of an |aws| security group. Mutually exclusive with
              ``cidrBlock`` and ``ipAddress``.

              .. note::

                 You must :atlas:`configure VPC peering
                 </security-vpc-peering/#vpc-peering>` for your project
                 before you can whitelist an |aws| security group.

       If omitted, defaults to ``ipAddress``.

     - no

.. _mcli-atlas-whitelist-create-command-output:

Output 
------

.. include:: /includes/command-output-intro.rst

.. include:: /includes/atlas-whitelist-output-fields.rst

.. _mcli-atlas-whitelist-create-command-examples:

Examples 
--------

The following examples use the ``mongocli atlas whitelist create``
command to create a whitelist with an IP address, a whitelist entry
in CIDR notation, and a whitelist entry with an |aws| security group. 

Example 1
~~~~~~~~~

The following sample command creates a whitelist entry for an 
IP address using the {+default-profile+}.

.. code-block:: text
   :copyable: false

   mongocli atlas whitelist create 192.0.2.15 --type ipAddress --projectId 5e2211c17a3e5a48f5497de3 --comment "IP address for app server 2"

The previous command prints the following fields to the terminal. To 
learn more about these fields, see :ref:`Output 
<mcli-atlas-whitelist-create-command-output>`.

.. code-block:: json
   :copyable: false

   [
     {
       "comment": "IP address for app server 2",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "cidrBlock": "192.0.2.15/32",
       "ipAddress": "192.0.2.15"
     },
     {
       "comment": "IP address for app server 1",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "cidrBlock": "10.201.30.114/32",
       "ipAddress": "10.201.30.114"
     }
   ]

Example 2
~~~~~~~~~

The following command creates a whitelist entry in CIDR notation using 
the {+default-profile+}. 

.. code-block:: text
   :copyable: false

   mongocli atlas whitelist create 73.231.201.205/24 --type cidrBlock --projectId 5e2211c17a3e5a48f5497de3 --comment "CIDR block for servers C - F"

The previous command prints the following 
fields to the terminal. To learn more about these fields, 
see :ref:`Output <mcli-atlas-whitelist-create-command-output>`.

.. code-block:: json
   :copyable: false

   [
     {
       "comment": "CIDR block for servers C - F",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "cidrBlock": "73.231.201.205/24",
       "ipAddress": "73.231.201.205"
     },
     {
       "comment": "IP address for app server 2",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "cidrBlock": "192.0.2.15/32",
       "ipAddress": "192.0.2.15"
     },
     {
       "comment": "IP address for app server 1",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "cidrBlock": "10.201.30.114/32",
       "ipAddress": "10.201.30.114"
     }
   ]

Example 3
~~~~~~~~~

The following command creates a whitelist entry for an |aws| security
group using the {+default-profile+}.

.. code-block:: text
   :copyable: false

   mongocli atlas whitelist create sg-903004f8 --type awsSecurityGroup
   --projectId 5e2211c17a3e5a48f5497de3 --comment "AWS Security Group"

The previous command prints the following 
fields to the terminal. To learn more about these fields, 
see :ref:`Output <mcli-atlas-whitelist-create-command-output>`.

.. code-block:: json
   :copyable: false

   [
     {
       "comment": "AWS Securty Group",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "awsSecurityGroup": "sg-903004f8"
     },
     {
       "comment": "CIDR block for servers C - F",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "cidrBlock": "73.231.201.205/24",
       "ipAddress": "73.231.201.205"
     },
     {
       "comment": "IP address for app server 2",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "cidrBlock": "192.0.2.15/32",
       "ipAddress": "192.0.2.15"
     },
     {
       "comment": "IP address for app server 1",
       "groupId": "5e2211c17a3e5a48f5497de3",
       "cidrBlock": "10.201.30.114/32",
       "ipAddress": "10.201.30.114"
     }
   ]
