.. _compound-query-date-range-tutorial:

=================================================
How to Run |fts| Queries with a Date Range Filter
=================================================

.. default-domain:: mongodb

.. meta::
   :keywords: atlas search, dynamic mapping, compound query, compound operator, must clause, should clause, must not clause, range operator, near operator, specific date range, specify dates, search scoring
   :description: In this tutorial, learn to use the compound operator to search for movies released within a specified date range.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial describes how to create an index with dynamic mapping on 
the ``sample_mflix.movies`` collection. It shows how to run compound 
queries against the ``released`` field using the :ref:`range-ref` and 
:ref:`near-ref` operators. It takes you through the following steps: 

1. Set up an |fts| index with dynamic mapping for the 
   ``sample_mflix.movies`` collection.
#. Run |fts| compound queries against the ``released`` field in the 
   ``sample_mflix.movies`` collection.

Before you begin, ensure that your |service| cluster meets the 
requirements described in the :ref:`fts-tutorials-prereqs`.

.. include:: /includes/atlas-roles/create-search-index.rst

Create the |fts| Index With Dynamic Mapping 
-------------------------------------------

In this section, we create an |fts| index that uses :ref:`dynamic 
mapping <static-dynamic-mappings>` to index the fields in the 
``sample_mflix.movies`` collection. 

.. include:: /includes/steps/fts-date-range-tutorial-create-index.rst

Run a Compound Query
--------------------

You can use the :ref:`compound-ref` operator to combine two or more 
operators and clauses into a single query. This tutorial uses the  
:ref:`compound-ref` operator clauses to search for movies in the 
specified date range. In this section, connect to your |service| 
cluster and run the sample queries using the :ref:`compound-ref` 
operator against the ``released`` field in the ``sample_mflix.movies`` 
collection. 

.. include:: /includes/steps/fts-date-range-tutorial-run-query.rst

