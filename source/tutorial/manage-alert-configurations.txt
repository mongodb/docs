===========================
Manage Alert Configurations
===========================

.. default-domain:: mongodb

Overview
--------

.. only:: cloud

   An alert configuration defines the conditions that trigger an alert and
   defines how notifications are sent. An alert configuration applies to
   the group in which you create it.

.. only:: onprem

   An alert configuration defines the conditions that trigger an alert and
   defines how notifications are sent. This tutorial describes how to
   create and manage the alert configurations for a specified group. To
   create and manage global alert configurations, see
   :doc:`/tutorial/manage-global-alerts`.

|mms| creates the following alert configurations for a group automatically
upon creation of the group:

- Users awaiting approval to join group

- Host is exposed to the public internet

- User added to group

- Monitoring Agent is down

If you enable Backup, |mms| creates the following alert configurations for the
group, if they do not already exist:

- Oplog Behind

- Resync Required

- Cluster Mongos Is Missing

.. only:: cloud

   If you enter a payment method, |mms| creates the following alert configuration:

   - Credit card is about to expire

Considerations
--------------

Costs
~~~~~

Costs to send alerts depend on your telephone service contract. Many
factors may affect alert delivery, including do not call lists, caps
for messages sent or delivered, delivery time of day, and message
caching.

Alert Intervals
~~~~~~~~~~~~~~~

You can create multiple alert configurations with different minimum
frequencies. The minimum frequency for an alert is 5 minutes. The time
between re-notifications increases by the frequency amount every alert
cycle (e.g. 5 minutes, 10 minutes, 15 minutes, 20 minutes, etc.) up to a
maximum of 24 hours.

You can set the time to elapse before |mms| sends an alert after an alert
condition occurs. This helps eliminate false positives.

User Notifications
~~~~~~~~~~~~~~~~~~

|mms| provides several options for user notifications, including SMS. If
you choose SMS, |mms| sends alert text messages to all users in the group
who have filled in their mobile numbers for their accounts.

Procedures
----------

.. only:: onprem

   These procedures apply to alert configurations assigned to a specific
   group. For global alert configurations, see
   :doc:`/tutorial/manage-global-alerts`.

.. _create-alert-configuration:

Create a New Alert Configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When you create a new alert configuration you have the option of using an
existing configuration as a template.

.. include:: /includes/steps/alert-configuration-create.rst

Modify an Alert Configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Each alert configuration has a distribution list, a frequency for sending
the alert, and a waiting period after an alert state triggers before
sending the first alert. The minimum frequency for sending an alert is 5
minutes.

.. include:: /includes/steps/alert-configuration-edit.rst

Delete an Alert Configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you delete an alert configuration that has open alerts, |mms| cancels
the open alerts whether or not they have been acknowledged and sends no
further notifications.

.. include:: /includes/steps/alert-configuration-delete.rst

Disable or Enable an Alert Configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When you disable an alert configuration, |mms| cancels active alerts
related to the disabled configuration. The configuration remains visible
in a grayed-out state and can be later re-enabled.

.. include:: /includes/steps/alert-configuration-disable-enable.rst

View the History of Changes to an Alert Configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/alert-configuration-history.rst
