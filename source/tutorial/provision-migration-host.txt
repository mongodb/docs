.. _provision-migration-host:

==========================
Provision a Migration Host
==========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol
   
To live migrate your |mms|-managed MongoDB deployment to
|service-short|, provision a :term:`migration host`.

Overview
--------

The migration host is a server on which you install a dedicated
{+mdbagent+}. This {+mdbagent-lm+} automates live migration operations.
It requires that you set its configuration option
``agentFeatureCloudMigrationEnabled`` to ``true``.

.. include:: /includes/fact-live-migration-needs-automation-agent.rst

You use the migration host to manage the Live Migration
process of your |onprem|-managed deployment to |service-short|. You
can't use the migration host for any other purposes.
If you plan to migrate more than one deployment, create a dedicated migration
host for each of the deployments that you intend to migrate to
|service-short|.

After you provision the migration host, its server displays in |onprem|
under the :guilabel:`Servers` tab.

For the overview of live migration's stages, see :ref:`lm-workflow`.

Considerations
--------------

.. include:: /includes/fact-live-migration-host-performance.rst

.. _live-migration-host-supported-platforms:

Supported Platforms for Migration Host
--------------------------------------

You can create a :term:`migration host` for live migrating your data from
|mms|-managed deployments to |service-short| on the following platforms:

- Amazon Linux 2 (linux-x86_64-enterprise-amazon2)
- ARM64 Ubuntu 16.04
- ARM64 Ubuntu 18.04
- ARM64 Ubuntu 20.04
- Debian 10
- Debian 8.1
- Debian 9.2
- PPC64LE RHEL 7.1
- PPC64LE RHEL 8.1
- PPC64LE Ubuntu 16.04
- PPC64LE Ubuntu 18.04
- RHEL 6.2
- RHEL 7.0
- RHEL 8.0
- s390x RHEL 6.7
- s390x RHEL 7.2
- s390x SLES 12
- s390x Ubuntu 16.04
- s390x Ubuntu 18.04
- SLES 12
- SLES 15
- Ubuntu 18.04
- Ubuntu 20.04

.. note::
   The configuration of a migration host for Live Migration is not
   supported on Windows or macOS. You can still live migrate your
   data from a Windows- or macOS-based deployment to |service-short| if
   you provision your migration host on one of platforms it supports.


Prerequisites
-------------

Before provisioning a migration host, review the :doc:`/tutorial/install-mongodb-agent-prereq`.

Procedure
---------

Install a {+mdbagent-lm+} on a separate server, known as the migration
host. This {+mdbagent-lm+} facilitates migrations for each |mms|-managed
deployment you want to live migrate from |mms| to |service-short|.

Choose an operating system from the
:ref:`supported platforms for provisioning a migration host <live-migration-host-supported-platforms>`
and then use the corresponding instructions to
:doc:`install a MongoDB Agent </tutorial/nav/install-mongodb-agent>`.

.. include:: /includes/steps/install-agent-live-migration.rst

Next Steps
----------

Once you have provisioned the migration host, you can switch to
|service-short| to start the Live Migration process for your
|mms|-managed deployment to |service-short|.
