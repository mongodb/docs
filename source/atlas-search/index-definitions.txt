.. _ref-index-definitions:

=========================
Review |fts| Index Syntax
=========================

.. default-domain:: mongodb

.. meta:: 
   :description: Learn the JSON syntax to include one or more analyzers, field mappings, or synonyms in your Atlas Search index.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 3
   :class: singlecol

|fts| can index data in different ways. When you define an |fts| index, 
you can specify a particular analyzer or multiple analyzers to index  
certain fields. To learn more, see :ref:`analyzers-ref`. You can also 
index certain fields and omit others, or you can dynamically index all 
the fields in a collection. To learn more, see
:ref:`fts-field-mappings`. You can define |fts| indexes through the 
:ref:`{+atlas-ui+} <ref-create-index>`, :oas-atlas-op:`Atlas Search API
</createAtlasSearchIndex>`, :atlascli:`{+atlas-cli+}
</command/atlas-clusters-search-indexes-create/>`,
:binary:`~bin.mongosh`, or :driver:`Drivers </>`. 

This page describes the |json| syntax and fields for an |fts| index. 

.. include:: /includes/fts/facts/fact-fts-out-agg.rst

.. _index-definition-syntax:

Syntax 
------

.. tabs:: 

   .. tab:: Basic 
      :tabid: basic

      .. literalinclude:: /includes/fts/syntax/fts-index-definition-syntax-basic.json 
         :language: json
         :linenos:
         :copyable: false

   .. tab:: Expanded 
      :tabid: expanded 

      .. literalinclude:: /includes/fts/syntax/fts-index-definition-syntax-advanced.json
         :language: json
         :linenos:
         :copyable: false

.. _index-definition-options:

Options 
-------

.. list-table::
   :header-rows: 1
   :widths: 20 15 15 50

   * - Field
     - Type
     - Necessity
     - Description

   * - ``analyzer``
     - string 
     - Optional 
     - Specifies the :ref:`analyzer <analyzers-ref>` to apply to 
       string fields when indexing. 
       
       If you set this only at the top and 
       do not specify an analyzer for the fields in the index 
       definition, |fts| applies this analyzer to all the fields. To 
       use a different analyzer for each field, you must specify a 
       different analyzer for the field. 
       
       If omitted, defaults to 
       :ref:`ref-standard-analyzer`.

   * - ``analyzers``
     - array of :ref:`custom-analyzers` 
     - Optional 
     - Specifies the :ref:`custom-analyzers` to use in this index.

   * - ``mappings``
     - :ref:`Document Field Definition <bson-data-types-document>`
     - Required
     - Specifies how to index fields at different paths for this 
       index.

   * - ``mappings.dynamic``
     - boolean
     - Optional
     - Enables or disables dynamic mapping of fields for this index.
     
       If set to ``true``, |fts| recursively indexes all
       :ref:`dynamically indexable <bson-data-chart>` fields.

       If set to ``false``, you must specify individual fields to index 
       using ``mappings.fields``.

       If omitted, defaults to ``false``.

       .. include:: /includes/admonitions/importants/dynamic-flag-considerations.rst
       
       For example index configurations, see :ref:`Static Mapping Example
       <index-config-example>` or :ref:`Combined Mapping Example <index-combined-config-example>`

   * - ``mappings.fields``
     - document
     - Conditional
     - Specifies the fields that you would like to index. Required only if dynamic mapping is disabled.
       
       .. include:: /includes/fts/facts/fact-fts-field-name-restriction.rst
       
       To learn more, see :ref:`fts-field-mappings`. 
      
   * - ``searchAnalyzer``
     - string 
     - Optional
     - Specifies the :ref:`analyzer <analyzers-ref>` to apply to query 
       text before searching with it. 
       
       If omitted, defaults to the
       analyzer that you specify for the ``analyzer`` option. If you 
       omit both the ``searchAnalyzer`` and the ``analyzer`` options, 
       defaults to the :ref:`ref-standard-analyzer`.

   * - ``numPartitions``
     - int
     - Optional
     - Specifies the number of sub-indexes to create if the document count 
       exceeds two billion. The following values are valid: ``1``, ``2``, ``4``, 
       ``8``, ``16``, ``32``, ``64``. If omitted, defaults to ``1``.

       To use index partitions, you must have search nodes deployed in your {+cluster+}.

       The ``numPartitions`` option is available as a **Preview** feature.

   * - ``storedSource`` 
     - boolean or :ref:`Stored Source Definition  
       <fts-stored-source-definition>` 
     - Optional 
     - Specifies fields in the documents to store for query-time 
       look-ups using the :ref:`returnedStoredSource 
       <fts-return-stored-source-option>` option. You can store fields 
       of all :ref:`bson-data-chart` on |fts|. Value can be one of 
       the following:

       - ``true``, to store all fields  
       - ``false``, to not store any fields 
       - :ref:`Object <fts-stored-source-document>` that specifies 
         the fields to ``include`` or ``exclude`` from storage
       
       .. include:: /includes/fts/facts/fact-fts-stored-source-mdb-version.rst

       If omitted, defaults to ``false``. 
       
       To learn more, see :ref:`fts-stored-source-definition`.


   * - ``synonyms`` 
     - array of :ref:`Synonym Mapping Definition <synonyms-ref>`
     - Optional 
     - Synonym mappings to use in your index. 

       .. include:: /includes/fts/facts/fact-fts-synonym-mapping-limitation.rst 
        
       To learn more, see :ref:`synonyms-ref`.
