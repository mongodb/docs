.. _dashboards:

==========
Dashboards
==========

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Dashboards are a collection of charts assembled to create a single
unified display of your data. Each chart shows data from a
single MongoDB collection or view, so dashboards are essential to
attain insight into multiple focal points of your data in a single
display. Dashboards can be shared with other users.

.. _dashboards-tab:
.. _dashboards-page:

Dashboards Page
---------------

The :guilabel:`Dashboards` page shows all dashboards you have access to
view. To learn more about dashboard permissions in |charts|, see
:ref:`Dashboard Permissions <dashboard-permissions>`.

.. figure:: /images/charts/charts-dashboard-landing.png
   :figwidth: 750px
   :alt: Charts Dashboard Tab

Each dashboard shows the following information:

- Title

- Description

- A preview of the first three charts in the dashboard, including the
  chart title and type

- When the dashboard was last modified

By default, the most recently modified dashboards are shown first in
the list. You can change the sort order by using the
:guilabel:`Sort By` dropdown menu.

.. _create-new-dashboard:

Create a New Dashboard
----------------------

To create a new dashboard:

1. From the :guilabel:`Dashboards` page, click the
   :guilabel:`New Dashboard` button.

#. In the :guilabel:`New Dashboard` dialog, enter a title for your
   dashboard.

#. (Optional) Enter a :guilabel:`description` for your dashboard.

#. Click :guilabel:`Create`.

After after clicking the :guilabel:`Create` button you are taken
to the page for your newly created dashboard, where you are prompted to
add the first chart to your dashboard:

.. figure:: /images/charts/charts-dashboard-new.png
   :figwidth: 750px
   :alt: Charts New Dashboard Example

.. _refresh-dashboard:

Refresh Dashboard Data
----------------------

|charts| automatically refreshes chart data once it becomes out of
date with the backing data source. You can also manually refresh dashboard data at any time.

.. _configure-auto-refresh:

Configure Auto Refresh Settings
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Charts on a dashboard automatically refresh once their data becomes out
of date. You can specify how stale your charts' data can be before it is
refreshed. This is known as your staleness tolerance. The default
behavior is to refresh when data is one hour stale.

To configure auto-refresh settings for a dashboard:

1. Select a dashboard from the :guilabel:`Dashboards` page.

#. Click :guilabel:`Settings` at the top of the dashboard.

#. Select your data staleness tolerance from the dropdown.
   |charts-short| supports staleness tolerances between 1 minute and 30
   days.

#. Click :guilabel:`Save`.

Manually Refresh Data
~~~~~~~~~~~~~~~~~~~~~

You can manually refresh an entire dashboard or individual charts to
render your charts with the latest data. In a manual refresh, |charts|
reloads data even if the current data is within your specified staleness
tolerance.

|charts| users of all :ref:`permission levels <dashboard-permissions>`
can refresh dashboard data.

Manually Refresh a Dashboard
````````````````````````````

Manually refresh an entire dashboard to requery all of the data sources
backing your charts and render your charts with the latest data.

To manually refresh dashboard data:

1. Select a dashboard from the :guilabel:`Dashboards` page.

#. Click the arrow next to the :guilabel:`Settings` button.

#. Click :guilabel:`Force Refresh`.

Manually Refresh a Single Chart
```````````````````````````````

Manually refresh a single chart to only requery the data source for that
chart and render that chart with the latest data.

To manually refresh a single chart:

1. Select a dashboard from the :guilabel:`Dashboards` page.

#. Click the arrow next to the :guilabel:`Settings` button.

#. Click :guilabel:`Force Refresh`.

Refresh Behavior
~~~~~~~~~~~~~~~~

- When |charts-short| refreshes dashboard data, only charts with data
  older than your specified staleness tolerance are refreshed.
  |charts-short| does not refresh the entire dashboard at once.

- .. include:: /includes/fact-auto-refresh-persistence.rst

- Hover over the timer at the bottom of the chart to view more
  information. 

  .. figure:: /images/charts/refresh-timer.png
     :figwidth: 650px
     :alt: Chart refresh timer.

  What you see depends on where you view the chart and if the last
  refresh failed:

  .. list-table::
     :widths: 33 66
     :stub-columns: 1
     :header-rows: 1

     * - Viewing Method
       - Details You See

     * - Authenticated Dashboard
       - 
         - The error code that describes why the refresh failed, if
           applicable. 
         - Time since the last refresh occurred.
         - Time until the next automatic refresh occurs.

     * - Dashboard Accessed with a Public Link
       - 
         - Time since the last refresh occurred.
         - Time until the next automatic refresh occurs.
  
     * - Embedded using an iframe or the SDK
       - 
         - The :ref:`embedding error code <embedded-errors>` that
           describes why the refresh failed, if applicable.
         - If the chart is configured to automatically refresh:
           - Time since the last refresh occurred.
           - Time until the next automatic refresh occurs.

- When |charts| loads charts on a dashboard, it does not consistently
  query the data source for each chart. Instead, |charts| queries the
  data sources when the dashboard first loads, and that data is cached
  on both the client and server.

  .. note::

     The data stored in the cache is encrypted with a key specific to
     your |charts| tenant.

- When a dashboard refreshes automatically:

  - If a chart's data is within the staleness tolerance period,
    |charts-short| doesn't refresh the chart's data.

  - If a chart's data is outside of the staleness tolerance period, 
    |charts-short| returns the latest data from the server cache. If the
    server cache contains stale data, |charts-short| queries the data 
    source for the latest data, refreshes the chart, and updates the 
    data cached on both the client and server.
    
- When you manually refresh a dashboard, |charts-short| updates all
  chart data by querying the data source for the latest data even if the
  chart data is within the specified staleness tolerance period.

- When an automatic or manual refresh fails:

  - |charts| displays the most recently rendered chart, including all of
    the chart's interactive elements.

  - If |charts| has never successfully rendered the chart, the following
    message is displayed: ``Unable to load data``.

  - |charts| displays the following error message at the bottom of the 
    chart: ``Last refresh failed``.

  - If you're viewing the chart on an Authenticated Dashboard, 
    click the :guilabel:`failed` link in the error message to view
    additional error details.

    .. note::

       This link is not available when you view charts on a dashboard 
       from a public link or embedded using an iframe or the SDK.

  - The error message includes a :guilabel:`Refresh` link if the chart 
    is rendered on an authenticated dashboard or embedded using an 
    iframe or the SDK. Click the link to manually refresh the chart.

.. _get-chart-data-dashboard:

Get Chart Data
--------------

Authenticated dashboard users can view and export the
underlying chart data as a table. To view the chart data, click 
:guilabel:`Get Chart Data` from the :icon-fa5:`ellipsis-h` menu. Each
row in the table represents a data point.

.. note::

   Users who open a dashboard using a public link can't get chart data.

.. include:: /includes/get-chart-data-details.rst

.. _fullscreen-view:

Fullscreen View
---------------

|charts| provides a fullscreen view for dashboards. In this view,
|charts| hides the main navigation bar and expands the dashboard to
show the title, description, time of last modification, and charts in
the entire space of the screen.

To open a dashboard in fullscreen view, first select a dashboard from
the :guilabel:`Dashboards` page, then click the expanding arrows at the
top-right of the dashboard:

.. figure:: /images/charts/full-screen-view.png
   :figwidth: 750px
   :alt: Fullscreen Arrows

.. note::

   You can still :ref:`remove <dashboard-remove-chart>`, :ref:`resize
   <dashboard-resize-chart>`, :ref:`rearrange
   <dashboard-rearrange-chart>`, and :ref:`access editing
   <dashboard-edit-chart>` for charts in fullscreen view by hovering
   over the desired chart.

   Additionally, in fullscreen view you can still configure
   auto-refresh settings and manually refresh chart data.

To exit fullscreen view, either click the contracting arrows at the
top-right of the dashboard or press the escape key.

.. class:: hidden

   .. toctree::
      :titlesonly:

      /manage-dashboards
      /dashboard-permissions
      /dashboard-filtering
      /interact-with-charts
