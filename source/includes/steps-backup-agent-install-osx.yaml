stepnum: 1
edition:
  - cloud
source:
  file: steps-backup-agent-install-from-archive.yaml
  ref: download-saas
action:
  language: sh
  code: |
    curl -OL https://cloud.mongodb.com/download/agent/backup/mongodb-mms-backup-agent-latest.osx_x86_64.tar.gz
---
stepnum: 1
edition:
  - onprem
source:
  file: steps-backup-agent-install-from-archive.yaml
  ref: download-hosted
action:
  language: sh
  code: |
    curl -OL https://<OpsManagerHost:Port>/download/agent/backup/mongodb-mms-backup-agent-latest.osx_x86_64.tar.gz
---
stepnum: 2
source:
  file: steps-backup-agent-install-from-archive.yaml
  ref: extract
action:
  language: sh
  code: |
    tar -xf mongodb-mms-backup-agent-latest.osx_x86_64.tar.gz
---
title: "Generate an agent API key or retrieve an existing agent API key for your |mms| group." 
stepnum: 3
ref: retrieve-backup-mms-api-key
pre: |
      a. Click :guilabel:`+ Generate Key`.

      .. note::

         The button appears only if the current user is the group owner and
         the group either has no api keys or only the original key.

      b. Enter your password and click :guilabel:`Verify`.
  
      c. Click :guilabel:`+ Generate Key` again.

      .. include:: /includes/extracts/agent-api-key-admonition.rst

      To retrieve an existing API key, go to the :guilabel:`Agent API Keys`
      tab. To navigate to the tab, select :guilabel:`Deployment`  view, then
      click the :guilabel:`Agents` tab and then the :guilabel:`Agent API
      Keys` tab.
---
stepnum: 4
source:
  file: steps-backup-agent-install-from-archive.yaml
  ref: configure-backup-mms-api-key
---
stepnum: 5
source:
  file: steps-source-install-agent.yaml
  ref: proxy
replacement:
  agentname: "Backup"
  httpProxy: ":bsetting:`httpProxy`"
  configfile: "<install-directory>/local.config"
---
stepnum: 6
source:
  file: steps-backup-agent-install-from-archive.yaml
  ref: start
...
