.. _amazon-aws:

===================
Amazon Web Services
===================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Synopsis
--------

|service| supports deploying clusters onto Amazon Web Services (AWS).
|service| supports all :abbr:`AWS (Amazon Web Services)` regions other than
those in China and US GovCloud:

.. list-table::
   :header-rows: 1
   :widths: 50 50

   * - AWS Region
     - Location

   * - ``us-east-1``
     - US East (N. Virginia)

   * - ``us-east-2``
     - US East (Ohio)

   * - ``us-west-1``
     - US West (N. California)

   * - ``us-west-2``
     - US West (Oregon)

   * - ``ca-central-1``
     - Canada (Central)
   * - ``eu-west-1``
     - EU (Ireland)

   * - ``eu-west-2``
     - EU (London)"

   * - ``eu-central-1``
     - EU (Frankfurt)

   * - ``ap-northeast-1``
     - Asia Pacific (Tokyo)

   * - ``ap-northeast-2``
     - Asia Pacific (Seoul)

   * - ``ap-southeast-1``
     - Asia Pacific (Singapore)

   * - ``ap-southeast-2``
     - Asia Pacific (Sydney)

   * - ``ap-south-1``
     - Asia Pacific (Mumbai)

   * - ``sa-east-1``
     - South America (Sao Paulo)

This page provides reference material related to |service| cluster deployments
on :abbr:`AWS (Amazon Web Services)`.

.. _amazon-aws-configuration-options:

Instance Configuration Options
------------------------------

Each |service| instance size comes with a default set of resources. |service|
provides the following resource configuration options:

Custom Storage Size
   The size of the server root volume. |service| clusters deployed onto
   :abbr:`AWS (Amazon Web Services)` use general purpose 
   SSDs [#amazon-disk-docs]_. The maximum custom storage size for
   any instance is ``16TB``, but workloads typically require less than
   ``2TB``.

Custom Storage Speed
   The input/output operations per second (IOPS) the system can perform.
   The available options depend on the specified storage size.
   |service| provides the following custom storage speeds in order of
   maximum :abbr:`IOPS (Input/Output Operations per Second)`:

   - :guilabel:`Standard` (Default)
   - :guilabel:`Fast`
   - :guilabel:`Fastest`.

   Choosing the :guilabel:`Fast` or :guilabel:`Fastest` options changes the
   disk type from a general-purpose SSD to a provisioned-:abbr:`IOPS
   (Input/Output Operations per Second)` SSD [#amazon-disk-docs]_.

   The selected instance and custom storage size dictate the maximum
   :abbr:`IOPS (Input/Output Operations per Second)` for each storage speed.

Encrypted Storage Volumes
   Encrypts the root volume for data at rest inside the volume and all data
   moving between the volume and the instance. |service| uses
   `Amazon EBS encryption
   <http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html>`_.

.. _amazon-aws-availability-zones:

Amazon Availability Zones
-------------------------

Each :abbr:`AWS (Amazon Web Services)` region includes a set number of
independent availability zones. Availability Zones consist of one or more
discrete data centers, each with redundant power, networking and connectivity,
housed in separate facilities. For regions that have at least three
availability zones (3AZ), |service| deploys clusters across three availability
zones. For regions that only have two availability zones (2AZ), |service|
deploys clusters across two availability zones.

The |service| :doc:`Add New Cluster </create-new-cluster>` form marks regions
that support at least three availability zones as :guilabel:`Recommended`, as
they provide higher availability.

.. include:: /includes/extracts/fact-no-node-restriction-aws.rst

For more information on the number of availability zones in a
given region, see the Amazon documentation on `global infrastructure
<https://aws.amazon.com/about-aws/global-infrastructure/>`_.

For more information on :abbr:`AWS (Amazon Web Services)` regions and
availability zones, see the Amazon documentation on `using regions and
availability zones
<http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-
zones.html>`_

Regions with at Least Three Availability Zones
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

|service| clusters deployed in regions with at least three availability zones
are split across three availability zones. For example, a three node replica
set cluster would have one node deployed onto each availability zone.

.. include:: /images/amazon-aws-3az.rst

:abbr:`3AZ (Three Availability Zone)` clusters have higher availability
compared to :abbr:`2AZ (Two Availability Zone)` clusters. However, not all
regions support :abbr:`3AZ (Three Availability Zone)` clusters.

Regions with Only Two Availability Zones
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

|service| clusters deployed in regions with two availability zones are split
across the two availability zones. For example, a three node replica set
cluster would have two nodes deployed to one availability zone and the
remaining node deployed to the other availability zone.

.. include:: /images/amazon-aws-2az.rst

:abbr:`2AZ (Two Availability Zone)` clusters have a higher chance of loss of
availability in the event of the loss of an availability zone than :abbr:`3AZ
(Three Availability Zone)` clusters. However, where latency or location are a
priority, a region that supports :abbr:`2AZ (Two Availability Zone)` clusters
may be preferred.

.. [#amazon-disk-docs]
   
   For detailed documentation on Amazon storage options, see 
   `Amazon EBS Volume Types
   <http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSVolumeTypes.html>`_