====================================
Required Access for Automation Agent
====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

If your MongoDB deployment enforces access control, the |mms|
Automation Agent must authenticate to MongoDB as a
:manual:`user with the proper access </core/security-users>`.

If you use :ref:`Automation <automation>`, |mms| manages
authentication. If you do not use Automation, follow the instructions
on this page.

To authenticate, create a user with the appropriate roles in MongoDB.
The following tutorials include instructions and examples for creating
the MongoDB user:

- :doc:`/tutorial/configure-automation-agent-for-cr`.

- :doc:`/tutorial/configure-automation-agent-for-ldap`.

- :doc:`/tutorial/configure-automation-agent-for-kerberos`.

MongoDB user roles are separate from |mms|
:doc:`user roles </reference/user-roles>` and are described in the
MongoDB manual beginning with the
:manual:`Authorization </core/authorization>` page.

Considerations
--------------

.. include:: /includes/considerations-agent-access-control.rst

.. important::

   Every process in your |mms| deployment must use the same name and
   roles for the Automation Agent user.

Prerequisites
-------------

.. include:: /includes/prerequisites-create-user-for-agent.rst

.. _access-control-automation-agent-2.6:

To automate MongoDB instances, the automation agent must authenticate
to the database as a user with the following access:

.. list-table::
   :header-rows: 1

   * - Required Role
     - Database
   * - :authrole:`clusterAdmin`
     - ``admin``
   * - :authrole:`readWriteAnyDatabase`
     - ``admin``
   * - :authrole:`userAdminAnyDatabase`
     - ``admin``
   * - :authrole:`dbAdminAnyDatabase`
     - ``admin``
   * - :authrole:`backup`
     - ``admin``
   * - :authrole:`restore`
     - ``admin``

Authentication Mechanisms
-------------------------

To authenticate, create the user in MongoDB with the appropriate
access. The authentication method that the MongoDB deployment uses
determines how to create the user as well as determine any additional
agent configuration:

.. include:: /includes/ref-configure-access-control-verbose.rst
