# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2011-2015
# This file is distributed under the same license as the mongodb-manual package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: mongodb-manual 3.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2015-03-30 14:28-0400\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../source/reference/ulimit.txt:3
# d246284dc4e64d95b55626c4913045d3
msgid "UNIX ``ulimit`` Settings"
msgstr ""

#: ../source/reference/ulimit.txt:7
# 9db2be48ef7d4d18b6a33cf7291fae25
msgid "Most UNIX-like operating systems, including Linux and OS X, provide ways to limit and control the usage of system resources such as threads, files, and network connections on a per-process and per-user basis. These \"ulimits\" prevent single users from using too many system resources. Sometimes, these limits have low default values that can cause a number of issues in the course of normal MongoDB operation."
msgstr ""

#: ../source/reference/ulimit.txt:16
# 09d336e7e38d4781a0c13caffa74d354
msgid "Red Hat Enterprise Linux and CentOS 6 place a max process limitation of 1024 which overrides ``ulimit`` settings. Create a file named ``/etc/security/limits.d/99-mongodb-nproc.conf`` with new ``soft nproc`` and ``hard nproc`` values to increase the process limit. See ``/etc/security/limits.d/90-nproc.conf`` file as an example."
msgstr ""

#: ../source/reference/ulimit.txt:26
# e46ef56bf60243ecbd790443f9f85ece
msgid "Resource Utilization"
msgstr ""

#: ../source/reference/ulimit.txt:28
# 65053672fb354334a3ec69dc4e09d2a6
msgid ":program:`mongod` and :program:`mongos` each use threads and file descriptors to track connections and manage internal operations. This section outlines the general resource utilization patterns for MongoDB. Use these figures in combination with the actual information about your deployment and its use to determine ideal ``ulimit`` settings."
msgstr ""

#: ../source/reference/ulimit.txt:34
# aec0079004794992a04589ba2685dd2b
msgid "Generally, all :program:`mongod` and :program:`mongos` instances:"
msgstr ""

#: ../source/reference/ulimit.txt:36
# a2809ca70a664aeb9569c2eea29a458a
msgid "track each incoming connection with a file descriptor *and* a thread."
msgstr ""

#: ../source/reference/ulimit.txt:39
# 0619e266341846c6b7e9a45c7f002428
msgid "track each internal thread or *pthread* as a system process."
msgstr ""

#: ../source/reference/ulimit.txt:42
# bc46ea3c7d044bb99b18bdcb042954b4
msgid "``mongod``"
msgstr ""

#: ../source/reference/ulimit.txt:44
# 15a5e29931fa45ba80accfacf79f2616
msgid "1 file descriptor for each data file in use by the :program:`mongod` instance."
msgstr ""

#: ../source/reference/ulimit.txt:47
# e69ea55ebd2241109a8b075574cfb3be
msgid "1 file descriptor for each journal file used by the :program:`mongod` instance when :setting:`storage.journal.enabled` is ``true``."
msgstr ""

#: ../source/reference/ulimit.txt:50
# eac80b29b0f946429f884b3c077a79c3
msgid "In replica sets, each :program:`mongod` maintains a connection to all other members of the set."
msgstr ""

#: ../source/reference/ulimit.txt:53
# 249b5c2ab0d24bf1b8e26809a1de2598
msgid ":program:`mongod` uses background threads for a number of internal processes, including :ref:`TTL collections <ttl-collections>`, replication, and replica set health checks, which may require a small number of additional resources."
msgstr ""

#: ../source/reference/ulimit.txt:61
# 65a9fe4a864f45b1a2e99e94571013a5
msgid "``mongos``"
msgstr ""

#: ../source/reference/ulimit.txt:63
# 281d0544697d47beaf93c1125033c4f3
msgid "In addition to the threads and file descriptors for client connections, :program:`mongos` must maintain connects to all config servers and all shards, which includes all members of all replica sets."
msgstr ""

#: ../source/reference/ulimit.txt:68
# 0a1c1018532d49ee97f4cc0221b5dcee
msgid "For :program:`mongos`, consider the following behaviors:"
msgstr ""

#: ../source/reference/ulimit.txt:70
# 07a81f37174d49e58b38ef9e5e822e97
msgid ":program:`mongos` instances maintain a connection pool to each shard so that the :program:`mongos` can reuse connections and quickly fulfill requests without needing to create new connections."
msgstr ""

#: ../source/reference/ulimit.txt:74
# 9138125b039d416ca765e68f6591ad5c
msgid "You can limit the number of incoming connections using the :setting:`~net.maxIncomingConnections` run-time option. By restricting the number of incoming connections you can prevent a cascade effect where the :program:`mongos` creates too many connections on the :program:`mongod` instances."
msgstr ""

#: ../source/includes/note-max-conns-max.rst:3
# 5df080b253f34b2a9c856a265b8bc694
msgid "MongoDB removed the upward limit on the :setting:`~net.maxIncomingConnections` setting."
msgstr ""

#: ../source/reference/ulimit.txt:83
# 6632a68eb04b43acb0d6a2c1f4189cef
msgid "Review and Set Resource Limits"
msgstr ""

#: ../source/reference/ulimit.txt:86
# 74cf86c8d2374cd7ade6da2515265489
msgid "``ulimit``"
msgstr ""

#: ../source/reference/ulimit.txt:88
# 8bc5548cb6b1424390cfbc19d469b429
msgid "You can use the ``ulimit`` command at the system prompt to check system limits, as in the following example:"
msgstr ""

#: ../source/reference/ulimit.txt:111
# d527ba8d5d664819938ccbaabef69278
msgid "``ulimit`` refers to the per-*user* limitations for various resources. Therefore, if your :program:`mongod` instance executes as a user that is also running multiple processes, or multiple :program:`mongod` processes, you might see contention for these resources. Also, be aware that the ``processes`` value (i.e. ``-u``) refers to the combined number of distinct processes and sub-process threads."
msgstr ""

#: ../source/reference/ulimit.txt:119
# 5ac6dc8f38a04afe8dd361b1eee5d894
msgid "You can change ``ulimit`` settings by issuing a command in the following form:"
msgstr ""

#: ../source/reference/ulimit.txt:126
# cc49fed5d22f49ee868c41544abb3532
msgid "There are both \"hard\" and the \"soft\" ``ulimit``\\ s that affect MongoDB's performance. The \"hard\" ``ulimit`` refers to the maximum number of processes that a user can have active at any time. This is the ceiling: no non-root process can increase the \"hard\" ``ulimit``. In contrast, the \"soft\" ``ulimit`` is the limit that is actually enforced for a session or process, but any process can increase it up to \"hard\" ``ulimit`` maximum."
msgstr ""

#: ../source/reference/ulimit.txt:134
# e3cecff10da84651bc89c369977afb43
msgid "A low \"soft\" ``ulimit`` can cause ``can't create new thread, closing connection`` errors if the number of connections grows too high. For this reason, it is extremely important to set *both* ``ulimit`` values to the recommended values."
msgstr ""

#: ../source/reference/ulimit.txt:139
# 2e3cdbc660f2486e9b6beb04e3a43e72
msgid "``ulimit`` will modify both \"hard\" and \"soft\" values unless the :setting:`-H` or :setting:`-S` modifiers are specified when modifying limit values."
msgstr ""

#: ../source/reference/ulimit.txt:143
# 398ffbd8c9554fffb1ebd44df2b6737a
msgid "For many distributions of Linux you can change values by substituting the ``-n`` option for any possible value in the output of ``ulimit -a``. On OS X, use the ``launchctl limit`` command.  See your operating system documentation for the precise procedure for changing system limits on running systems."
msgstr ""

#: ../source/reference/ulimit.txt:149
# 5e219ab194454bf5a36e8bdce9bf3206
msgid "After changing the ``ulimit`` settings, you *must* restart the process to take advantage of the modified settings. You can use the ``/proc`` file system to see the current limitations on a running process."
msgstr ""

#: ../source/reference/ulimit.txt:154
# 66d51b0ca0a34240b0fc5a1bdf8655fe
msgid "Depending on your system's configuration, and default settings, any change to system limits made using ``ulimit`` may revert following system a system restart. Check your distribution and operating system documentation for more information."
msgstr ""

#: ../source/includes/note-suse-ulimit.rst:3
# 2feab8d7329249708a8cae84a4de2d0f
msgid "SUSE Linux Enterprise Server 11 and potentially other versions of SLES and other SUSE distributions ship with virtual memory address space limited to 8GB by default. This *must* be adjusted in order to prevent virtual memory allocation failures as the database grows."
msgstr ""

#: ../source/includes/note-suse-ulimit.rst:8
# b9ba4190b52e4051858af618878db35d
msgid "The SLES packages for MongoDB adjust these limits in the default scripts, but you will need to make this change manually if you are using custom scripts and/or the tarball release rather than the SLES packages."
msgstr ""

#: ../source/reference/ulimit.txt:164
# 25f2a356258d4777a4ce1fc2de64ff39
msgid "Recommended ``ulimit`` Settings"
msgstr ""

#: ../source/reference/ulimit.txt:166
# 450233b739584e38bb8f18f70a3f14da
msgid "Every deployment may have unique requirements and settings; however, the following thresholds and settings are particularly important for :program:`mongod` and :program:`mongos` deployments:"
msgstr ""

#: ../source/reference/ulimit.txt:170
# 7540ae2ae0fb47498547055d89ea8435
msgid "``-f`` (file size): ``unlimited``"
msgstr ""

#: ../source/reference/ulimit.txt:171
# 85c9de79ddf646ee8df1ec13925a142b
msgid "``-t`` (cpu time): ``unlimited``"
msgstr ""

#: ../source/reference/ulimit.txt:172
# 6ecb84fb5324403e8345ad52ea8d506f
msgid "``-v`` (virtual memory): ``unlimited`` [#memory-size]_"
msgstr ""

#: ../source/reference/ulimit.txt:173
# 08a1550baa6f4843a0b86d25fa47c6f8
msgid "``-n`` (open files): ``64000``"
msgstr ""

#: ../source/reference/ulimit.txt:174
# 07f747c84af74d9bb1b79c5830fe3481
msgid "``-m`` (memory size): ``unlimited`` [#memory-size]_ [#rss-linux]_"
msgstr ""

#: ../source/reference/ulimit.txt:175
# 001ee126cc344213a200b1cdc989895a
msgid "``-u`` (processes/threads): ``64000``"
msgstr ""

#: ../source/reference/ulimit.txt:177
# 59364a16e9d7474ca82af60995f5ceb7
msgid "Always remember to restart your :program:`mongod` and :program:`mongos` instances after changing the ``ulimit`` settings to ensure that the changes take effect."
msgstr ""

#: ../source/reference/ulimit.txt:182
# c6d0e081f7434cbfbc3e451fe8840581
msgid "Linux distributions using Upstart"
msgstr ""

#: ../source/reference/ulimit.txt:184
# 7281b02f30f748708cbc92a3a31450f5
msgid "For Linux distributions that use Upstart, you can specify limits within service scripts if you start :program:`mongod` and/or :program:`mongos` instances as Upstart services. You can do this by using ``limit`` `stanzas <http://upstart.ubuntu.com/wiki/Stanzas#limit>`_."
msgstr ""

#: ../source/reference/ulimit.txt:189
#: ../source/reference/ulimit.txt:221
# 157d24c8568842d5b0baedbb96a296a9
# ffd533c9f23249d681064c3f6165f20b
msgid "Specify the :ref:`recommended-ulimit-settings`, as in the following example:"
msgstr ""

#: ../source/reference/ulimit.txt:200
# dcc5e4ae89db4fd18d71f3d6c787f954
msgid "Each ``limit`` stanza sets the \"soft\" limit to the first value specified and the \"hard\" limit to the second."
msgstr ""

#: ../source/reference/ulimit.txt:203
#: ../source/reference/ulimit.txt:242
# df201a99c15046e2805895a1ffa84852
# 9255ca927b8740d5beaaf62a7d7c502a
msgid "After after changing ``limit`` stanzas, ensure that the changes take effect by restarting the application services, using the following form:"
msgstr ""

#: ../source/reference/ulimit.txt:212
# 7ee8c9a7b1e94b6782950becf6ea549a
msgid "Linux distributions using ``systemd``"
msgstr ""

#: ../source/reference/ulimit.txt:214
# 8f27ada9d84b4e288fe7937caf119372
msgid "For Linux distributions that use ``systemd``, you can specify limits within the ``[Service]`` sections of service scripts if you start :program:`mongod` and/or :program:`mongos` instances as ``systemd`` services. You can do this by using `resource limit directives <http://www.freedesktop.org/software/systemd/man/systemd.exec.html#LimitCPU=>`_."
msgstr ""

#: ../source/reference/ulimit.txt:239
# ccd20241997f406a951fe814969652ce
msgid "Each ``systemd`` limit directive sets both the \"hard\" and \"soft\" limits to the value specified."
msgstr ""

#: ../source/reference/ulimit.txt:253
# 3ebe33d2eae242df89c988e103feafa7
msgid "``/proc`` File System"
msgstr ""

#: ../source/reference/ulimit.txt:257
# d9f7138dc4ef4a0898dbbfa05fd3bc2f
msgid "This section applies only to Linux operating systems."
msgstr ""

#: ../source/reference/ulimit.txt:259
# feb0b234cbc04797a095b99c6f8aa60d
msgid "The ``/proc`` file-system stores the per-process limits in the file system object located at ``/proc/<pid>/limits``, where ``<pid>`` is the process's :term:`PID` or process identifier. You can use the following ``bash`` function to return the content of the ``limits`` object for a process or processes with a given name:"
msgstr ""

#: ../source/reference/ulimit.txt:285
# 9ad9072986ac47a7bfc44c5b2686a601
msgid "You can copy and paste this function into a current shell session or load it as part of a script. Call the function with one the following invocations:"
msgstr ""

#: ../source/reference/ulimit.txt:295
# d025516049e1456a862284c1e7c91ade
msgid "If you limit virtual or resident memory size on a system running MongoDB the operating system will refuse to honor additional allocation requests."
msgstr ""

#: ../source/reference/ulimit.txt:299
# 0b1e67451d424de2b95ab0f961840dab
msgid "The ``-m`` parameter to ``ulimit`` has no effect on Linux systems with kernel versions more recent than 2.4.30. You may omit ``-m`` if you wish."
msgstr ""

