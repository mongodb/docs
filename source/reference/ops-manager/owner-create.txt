.. _mcli-om-owner-create-command:

=================================
mongocli ops-manager owner create
=================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``owner create`` command creates the first user with the 
:opsmgr:`Global Owner </reference/user-roles/#global-owner-role>` 
role for an |mms| installation. You can also create the user through 
the |mms| :opsmgr:`API </reference/api/user-create-first/>` or the 
first time that you open the |mms| UI. 

.. _om-owner-create-syntax:

Syntax 
------ 

.. code-block:: text 

   mongocli ops-manager owner create 
        --email <user-email-address>
        --firstName <user-first-name>
        --lastName <user-last-name> 
        [ --output|-o <output-format> ]
        [ --password|-p <user-password> ]
        [ --profile|-P <profile-name> ]
        [ --whitelistIps <user-connection-IP-addresses> ]

.. include:: /includes/fact-command-line-help.rst

.. _om-owner-create-options:

Options 
------- 

.. list-table:: 
   :header-rows: 1 
   :widths: 20 10 60 10 

   * - Option 
     - Type 
     - Description 
     - Required? 

   * - ``--email``
     - string
     - Email address of the user.
     - yes

   * - ``--firstName``
     - string
     - First name of the user.
     - yes

   * - ``--lastName``
     - string
     - Last name of the user.
     - yes

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--password``, ``-p``
     - string
     - Password for the user. If omitted, prompts for password. 
     - no

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the |mms| base URL is set. If 
       omitted, uses the {+default-profile+}.
     - no

   * - ``--whitelistIps``
     - string
     - Comma-separated list of IP addresses to add to the API 
       key.
     - no

.. _om-owner-create-output:

Output 
------

The command prints the following fields in the specified format to the terminal 
if the command succeeds. If the command prints errors, see 
:ref:`troubleshooting` for recommended solutions.

.. list-table:: 
   :header-rows: 1
   :widths: 20 10 70 

   * - Field 
     - Type 
     - Description 

   * - ``apiKey``
     - string
     - The :opsmgr:`personal API key </reference/api/api-key/index.html>` 
       for the user. Save the key in a secure file.

   * - ``programmaticApiKey``
     - object
     - An object describing the :opsmgr:`programmatic API key
       </tutorial/manage-programmatic-api-keys/>` for the user. For a
       detailed description of the object, see
       :ref:`om-org-owner-key-attrs`.

       .. note::

          The response contains a ``programmaticApiKey`` object only for
          |onprem| 4.4 and later.

   * - ``user``
     - object
     - The user attributes that are set in |mms|. For a detailed
       description of the object, see :ref:`om-org-owner-user-attrs`.

.. _om-org-owner-user-attrs:

User Attributes 
~~~~~~~~~~~~~~~

.. list-table:: 
   :header-rows: 1 
   :widths: 30 70 

   * - Attribute 
     - Description 

   * - ``username``
     - Username of the user. This is same as the 
       email address of the user.

   * - ``firstName``
     - First name of the user.

   * - ``lastName``
     - Last name of the user.

   * - ``emailAddress``
     - Email address of the user.

   * - ``id``
     - ID of the user.

   * - ``links``
     - Array of objects with one or more links to sub-resources 
       and/or related resources. The relations between |url|\s are 
       explained in the :rfc:`Web Linking Specification <5988>`.

.. _om-org-owner-key-attrs:

Programmatic API Key Attributes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :widths: 15 10 75
   :header-rows: 1
   :stub-columns: 1

   * - Name
     - Type
     - Description

   * - ``desc``
     - string
     - Description of the programmatic |api| key.

   * - ``id``
     - string
     - Unique identifier of the programmatic |api| key.

   * - ``links``
     - array of objects
     - Array of objects with one or more links to sub-resources 
       and/or related resources. The relations between |url|\s are 
       explained in the :rfc:`Web Linking Specification <5988>`.

   * - ``privateKey``
     - string
     - A series of alphanumeric characters and dashes that serve as the
       password of the programmatic |api| key.

   * - ``publicKey``
     - string
     - A series of alphanumeric characters that serve as the username of
       the programmatic |api| key.

   * - | ``roles``
     - array of objects
     - :opsmgr:`Roles </reference/user-roles>` assigned to the
       programmatic |api| key.

   * - | ``roles``
       | ``.roleName``
     - string
     - Name of the assigned role. |mms| grants the programmatic
       |api| key the :authrole:`Global Owner` role (``GLOBAL_OWNER``).

.. _om-owner-create-examples:

Examples 
--------

The following examples show two ways to run the command. In 
:ref:`om-owner-create-example1`, the command is run 
with all the required and optional options. In 
:ref:`om-owner-create-example2`, the command is run without the 
``--profile`` and ``--password`` options. The command uses the 
{+default-profile+} for |mms| base URL and prompts for 
password. 

.. _om-owner-create-example1:

Example 1 
~~~~~~~~~

The following ``mongocli ops-manager owner create`` command creates the 
first user for |mms| with the following attributes:

- First name: ``Jane``
- Last name: ``Doe``
- Password: ``ChangeThisToAStrongPassword``
- Email address: ``jane.doe@example.com``
- IP address for whitelist: ``123.456.78.9``

It uses the profile named ``omProfile`` for the |mms| base URL.

.. code-block:: sh 
   :copyable: false
   
   mongocli ops-manager owner create --firstName Jane --lastName Doe --password CHangeThisToAStrongPassword --email jane.doe@example.com --whitelistIps 123.456.78.9 --output json --profile ``omProfile``

.. _om-owner-create-example2:

Example 2 
~~~~~~~~~

The following ``mongocli ops-manager owner create`` commands show two
ways to create the first user for |mms| with the following attributes:

- First name: ``Jane``
- Last name: ``Doe``
- Email address: ``jane.doe@example.com``
- IP addresses to whitelist: ``123.456.78.9`` and ``987.654.32.1``

It uses the {+default-profile+} where the |mms| base URL is set. When the 
command is run, it prompts you for a password.

The following command shows the ``--whitelistIps`` option with 
two IP addresses separated by a comma. 

.. code-block:: sh 
   :copyable: false
   
   mongocli ops-manager owner create --firstName Jane --lastName Doe --email jane.doe@example.com --output json --whitelistIps 123.456.78.9,987.654.32.1
   Password: **********

The followibg command specifies the ``--whitelistIps`` option twice, 
once for each IP address.

.. code-block:: sh 
   :copyable: false
   
   mongocli ops-manager owner create --firstName Jane --lastName Doe --email jane.doe@example.com --whitelistIps 123.456.78.9 --output json --whitelistIps 987.654.32.1 
   Password: ********** 

Output 
~~~~~~

The :ref:`om-owner-create-example1` and :ref:`om-owner-create-example2` 
commands print the following fields in the specified format to the terminal. To
learn more about these fields, see :ref:`om-owner-create-output`.

.. code-block:: json 
   :copyable: false

   {
   	"apiKey": "34a93174-ec7b-4725-972e-1dd77c4178e4",
   	"programmaticApiKey": {
   		"desc": "Automatically generated Global API key",
   		"id": "{API-KEY}",
   		"links": [{
   			"href": "http://om-svc.mongodb.svc.cluster.local:8080/api/public/v1.0/orgs/null/apiKeys/{API-KEY}",
   			"rel": "self"
   		}],
   		"privateKey": "private key string",
   		"publicKey": "public key string",
   		"roles": [{
   			"roleName": "GLOBAL_OWNER"
   		}]
   	},
   	"user": {
   		"username": "jane.doe@example.com",
   		"firstName": "Jane",
   		"lastName": "Doe",
   		"emailAddress": "jane.doe@example.com",
   		"id": "5e39bd5c31cd7c0078867c03",
   		"links": [{
   				"rel": "self",
   				"href": "http://om-svc.mongodb.svc.cluster.local:8080/api/public/v1.0/users/5e39bd5c31cd7c0078867c03"
   			},
   			{
   				"rel": "http://mms.mongodb.com/whitelist",
   				"href": "http://om-svc.mongodb.svc.cluster.local:8080/api/public/v1.0/users/5e39bd5c31cd7c0078867c03/whitelist"
   			}
   		]
   	}
   }
