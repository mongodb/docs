ref: queryable-backup-duration
edition: cloud
content: |

   |mms| provisions these queryable snapshots as *read-only* MongoDB
   instances.

   .. important::

      These instances are available for up to 24 hours.

---
ref: queryable-backup-duration
edition: onprem
content: |

   |mms| provisions these queryable snapshots as *read-only* MongoDB
   instances. Specifically, |mms| spins up a :program:`mongod` with
   data from the selected snapshot store.

   .. important::

      By default, these instances are available for up to 24 hours. You
      can configure the duration using
      :setting:`Expiration (Hours) <Expiration>`.
      For other queryable backup settings, see
      :ref:`queryable-snapshot-settings`.

---
ref: queryable-backup-workers
edition: onprem
content: |

  To query a snapshot of a :term:`sharded cluster`, the
  :term:`Backup Daemon` requires at least one worker for the
  :manual:`config server</core/sharded-cluster-config-servers>`, one
  worker for each :term:`shard`, and one worker for each
  :binary:`~bin.mongos` instance.

  To query a snapshot of a :term:`replica set`, the Backup Daemon
  requires at least one worker for the replica set.

  .. example::

     If you restore a queryable backup from a 3-shard cluster with
     1 shard router (:program:`mongos`), you would need this value to
     be at least ``5``:

     - 1 per shard (``3``) +
     - 1 for the config server (``1``) +
     - 1 for the :binary:`~bin.mongos`

     When the queryable backup begins, the Backup Daemon spins
     up 5 or more workers to manage these components.

---
ref: queryable-backup-workers
edition: cloud
content: ""

---
ref: queryable-backup-pem-restriction
edition: onprem
content: |

   :setting:`Proxy Server PEM File` has the following restrictions:

   - The PEM should use a key length greater than 512-bit. Using a
     2048-bit RSA key is recommended.

   - The PEM should use a message digest stronger than ``sha1``, such as ``sha256``.

---
ref: queryable-backup-pem-restriction
edition: cloud
content: ""
---
ref: queryable-backup-certificate-duration
edition: cloud
content: |

   The X.509 certificates are valid for 24 hours.

---
ref: queryable-backup-certificate-duration
edition: onprem
content: |

   The client X.509 certificate is valid for the same length of time as
   the queryable instance :setting:`Expiration (Hours) <Expiration>`,
   which is 24 hours by default.
---
ref: queryable-backup-proxy-requirements
edition: onprem
content: |

   .. note::

      You must restart the Web Server if you change any of the
      following settings:

      - :setting:`Proxy Server Port`

      - :setting:`Proxy Server PEM File`

      - :setting:`Proxy Server PEM File Password`
---
ref: queryable-backup-proxy-requirements
edition: cloud
content: ""
---
ref: queryable-backup-proxy-port
edition: onprem
content: |
   After updating :setting:`Proxy Server Port`, restart the Web
   Server for the change to take effect.
---
ref: queryable-backup-proxy-port
edition: cloud
content: ""
---
ref: queryable-backup-proxy-pem-file
edition: onprem
content: |
   After updating :setting:`Proxy Server PEM File`, restart the Web
   Server for the change to take effect.
---
ref: queryable-backup-proxy-pem-file
edition: cloud
content: ""
---
ref: queryable-backup-proxy-pem-password
edition: onprem
content: |
   After updating :setting:`Proxy Server PEM File Password`, restart
   the Web Server for the change to take effect.
---
ref: queryable-backup-proxy-pem-password
edition: cloud
content: ""

...
