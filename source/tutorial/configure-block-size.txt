====================================
Configure Block Size in a Blockstore
====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

If you use the :term:`Blockstore <Backup Blockstore Database>` or an S3
Blockstore for snapshot storage, then when you back up a replica set,
the :term:`Backup Daemon` takes a snapshot of the data directory for
the backed-up deployment, breaks it into blocks, and transfers the
blocks to the Blockstore.

By default, each block in a Blockstore is 64 KB, but you can configure
the blocksize to suit your use case.

Considerations
--------------

In general, increasing blocksize results in faster snapshots and
restores, but requires more disk space. These competing factors should
be considered when determining if you wish to tune the blocksize.

For users with update and delete-intensive workloads, and thus with a
poor de-duplication rate, increasing the blocksize improves performance
*without* requiring extra disk space. With update and delete-intensive
workloads, no matter how small you make the blocksize the entire block
file is rewritten. Since the entire file is always rewritten there is
no difference in storage space if you change the blocksize.

Users with insert-only workloads also see the performance benefits of
increasing blocksize without requiring additional disk space. With an
insert-only workflow, the existing blocks never change: increasing
blocksize then simplifies block management and enables the best
possible performance on snapshot and restore.

Procedure
---------

.. include:: /includes/steps/adjust-block-size.rst
