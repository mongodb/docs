.. _meko-op-install-settings-kubectl-oc:

=================================================
|k8s-op| |kubectl| and |oc| Installation Settings
=================================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecols

To provide optional settings, edit the |yaml| file that corresponds to
your deployment type in the directory where you cloned the
|k8s-op-short| repository:

- Vanilla |k8s| using |kubectl|: **mongodb-enterprise.yaml**
- OpenShift using |oc|: **mongodb-enterprise-openshift.yaml**

If the setting that you want to add doesn't exist in the |yaml| file,
add it as a new array of key-value pair mappings in the 
**spec.template.spec.containers.name.env.** collection:

- Set the value of the **spec.template.spec.containers.name.env.name**
  key to the setting's name.
- Set the value of the **spec.template.spec.containers.name.env.value** 
  key to the setting's value.

.. example::

   .. code-block:: yaml
      :linenos:
      :emphasize-lines: 9-11

      spec:
        template:
          spec:
            serviceAccountName: mongodb-enterprise-operator
            containers:
              - name: mongodb-enterprise-operator
                image: <operatorVersionUrl>
                imagePullPolicy: <policyChoice>
                env:
                  - name: APPDB_IMAGE_REPOSITORY
                    value: quay.io/mongodb/mongodb-enterprise-appdb

.. _meko-appdb-agent-version:

APPDB_AGENT_VERSION
-------------------

.. include:: /includes/op-setting-descs/appdb-agent-version.rst

.. example::

   .. code-block:: yaml
      :linenos:
      :emphasize-lines: 9-11

      spec:
        template:
          spec:
            serviceAccountName: mongodb-enterprise-operator
            containers:
              - name: mongodb-enterprise-operator
                image: <operatorVersionUrl>
                imagePullPolicy: <policyChoice>
                env:
                  - name: APPDB_AGENT_VERSION
                    value: {+appdb-agent-version+}

APPDB_IMAGE_REPOSITORY
----------------------

.. include:: /includes/op-setting-descs/appdb-image-repository.rst

The default value varies based on whether you install the |k8s-op-short|
to a vanilla |k8s| or an OpenShift environment:

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb/mongodb-enterprise-appdb**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: APPDB_IMAGE_REPOSITORY
                          value: quay.io/mongodb/mongodb-enterprise-appdb

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb/mongodb-enterprise-appdb**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: APPDB_IMAGE_REPOSITORY
                          value: registry.connect.redhat.com/mongodb/mongodb-enterprise-appdb

IMAGE_PULL_POLICY
-----------------

.. include:: /includes/op-setting-descs/image-pull-policy.rst

.. example::

    .. code-block:: yaml
      :linenos:
      :emphasize-lines: 9-11

      spec:
        template:
          spec:
            serviceAccountName: mongodb-enterprise-operator
            containers:
              - name: mongodb-enterprise-operator
                image: <operatorVersionUrl>
                imagePullPolicy: <policyChoice>
                env:
                  - name: IMAGE_PULL_POLICY
                    value: Always

INIT_APPDB_IMAGE_REPOSITORY
---------------------------

.. include:: /includes/op-setting-descs/init-appdb-image-repository.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb/mongodb-enterprise-appdb-init**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: INIT_APPDB_IMAGE_REPOSITORY
                          value: quay.io/mongodb/mongodb-enterprise-init-appdb

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb/mongodb-enterprise-appdb-init**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: INIT_APPDB_IMAGE_REPOSITORY
                          value: registry.connect.redhat.com/mongodb/mongodb-enterprise-appdb-init

INIT_APPDB_VERSION
------------------

.. include:: /includes/op-setting-descs/init-appdb-version.rst

.. example::

   .. code-block:: yaml
      :linenos:
      :emphasize-lines: 9-11

      spec:
        template:
          spec:
            serviceAccountName: mongodb-enterprise-operator
            containers:
              - name: mongodb-enterprise-operator
                image: <operatorVersionUrl>
                imagePullPolicy: <policyChoice>
                env:
                  - name: INIT_APPDB_VERSION
                    value: {+appdb-init-version+}

INIT_DATABASE_IMAGE_REPOSITORY
------------------------------

.. include:: /includes/op-setting-descs/init-database-image-repository.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb/mongodb-enterprise-init-database**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                      - name: mongodb-enterprise-operator
                        image: <operatorVersionUrl>
                        imagePullPolicy: <policyChoice>
                        env:
                          - name: INIT_DATABASE_IMAGE_REPOSITORY
                            value:
                            quay.io/mongodb/mongodb-enterprise-init-database

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb/mongodb-enterprise-init-database**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                      - name: mongodb-enterprise-operator
                        image: <operatorVersionUrl>
                        imagePullPolicy: <policyChoice>
                        env:
                          - name: INIT_DATABASE_IMAGE_REPOSITORY
                            value:
                            registry.connect.redhat.com/mongodb/mongodb-enterprise-init-database


INIT_DATABASE_VERSION
---------------------

.. include:: /includes/op-setting-descs/init-database-version.rst

.. example::

   .. code-block:: yaml
      :linenos:
      :emphasize-lines: 9-11

      spec:
        template:
          spec:
            serviceAccountName: mongodb-enterprise-operator
            containers:
              - name: mongodb-enterprise-operator
                image: <operatorVersionUrl>
                imagePullPolicy: <policyChoice>
                env:
                  - name: INIT_DATABASE_VERSION
                    value: {+database-init-version+}

INIT_OPS_MANAGER_IMAGE_REPOSITORY
---------------------------------

.. include:: /includes/op-setting-descs/init-ops-manager-image-repository.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb/mongodb-enterprise-init-ops-manager**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: INIT_OPS_MANAGER_IMAGE_REPOSITORY
                          value: quay.io/mongodb/mongodb-enterprise-init-ops-manager

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb/mongodb-enterprise-init-ops-manager**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: INIT_OPS_MANAGER_IMAGE_REPOSITORY
                          value: registry.connect.redhat.com/mongodb/mongodb-enterprise-init-ops-manager


INIT_OPS_MANAGER_VERSION
------------------------

.. include:: /includes/op-setting-descs/init-ops-manager-version.rst

.. example::

   .. code-block:: yaml
      :linenos:
      :emphasize-lines: 9-11

      spec:
        template:
          spec:
              serviceAccountName: mongodb-enterprise-operator
              containers:
                - name: mongodb-enterprise-operator
                  image: <operatorVersionUrl>
                  imagePullPolicy: <policyChoice>
                  env:
                    - name: INIT_OPS_MANAGER_VERSION
                      value: {+ops-manager-init-version+}

MANAGED_SECURITY_CONTEXT
------------------------

.. include:: /includes/op-setting-descs/managed-security-context.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **false**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: MANAGED_SECURITY_CONTEXT
                          value: false

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **true**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 9-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: MANAGED_SECURITY_CONTEXT
                          value: true

MONGODB_ENTERPRISE_DATABASE_IMAGE
---------------------------------

.. include:: /includes/op-setting-descs/mongodb-enterprise-db-image.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb/mongodb-enterprise-database**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 10-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: MONGODB_ENTERPRISE_DATABASE_IMAGE
                          value: quay.io/mongodb/mongodb-enterprise-database

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb/mongodb-enterprise-database**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 10-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                    - name: mongodb-enterprise-operator
                      image: <operatorVersionUrl>
                      imagePullPolicy: <policyChoice>
                      env:
                        - name: MONGODB_ENTERPRISE_DATABASE_IMAGE
                          value: registry.connect.redhat.com/mongodb/mongodb-enterprise-database

OPERATOR_ENV
------------

.. include:: /includes/op-setting-descs/operator-env.rst

.. example::

    .. code-block:: yaml
      :emphasize-lines: 9-11

      spec:
        template:
          spec:
            serviceAccountName: mongodb-enterprise-operator
            containers:
              - name: mongodb-enterprise-operator
                image: <operatorVersionUrl>
                imagePullPolicy: <policyChoice>
                env:
                  - name: OPERATOR_ENV
                    value: prod

OPS_MANAGER_IMAGE_PULL_POLICY
-----------------------------

.. include:: /includes/op-setting-descs/ops-manager-image-pull-policy.rst

.. example::

   .. code-block:: yaml
      :linenos:
      :emphasize-lines: 10-11

      spec:
        template:
          spec:
            serviceAccountName: mongodb-enterprise-operator
            containers:
              - name: mongodb-enterprise-operator
                image: <operatorVersionUrl>
                imagePullPolicy: <policyChoice>
                env:
                  - name: OPS_MANAGER_IMAGE_PULL_POLICY
                    value: Always

OPS_MANAGER_IMAGE_REPOSITORY
----------------------------

.. include:: /includes/op-setting-descs/ops-manager-image-repository.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb/mongodb-enterprise-ops-manager**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 10-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                  - name: mongodb-enterprise-operator
                    image: <operatorVersionUrl>
                    imagePullPolicy: <policyChoice>
                    env:
                      - name: OPS_MANAGER_IMAGE_REPOSITORY
                        value: quay.io/mongodb/mongodb-enterprise-ops-manager

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb/mongodb-enterprise-ops-manager**.

      .. example::

         .. code-block:: yaml
            :linenos:
            :emphasize-lines: 10-11

            spec:
              template:
                spec:
                  serviceAccountName: mongodb-enterprise-operator
                  containers:
                  - name: mongodb-enterprise-operator
                    image: <operatorVersionUrl>
                    imagePullPolicy: <policyChoice>
                    env:
                      - name: OPS_MANAGER_IMAGE_REPOSITORY
                        value: registry.connect.redhat.com/mongodb/mongodb-enterprise-ops-manager

WATCH_NAMESPACE
---------------

.. include:: /includes/op-setting-descs/watch-namespace.rst

.. example::

    .. code-block:: yaml
      :emphasize-lines: 9-11

      spec:
        template:
          spec:
            serviceAccountName: mongodb-enterprise-operator
            containers:
              - name: mongodb-enterprise-operator
                image: <operatorVersionUrl>
                imagePullPolicy: <policyChoice>
                env:
                  - name: WATCH_NAMESPACE
                    value: <testNamespace>
