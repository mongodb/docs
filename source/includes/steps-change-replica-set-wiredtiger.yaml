title: "Shut down the secondary member."
ref: change-wt-repl-sync-shutdown-secondary
pre: |
  In the :program:`mongo` shell, shut down the secondary :program:`mongod`
  instance you wish to upgrade.
action:
  language: sh
  code: |
    db.shutdownServer()
---
title: "Prepare a data directory for the new ``mongod`` running with WiredTiger."
ref: change-wt-repl-sync-wiredtiger-dir
pre: |
  Prepare a data directory for the new :program:`mongod` instance that
  will run with the WiredTiger storage engine. ``mongod`` must have read
  and write permissions for this directory. You can either delete the
  contents of the stopped secondary member's current data directory or
  create a new directory entirely.

  ``mongod`` with WiredTiger will not start with data files created with
  a different storage engine.
---
title: "Start ``mongod`` with WiredTiger."
ref: change-wt-repl-sync-start-mongod-w-wiredtiger
pre: |
  Start :program:`mongod`, specifying ``wiredTiger`` as the
  :option:`--storageEngine` and the prepared data directory for
  WiredTiger as the :option:`--dbpath`. Specify additional options as
  appropriate for this replica set member.
action:
  language: sh
  code: |
    mongod --storageEngine wiredTiger --dbpath <newWiredTigerDBPath> --replSet <replSetName>
post: |
  Since no data exists in the ``--dbpath``, the ``mongod`` will perform an
  :doc:`initial sync </tutorial/resync-replica-set-member>`. The length of the
  initial sync process depends on the size of the database and network
  connection between members of the replica set.

  .. include:: /includes/fact-storage-engine-configuration-file-setting.rst
---
title: "Repeat the procedure for other replica set secondaries you wish to upgrade."
ref: change-wt-repl-sync-repeat
pre: |
  Perform this procedure again for the rest of the :term:`secondary
  members <secondary>` of the replica set you wish to use the WiredTiger
  storage engine.
...
