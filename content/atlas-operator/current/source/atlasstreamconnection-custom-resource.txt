.. _atlasstreamconnection-custom-resource:

=========================================
``AtlasStreamConnection`` Custom Resource
=========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

The ``AtlasStreamConnection`` custom resource configures 
:atlas:`{+atlas-sp+} <what-is-atlas-sp>` :ref:`connections 
<ak8so-spi-connections>`. You can configure a sample connection, a 
connection to an {+service+} :manual:`change stream </changeStreams>`, 
or a connection to an {+kafka+} system.

.. _atlasstreamconnection-examples:

Examples
--------

The following examples add a connection to add to the Connections 
Registry of the stream processing workspace. To learn more, see 
:ref:`ak8so-stream-processing`.

Sample Connection
~~~~~~~~~~~~~~~~~

.. code-block:: yaml

   apiVersion: atlas.mongodb.com/v1
   kind: AtlasStreamConnection
   metadata:
     name: my-stream-connection
   spec:
     name: sample_stream_solar
   type: Sample

.. include:: /includes/fact-ak8so-atlas-sp-sample.rst

Change Stream Connection
~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: yaml

   apiVersion: atlas.mongodb.com/v1
   kind: AtlasStreamConnection
   metadata:
     name: my-stream-connection
   spec:
     name: my-stream-connection
     type: Cluster
     clusterConfig:
       name: my-cluster
       role:
         name: my-db-role
         type: CUSTOM 

Kafka Connection
~~~~~~~~~~~~~~~~

.. code-block:: yaml

   apiVersion: atlas.mongodb.com/v1
   kind: AtlasStreamConnection
   metadata:
     name: my-stream-connection
   spec:
     name: my-stream-connection
     type: Kafka
     kafkaConfig:
       bootstrapServers: "comma,separated,list,of,server,addresses"
       authentication:
         mechanism: SCRAM-512
         credentials:
           name: ref-to-creds-secret
           namespace: default
       security:
         protocol: SSL
         certificate:
           name: ref-to-certificate-secret
           namespace: default

.. _atlasstreamconnection-parameters:

Parameters
----------

.. include:: /includes/manual-crds/atlas-stream-connection.rst