====================
MongoDB Server Usage
====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This section describes how to manage your server types. You can group
virtual hosts into physical hosts and discover your current server
usage.

.. include:: /includes/api/base-api-uri.rst

Required Roles
--------------

The API Key requires the :authrole:`Global Owner` role to manage server usage.

Endpoints
---------

The following lists the endpoints available for the server usage
resource.

.. list-table::
   :header-rows: 1
   :widths: 10 30 60

   * - Method
     - Endpoint
     - Description

   * - ``POST``
     - :doc:`/usage/dailyCapture </reference/api/usage/generate-daily-usage-snapshot>`
     - Generates snapshot of usage for the processes |onprem| manages.

   * - ``GET``
     - :doc:`/usage/groups </reference/api/usage/get-all-physical-hosts>`
     - Retrieves a list of all physical and virtual hosts that |onprem|
       manages. This list includes each physical hosts' server type.

   * - ``GET``
     - :doc:`/usage/groups/{PHYSICAL-HOST-ID} </reference/api/usage/get-one-physical-host-by-host-id>`
     - Retrieves a list of all physical and virtual hosts that |onprem|
       manages identified with the physical host's ID. This list
       includes each physical host's server type.

   * - ``POST``
     - :doc:`/usage/groups </reference/api/usage/create-one-physical-host>`
     - Create one new physical host and bind one or more virtual hosts
       to that physical host.

   * - ``PUT``
     - :doc:`/usage/groups/{PHYSICAL-HOST-ID} </reference/api/usage/update-one-physical-host>`
     - Replace one physical host and its bindings to one or more
       virtual hosts.

   * - ``DELETE``
     - :doc:`/usage/groups/{PHYSICAL-HOST-ID} </reference/api/usage/remove-one-physical-host>`
     - Remove one physical host from |onprem|

.. class:: hidden

   .. toctree::
      :titlesonly:

      /reference/api/diagnostics/get-project-diagnostic-archive
      /reference/api/usage/generate-daily-usage-snapshot
      /reference/api/usage/get-all-physical-hosts
      /reference/api/usage/get-one-physical-host-by-host-id
      /reference/api/usage/create-one-physical-host
      /reference/api/usage/update-one-physical-host
      /reference/api/usage/remove-one-physical-host
