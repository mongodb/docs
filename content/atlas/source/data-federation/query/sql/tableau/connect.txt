.. _sql-connect-tableau:

====================
Connect from Tableau
====================

.. meta::
   :description: Connect to Atlas Data Federation with Tableau using the custom connector by following steps to download necessary drivers, obtain connection info, and configure Tableau.

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. |interface| replace:: SQL Interface

This page describes how to connect to either an {+service+} {+fdi+} or an on-premises MongoDB Enterprise database with Tableau (Desktop or Server) using the 
Tableau custom connector.

.. include:: includes/data-federation/sql-engine-mongodb-support.rst

Prerequisites
-------------

Before connecting with Tableau, ensure you have met the following prerequisites:

- An |service| {+fdi+} or a self-managed EA database.

- `Tableau <https://www.tableau.com/>`__ Desktop or Server. For Tableau Server,
  :manual:`SCRAM authentication </core/security-scram/>` is the only authentication
  mechanism supported at this time.

Procedure
---------

The procedure to connect to MongoDB with Tableau comprises the following steps:

Download the JDBC Driver and Tableau Connector
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. procedure::
   :style:  normal

   The procedure to connect to MongoDB with Tableau comprises the following steps:

   .. step:: Ensure you have enabled {+sql-interface+} for your cluster.

      See :ref:`<sql-get-started-quick>` for detailed instructions on enabling |service| SQL.

      See `On-Premise set up
      <https://www.mongodb.com/docs/atlas/data-federation/query/connect-with-sql-composable/?deployment-type=self&sql-driver=tableau&os=windows>`__
      for detailed instructions on how to enable the {+sql-interface+} for EA databases.

   .. step:: Download the MongoDB JDBC Driver.

      a. Download the latest :ref:`MongoDB JDBC Driver <sql-connect-jdbc>` version.

         .. note::
            
            See :ref:`Connect with JDBC Driver <sql-connect-jdbc>` for more 
            details on the MongoDB JDBC Driver.

      #. Move the downloaded  **ALL JAR**  file into the appropriate 
         directory for your operating system:

         .. list-table::
            :header-rows: 1
            :widths: 20 80
      
            * - Operating System
              - Folder Path
      
            * - Windows 
              - ``C:\Program Files\Tableau\Drivers``
      
            * - MacOS
              - ``~/Library/Tableau/Drivers``

            * - Linux
              - ``/opt/tableau/tableau_driver/jdbc``

   .. step:: Download and install the Tableau custom connector.

      a. Download `the Tableau taco file <https://www.mongodb.com/try/download/tableau-connector>`__
         for the latest version.

      #. Move the downloaded taco file into the appropriate 
         directory for your operating system:

         .. list-table::
            :header-rows: 1
            :widths: 20 80
      
            * - Operating System
              - Folder Path
      
            * - Windows 
              - ``C:\Users\<user>\Documents\My Tableau Repository\Connectors``
      
            * - MacOS
              - ``~/Documents/My Tableau Repository/Connectors``

            * - Linux
              - ``/opt/tableau/connectors``

      .. important:: Updating Your Connector

         If you download a new version of the Tableau custom connector, delete the old
         Tableau custom connector file from your Connectors directory to ensure that
         Tableau uses the latest version.

.. _sql-connect-tableau-get-info:

Get Your MongoDB Database Connection Information
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. tabs::

         .. tab:: Atlas
            :tabid: atlas

            Perform the following steps to get your MongoDB database connection information:

            .. procedure::
               :style:  normal

               .. step:: Go to your |service| {+fdi+} for your project.

               .. step:: Click the :guilabel:`Connect` button.

               .. step:: Select the :guilabel:`Atlas SQL Interface` option.

               .. step:: Select the :guilabel:`Tableau Connector` option under the :guilabel:`Select your driver` dropdown.

               .. step:: Select :guilabel:`Tableau` from the dropdown.

               .. step:: Select the datase you want to connect to from the :guilabel:`Database` dropdown.

               .. step:: Copy your connection string and connection parameters.

                  Use this information to connect with Tableau in the next section.

         .. tab:: EA Database
            :tabid: ea-database

            Use your connection string for {+mongosh+}.

 

Connect with Tableau 
~~~~~~~~~~~~~~~~~~~~

.. procedure::
   :style:  normal
   
   .. step:: Open Tableau Desktop or Tableau Server.

   .. step:: Navigate to the :guilabel:`Connect` menu.

   .. step:: Select :guilabel:`MongoDB SQL Interface by MongoDB Connector`.

      A connection modal displays.

   .. step:: Enter your database connection information:
      
      Enter your {+sql-interface+} connection string. See :ref:`<sql-connect-tableau-get-info>`
      for detailed instructions in getting your connection string.

   .. step:: Click :guilabel:`Sign In`.
