.. _mongodb-users:

=======================
Configure MongoDB Users
=======================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Create MongoDB users to provide clients access to the clusters in your
project. A MongoDB user's access is determined by the roles assigned to
the user. When you create a MongoDB user, the user is added to all
clusters in your |service| project.

MongoDB users are separate from |service| users. MongoDB users have
access to MongoDB databases, while |service| users have access to the
|service| application itself. |service| supports creating temporary
MongoDB users that automatically expire within a user-configurable
7-day period.

.. include:: /includes/fact-user-auditing.rst

The available |service|
:ref:`database user privileges <atlas-user-privileges>` support
a subset of MongoDB commands. See :ref:`paid-tier-command-limitations`
for more information.

.. include:: /includes/fact-database-user-limits.rst

.. important::

   |service| rolls back any user modifications not made through the UI
   or :doc:`API </reference/api/database-users>`. You must use the
   |service| UI or API to add, modify, or delete MongoDB users on
   |service| clusters.

.. _add-mongodb-users:

Add MongoDB Users
-----------------

.. include:: /includes/steps/add-users.rst

You can also add MongoDB users through the |service| API. See
:doc:`/reference/api/database-users-create-a-user`.

Modify MongoDB Users
--------------------

To modify existing users for an |service| project:

#. In the :guilabel:`Security` section in the left navigation,
   click :guilabel:`Database Access`. The :guilabel:`MongoDB Users` tab displays.

#. Click :icon-fa4:`pencil`
   :guilabel:`Edit` for the user you want to modify.
   You can modify the privileges assigned to the user and the user's
   password. For temporary users, you can also modify the time
   period the user exists or make the user a permanent user,
   provided the user's expiration date has not already passed.

   .. note::

      You cannot change a permanent user into a temporary user. If you
      change a temporary user into a permanent user, you cannot make it
      temporary again.

#. Click :guilabel:`Update User` to save the changes.

You can also modify existing users through the |service| API. See
:doc:`/reference/api/database-users-update-a-user`.

Delete MongoDB Users
--------------------

To delete existing users for an |service| project:

#. In the :guilabel:`Security` section in the left navigation, click
   :guilabel:`Database Access`. The :guilabel:`MongoDB Users` tab
   displays.

#. Click :icon-fa4:`trash-o` :guilabel:`Delete` next to the user you
   want to delete.

#. Click :guilabel:`Delete` again to confirm.

You can also delete existing users through the |service| API. See
:doc:`/reference/api/database-users-delete-a-user`.

.. _atlas-user-privileges:

MongoDB Database User Privileges
--------------------------------

The following table describes the |service| Database User Privileges
and the MongoDB
:manual:`Built-in Roles </core/security-built-in-roles>` or
:manual:`privilege actions </reference/privilege-actions>` they
represent.

.. admonition:: Protected MongoDB Database Namespaces
   :class: note

   The following databases are read-only for *all* users, including
   those with the :authrole:`readWriteAnyDatabase` role.

   - ``admin``
   - ``local``
   - ``config``

.. list-table::
   :header-rows: 1

   * - User Privilege
     - MongoDB Role
     - Inherited Roles or Privileges

   * - .. atlasrole:: Atlas admin
     - .. atlasrole:: atlasAdmin
     -
       - :authrole:`readWriteAnyDatabase`
       - :authrole:`readAnyDatabase`
       - :authrole:`dbAdminAnyDatabase`
       - :authrole:`clusterMonitor`
       - :authaction:`cleanupOrphaned`
       - :authaction:`enableSharding`
       - :authaction:`flushRouterConfig`
       - :authaction:`moveChunk`
       - :authaction:`splitChunk`
       - :authaction:`viewUser`

   * - .. atlasrole:: Read and write to any database
     - .. atlasrole:: readWriteAnyDatabase
     -
       - :authrole:`readWriteAnyDatabase`

   * - .. atlasrole:: Only read any database
     - .. atlasrole:: readAnyDatabase
     -
       - :authrole:`readAnyDatabase`

See :ref:`paid-tier-command-limitations`
for more information on common commands not supported by the
current |service| user privileges.
