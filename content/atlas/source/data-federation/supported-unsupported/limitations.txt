.. _df-limitations:

====================================
{+adf+} Limitations
====================================

.. meta::
   :description: Understand the limitations of Data Federation, including unsupported features like creating indexes and querying documents larger than 16MB.

.. default-domain:: mongodb

.. facet::
   :name: genre
   :values: reference

This page consolidates {+adf+} limitations and operational behaviors with detailed guidance on connections, performance, 
and provider-specific recommendations.

.. important::
   Atlas Online Archive depends on Atlas Data Federation. For limitations specific to Online Archive, see :ref:`online-archive-limitations`.

General Limitations
-------------------

Unsupported Features
~~~~~~~~~~~~~~~~~~~~

- You cannot create indexes on federated data sources.
- Supported authentication methods are limited to :ref:`SCRAM
  <authentication-scram>`, :manual:`X.509 Certificates
  </core/security-x.509/>`, :ref:`OIDC
  <oidc-authentication-authorization>`, and :ref:`AWS IAM
  <set-up-pwdless-auth>` .
- Atlas monitoring tools do not cover Federated Database Instances.
- The {+fdi+} can use object storage from only *one cloud provider* and from only *one account* within that provider.
- Change streams and multi-document ACID transactions are not supported on federated sources.

Document Size and Result Ordering
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- Federated database instances don't support documents larger than 16 MB.
- Returned document order is not guaranteed unless enforced (for example, with ``$sort``).

Source and Region Considerations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- Each {+fdi+} runs in a specific cloud and region.
- Archived data stays in the provider's private network.  
- Object storage sources are *read-only*.

Connection Limits and Concurrency
---------------------------------

Client Connections per Region
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- Up to *120 guaranteed simultaneous client connections* per region are supported.  

Concurrent Queries
~~~~~~~~~~~~~~~~~~

- Running more than *30 simultaneous queries* on an {+fdi+} is not supported.  

.. include:: /includes/data-federation/fact-currentop-query-caveat.rst

Query Timeout
~~~~~~~~~~~~~
Queries sent to MongoDB {+adf+} have a time limit of 6 hours. If 
:ref:`maxTimeMS<atlas-ui-query-bar-max-time-ms>` is set up, then the query 
timeout should be the minimum of the these two values, for 
example: ``min(maxTimeMS, 6 hours)``.



Instance Count per Project
~~~~~~~~~~~~~~~~~~~~~~~~~~

- Each project supports up to *25 {+fdi+}s* by default. 
- Contact your product representative to increase the limit to up to *100 {+fdi+}s*

Provider-Specific Recomendations
--------------------------------

.. tabs::

   .. tab:: AWS
      :tabid: aws

      .. list-table::
         :widths: 75 25
         :header-rows: 1

        * - Supported storage 

          - Amazon S3
  
   .. tab:: Microsoft Azure
      :tabid: azure

      .. list-table::
         :widths: 75 25
         :header-rows: 1

        * - Supported storage

          - Blob Storage

   .. tab:: Google Cloud
      :tabid: gcp

      .. list-table::
         :widths: 75 25
         :header-rows: 1

        * - Supported storage

          - Google Cloud Storage.