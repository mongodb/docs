===========================
Enable SSL for a Deployment
===========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

For |mms| to monitor, deploy, or back up a MongoDB deployment that uses
|tls-ssl|, you must enable |tls-ssl| for the |mms| project.

Considerations
--------------

Topics Not in Scope
~~~~~~~~~~~~~~~~~~~

.. include:: /includes/fact-out-of-scope-ssl-certs.rst

.. only:: onprem

   Monitoring and {+bagent+}s with |tls-ssl|
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

   Starting with |onprem| 1.8, |mms| automatically configures the
   Monitoring and {+bagent+}s to connect to the managed deployment
   over |tls-ssl| when you activate |tls-ssl| for the |mms| project.
   You do not need to manually configure the agents' |tls-ssl| settings.

   If you are not using automation for a deployment, you can still
   configure the monitoring and {+bagent+}s manually. To learn how to 
   configure these agents, see
   :doc:`/tutorial/configure-monitoring-agent-for-ssl` and
   :doc:`/tutorial/configure-backup-agent-for-ssl`.

MongoDB 2.6 Supports |tls-ssl| in Enterprise Only
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To enable |tls-ssl| for a deployment in MongoDB 2.6 and earlier, you
must use the MongoDB Enterprise Edition or create a custom build with
|tls-ssl| enabled. To configure the available MongoDB versions for your
|mms| project, see :doc:`/tutorial/configure-available-mongodb-version`.

.. include:: /includes/note-reset-auth.rst

Procedures
----------

.. important::
   You must complete:

   1. :ref:`Set Existing Deployments to Use TLS/SSL <set-existing-ssl>`, 
      then 
   2. :ref:`Enable SSL for the Project <set-project-ssl>` 

   before you click :guilabel:`Review & Deploy`.

.. _set-existing-ssl:

Set Existing Deployments to Use |tls-ssl|
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. only:: onprem

   .. admonition:: Changed in |onprem| 2.0.3
      :class: note

      Prior to |onprem| version 2.0.3, if you enabled |tls-ssl| on a 
      project, all |mms|-managed MongoDB deployments in that project 
      had to use |tls-ssl|. With the 
      :guilabel:`Client Certificate Mode` setting introduced in 2.0.3, 
      you can set |tls-ssl| certificates as optional *or* required for 
      deployments in your project.

If you wish to enable |tls-ssl| for existing MongoDB deployments in 
your |mms| project:

.. include:: /includes/steps/enable-ssl-for-existing-deployment.rst

.. _set-project-ssl:

Enable |tls-ssl| for the Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Before using |tls-ssl| in a deployment, you must enable |tls-ssl| for
the project. You can set |tls-ssl| as optional *or* required
for every deployment in the project.

.. include:: /includes/steps/enable-ssl-for-group.rst
