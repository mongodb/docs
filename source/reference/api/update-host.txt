=============
Update a Host
=============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/fact-groups-projects-synonyms.rst

Update the configuration of a monitored MongoDB process.

.. include:: /includes/api/base-api-uri.rst

Resource
--------

.. code-block:: http

   PATCH /groups/{GROUP-ID}/hosts/{HOST-ID}

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1

   * - Parameter
     - Required/Optional
     - Description

   * - ``GROUP-ID``
     - Required
     - ID of the group that owns this MongoDB process.

   * - ``HOST-ID``
     - Required
     - ID of the host for the MongoDB process.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/api/no-query-parameters.rst

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :widths: 10 10 80
   :header-rows: 1

   * - Name
     - Type
     - Description

   * - ``username``
     - string
     - Username for connecting to this MongoDB process. Only present
       when the ``authMechanismName`` is ``SCRAM-SHA-1``.

   * - ``password``
     - string
     - Password for connecting to this MongoDB process. If the process's
       ``authMechanismName`` is ``SCRAM-SHA-1``, then you must include
       this field when creating the process or updating its credentials.
       However, it will never be exposed when a host entity is returned.

   * - ``sslEnabled``
     - boolean
     - Is SSL enabled for this MongoDB process? Must be ``true`` if the
       ``authMechanismName`` is ``MONGODB_X509``.

   * - ``logsEnabled``
     - boolean
     - Is |mms| collecting logs for this MongoDB process?

   * - ``alertsEnabled``
     - boolean
     - Are alerts enabled for this MongoDB process?

   * - ``profilerEnabled``
     - boolean
     - Is |mms| collecting profile information from this MongoDB
       process?

   * - ``muninPort``
     - number
     - What port should be used to collect Munin stats from this MongoDB
       process?

   * - ``authMechanismName``
     - string
     - The authentication mechanism used to connect to this MongoDB
       process. Possible values are:

       .. include:: /includes/possibleValues-api-authMechanismName.rst

If ``authMechanismName`` is ``NONE`` then any existing value for
``username`` and ``password`` will be cleared out. If
``authMechanismName`` is ``SCRAM-SHA-1``, then you must provide both
the ``username`` and ``password``.

Response Elements
-----------------

.. include:: /includes/extracts/api-hosts-response-elements.rst

Example Request
---------------

.. only:: cloud

   .. cssclass:: copyable-code
   .. code-block:: sh

      curl --user "{USERNAME}:{APIKEY}" --digest \
       --header "Accept: application/json" \
       --header "Content-Type: application/json" \
       --include \
       --request PATCH "https://cloud.mongodb.com/api/public/v1.0/groups/{GROUP-ID}/hosts/{HOST-ID}?pretty=true" \
       --data '
        {
          "sslEnabled": true,
          "username": "mongo",
          "password": "M0ng0DB!:)"
        }'

.. only:: onprem

   .. cssclass:: copyable-code
   .. code-block:: sh

      curl --user "{USERNAME}:{APIKEY}" --digest \
       --header "Accept: application/json" \
       --header "Content-Type: application/json" \
       --include \
       --request PATCH "https://{OPSMANAGER-HOST}:{PORT}/api/public/v1.0/groups/{GROUP-ID}/hosts/{HOST-ID}?pretty=true" \
       --data '
        {
          "sslEnabled": true,
          "username": "mongo",
          "password": "M0ng0DB!:)"
        }'

Example Response
----------------

Response Header
~~~~~~~~~~~~~~~

.. include:: /includes/api/api-headers/401.rst

.. include:: /includes/api/api-headers/200.rst

Response Body
~~~~~~~~~~~~~

.. only:: cloud

   .. code-block:: json
      :linenos:

      {
        "alertsEnabled" : true,
        "authMechanismName" : "SCRAM-SHA-1",
        "clusterId" : "{CLUSTER-ID}",
        "created" : "2014-04-22T19:56:50Z",
        "deactivated" : false,
        "groupId" : "{GROUP-ID}",
        "hasStartupWarnings" : false,
        "hidden" : false,
        "hostEnabled" : true,
        "hostname" : "{HOSTNAME}",
        "id" : "{HOST-ID}",
        "ipAddress": "{IP-ADDRESS}",
        "journalingEnabled" : false,
        "lastDataSizeBytes" : 470208719,
        "lastIndexSizeBytes" : 110420592,
        "lastPing" : "2016-08-15T17:57:12Z",
        "links" : [  ]
        "logsEnabled" : false,
        "lowUlimit" : false,
        "muninEnabled" : false,
        "port" : 26000,
        "profilerEnabled" : false,
        "replicaSetName": "rs1",
        "replicaStateName" : "SECONDARY",
        "sslEnabled" : true,
        "typeName": "REPLICA_SECONDARY",
        "uptimeMsec": 489182394,
        "username" : "{USERNAME}",
        "version" : "3.2.0",
      }
