.. _using-refs-within-composable-tutorials:

Using Refs within Composable Tutorials
--------------------------------------

Refs are meant to be used as links in other parts of the content
to a specific part of a page.
Since composable tutorials are meant to be used as a single page,
the refs should be unique within the composable tutorial.
This means that the same ref should not be used in multiple selected contents.

You can define refs in composable tutorials for other parts of documentation.
Since each selected content is referring to the same includes file, 
you would add a unique ref to the selected content.

In the following example, each selected content is refers to the same includes file,
but we add a unique ref to the selected content to make the refs unique.


.. code-block:: rst

   .. composable-tutorial::
      :options: deployment-type, cluster-topology
      :defaults: atlas, standalone

      How to Create a Composable Tutorial
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

      .. include:: /includes/composable-tutorials/subtitle.rst

      .. selected-content::
          :selections: atlas, standalone

          .. _atlas-standalone:

          .. include:: /includes/composable-tutorials/repeated-content.rst

      .. selected-content::
          :selections: self, standalone

          .. _self-standalone:

          .. include:: /includes/composable-tutorials/repeated-content.rst

      .. selected-content::
          :selections: atlas, repl

          .. _atlas-repl:

          .. include:: /includes/composable-tutorials/repeated-content.rst

      .. selected-content::
          :selections: self, repl

          .. _self-repl:

          .. include:: /includes/composable-tutorials/repeated-content.rst

with the includes file of:

.. code-block:: rst

   Repeated Content
   ----------------

  ...

This will render the following content:

.. composable-tutorial::
  :options: deployment-type, cluster-topology
  :defaults: atlas, standalone

  How to Create a Composable Tutorial
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  .. include:: /includes/composable-tutorials/subtitle.rst

  .. selected-content::
    :selections: atlas, standalone

    .. _atlas-standalone:

    .. include:: /includes/composable-tutorials/repeated-content.rst

  .. selected-content::
    :selections: self, standalone

    .. _self-standalone:

    .. include:: /includes/composable-tutorials/repeated-content.rst

  .. selected-content::
    :selections: atlas, repl

    .. _atlas-repl:
    
    .. include:: /includes/composable-tutorials/repeated-content.rst

  .. selected-content::
    :selections: self, repl

    .. _self-repl:

    .. include:: /includes/composable-tutorials/repeated-content.rst

You must use the refs in the selected content to refer to other content in the same document. 
:ref:`:ref:This link to self-repl <self-repl>` will refer to the content under the ``self, repl`` selection.

Do not specify reference anchors in the include 
file. When the include is called in multiple locations, this practice 
would lead to ambiguous target build errors.
