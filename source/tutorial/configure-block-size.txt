====================================
Configure Block Size in a Blockstore
====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. admonition:: Block size changes trigger a full backup
   :class: important

   If you change the block size, the next backup job runs as a full
   backup rather than an incremental backup.

When you back up your deployment to a
:term:`Blockstores <Backup Blockstore Database>`, the
:term:`Backup Daemon` first takes a snapshot of the
:term:`head database`. It then breaks this snapshot into
:term:`blocks <block>` and writes these blocks to the blockstore.

The different blockstores have different default sizes and ranges of
sizes for blocks.

.. list-table::
   :widths: 20 40 40
   :header-rows: 1
   :stub-columns: 1

   * - Blockstore Type
     - Block Size Range
     - Default Size
   * - MongoDB
     - 64 KB to 15 MB
     - 64 KB
   * - S3
     - 64 KB to 16 MB
     - 16 MB

You can change the block size to suit your use case.

Considerations
--------------

In general, increasing block size results in faster snapshots and
restores, but requires more disk space. These competing factors should
be considered when determining if you wish to tune the block size.

There are two exceptions where performance improves as the
block size increases *without* requiring additional disk space:

.. list-table::
   :widths: 30 70
   :header-rows: 1

   * - Workload

     - Impact

   * - Update- and Delete-Intensive

     - No matter how small you make the block size, the entire block
       file is rewritten. Since the entire file is always rewritten,
       there is no difference in storage space if you change the block
       size.

   * - Insert-only

     - The existing blocks never change. As you increase block size,
       block management is simplified. This enables the best possible
       performance on snapshot and restore.

Procedure
---------

.. include:: /includes/steps/adjust-block-size.rst
