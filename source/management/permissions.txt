===========================
Authentication Requirements
===========================

.. default-domain:: mongodb

|mms| requires elevated privileges to collect complete data from
MongoDB 2.4 instances with authentication
enabled.

The following table lists the commands needed to grant the required
permissions to the ``agent`` user.  For an explanation of what each
privilege role means, see: `User Privilege Roles in MongoDB 
<http://docs.mongodb.org/manual/reference/user-privileges/>`_.

.. important:: 

   To properly configure the ``agent`` user on a sharded cluster, you
   must create the user on the :program:`mongos` **and** on each
   shard's replica set :manual:`primary </core/replica-set-primary>`.

   This creates a local admin database with local credentials for each
   shard. See :manual:`/core/sharded-cluster-security` for a detailed
   discussion of access control privileges in sharded clusters.

.. only:: saas

   .. include:: /includes/table-mms-auth-roles-saas.rst 

.. only:: hosted

   .. include:: /includes/table-mms-auth-roles-hosted.rst

   There are additional authentication configuration requirements for
   the On-Prem Monitoring server when using MongoDB 2.4 with
   authentication. See: :doc:`/tutorial/use-auth-with-backup-agent`
   for more information.

