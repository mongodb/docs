.. _sort-tutorial:

==============================
How to Sort Your |fts| Results
==============================

.. default-domain:: mongodb

.. meta::
   :keywords: atlas search, sort your results, sort for speed, sort for precision, sort for speed and precision, search scoring, compound operator, compound search queries, $search sort option, atlas search sort option, facet search and sort 
   :description: Learn how to sort your Atlas Search results in ascending or descending order.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

This tutorial describes how to :ref:`sort <sort-ref>` the |fts| results
by numeric, date, and string fields in the ``sample_mflix.movies``
collection in ascending or descending order. The tutorial takes you
through the following steps:  

1. Create an |fts| index on the string field named ``title``, date
   field named ``released``, and numeric field named ``awards.wins`` in
   the ``sample_mflix.movies`` collection for both running queries
   against these fields and sorting the results by these fields.

   .. note:: 

      If you enable :ref:`dynamic mappings <static-dynamic-mappings>`,
      |fts| automatically indexes :ref:`number <bson-data-types-number>`
      and :ref:`date <bson-data-types-date>` types for sorting. 
      It doesn't dynamically index :ref:`string
      <bson-data-types-string>` fields for sorting. Instead, you must
      use the :ref:`token <bson-data-types-token>` type to index string
      fields for sorting. 

#. Run |fts| queries against the ``title``, ``released``, and
   ``awards.wins`` fields in the ``sample_mflix.movies`` collection and
   sort the results in ascending and descending order by these fields.

Before you begin, ensure that your |service| cluster meets the 
requirements described in the :ref:`fts-tutorials-prereqs`.

.. include:: /includes/atlas-roles/create-search-index.rst

Create the |fts| Index 
----------------------

Overview 
~~~~~~~~

In this section, you will create an |fts| index on the ``title``, 
``released``, and ``awards.wins`` fields in the ``sample_mflix.movies`` 
collection for running queries against these fields and sorting the
results by these fields. 

Procedure 
~~~~~~~~~

.. include:: /includes/steps/fts-sort-create-index.rst

Sort Your Search Results
------------------------

You can sort your search results in multiple ways. In this section, you
connect to your |service| {+cluster+} and then run the sample queries
against the indexed fields in the ``sample_mflix.movies`` collection.
The :pipeline:`$search` stage in the sample queries use the ``sort``
option to sort the |fts| results by the indexed number, date, and string
fields. 

----------

.. |arrow| unicode:: U+27A4

|arrow| Use the **Select your language** drop-down menu to set the
language of the example in this section.

----------

.. tabs-selector:: drivers

Sort Numbers
~~~~~~~~~~~~

.. tabs-drivers::

   .. tab:: 
      :tabid: atlas-ui

      .. include:: /includes/steps/fts-tutorial-sort-numbers-run-query-atlas-ui.rst

   .. tab:: 
      :tabid: shell

      .. include:: /includes/steps/fts-tutorial-sort-numbers-run-query-shell.rst  

   .. tab:: 
      :tabid: compass

      .. include:: /includes/steps/fts-tutorial-sort-numbers-run-query-compass.rst
   
   .. tab:: 
      :tabid: csharp

      .. include:: /includes/steps/fts-tutorial-sort-numbers-run-query-cs.rst
   
   .. tab:: 
      :tabid: nodejs

      .. include:: /includes/steps-fts-tutorial-sort-numbers-run-query-nodejs.txt

   .. tab:: 
      :tabid: java-sync

      .. include:: /includes/steps/fts-tutorial-sort-numbers-run-query-java.rst
   
   .. tab:: 
      :tabid: go

      .. include:: /includes/steps-fts-tutorial-sort-numbers-run-query-go.txt 

   .. tab:: 
      :tabid: python

      .. include:: /includes/steps-fts-tutorial-sort-numbers-run-query-python.txt

Sort Dates
~~~~~~~~~~

.. tabs-drivers::

   .. tab:: 
      :tabid: atlas-ui

      .. include:: /includes/steps/fts-sort-date-tutorial-run-query-atlas-ui.rst

   .. tab:: 
      :tabid: shell

      .. include:: /includes/steps/fts-sort-date-tutorial-run-query-shell.rst

   .. tab:: 
      :tabid: compass

      .. include:: /includes/steps/fts-sort-date-tutorial-run-query-compass.rst

   .. tab:: 
      :tabid: csharp

      .. include:: /includes/steps/fts-sort-date-tutorial-run-query-cs.rst

   .. tab:: 
      :tabid: nodejs

      .. include:: /includes/steps-fts-sort-date-tutorial-run-query-nodejs.txt

   .. tab:: 
      :tabid: java-sync

      .. include:: /includes/steps/fts-sort-date-tutorial-run-query-java.rst
   
   .. tab:: 
      :tabid: go

      .. include:: /includes/steps-fts-sort-date-tutorial-run-query-go.txt

   .. tab:: 
      :tabid: python

      .. include:: /includes/steps-fts-sort-date-tutorial-run-query-python.txt

Sort Strings
~~~~~~~~~~~~

.. tabs-drivers::

   .. tab:: 
      :tabid: atlas-ui

      .. include:: /includes/steps/fts-sort-string-tutorial-run-query-atlas-ui.rst

   .. tab:: 
      :tabid: shell

      .. include:: /includes/steps/fts-sort-string-tutorial-run-query-shell.rst 

   .. tab:: 
      :tabid: compass

      .. include:: /includes/steps/fts-sort-string-tutorial-run-query-compass.rst
   
   .. tab:: 
      :tabid: csharp

      .. include:: /includes/steps/fts-sort-string-tutorial-run-query-cs.rst

   .. tab:: 
      :tabid: nodejs

      .. include:: /includes/steps-fts-sort-string-tutorial-run-query-nodejs.txt

   .. tab:: 
      :tabid: java-sync

      .. include:: /includes/steps/fts-sort-string-tutorial-run-query-java.rst
   
   .. tab:: 
      :tabid: go

      .. include:: /includes/steps-fts-sort-string-tutorial-run-query-go.txt

   .. tab:: 
      :tabid: python

      .. include:: /includes/steps-fts-sort-string-tutorial-run-query-python.txt
