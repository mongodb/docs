.. meta::
   :keywords: code example

.. _null-check-tutorial:

====================================================
How to Check for Null and Non-Null Values with |fts|
====================================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial describes how to use |fts| queries to
check your data for ``null`` or non-``null`` values. It takes you 
through the following steps:

- Load sample documents with ``null`` values and missing fields into the 
  ``sample_mflix.users`` collection.

- Set up an |fts| index with :ref:`dynamic mapping <static-dynamic-mappings>` 
  for the ``sample_mflix.users`` collection.

- Run an |fts| query to find all documents with ``null`` values for the 
  ``password`` field in the ``sample_mflix.users`` collection.

  .. note:: 
   
     To successfully check for ``null`` values, the field that you 
     are querying can't have polymorphic data. In this example, all 
     documents in the ``sample_mflix.users`` collection have the 
     ``string`` data type for the ``password`` field.   

- Run an |fts| query to find all documents that don't contain ``null`` values 
  for the ``password`` field in the ``sample_mflix.users`` collection.

Before you begin, ensure that your |service| cluster meets the requirements 
described in the :ref:`Prerequisites <fts-tutorials-prereqs>`.

.. include:: /includes/atlas-roles/create-search-index.rst

Insert Sample Data
------------------

In this section, you add sample documents that contain ``null`` values and 
missing fields to the ``sample_mflix.users`` collection. These additional 
documents allow you to successfully run the sample queries for ``null``
and non-``null`` values in this tutorial.

.. include:: /includes/steps-fts-nullcheck-tutorial-sample-data.rst

Create an |fts| Index with Dynamic Mapping 
------------------------------------------

In this section, you create an |fts| index that uses :ref:`dynamic mapping 
<static-dynamic-mappings>`  to automatically index all the :ref:`dynamically 
indexable <bson-data-chart>` fields in the ``sample_mflix.users`` collection. 

.. include:: /includes/steps/fts-nullcheck-tutorial-create-index.rst

.. _isnull-check-query:

Check for ``null`` Values
-------------------------

----------

.. |arrow| unicode:: U+27A4

|arrow| Use the **Select your language** drop-down menu to set the 
language of the example on this page.

----------

.. tabs-selector:: drivers

After setting up the |fts| index, you can connect to your |service| cluster 
and run queries against fields in the ``sample_mflix.users`` collection.
The following query uses the :ref:`compound-ref` and :ref:`wildcard-ref` 
operators to find all documents that have a ``password`` field with a 
``null`` value.

.. note:: 

   We don't recommend using the :ref:`wildcard-ref` operator to query on
   collections with large index sizes. To learn more and vote for |fts| 
   enhancements to support indexing and querying for null datatype, use
   the `MongoDB Feedback Engine <https://feedback.mongodb.com/forums/924868-atlas-search/suggestions/44145042-allow-indexing-and-querying-for-null-datatype-in-a>`__.

.. tabs-drivers:: 

   .. tab::
      :tabid: atlas-ui 

      .. include:: /includes/steps/fts-isnull-tutorial-atlas-ui.rst

   .. tab:: 
      :tabid: shell
      
      .. include:: /includes/steps/fts-isnull-tutorial-shell.rst

   .. tab::
      :tabid: compass

      .. include:: /includes/steps/fts-isnull-tutorial-compass.rst

   .. tab::
      :tabid: csharp

      .. include:: /includes/steps/fts-isnull-tutorial-csharp.rst

   .. tab:: 
      :tabid: go

      .. include:: /includes/steps/fts-isnull-tutorial-go.rst

   .. tab:: 
      :tabid: java-sync 

      .. include:: /includes/steps/fts-isnull-tutorial-java.rst

   .. tab:: 
      :tabid: kotlin-coroutine

      .. include:: /includes/steps/fts-isnull-tutorial-kotlin.rst

   .. tab::
      :tabid: nodejs

      .. include:: /includes/steps/fts-isnull-tutorial-nodejs.rst

   .. tab::
      :tabid: python

      .. include:: /includes/steps/fts-isnull-tutorial-python.rst

|fts| returns one document with a ``password`` value that is ``null``. 
|fts| doesn't include documents that are missing the ``password`` field 
because the query specifies that the ``password`` field must exist.

Find All Non-``null`` Values
----------------------------

----------

|arrow| Use the **Select your language** drop-down menu to set the 
language of the example on this page.

----------

After setting up the |fts| index, you can connect to your |service| cluster 
and run queries against fields in the ``sample_mflix.users`` collection.
The following query uses the :ref:`compound-ref` and :ref:`wildcard-ref` 
operators to find documents that don't have a ``null`` value in the 
``password`` field or don't have the ``password`` field.

.. tabs-drivers:: 

   .. tab::
      :tabid: atlas-ui 

      .. include:: /includes/steps/fts-not-null-tutorial-atlas-ui.rst

   .. tab:: 
      :tabid: shell
      
      .. include:: /includes/steps/fts-not-null-tutorial-shell.rst

   .. tab::
      :tabid: compass

      .. include:: /includes/steps/fts-not-null-tutorial-compass.rst

   .. tab::
      :tabid: csharp

      .. include:: /includes/steps/fts-not-null-tutorial-csharp.rst

   .. tab:: 
      :tabid: go

      .. include:: /includes/steps/fts-not-null-tutorial-go.rst

   .. tab:: 
      :tabid: java-sync 

      .. include:: /includes/steps/fts-not-null-tutorial-java.rst

   .. tab:: 
      :tabid: kotlin-coroutine

      .. include:: /includes/steps/fts-not-null-tutorial-kotlin.rst

   .. tab::
      :tabid: nodejs

      .. include:: /includes/steps/fts-not-null-tutorial-nodejs.rst

   .. tab::
      :tabid: python

      .. include:: /includes/steps/fts-not-null-tutorial-python.rst

|fts| returns documents with ``password`` values that are not
``null``. The first document listed in the results has a higher score
because the ``constant`` option alters the score for documents with a
missing ``password`` field.
