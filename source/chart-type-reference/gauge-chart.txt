.. _gauge-chart-ref:

===========
Gauge Chart
===========

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/gauge-blurb.rst

Gauge Chart Encoding Channels
-----------------------------

Gauge charts provide the following :ref:`encoding channels
<encoding-channels>`:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Encoding Channel
     - Description

   * - Value
     - The data value for the chart. Each gauge chart can have only one
       data value. *Required*

   * - Target
     - A specific value of importance to the chart, such as a sales quota
       or maximum capacity level. If no maximum value for the chart is set,
       the :guilabel:`Target` value serves as the upper limit for the chart.
       See :ref:`Target and Maximum Interaction <target-max>` for more
       information on how the maximum range of the gauge is determined.

       If you wish to set a specific value as the chart target, you can
       create a :ref:`calculated field <calculated-fields>`, assign it
       your desired value, and encode it in the :guilabel:`Target` channel.

       .. note::

          The :guilabel:`Target` channel is an aggregation. To set a specific
          arbitrary value, set your calculated field to a constant value and
          choose either :guilabel:`Max` or :guilabel:`Min` from the
          :guilabel:`Aggregate` dropdown menu.  

Cutomization Options
--------------------

To access the customization options, click the :guilabel:`Customize` tab
above the encoding channels in the Chart Builder.

.. figure:: /images/charts/customize-tab.png
   :figwidth: 252
   :alt: Customization tab

General Customization
~~~~~~~~~~~~~~~~~~~~~

- :guilabel:`Custom Color Palette`
  
  Off by default. Toggle on to enable. Only the first palette color is used by
  gauge charts.

- :guilabel:`Value Label`

  Off by default. Toggle on to enable. Controls whether a label is displayed
  above the :guilabel:`Value` number.

- :guilabel:`Max/Min Values`

  On by default. Controls whether the minimum and maximum range
  numbers are displayed at the left and right edges of the chart. 

- :guilabel:`Target Label & Value`

  Off by default. Toggle on to enable. Controls whether the :guilabel:`Target`
  value and its label are displayed at the bottom of the chart.

Value Axis
~~~~~~~~~~

- :guilabel:`Maximum`

  Off by default. Toggle on to enable. Specifies the maximum range of the
  gauge when enabled. See :ref:`Target and Maximum Interaction <target-max>`
  for more information on how the maximum range of the gauge is determined.

- :guilabel:`Minimum`

  Off by default. Toggle on to enable. Specifies the minimum range of the
  gauge when enabled. Defaults to ``0``.

Value Field
~~~~~~~~~~~

- :guilabel:`Label Override`

  Off by default. Toggle on to enable. When enabled, displays a custom
  label for the :guilabel:`Value` number if the :guilabel:`Value Label`
  option is also enabled. Displays a custom label for the Value Field tooltips.

- :guilabel:`Number Formatting`

  Controls formatting of the large value in the chart, the tooltips,
  and the min/max labels.

Target Field
~~~~~~~~~~~~

- :guilabel:`Label Override`

  Off by default. Toggle on to enable. When enabled, displays a custom
  label for the :guilabel:`Target` value if the :guilabel:`Target Label
  & Value` option is also enabled. Displays a custom label for the Target
  Field tooltips.

- :guilabel:`Number Formatting`

  Controls formatting of the Target value if it is displayed under the
  chart.

.. _target-max:

Target and Maximum Interaction
------------------------------

The value encoded in the :guilabel:`Target` channel and the
:guilabel:`Maximum` customization affect each others' behavior. The
followling table explains the effect on the chart of having one, both,
or neither of the values set.

.. list-table::
   :header-rows: 1
   :widths: 20 20 60

   * - Target
     - Maximum
     - Behavior

   * - None
     - Default
     - No target line. Gauge maximum is the next power of 10 above the value
       of the Value channel.

   * - None
     - Custom
     - No target line. Gauge maximum is the specified value.

   * - Encoded
     - Default
     - Target line is rendered. Gauge maximum matches the target value. 

   * - Encoded
     - Custom
     - Target line is rendered. Gauge maximum is the specified value.

Use Cases
---------

Gauge charts are useful for displaying a data value represented as a fraction
of a larger value. Gauge charts are a familiar way to represent a situation in 
which a container may be either full or empty or somewhere in between.

Consider using gauge charts to represent:

- Occupancy rates in a hotel

- Progress towards a fundraising goal

- The water level in a reservoir

Example
-------

The following chart shows progress towards a goal. A clothing retailer has
a goal of selling 100 green shirts per month.

.. figure:: /images/charts/gauge-chart-example.png
   :figwidth: 600
   :alt: Gauge chart example
   
This chart uses a filter to find sales order documents in which the ``item``
field is ``shirt`` and the ``color`` field is ``green``. The ``qty`` field is
encoded in the :guilabel:`Value` channel to a get an aggregated total.

The 100-shirt goal is a constant value, so the chart uses a :ref:`calculated
field <calculated-fields>` named ``target`` with a value of ``100`` encoded in the
:guilabel:`Target` channel.
