.. _kotlin-scram-sha-256:
.. _default-auth-mechanism:
.. _scram-sha-256-auth-mechanism:

====================
SCRAM Authentication
====================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: salt, default, code example, authorize

Overview
--------

**Salted Challenge Response Authentication Mechanism (SCRAM)** is a family of
authentication mechanisms that use a challenge-response mechanism to authenticate
the user. SCRAM-SHA-256, which uses the SHA-256 algorithm to hash your password, is the
default authentication mechanism in {+mdb-server+} version 4.0
and later.

You can use SCRAM to authenticate to MongoDB Atlas, MongoDB
Enterprise Advanced, and MongoDB Community Edition.

.. tip:: SCRAM Mechanisms

   To learn more about the SCRAM family of authentication mechanisms, see
   `RFC 5802 <https://tools.ietf.org/html/rfc5802>`__ and
   :wikipedia:`Salted Challenge Response Authentication Mechanism <Salted_Challenge_Response_Authentication_Mechanism>`
   on Wikipedia.

   For more information about the MongoDB implementation of SCRAM, see
   :manual:`SCRAM </core/security-scram>` in the {+mdb-server+}
   manual.
   

Code Placeholders
~~~~~~~~~~~~~~~~~

The code examples on this page use the following placeholders:

* ``db_username`` - your MongoDB database username.
* ``db_password`` - your MongoDB database user's password.
* ``hostname`` - network address of your MongoDB server, accessible by your client.
* ``port`` - port number of your MongoDB server.
* ``authenticationDb`` - MongoDB database that contains your user's
  authentication data. If you omit this parameter, the driver uses the
  default value ``admin``.

To use the code examples on this page, replace these placeholders with
your own values.

Authenticate with SCRAM-SHA-256
-------------------------------

Select the :guilabel:`Connection String` or the :guilabel:`MongoCredential`
tab below for instructions and sample code to specify the SCRAM-SHA-256
authentication mechanism.

.. tabs::

   .. tab::
      :tabid: Connection String

      To specify the default authentication mechanism by using a connection
      string, omit the mechanism. Your code to instantiate a ``MongoClient``
      should resemble the following:

      .. literalinclude:: /examples/generated/AuthTest.snippet.default-cred-string.kt
         :language: kotlin
      
   .. tab::
      :tabid: MongoCredential

      To specify the default authentication mechanism by using the
      ``MongoCredential`` class, use the ``createCredential()`` method. Your
      code to instantiate a ``MongoClient`` should resemble the following:

      .. literalinclude:: /examples/generated/AuthTest.snippet.default-mongo-cred.kt
         :language: kotlin

You can also explicitly specify the ``SCRAM-SHA-256`` authentication mechanism,
as shown in the following code snippets:

.. tabs::

   .. tab::
      :tabid: Connection String

      To specify the ``SCRAM-SHA-256`` authentication mechanism by using a
      connection string, assign the ``authMechanism`` parameter the value
      ``SCRAM-SHA-256`` in your connection string. Your code to instantiate
      a ``MongoClient`` should resemble the following:

      .. literalinclude:: /examples/generated/AuthTest.snippet.scram-sha-256-string.kt
         :language: kotlin

   .. tab::
      :tabid: MongoCredential

      To specify the default authentication mechanism by using the
      ``MongoCredential`` class, use the
      `createScramSha256Credential() <{+core-api+}/MongoCredential.html#createScramSha256Credential(java.lang.String,java.lang.String,char[])>`__
      method. Your code to instantiate a ``MongoClient`` should resemble the following:

      .. literalinclude:: /examples/generated/AuthTest.snippet.scram-sha-256-cred.kt
         :language: kotlin
