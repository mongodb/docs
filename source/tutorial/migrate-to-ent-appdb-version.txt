:noprevnext:

.. _migrate-to-ent-appdb-version:

=================================================================================
Migrate to a Specified Application Database Version (Required for Version 1.11.0)
=================================================================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/styles/corrections.rst

.. include:: /includes/facts/fact-must-migrate-specified-appdb.rst

Prerequisites
-------------

Before completing this procedure, check whether the
:opsmgrkube:`spec.applicationDatabase.version`
has a value in your configuration files for the ``MongoDBOpsManager``
custom resource deployment. The following use cases are possible:

- The :opsmgrkube:`spec.applicationDatabase.version` setting is not
  included, or has no value. In this case, before you upgrade to
  the |k8s-op-short| 1.11.0 or later, you must migrate the
  Application Database in your deployed ``MongoDBOpsManager`` custom
  resource to a supported enterprise MongoDB version.

- The :opsmgrkube:`spec.applicationDatabase.version` setting is included
  and has a value. In this case, check the
  :qr-mdb:`container registry </mongodb-enterprise-appdb-database?tab=tags>`
  to verify that your specified version is supported with the
  |k8s-op-short| v.1.11.0 or later, and that it is an enterprise edition
  version. Migrate the Application Database to the latest supported
  enterprise MongoDB version that is :ref:`compatible <k8s-onprem-version-compatibility>`
  with your |onprem| version.


Procedure
---------

Complete the following steps for each |k8s-op-short| deployment
depending on whether or not you currently specify a MongoDB version
for the Application Database in your ``MongoDBOpsManager`` custom resource:

.. tabs::

   .. tab:: Unspecified Version
       :tabid: appdb-upgrade-from-unspecified-to-newer

       .. include:: /includes/steps/migrate-unspecified-to-new-appdb-v.rst

   .. tab:: Specified or Community Version
      :tabid: appdb-upgrade-from-specified-to-newer

      .. include:: /includes/steps/migrate-specified-to-new-appdb-v.rst

