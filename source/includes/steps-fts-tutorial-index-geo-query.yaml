stepnum: 1
ref: nav-to-fts-geo
inherit:
  file: steps-source-project-nav.yaml
  ref: project-nav-search

---
stepnum: 2
ref: click-create-fts-index-geo
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-fts-index

---
stepnum: 3
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: select-a-configuration-method
ref: select-a-configuration-method

---
stepnum: 4
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: name-index
ref: name-index
content: |

  a. In the :guilabel:`Index Name` field, enter ``default``.

     .. include:: /includes/default-fts-index-name.rst 

  #. In the :guilabel:`Database and Collection` section, find the 
     ``sample_airbnb`` database, and select the ``listingsAndReviews`` collection.

---
stepnum: 5
ref: enter-index-definition-geo
title: "Define an index on the ``address`` field."
content: |

  You can use the :guilabel:`Visual Editor` or the :guilabel:`JSON 
  Editor` in the |service| user interface to create the index.

  Visual Editor
  +++++++++++++
  
  #. Click :guilabel:`Refine Your Index`.
  #. In the :guilabel:`Field Mappings section`, click :guilabel:`Add Field`.
  #. Select :guilabel:`address.location` from the :guilabel:`Field Name` dropdown.
  #. In the :guilabel:`Data Type Configuration` section, 
     click :guilabel:`Add Data Type`, 
     and select :guilabel:`Geo` from the dropdown. 
  #. Click :guilabel:`Save Changes`.

  JSON Editor
  +++++++++++

  1. Replace the default index definition with the following example 
     index definition and click :guilabel:`Next`.

     .. code-block::

        {
          "mappings": {
            "dynamic": true,
            "fields": {
              "address": {
                "fields": {
                  "location": {
                    "type": "geo"
                  }
                },
                "type": "document"
              }
            }
          }
        }

     The index definition above specifies that:
     
     - All of the fields in the collection must be automatically indexed.
     
     - The ``address.location`` field of a ``document`` must be indexed as type ``geo``. 

---
ref: fts-geo-tutorial-click-create
level: 4
stepnum: 6
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-search-index

---
ref: fts-tutorial-confirmation-modal
level: 4
stepnum: 7
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: close-in-progress
---
stepnum: 6
ref: wait-for-index-geo
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: wait-for-index

...

