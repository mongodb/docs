============================================
Add Existing MongoDB Processes to Monitoring
============================================

.. default-domain:: mongodb

Overview
--------

You can monitor existing MongoDB processes in |mms| by adding the
hostnames and ports of the processes. |mms| will start monitoring the
:program:`mongod` and :program:`mongos` processes.

If you add processes from an environment that uses authentication, you
must add each :program:`mongod` process separately and explicitly set the
authentication credentials on each.

If you add processes in an environment that does *not* use authentication,
you can manually add one process from a replica set or a sharded cluster
as a seed. Once the Monitoring Agent has the seed, it automatically discovers
all the other nodes in the replica set or sharded cluster.

.. only:: classic

   .. note::

      If your Classic account includes groups created in |mms| Cloud
      instead of |mms| Classic, then those groups will have access to
      functions not described in this documentation. See the `MMS Cloud
      Documentation <https://docs.cloud.mongodb.com/>`_.

Unique Replica Set Names
~~~~~~~~~~~~~~~~~~~~~~~~

Do not add two different replica sets with the same name. |mms| uses the replica
set name to identify which set a member belongs to.

Preferred Hostnames
~~~~~~~~~~~~~~~~~~~

If the MongoDB process is accessible only by specific hostname or IP
address, or if you need to specify the hostname to use for servers with
multiple aliases, set up a preferred hostname. For details, see the
:guilabel:`Preferred Hostnames` setting in :doc:`/core/settings`.

Prerequisite
------------

You must have a running :doc:`Monitoring Agent
</tutorial/nav/install-monitoring-agent>` on one of the servers that hosts
the MongoDB processes.

.. only:: onprem or classic

   .. include:: /includes/compatibility-mongodb-3-0-and-monitoring-agent.rst

.. index:: adding processes
   single: processes; adding

.. index:: host discovery
   single: hosts; discovery

Add MongoDB Processes
---------------------

If your deployments use authentication, perform this procedure for each process.
If your deployment does not use authentication, add one process from a replica
set or sharded cluster and |mms| will discover the other nodes in the replica
set or sharded cluster.

.. include:: /includes/steps/add-host.rst
