===========================
Enable SSL for a Deployment
===========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

For |mms| to monitor, deploy, or back up a MongoDB deployment
that uses SSL, you must enable SSL for the |mms| group. The SSL settings
apply to **all** deployments managed by |mms|.

.. important::

   A full description of TLS/SSL, PKI (Public Key Infrastructure)
   certificates, x.509 certificates, and Certificate Authorities is beyond the
   scope of this document. This tutorial assumes prior knowledge of TLS/SSL as
   well as access to valid x.509 certificates.

.. only:: onprem

   Starting with |onprem| 1.8, |mms| automatically configures the
   Monitoring and Backup agents to connect to the managed deployment over SSL
   when you activate SSL for the |mms| group. You no longer need to
   manually configure the agents' SSL settings.
   
   If you are not using automation for a deployment, you can still
   configure the monitoring and backup agents manually. See:
   :doc:`/tutorial/configure-monitoring-agent-for-ssl` and
   :doc:`/tutorial/configure-backup-agent-for-ssl` for more information.

.. include:: /includes/note-reset-auth.rst

For information on other group-wide settings, see
:doc:`/tutorial/create-group`.

Procedures
----------

.. warning::

   For MongoDB 2.6 and below, you must use the MongoDB Enterprise
   Edition, which includes SSL, or add a custom build with SSL enabled.
   To configure the available MongoDB versions, see:
   :doc:`/tutorial/configure-available-mongodb-version`.

.. important::
   You must complete *both* of the following procedures in the order given
   before you click :guilabel:`Review & Deploy`.

Ensure Existing Deployments are Using SSL
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you wish to enable SSL for |a-mms| group that includes MongoDB
deployments, use the following procedure to ensure that the MongoDB
deployments are configured to use SSL:

.. include:: /includes/steps/enable-ssl-for-existing-deployment.rst

.. important::
   You must complete the following procedure before you click
   :guilabel:`Review & Deploy`.

Enable SSL for the Group
~~~~~~~~~~~~~~~~~~~~~~~~

You can manage both SSL and non-SSL MongoDB deployments in the same group.

.. only:: onprem

   .. important::

      *Prior to* |onprem| version 2.0.3, if you enable SSL, all MongoDB
      deployments in the group that are managed by |mms| must use SSL.

.. include:: /includes/steps/enable-ssl-for-group.rst
