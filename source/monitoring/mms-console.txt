MMS Console Overview
====================

The MMS web console provides an extensive set of features for
analyzing the statistics collected by the MMS agent. For a basic
overview of the console, see the :doc:`usage </usage>`
documentation. This document provides a more in-depth guide of the MMS
console.

.. index:: host statistics

Host Statistics
---------------

In the "Hosts" section, click any hostname link to view the data
collected from that process. The charts on this "Host Statistics" page
are interactive, and provide tools for navigating and working with the
MMS data. Click on the "info" buttons with an ``i`` in a circle to
raise informational boxes, to explore the functionality of the MMS
console and charts.

.. _chart-controls:

.. index:: page controls

Global Page Controls
~~~~~~~~~~~~~~~~~~~~

There are three to five items in the line below the MMS Console's menu
bar. From left to right, these are:

- The hostname and port of the process. This is a link to the raw JSON
  content of the latest information gathered from this host.

- The :ref:`host type <host-types>`. Possible types include:
  "primary," "secondary," "master," "slave," "standalone,"
  "recovering," and "unknown."

- Optionally, the name of the replica set to which this process
  belongs. Only replica set members have this value. The name of the
  set links to a page with all of the charts from all members of a
  set.

- Optionally, the name of the shard cluster to which this process
  belongs. Only shard cluster members have this value.

- The version of MongoDB running on this process.

.. index:: granularity; chart granularity
   single: chart granularity
   single: display; granularity

The second line contains nine links that control the host statistics
page. MMS displays the current selection in a larger font. In the
second line there is a "window" selector that narrows the amount of
data displayed. These options are:

- "by minute," which is the default setting. All charts plot one data
  point per minute. The "window" options are:

  - "one hour," which is the default window for this selection and
    charts 1 hour of data.

  - "six hours," which charts 6 hours of data.

  - "twelve hours," which charts 12 hours of data.

  - "twenty-four hours," which charts 24 hours of data.

- "by 5min," which re-plots all charts with five-minute averages. The
  "window" options are:

  - "six hours," which charts 6 hours of data.

  - "twelve hours," which charts 12 hours of data.

  - "twenty-four hours," which is the default window for this
    selection and charts 24 hours of data.

  - "forty-eight hours," which charts 24 hours of data.

- "by hour," which re-plots all charts with hourly averages. The
  "window" options are:

  - "one day," which charts 1 day of data.

  - "one week," which charts 1 week of data.

  - "two weeks," which charts 2 weeks of data.

  - "one month," which is the default window for this selection and
    charts 1 month of data.

  - "two months," which charts 2 months of data.

- "by day," which re-plots the chart to display a period of time
  greater than 24 hours. The "window" options are:

  - "one week," which charts 1 week of data.

  - "two weeks," which charts 2 weeks of data.

  - "one month," which is the default window for this selection and
    charts 1 month of data

  - "six months," which charts 6 months of data.

  - "one year," which charts 1 year of data.

.. index:: display; range

- "range," which allows you to specify a time rage for the charts to
  display.

- "avg/sec," which is the default setting. When selected, charts
  display the average number of events per second.

- "total," which allows you to re-plot the charts to display the total
  number of events.

- "gmt," which allows you to re-plot the charts to the GMT zone. Use
  this option when correlating MMS data with server logs in GMT rather
  than your local timezone.

- "refresh," which triggers a refresh of all charts.

On the next line, a slider allows you to change the scope of all
charts at once. Move the sliders on either end of this bar to narrow
all of the charts on this page at once.

.. index:: display; defaults

.. note::

   The "Personalization" section of the "Settings" tab provides an
   interface to set a default chart display type (e.g. "avg/sec,")
   epoch type (e.g. "by day,") and window (e.g. "six months.")

.. index:; chart; interaction

Specific Chart Controls
~~~~~~~~~~~~~~~~~~~~~~~

You may also interact with the charts individually. Using the mouse you
can:

- Click-and-drag to select a portion of the chart to zoom into.

- Double-click to revert to the default zoom setting.

- Shift-click-and-drag (i.e. hold the shift key while clicking and
  dragging) to scroll left and right.

.. index:: chart; toolbar

Each MMS chart has several controls at the top right of the chart
container in the "chart toolbar." From left to right, these controls
are:

- "Zoom Out," a magnifying glass with a minus sign, reverts the chart
  to the default zoom setting. This item only appears when you have
  zoomed into the chart.

- "Add To Dashboard," a plus sign, takes you to a dashboard creation
  page where you can create a new dashboard and add a collection of
  charts to the new dashboard.

- "Zoom In," a magnifying glass with a plus sign, raises a box with a
  larger version of the chart.

- "Link," a chain, links to a page that only displays this chart.

- "Email Chart," an envelope, raises a dialogue box where you can
  input an email address and short message to send the chart to an
  arbitrary email address.

- "Info," the character ``i`` in a circle, raises a box with a key to
  the chart.

.. index:: chart; annotations

Chart Annotations
~~~~~~~~~~~~~~~~~

Annotations may appear as colored vertical lines on your charts to
indicate various server events. The following color/event combinations
are:

- A *red bar* indicates a server restart.

- A *purple bar* indicates the server is now a primary.

- A *yellow bar* indicates the server is now a secondary.

If you do not wish to see the chart annotations, you can disable them
on the "Setting" page.

.. index:: aliases
   single: host aliases

Host Aliases
------------

The Edit button (e.g. "pencil") in every row of the left column in the
Hosts page opens an interface so that you can create a host aliases
for the hosts you monitor with MMS. These aliases are arbitrary, and
are useful if your machines have existing hostnames that do not
sufficiently describe the system in the context of MMS. Port numbers
are not appended to host aliases.

.. index:: dashboard

Dashboards
----------

With MMS dashboards, you can create customized collections of charts
for easier data analysis. You can access the "Dashboard" section of
the MMS console from the first button in the menu bar at the top of
the console interface. You can configure MMS to automatically load a
dashboard rather than the Hosts page from the MMS settings interface.

You can create multiple dashboards as your needs dictate. Use the plus
icon at the top of the page to specify a name and create a new
dashboard, or select "New Dashboard..." when adding a chart to a
dashboard . You can rename or remove a dashboard from links on the
bottom of a dashboard page. Dashboards have the same :ref:`chart
controls <chart-controls>` as the host statistics pages.

Adding and Removing Charts from Dashboards
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can add any MMS chart to any dashboard with the plus sign
(e.g. "``+``") in the chart toolbars.

To remove a chart from a dashboard, navigate to the dashboard and
select the minus sign (e.g. "``-``") icon in the chart toolbar.

Advanced Dashboard Creation
~~~~~~~~~~~~~~~~~~~~~~~~~~~

When adding a new dashboard, you can select the "advanced create or
append to dashboard" link to create a dashboard that includes a custom
selection of charts, or a collection of charts from a dynamically
assembled list of hosts. From this page, you may create new dashboards
or append new charts to existing dashboards. You can filter the
included processes by :ref:`host type <host-types>`.

Specify the list of hosts to include in this dashboard by selecting a
replica set or shard cluster or writing a regular expression to match
monitored processes' hostnames. The "Host Alias In Regexp" check box
allows you to, if checked, use the regular expression to select the
*aliased* hostname you configured, rather than the actual
hostname. Below the host configuration options you may toggle an
option to "group hosts in chart," which creates a single composite
chart for all matching charts.

Below this, there are 17 chart types that you can use to select charts
for this dashboard. Below the chart selection, the final row of
buttons allows you to: (optionally) test the "host regexp" to ensure
that your regular expression is sufficiently selective; preview the
charts that this operation will add to the dashboard; and submit these
changes to the dashboards.

You can add and remove charts to these dashboards manually. You may
also add additional charts using the "advanced create dashboard"
functionality in the future by specifying an existing dashboard in the
first field.

.. index:: users

User Management
---------------

Users
~~~~~

.. only:: saas

   .. include:: /includes/mms-console-saas-users.rst

.. only:: hosted

   .. include:: /includes/mms-console-hosted-users.rst

.. index:: users; groups

Groups
~~~~~~

MMS supports :ref:`group based access control <mms-groups>` so that
you can segregate monitored servers and users within your account. You
may create secondary groups at any time from the MMS console. 

Rename Group
````````````

If you want to change the name of a group, click on the edit (i.e. the
pencil icon) button next to your group name on the "Users" page of
the MMS console. Group names must be unique and you cannot reuse a
group name.

Remove Group
````````````

You can remove users from a group at any time from the Users page. To
remove a group, remove all users and then remove your own user account
from the group. 

Additionally, when removing groups ensure that you have stopped all
agents running for this group.
