====
Logs
====

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/fact-projects-groups-synonyms.rst

Retrieves a compressed (``.gz``) log file that contains a range of log
messages for a particular host in an |service| cluster.

.. include:: /includes/fact-atlas-free-tier-limits.rst

.. include:: /includes/fact-projects-groups-synonyms.rst

.. important::

   You must be an :authrole:`owner <Project Owner>` of the project that the cluster belongs to in
   order to retrieve the log.

.. include:: /includes/api-base-url-new.rst

Syntax
------

.. code-block:: none

   GET /groups/{GROUP-ID}/clusters/{HOSTNAME}/logs/{LOG-NAME}


Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 15 10 75

   * - Parameter
     - Required/Optional
     - Description

   * - ``GROUP-ID``
     - Required
     - Project identifier.

   * - ``HOSTNAME``
     - Required

     - Name of the host.

   * - ``LOG-NAME``
     - Required
     - The name of the log file that you want to retrieve:
       
       - :manual:`mongodb.gz </reference/program/mongod>`
         
       - :manual:`mongos.gz </reference/program/mongos>`
         
       - `mongosqld.gz <https://docs.mongodb.com/bi-connector/current/reference/mongosqld/index.html>`_
         
       - ``mongodb-audit-log.gz``
         
       - ``mongos-audit-log.gz``

         .. note:: 

            Audit logs are only avaiable if you have enabled Database Auditing
            for an |service| project.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 15 10 75

   * - Field
     - Required/Optional
     - Description

   * - ``startDate``

     - Optional.

     - Unix timestamp that specifies starting point for the range of log
       messages to retrieve. Default is 24 hours prior to the current
       timestamp.

   * - ``endDate``

     - Optional.

     - Unix timestamp that specifies the end point for the range of log
       messages to retrieve. Default is current timestamp.

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/no-body-parameters.rst

Response Elements
-----------------

This endpoint does not return an HTTP response body.

Example
-------

Example Request
~~~~~~~~~~~~~~~

The following example downloads the audit log for instance of ``mongod``
running on the specified host:

.. code-block:: sh

   curl -X GET -u "{username:apiKey}" --digest -o mongod-audit-log.gz \
   "https://cloud.mongodb.com/api/atlas/v1.0/groups/99999962187d9d67ca76b85f8/clusters/mycluster-shard-00-00.mongodb.net/logs/mongodb-audit-log.gz?startDate=1500249600&endDate=1500422400"


Example Response
~~~~~~~~~~~~~~~~

The request downloads the log file and saves it with the name
:file:`mongod-audit-log.gz`.

