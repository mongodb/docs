====================
Manage MongoDB Users
====================
 
.. default-domain:: mongodb

.. contents:: On this page
  :local:
  :backlinks: none
  :depth: 1
  :class: singlecol

Overview
--------

When you select an Authentication Mechanism for your |mms| group, this
enables access control for all managed deployments in your |mms| group.

With access control enabled, clients must authenticate to the MongoDB
process as MongoDB users. Once authenticated, these users only have
privileges granted by their assigned roles. You can assign MongoDB's
:manual:`built-in roles </reference/built-in-roles>` to a user as well
as :doc:`custom roles </tutorial/manage-mongodb-roles>`.

You can create MongoDB users before or after enabling accessing
control, but your MongoDB instances do not require user credentials if
access control is not enabled.

.. important::
   MongoDB users are separate from |mms| :doc:`users
   </tutorial/manage-users>`. MongoDB users have access to MongoDB
   databases, while |mms| users access the |mms| application itself.

Considerations
--------------

Managed Users and Roles
~~~~~~~~~~~~~~~~~~~~~~~

Users and roles that |mms| manages have the
:guilabel:`Synced` value set to ``Yes`` and are synced to all
deployments in the group.

Users and roles that are not managed by the |mms| group have the
:guilabel:`Synced` value set to ``No`` and exist only in their
respective MongoDB deployments.

Consistent Users and Roles
~~~~~~~~~~~~~~~~~~~~~~~~~~

|mms| has two modes of user and role management, depending upon the
value of :guilabel:`Enforce Consistent Set`:

- :guilabel:`Enforce Consistent Set` is ``YES``
     In this mode, all deployments managed by the |mms| group have the
     same set of MongoDB users and roles; specifically, all users and
     roles managed by the |mms| group.

     Only MongoDB users and roles managed by the |mms| group, i.e.
     :guilabel:`Synced` value set to ``Yes``, can exist in the group's
     managed deployments, and any users and roles not managed by the |mms|
     group are deleted from these deployments.

- :guilabel:`Enforce Consistent Set` is ``NO``
     In this mode, deployments managed by the |mms| group can have different
     sets of MongoDB users and roles, including MongoDB users and roles
     not managed through the |mms| group.  To manage these users and
     roles, you must connect directly to the MongoDB deployment.

     Users and roles managed by |mms|, i.e. :guilabel:`Synced` value
     set to ``Yes``, are created in all deployments managed by the
     group. Users and roles not managed by |mms|, i.e.
     :guilabel:`Synced` value set to ``No``, exist only in the specific
     deployment.

  .. note::
     :guilabel:`Enforce Consistent Set` set to ``NO`` is the default setting.

Procedures
----------

Add a MongoDB User
~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/add-mongodb-user.rst

Edit a MongoDB User's Password and Roles
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/edit-mongodb-user.rst

.. _manage-unmanage-mongodb-users:

Manage or Unmanage MongoDB Users
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/sync-mongodb-user.rst

Remove a MongoDB User
~~~~~~~~~~~~~~~~~~~~~

The following procedure deletes the MongoDB user from all the group's
managed MongoDB deployments. See also
:ref:`manage-unmanage-mongodb-users`.

.. include:: /includes/steps/remove-mongodb-user.rst
