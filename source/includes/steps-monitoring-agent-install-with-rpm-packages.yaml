# Some of these steps are borrowed by the procedure for updating the monitoring agent with rpm packages
#
title: Download the latest version of the Monitoring Agent package.
stepnum: 1
edition: saas
ref: download
pre: |
  With a system shell, issue the following command:
action:
  language: sh
  code: |
    curl -OL https://mms.mongodb.com/download/agent/monitoring/mongodb-mms-monitoring-agent-latest.x86_64.rpm
---
edition: hosted
source:
  file: steps-monitoring-agent-install-with-rpm-packages.yaml
  ref: download
action:
  language: sh
  code: |
    curl -OL <mmsUri>/download/agent/monitoring/mongodb-mms-monitoring-agent-latest.x86_64.rpm
---
title: Install the Monitoring Agent package.
stepnum: 2
ref: install
action:
  pre: |
    Issue the following command:
  language: sh
  code: |
    sudo rpm -U mongodb-mms-monitoring-agent-latest.x86_64.rpm
---
stepnum: 3
source:
  ref: retrieve
  file: steps-shared-agent-install.yaml
---
stepnum: 4
source:
  ref: configure
  file: steps-shared-agent-install.yaml
---
title: "For SUSE deployments only, configure the ``sslTrustedMMSServerCertificate`` property."
stepnum: 5
ref: suse-ssl
pre: |
  If you're deploying on SUSE, you must configure the
  ``sslTrustedMMSServerCertificate`` setting. All other users should
  omit this step.
action:
  pre: |
    Enter the following property and value in the ``/etc/mongodb-mms/monitoring-agent.config`` file:
  language: sh
  code: |
    sslTrustedMMSServerCertificate=/etc/ssl/certs/UTN_USERFirst_Hardware_Root_CA.pem
post: |
  Save and close the file.
---
title: Start the Monitoring Agent.
stepnum: 6
ref: start
action:
  pre: |
    Issue the following command:
  language: sh
  code: |
    sudo service mongodb-mms-monitoring-agent start
...
