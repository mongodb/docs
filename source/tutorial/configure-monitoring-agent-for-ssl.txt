==================================
Configure Monitoring Agent for SSL
==================================

.. default-domain:: mongodb

|mms| supports SSL for encrypting the following connections made by
Monitoring Agents:

- Connections between the Monitoring Agents and MongoDB instances.

- Connections between the Monitoring Agents and |mms| servers.

Connections between Agents and MongoDB Instances
------------------------------------------------

If your MongoDB deployment uses SSL, then you must configure the
Monitoring Agent to use SSL. To configure the agent to use SSL, you
must have a trusted CA certificate that signed the MongoDB instance's
certificate.

In the agent's install directory, edit the ``monitoring-agent.config``
file to set :bsetting:`sslTrustedServerCertificates` field to the path
of a file containing one or more certificates in PEM format. For example

.. code-block:: ini

   sslTrustedServerCertificates=/path/to/mongodb-certs.pem

By default, to connect to MongoDB instances using SSL requires a valid
trusted certificate. For testing purposes, however, you can set the
:msetting:`sslRequireValidServerCertificates` setting to ``False`` to
bypass this check. This configuration is **not** recommended for
production use as it makes the connection insecure.

For additional information on these settings, see
:ref:`monitoring-agent-ssl-settings`.

Connections between Agents and MMS Servers
------------------------------------------

.. only:: saas

   The Monitoring and Backup Agents always use SSL when connecting to the
   |MMS| servers.

.. only:: hosted

   To ensure that the Monitoring and Backup Agents use SSL when connecting
   to the |MMS| servers, use an HTTPS proxy in front of |MMS|.

   You can optionally configure a Jetty instance to use HTTPS for
   connections between the |mms| application and agents. To do so, see
   :doc:`/tutorial/configure-jetty-https`.

AdditionalInformation
---------------------

For the certificate settings used by the Monitoring Agent, see
:ref:`server-monitoring-ssl`.

To use SSL with your MongoDB deployment, see
:manual:`/tutorial/configure-ssl`.
