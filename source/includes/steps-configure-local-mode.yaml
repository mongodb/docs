title: "Configure Local Mode."
stepnum: 1
ref: edit-config-file
content: |
  a. In |onprem|, click :guilabel:`Admin` in the upper right corner to open system administration.

  b. Click the :guilabel:`General` tab.

  c. Click :guilabel:`Ops Manager Config`.

  d. Click the :guilabel:`Miscellaneous` button at the top of the page.

  e. Set the :setting:`Version Manifest Source` setting to ``Local``.

  f. Note the directory specified in :setting:`Versions Directory`. This is the directory on your
     |onprem| servers that stores the MongoDB binaries.

---
title: "Populate all the |onprem| servers with the .tgz files for the MongoDB binaries."
stepnum: 2
ref: populate-with-binaries
content: |
  On all your |onprem| servers, including those with enabled Backup Daemons:

  a. Navigate to the versions directory, which is
     the directory specified in the :setting:`Versions Directory` setting.

  b. Populate the versions directory with the necessary versions of MongoDB as
     determined by the :ref:`local-mode-determine-versions` topic on this page.

  .. important::

     If you have not yet read the :ref:`local-mode-determine-versions` topic
     on this page, please do so before continuing with this procedure.

  For example, to download a MongoDB  on Amazon Linux, issue a
  command similar to the following, replacing ``<download-url.tgz>`` with
  the download url for the archive:

  .. code-block:: sh

     sudo curl -OL <download-url.tgz>

---
title: Ensure that the ``mongodb-mms`` user has appropriate access to the MongoDB binaries.
stepnum: 3
ref: mongodb-mms-as-owner
content: |
  At minimum, the ``mongodb-mms`` user must be able to **read** the .tgz files placed in
  the directory specified in the :setting:`Versions Directory` setting.
  If a server with no internet connection and has an enabled
  Backup Daemon, the ``mongodb-mms`` user must also be able to **write** to the
  this directory so that the daemon can extract the .tgz files.

  For example, on a Linux server that runs the Backup Daemon, the
  directory's long output might look like this:

  .. code-block:: sh

     -rw-r----- 1 mongodb-mms staff 116513825 Apr 27 15:06 mongodb-linux-x86_64-2.6.9.tgz
     -rw-r----- 1 mongodb-mms staff  51163601 May 22 10:05 mongodb-linux-x86_64-amazon-3.0.3.tgz
     -rw-r----- 1 mongodb-mms staff  50972165 May 22 10:06 mongodb-linux-x86_64-suse11-3.0.3.tgz
     -rw-r----- 1 mongodb-mms staff  95800685 Apr 27 15:05 mongodb-linux-x86_64-enterprise-amzn64-2.6.9.tgz
     -rw-r----- 1 mongodb-mms staff  50594134 Apr 27 15:04 mongodb-linux-x86_64-enterprise-amzn64-3.0.2.tgz
     -rw-r----- 1 mongodb-mms staff  50438645 Apr 27 15:04 mongodb-linux-x86_64-enterprise-suse11-3.0.2.tgz

  If the ``mongodb-mms`` does not have the correct permissions, you must
  provide them.

  For example, on a Linux platform, you could use the Linux ``chown`` command
  to change ownership for **all** files in the directory to ``mongodb-mms``:

  .. code-block:: sh

     sudo chown mongodb-mms:mongodb-mms <path-to-the-versions-directory>

---
title: "Copy the version manifest to |onprem|."
stepnum: 4
ref: enter-version-manifest
content: |
content: |
  a. In |onprem|, click :guilabel:`Admin` in the upper right corner to open system administration.

  b. Click the :guilabel:`General` tab.

  c. Click :guilabel:`Version Manifest`.

  b. Click the :guilabel:`Update the MongoDB Version Manifest` button. If
     you cannot access the Internet, follow the instructions on the
     :guilabel:`MongoDB Version Manifest` page for an alternative solution.

---
title: "For each group, specify which versions are available for download by Automation Agents."
stepnum: 5
ref: select-versions
content: |

  a. In |onprem|, click :guilabel:`Ops Manager` in the upper left to exit
     system administration.

  b. Click the :guilabel:`Group` link at the top of the page and select the desired group.

  c. Click :guilabel:`Deployment` and then click :guilabel:`Version Manager`.

  c. Select the checkboxes for the versions of MongoDB that you have made
     available on the |application| server.

  d. Click :guilabel:`Review  & Deploy`.

  e. Click :guilabel:`Confirm & Deploy`.

...
