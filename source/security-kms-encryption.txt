.. _security-kms-encryption:

================================================
Encryption at Rest using Customer Key Management
================================================

.. default-domain:: mongodb

.. meta::
   :keywords: encryption

|service| encrypts all cluster storage and snapshot volumes, securing
all cluster data on disk: a concept known as encryption at rest.

|service| :authrole:`Project Owners <project Owner>` can configure an
additional layer of encryption on their data using their
|service|-compatible customer key management provider with the MongoDB
:manual:`encrypted storage engine </core/security-encryption-at-rest>`.

Configuring Encryption at Rest using your Key Management incurs
additional charges for the |service| project. To learn more, see
:ref:`advanced-security`.

|service| :authrole:`Project Owners <Project Owner>` can
use one or more of the following customer key management providers
when configuring Encryption at Rest for the |service| project:

- :ref:`Amazon Web Services Key Management Service <security-aws-kms>`
- :ref:`Azure Key Vault <security-azure-kms>`
- :ref:`Google Cloud Platform Key Management Service <security-gcp-kms>`

After configuring at least one key management provider for the
|service| project, :authrole:`Project Owners <Project Owner>` can
enable customer key management for each |service| cluster for which
they require encryption. The key management provider does not have to
match the cluster cloud service provider.

Atlas cannot rotate customer-managed encryption keys. Refer to your
key management providerâ€™s documentation for guidance on key rotation.
When you set customer key management in a project, Atlas creates a
:ref:`365-day key rotation alert <alert-conditions-encryption-at-rest>`.

Encrypted Backups
-----------------

Atlas encrypts all snapshot volumes. This secures your cluster data on
disk. Using your cloud provider's |kms|, you can:

- Encrypt your snapshot storage volumes where you store your backups.
- Encrypt the data files in your snapshots.
- Restore any snapshot encrypted using any encryption key your KMS can
  access.

You cannot enable :ref:`backup-continuous` on clusters encrypted with
keys that you manage. You *can* specify a
:ref:`base snapshot schedule <retention-policy>` that backs up
every 6 hours.

To learn more about customer key management and cloud provider
snapshots, see :ref:`encrypted-cloud-provider-snapshot` and
:ref:`restore-encrypted-snapshot`.

.. class:: hidden

   .. toctree::
      :titlesonly:

      /security-aws-kms
      /security-azure-kms
      /security-gcp-kms
