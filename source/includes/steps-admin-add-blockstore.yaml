stepnum: 1
source:
  file: steps-source-admin-navigation.yaml
  ref:  admin-backup-snapshot
---
title: "Click :guilabel:`Create New Blockstore`."
stepnum: 2
level: 4
ref: create-new-blockstore
---
title: "Provide the blockstore details."
stepnum: 3
level: 4
ref: provide-new-blockstore
content: |

   .. list-table::
      :widths: 30 70
      :header-rows: 1

      * - Field

        - Contents

      * - :guilabel:`Name`

        - A name for the blockstore

      * - :guilabel:`Datastore Type`
        - Select :guilabel:`Standalone`, :guilabel:`Replica Set` or
          :guilabel:`Sharded Cluster`.

      * - :guilabel:`MongoDB Host List` (:term:`Replica Set` and
          :term:`Sharded Cluster` only)

        - Type a comma-separated list of :program:`mongod` instances
          (for a Replica Set) or :program:`mongos` instances (for a
          Sharded Cluster) in the ``<hostname:port>`` format that
          comprise the blockstore database.

          .. example::

             ``host1.example.com:27017, host2.example.com:27017, host2.example.com:27018``

      * - :guilabel:`MongoDB Hostname` (Standalone only)
        - Type the hostname of the standalone MongoDB instance.

      * - :guilabel:`MongoDB Port` (Standalone only)
        - Type the port number of the standalone MongoDB instance.

      * - :guilabel:`Username`

        -

          .. list-table::
             :widths: 25 45 30
             :header-rows: 1

             * - Auth Mechanism
               - Action
               - Configure Instructions

             * - Username and Password (``SCRAM-SHA-1``)
               - Type the name of the user authorized to access the
                 blockstore database.
               - :ref:`SCRAM <authentication-scram>`

             * - x.509 (``X.509``)
               - Type the :rfc:`RFC2253 <2253>`\-formatted subject from
                 the client certificate of the user authorized to
                 access the blockstore database.
               - :manual:`x.509 </tutorial/configure-x509-client-authentication>`

             * - Kerberos (``GSSAPI``)
               - Type the |upn| of the user authorized to access the
                 blockstore database.
               - :manual:`Kerberos </core/kerberos>`

             * - LDAP (``PLAIN``)
               - Type the name of the |ldap| user authorized to access
                 the blockstore database.
               - :manual:`LDAP </core/security-ldap>`

      * - :guilabel:`Password` (optional)

        - .. include:: /includes/warning-plaintext-password.rst

          .. list-table::
             :widths: 25 45 30
             :header-rows: 1

             * - Auth Mechanism
               - Action
               - Configure Instructions

             * - Username and Password (``SCRAM-SHA-1``)
               - Type the password associated with the username that
                 can access the blockstore database.
               - :ref:`SCRAM <authentication-scram>`

             * - x.509 (``X.509``)
               - Leave it blank.
               - :manual:`x.509 </tutorial/configure-x509-client-authentication>`

             * - Kerberos (``GSSAPI``)
               - Kerberos retrieves the password from its
                 :doc:`keytab file </tutorial/enable-kerberos-authentication-for-group/>`.
                 You do not need to type a password into this field.
               - :manual:`Kerberos </core/kerberos>`

             * - LDAP (``PLAIN``)
               - Type the password of the |ldap| user authorized to
                 access the blockstore database.
               - :manual:`LDAP </core/security-ldap>`

      * - :guilabel:`Connection Options` (optional)
        - Type any additional :manual:`configuration file options
          </reference/configuration-options>` for the MongoDB instance.
          This field supports unescaped values only.

          For proper syntax, see :manual:`Connection String URI
          Format </reference/connection-string>` in the MongoDB manual.

      * - :guilabel:`Encrypted Credentials` (optional)
        - Select if the Username and Password for the database were
          encrypted using the :doc:`credentialstool </tutorial/encrypt-user-credentials>`.

      * - :guilabel:`Use TLS/SSL` (optional)
        - Select if the blockstore database requires |tls| encryption.

          Beyond this checkbox, to connect this blockstore using
          |tls|, you must enable:

          - :manual:`TLS on the blockstore database </tutorial/configure-ssl>`.

          - |onprem| to :ref:`use TLS <configure-ssl-backing>` to
            connect to this blockstore.

            .. note::

               All backing databases share the same |tls| certificates.
               If you have enabled |tls| for another backing database,
               you need only select this checkbox to enable a |tls|
               connection to this blockstore.

      * - :guilabel:`New Assignment Enabled` (optional)
        - Select if you want to enable this blockstore after creating
          it. This is selected by default so the blockstore can be
          assigned backup jobs. If you clear this checkbox, the
          blockstore is created but you cannot assign backups to this
          blockstore.

---
title: "Click :guilabel:`Create`."
stepnum: 4
level: 4
ref: create-blockstore
...
