.. _mcp-server-configuration-methods:

========================================
MongoDB MCP Server Configuration Methods
========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. meta::
   :keywords: MCP Server configuration, MCP, Model Context Protocol, AI, natural language, MCP Server, AI agents
   :description: Learn how to configure the MongoDB MCP Server using JSON configuration files, command line options, or environment variables to connect to your clusters.

.. facet::
   :name: genre
   :values: reference

To configure the MongoDB MCP Server to connect to your MongoDB cluster
and set other MCP Server options, use any of these methods:

- JSON configuration file with MCP Server options
- Command line options
- Operating system environment variables

The MCP Server uses Atlas API credentials or a connection string to
access a cluster.

MCP Server Cluster Connection Methods and Options
-------------------------------------------------

To configure the MCP Server to connect to a cluster and set other MCP
Server options, use a method described in this section.

.. include:: /includes/read-only.rst

.. include:: /includes/type-and-server-name-fields.rst

.. _mcp-server-configuration-atlas-api-credentials:

Connecting with Atlas API Credentials
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can use the Atlas API credentials obtained in
:ref:`mcp-server-prerequisites` to connect to an Atlas cluster.

.. note::

   As you'll see in the next section, you can also connect to an
   Atlas cluster using a MongoDB connection string if you don't want
   to use Atlas API credentials for security or another reason.

.. include:: /includes/environment-variables.rst

To connect with Atlas API credentials, set the ``MDB_MCP_API_CLIENT_ID``
and ``MDB_MCP_API_CLIENT_SECRET`` environment variables in the ``env``
section of the JSON configuration file for the AI client: 

.. code-block:: json
   :emphasize-lines: 8-9

   ...
   "args": [
      "-y",
      "mongodb-mcp-server@latest",
      "--readOnly"
   ],
   "env": {
      "MDB_MCP_API_CLIENT_ID": "<atlas-service-account-client-id>",
      "MDB_MCP_API_CLIENT_SECRET": "<atlas-service-account-client-secret>"
   }
   ...

Replace ``<atlas-service-account-client-id>`` and
``<atlas-service-account-client-secret>`` with your Atlas information.

For complete JSON configuration file examples for various AI clients,
see :ref:`mcp-get-started`.

Connecting with Cluster Connection String
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you don't want to use Atlas API credentials for security or another
reason, you can connect to a cluster using a MongoDB connection string.

The following example shows a connection string to connect to an Atlas
cluster:

.. code-block:: json
   :emphasize-lines: 8-9

   ...
   "args": [
      "-y",
      "mongodb-mcp-server@latest",
      "--readOnly"
   ],
   "env": {
      "MDB_MCP_CONNECTION_STRING":
      "mongodb+srv://<user-name>:<password>@<cluster-name>.mongodb.net/<database-name>"
   }
   ...

Replace ``<user-name>``, ``<password>``, ``<cluster-name>``, and
``<database-name>`` with your Atlas information.

You can also connect to a local cluster with a connection string. For
example:

.. code-block:: json
   :emphasize-lines: 8-9

   ...
   "args": [
      "-y",
      "mongodb-mcp-server@latest",
      "--readOnly"
   ],
   "env": {
      "MDB_MCP_CONNECTION_STRING":
      "mongodb://127.0.0.1:27019/?directConnection=true"
   }
   ...

.. include:: /includes/fact-mcp-connection-string-flag-deprecated.rst

.. _mcp-server-configuration-environment-variables:

Defining MCP Server Environment Variables in the Operating System
-----------------------------------------------------------------

You can define environment variables to set various configuration
options for the MCP Server.

To define operating system environment variables for the MCP Server, use
the prefix ``MDB_MCP_`` followed by the variable name in uppercase with
underscores. For example, use ``MDB_MCP_CONNECTION_STRING`` to set the
``connectionString`` option.

.. include:: /includes/environment-variables.rst

In the examples in the following sections, replace
``<atlas-service-account-client-id>``,
``<atlas-service-account-client-secret>``, ``<user-name>``,
``<password>``, ``<cluster-name>``, and ``<database-name>`` with your
Atlas information.

Unix Environment Variables
~~~~~~~~~~~~~~~~~~~~~~~~~~

The following examples show how to define MCP Server environment
variables in a Unix-based operating system:

.. code-block:: bash

   # Set Atlas API credentials for a service account
   export MDB_MCP_API_CLIENT_ID="<atlas-service-account-client-id>"
   export MDB_MCP_API_CLIENT_SECRET="<atlas-service-account-client-secret>"

   # Set a MongoDB connection string
   export MDB_MCP_CONNECTION_STRING="mongodb+srv://<user-name>:<password>@<cluster-name>.mongodb.net/<database-name>"

   # Change the MCP Server log path from the default
   export MDB_MCP_LOG_PATH="/mcp/logs"

Windows Command Line Environment Variables
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following examples set the variables using in a Windows command
line:

.. code-block:: cmd

   :: Set Atlas API credentials for a service account
   set MDB_MCP_API_CLIENT_ID=<atlas-service-account-client-id>
   set MDB_MCP_API_CLIENT_SECRET=<atlas-service-account-client-secret>

   :: Set a MongoDB connection string
   set MDB_MCP_CONNECTION_STRING="mongodb+srv://<user-name>:<password>@<cluster-name>.mongodb.net/<database-name>"

   :: Change the MCP Server log path from the default
   set MDB_MCP_LOG_PATH="C:\mcp\logs"

Windows PowerShell Environment Variables
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following examples set the variables in a Windows PowerShell
session:

.. code-block:: powershell

   # Set Atlas API credentials for a service account
   $env:MDB_MCP_API_CLIENT_ID="<atlas-service-account-client-id>"
   $env:MDB_MCP_API_CLIENT_SECRET="<atlas-service-account-client-secret>"

   # Set a MongoDB connection string
   $env:MDB_MCP_CONNECTION_STRING="mongodb+srv://<user-name>:<password>@<cluster-name>.mongodb.net/<database-name>"

   # Change the MCP Server log path from the default
   $env:MDB_MCP_LOG_PATH="C:\mcp\logs"

Learn More
----------

- :ref:`mcp-server-configuration-options`
- :ref:`mcp-server-configuration-enable-or-disable-features`
- :ref:`mcp-server-configuration-export-data`
- :ref:`mcp-server-configuration-standalone-service`
- :ref:`mcp-server-configuration-memory-overflow`
- :ref:`mcp-server-configuration-troubleshooting`
