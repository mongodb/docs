ref: go-clusters-view-cluster
level: 4
stepnum: 1
source:
  file: steps-connect-to-cluster-master.yaml
  ref: go-clusters-view

---
ref: go-clusters-review-whitelist-cluster
level: 4
stepnum: 2
source:
  file: steps-connect-to-cluster-master.yaml
  ref: go-clusters-whitelist-connection

---
ref: create-mongodb-user-cluster
level: 4
stepnum: 3
source:
  file: steps-connect-to-cluster-master.yaml
  ref: create-mongodb-user

---
title: "Connect to your |service| cluster with the Mongo shell."
level: 4
ref: download-install-shell
content: |

   Select :guilabel:`Connect with the Mongo Shell`.

   The next screen offers you options to proceed based on whether or
   not you already have the :binary:`~bin.mongo` shell
   installed on your system.

   .. tabs::

      tabs:

        - id: download_shell
          name: I do not have the Mongo Shell installed

          content: |

            1. Select your OS from the dropdown menu.

            #. (macOS only) Use the Homebrew command provided.

            #. Click :guilabel:`Download Mongo Shell` to begin the download,
               or click :guilabel:`Fetch via URL` to copy a |url| to your
               clipboard. You can use ``curl`` to fetch the installer file, or
               paste the URL in a browser window.

            #. Extract the Mongo shell.

            .. tabs::

               tabs:

                 - id: windows
                   name: Windows

                   content: |

                     a. Double-click the ``.msi`` file in Windows Explorer
                        and proceed through the installation wizard.

                     #. Add the ``bin`` directory to your command path.

                        1. Click :icon-fa5-brands:`windows` and select :guilabel:`Control Panel`.

                        #. Click :guilabel:`System and Security`, then :guilabel:`System`,
                           then :guilabel:`Advanced System Settings`.

                        #. Click :guilabel:`Environment Variables`.

                        #. Select :guilabel:`Path` and click :guilabel:`Edit`.

                        #. Add the ``bin`` directory where the installer placed your
                           MongoDB executables and click :guilabel:`OK`.

                 - id: macos
                   name: macOS

                   content: |

                     a. Copy the Homebrew command from the |service| UI
                        window and run it in a terminal.

                     #. Add the ``bin`` directory to your ``PATH``
                        environment variable.

                        .. code-block:: none

                           export PATH=/<extraction-directory>/bin:$PATH

                        .. note::

                           This command applies only to the current shell session. Edit
                           the ``PATH`` environment variable in ``~/.profile``
                           to update the variable across shell sessions and reboots.

                 - id: linux
                   name: Linux

                   content: |

                     a. Run the following command in a terminal to extract
                        the :binary:`~bin.mongo` shell:

                        .. code-block:: shell

                           tar -xzf ./<filename>.tgz

                     #. Add the ``bin`` directory to your ``PATH``
                        environment variable.

                        .. code-block:: none

                           export PATH=/<extraction-directory>/bin:$PATH

                        .. note::

                           This command applies only to the current shell session. Edit
                           the ``PATH`` environment variable in ``~/.profile``
                           to update the variable across shell sessions and reboots.

            c. A copyable connection command appears in Step 3 of the 
               |service| UI window. Be sure to update the
               :manual:`--username </reference/program/mongo/#cmdoption-mongo-username>`
               option with your MongoDB username.

            d. Copy and paste the ``mongo`` command and connection string into a
               terminal and run it. The shell prompts you for the
               :manual:`--password </reference/program/mongo/#cmdoption-mongo-password>`
               option.

               The connection string includes the user name of a MongoDB user set
               up for the project for authentication purposes. To connect as a
               different MongoDB user, update the ``--username`` option with
               the username of a different MongoDB user.

        - id: connect_from_shell
          name: I have the Mongo Shell installed

          content: |

            1. Select your shell version from the dropdown menu. To
               check which version of the :binary:`~bin.mongo`
               shell is installed on your system, run the following
               command from a terminal:

               .. code-block:: bash

                  mongo --version

               If your shell version is older than 3.4, MongoDB recommends that
               you upgrade to the newest version.

            #. A copyable connection command appears in Step 2 of the |service|
               UI window. Be sure to update the
               :manual:`--username </reference/program/mongo/#cmdoption-mongo-username>`
               option with your MongoDB username.

            #. Copy and paste the ``mongo`` command and connection string into a
               terminal and run it.

               - For shell version 3.6 or later, the shell prompts you for the
                 :manual:`--password </reference/program/mongo/#cmdoption-mongo-password>`
                 option.

               - For shell version 3.4 or earlier, the connection string includes the
                 ``--password`` option. Edit the placeholder value for the
                 option.

               The connection string includes the user name of a MongoDB user set
               up for the project for authentication purposes. To connect with a
               different MongoDB user, update the
               :manual:`--username </reference/program/mongo/#cmdoption-mongo-username>`
               option with the username of a different MongoDB user.
...
