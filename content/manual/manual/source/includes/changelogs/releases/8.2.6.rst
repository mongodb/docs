.. _8.2.6-changelog:

8.2.6 Changelog
---------------

Sharding
~~~~~~~~

- :issue:`SERVER-110952` Creation of untracked legacy timeseries
  collection may release DDL lock mid-creation due to unknown shard
  version
- :issue:`SERVER-112250` Add test that omitting --shardsvr enables
  mongod to continue applying oplog entries with zero connectivity to
  config server replica set

Replication
~~~~~~~~~~~

- :issue:`SERVER-112969` Skip CheckReplDBHash index check for regular
  collection with accompanying buckets namespace
- :issue:`SERVER-115594` Skip acquiring tickets when deleting txn
  coordinator doc

Query
~~~~~

- :issue:`SERVER-86326` Increase max regex pattern length to 32k
- :issue:`SERVER-113319` $match pushdown past a renamed field is done
  incorrectly when the expression root is a renamed field path
  expression
- :issue:`SERVER-114329` Fix namespace check for findAndModify explain
  in timeseries_raw_data_with_collection_recreation.js
- :issue:`SERVER-118546` Can not create timeseries 2dsphere index with a
  non-system user

Catalog
~~~~~~~

- :issue:`SERVER-107819` Concurrent createIndex+collMod can leave behind
  inconsistent collection options
- :issue:`SERVER-118466` Prevent the TTL Monitor from spawning an
  unbounded amount of threads for sharding metadata recovery

Storage
~~~~~~~

- :issue:`SERVER-108699` Check BSON size in collection validation
- :issue:`WT-12535` Optimize time spent in __wt_update_obsolete_check()
- :issue:`WT-15803` Fix ref not unlocked in error cases

WiredTiger
``````````

- :issue:`WT-15039` Allow a higher number of eviction threads
- :issue:`WT-15222` Failed to remove the updates from the history store
  with mixed mode delete on the insert list
- :issue:`WT-15682` Increase the read timestamp lag to avoid conflict
  with prepare timestamp
- :issue:`WT-15739` Fix reconciliation leaking overflow pages
- :issue:`WT-15830` Add stats to track how many saved update list and
  total number of updates processed in __wti_rec_hs_insert_updates
- :issue:`WT-15838` Add logging if checkpoint is blocked by eviction for
  more than 1 minute
- :issue:`WT-16186` Bring back the removed merge_custom config parsing

Operations
~~~~~~~~~~

:issue:`SERVER-112636` Remove superfluous FTDC logging

Build and Packaging
~~~~~~~~~~~~~~~~~~~

:issue:`WT-16353` MSVC source issue on Windows

Internals
~~~~~~~~~

- :issue:`SERVER-90889` Check timeseries collections throught the
  checkMetadataConsistency command
- :issue:`SERVER-100659` BSONColumn with full control of skips after
  double rescale does not reopen correctly
- :issue:`SERVER-102018` Audit invariants in Repl code base to add more
  information
- :issue:`SERVER-103955` Index build race with commitQuorum and abort
- :issue:`SERVER-104355` Expose spilldb WiredTiger stats in all the
  places where we currently expose WT stats.
- :issue:`SERVER-106239` Investigate transaction participant state
  mismatch when running sharded aggregate with merging pipeline
  executing on a shard
- :issue:`SERVER-106302` Provide visibility if aggregate FTDC object is
  too large
- :issue:`SERVER-106341` Fix race condition in
  ReshardingOplogFetcherTest
- :issue:`SERVER-106390` StaleConfig failures originating from applyOps
  command do not trigger sharding metadata recovery
- :issue:`SERVER-107966` A SingleServerPingMonitor within the RSM can
  get disabled and never reenabled
- :issue:`SERVER-108208` Fix deb10 in test_packages_release using wrong
  url
- :issue:`SERVER-108280` Prevent analyzeShardKeyNumRanges from being set
  to 1
- :issue:`SERVER-108354` Add StaleConfig as retryable error for
  timeseries_create_indexes.js
- :issue:`SERVER-108801` Invalid collMod command with timeseries
  granularity change creates collection options inconsistency
- :issue:`SERVER-109230` RecordId doesn't use the length of the
  underlying buffer when constructing std::string representations
  thereof
- :issue:`SERVER-110008` Ignore ddlLockOptimisticRecoveryWaitTimeout in
  multiversion server parameter tests
- :issue:`SERVER-110304` Update BES Branch Keyword to use Evergreen
  Branch Name
- :issue:`SERVER-110314` Make spilling test more resilient against
  background query activity
- :issue:`SERVER-110338` Accept a document when toggling an IFR flag
  with setParameter
- :issue:`SERVER-110442` Capture Information about index build durations
- :issue:`SERVER-110832` OplogWriter should not hold on to session
  through rollbacks
- :issue:`SERVER-110842` commitTimeseriesBucketForBatch and
  commitTimeseriesBucketsAtomically should set the collection catalog
  within the scope of  acquireAndValidateBucketsCollection
- :issue:`SERVER-111007` Validation should distinguish between root
  causes when finding mixed schema data
- :issue:`SERVER-111191` Reduce impact of the database profiler
- :issue:`SERVER-111292` Re-enable checking index consistency for
  geo-spatial indexes
- :issue:`SERVER-111423` Allow usage of setParameterOnAllHosts in
  stepdown suites
- :issue:`SERVER-111573` Add configuration to collstats to return full
  wiredtiger data source metrics
- :issue:`SERVER-111603` Aggregation fuzzer tasks run out of memory
  while generating jstests
- :issue:`SERVER-111672` start time should be able to be set in data
  throttle test
- :issue:`SERVER-111876` The planner tasserts when processing negations
  of $_internalExpr comparisons to null
- :issue:`SERVER-112231` Fix race condition when stopping MockOCSPServer
- :issue:`SERVER-112267` RCString checks BSON size without using
  BSONObjectTooLarge
- :issue:`SERVER-112342` ServerStatus should have a parameter to exclude
  all fields
- :issue:`SERVER-112357` moveChunk with waitForDelete hangs when range
  deleter is disabled
- :issue:`SERVER-112491` Add <workdir>/bin higher on the PATH in
  prelude.sh
- :issue:`SERVER-112539` Abort time-series write batch on Stale Version
  errors
- :issue:`SERVER-112678` Avoid unnecessary shared lock acquisition on
  timeseries in checkMetadataConsistency
- :issue:`SERVER-112786` Enable internalVectorSearchStoredSource query
  knob
- :issue:`SERVER-112792` Report existance of compound wildcard indexes
  prefixed by the shard key
- :issue:`SERVER-112933` Escape CheckMetadataConsistency hook assertion
  from running in sharded clusters
- :issue:`SERVER-112955` Create alias for emergency releases
- :issue:`SERVER-112991` Update error message to remove incorrect
  assumption that compact gets EBUSY due to cache pressure
- :issue:`SERVER-113020` Relax majorityReplicationLagMillis check on
  donor only shards in resharding_commit_monitor_repl_lag.js
- :issue:`SERVER-113136` Make a copy of "forRestore" in
  sharded_backup_restore.js before starting up on the data files
- :issue:`SERVER-113153` Make query multiversion fuzzers on LTS versions
  deterministic
- :issue:`SERVER-113311` IngressRequestRateLimitExceeded errors should
  include NoWritesPerformed error label
- :issue:`SERVER-113348` Remove orphaned files and improve logging for
  selective_backup_restore_e2e.js and
- :issue:`SERVER-113361` Race condition on cluster time value in vector
  clock unit test
- :issue:`SERVER-113431` Pin copybara to a specific tag
- :issue:`SERVER-113484` Add test suite exclusion for
  timeseries_insert_respect_max_bson_size_too_big
- :issue:`SERVER-113508` Should wait for old primary to complete
  stepdown in auto_reconfig_remove_newly_added_and_stepdown.js
- :issue:`SERVER-113545` Wait for lastCommittedOpTime to be initialized
  after restart in api_version_prepare_txn.js
- :issue:`SERVER-113550` Fix ticket exhaustion issue in FLE2 aggregation
  and explain
- :issue:`SERVER-113659` Add error label from chunk migration aborting
  when existing document is found
- :issue:`SERVER-113700` Update copybara to v20251110
- :issue:`SERVER-113711` Rate Limit Log ID 4625501 (unable to establish
  remote cursors)
- :issue:`SERVER-113887` Add timeseries_create_indexes.js to
  backports_required_for_multiversion
- :issue:`SERVER-113897` Report existence of invalid compound wildcard
  index
- :issue:`SERVER-113915` [v8.2] Remove viewless timeseries suites from
  v8.2 branch
- :issue:`SERVER-113997` Fix legacy timeseries namespace translation in
  findAndModify explain command
- :issue:`SERVER-114017` move_primary_setFCV.js test creates database at
  latest FCV instead of downgraded FCV
- :issue:`SERVER-114196` $$NOW unavailable after $unionWith in
  aggregation pipeline
- :issue:`SERVER-114337` Index build lastCommittedMillis should be int64
- :issue:`SERVER-114363` Capture index build blocking replication
  metrics
- :issue:`SERVER-114384` $$NOW can be different in sub-pipelines
- :issue:`SERVER-114407` Delete antithesis tasks on 8.2
- :issue:`SERVER-114460` Add benchmarks_sep to release branches and
  release dashboards
- :issue:`SERVER-114755` Handle endianness in control block generation
  in binary_reopen_test
- :issue:`SERVER-114806` Wildcard indexes may consume all memory allowed
  for the index build
- :issue:`SERVER-114890` Improve IngressRequestRateLimiter error message
- :issue:`SERVER-114974` pipx-installed db-contrib-tool is still being
  used over the pyinstaller-installed one
- :issue:`SERVER-115087` Re-enable featureFlagSbeUpgradeBinaryTrees and
  featureFlagMultiPlanLimiter
- :issue:`SERVER-115132` Fix Queryable Encryption mirrored reads
- :issue:`SERVER-115245` core-analyzer: match program name from core
  dump across new lines
- :issue:`SERVER-115326` Don't reset logical session cache reaper
  metrics on beginning reap
- :issue:`SERVER-115398` Differentiate between steady-state replication
  and startup recovery for lastTimeBetweenCommitOplogAndCommitMillis
- :issue:`SERVER-115576` Resmoke should not rely on the mongo shell from
  an old version
- :issue:`SERVER-115584` Handle unexpectedly large /proc/mountinfo files
- :issue:`SERVER-115716` Fix concurrency issue in
  server_status_multiplanner.js
- :issue:`SERVER-115917` Set specific Visual Studio and MSVC install
  version
- :issue:`SERVER-115962` Balancer does not make progress when the most
  loaded shard is already balanced within its zones
- :issue:`SERVER-116078` Move AL2 Release Variant from compiling on AWS
  c-series to m-series
- :issue:`SERVER-116089` Add lock acquisition timeouts to migration's
  recipient critical section
- :issue:`SERVER-116294` SetClusterParameterCoordinatorDocument crash on
  upgrade due to new non-optional field missing
- :issue:`SERVER-116327` Validate usage of invalid index types at
  creation time
- :issue:`SERVER-116344` Revert featureFlagSbeUpgradeBinaryTrees and
  featureFlagMultiPlanLimiter from 8.2
- :issue:`SERVER-116528` Race Condition in Balancer Force-Jumbo
  Migrations Causes Duplicate Key Errors on Recipient Shard
- :issue:`SERVER-117009` setClusterParameter silently resets to default
  when misspelling non-strict cluster parameter fields
- :issue:`SERVER-117088` Increase pymongo timeouts on asan variants
- :issue:`SERVER-117190` Race condition in ShutdownBehavior test in
  dbclient_grpc_stream_test.cpp
- :issue:`SERVER-117252` Remove 6.0 multiversion testing from all higher
  branches
- :issue:`SERVER-117433` Add private third party dependency directory
- :issue:`SERVER-117467` Skip running too_many_fds.js on macOS
- :issue:`SERVER-117564` Starting mongocryptd fails on latest build,
  windows
- :issue:`SERVER-117623` Sharded multi-document transactions can observe
  partial effects of concurrent renameCollection operations
- :issue:`SERVER-117755` Backport updated gitignore
- :issue:`SERVER-117854` GranularityRounderPowersOfTwo should assert for
  inf numbers
- :issue:`SERVER-118428` mongocryptd rejects large messages
- :issue:`SERVER-118711` [v8.2.5] Can not create timeseries 2dsphere
  index with a non-system user
- :issue:`SERVER-119396` Adjust maximum buffer size for ingress network
  messages
- :issue:`SERVER-119689` Pin docker-systemctl-replacement to a specific
  commit
- :issue:`WT-15662` test_truncate29 verify return EBUSY
- :issue:`WT-15903` Unexpected standard output in test_ovfl01

