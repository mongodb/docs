===================
Migrate Deployments
===================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/note-push-pull-migration-deprecation-for-om.rst

.. _c2c-based-live-migration-choices:

MongoDB 6.0.5 and Later: Live Migrate to Atlas
----------------------------------------------

If both the source and destination clusters are running MongoDB 6.0.5 or
later, you can migrate your data from a source cluster into a destination
MongoDB cluster in |service-short| using one of the following types of
guided live migration in the |service| UI:

- Live migration (push). For instructions, see :atlas:`Live Migrate Your MongoDB 6.0.5+ Cluster Monitored by Cloud Manager to Atlas <c2c-push-live-migration>`.
- Live migration (pull). For instructions, see :atlas:`Live Migrate (Pull) a MongoDB 6.0.5+ Cluster into Atlas <c2c-pull-live-migration>`.

The choice between push and pull live migrations depends on whether the
network for your deployment allows flexibility in ingress rules and allows
access through the firewall.

In addition, you can use these migration methods for MongoDB 6.0.5 and later
deployments:

- If your data is in a MongoDB deployment and you don't have access to the :term:`oplog`,
  You can use :binary:`mongorestore <bin.mongorestore>` to run a self-managed migration.
  To learn more, see :atlas:`Seed with mongorestore </import/mongorestore/>`.

.. cond:: cloud

   - If your data is in |mms| and you have a :term:`snapshot`, you can
     :ref:`restore a backup of a deployment to an Atlas deployment <restore-deployment-to-atlas>`.


.. _mongomirror-based-live-migration-choices:

Earlier MongoDB Versions: Live Migrate to Atlas
-----------------------------------------------

If you are migrating MongoDB versions earlier than 6.0.5, use one of the
following migration methods, depending on your deployment's requirements
and configuration.

.. cond:: onprem

   .. list-table::
      :header-rows: 1
      :widths: 45 55
   
      * - Deployment Configuration
        - Migration Strategy

      * - Your data is in a cluster running MongoDB earlier than 6.0.5,
          is managed or monitored by |mms| and your network allows flexibility in
          ingress rules.
        
        - :atlas:`Pull data into Atlas </migration-live-atlas-managed>`
          from |mms|. In this type of live migration, |service| requires
          access to the source deployment in |mms| through
          the deployment's firewall.
   
      * - Your data is in a cluster running MongoDB earlier than 6.0.5,
          your cluster is managed or monitored by |mms|, and your network doesn't
          allow flexibility in ingress rules.
        
        - :ref:`Push your data into Atlas <migrate-to-atlas>` from |mms|.
          In this type of live migration, |service-short| receives data from
          |mms| without requiring access through the firewall.
   
      * - Your data is in a MongoDB Community cluster running MongoDB earlier than 6.0.5,
          and your network doesn't allow flexibility in ingress rules.
          
        - :ref:`Push your MongoDB Community data into Atlas <migrate-community-to-atlas>`
          after adding your Community deployment to |cloud-short| for monitoring.
          In this type of live migration, |service-short| receives data from
          |mms| without requiring access through the firewall.

      * - Your data is in a MongoDB deployment and you don't have access to the :term:`oplog`.
        - Use :binary:`mongorestore <bin.mongorestore>` to run a self-managed migration.
          To learn more, see :atlas:`Seed with mongorestore </import/mongorestore/>`.

   You can also migrate a MongoDB deployment from one |mms| project to another
   project. To learn more, see :ref:`Migrate a MongoDB Deployment to a New Project <migrate-deployment-to-new-project>`.

.. cond:: cloud

   .. list-table::
      :header-rows: 1
      :widths: 45 55

      * - Deployment Configuration
        - Migration Strategy



      * - Your data is in a cluster running MongoDB earlier than 6.0.5,
          is managed or monitored by |mms| and your network allows flexibility in
          ingress rules.
    
        - :atlas:`Pull data into Atlas </migration-live-atlas-managed>` 
          from |mms|. In this type of live migration, |service-short|
          requires access to the source deployment in |mms| through
          the deployment's firewall.

      * - Your data is in a cluster running MongoDB earlier than 6.0.5,
          your cluster is managed or monitored by |mms|, and your network doesn't
          allow flexibility in ingress rules.
        
        - :ref:`Push your data into Atlas <migrate-to-atlas>` from |mms|.
          In this type of live migration, |service-short| receives data from
          |mms| without requiring access through the firewall.

      * - Your data is in a MongoDB Community cluster running MongoDB earlier than 6.0.5,
          and your network doesn't allow flexibility in ingress rules.
          
        - :ref:`Push your MongoDB Community data into Atlas <migrate-community-to-atlas>`
          after adding your Community deployment to |cloud-short| for monitoring.
          In this type of live migration, |service-short| receives data from
          |mms| without requiring access through the firewall.

      * - Your data is in |cloud-short| and you have a :term:`snapshot`.

        - :doc:`Restore a backup of a deployment to an Atlas deployment 
          </tutorial/restore-deployment-to-atlas>`.

      * - Your data is in a MongoDB deployment and you don't have access to the :term:`oplog`.
        - Use :binary:`mongorestore <bin.mongorestore>` to run a self-managed migration.
          To learn more, see :atlas:`Seed with mongorestore </import/mongorestore/>`.

.. cond:: onprem

   .. toctree::
      :titlesonly:
      :hidden:
  
      /tutorial/migrate-to-atlas
      /tutorial/migrate-community-to-atlas
      /tutorial/migrate-deployment-to-new-project


.. cond:: cloud

   .. toctree::
      :titlesonly:
      :hidden:

      /tutorial/migrate-to-atlas
      /tutorial/migrate-community-to-atlas
      /tutorial/restore-deployment-to-atlas
