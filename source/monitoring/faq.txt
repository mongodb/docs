=============================================
Frequently Asked Questions About |monitoring|
=============================================

.. contents::
   :backlinks: none
   :local:
   :depth: 1

.. seealso:: :doc:`/management/faq`

Host Configuration
------------------

How do I add a new host or server?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Click on the plus icon on the top of the `hosts page
<https://mms.mongodb.com/host/list>`_.

Can I monitor Kerberos-enabled nodes?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

No. |monitoring| does not currently support monitoring for
Kerberos-enabled nodes.

.. _db-stats-warning:

How does MMS gather database statistics?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In most instances, |monitoring| will scale its request cycle to limit
more expensive statistics gathering. The information on the DB Stats
tab updates every 10 minutes, and the agent will throttle the frequency
to reduce the impact on the database. [#dbstats-tab]_ Even so, the "DB
stats" operation impacts the performance of your database, as is
possible when installations have a large number of databases and
collections.

In these situations you must disable database stats collection. See
the "DB Stats" section on the "Settings" page in the MMS Console
before starting your agent.

.. [#dbstats-tab] The DB Stats tab will not appear until 30 minutes
   after you add the host to |monitoring|

|monitoring| Agent
------------------

Should I run more than one agent?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The Monitoring agent is fairly robust, and MMS automatically sends an
*Agent Down* alert when a Monitoring agent becomes unavailable. For
most applications, a single Monitoring agent is sufficient. However,
you can choose to run more than one agent to provide redundancy. See:
:ref:`monitoring-architecture` for information.

Why can't the Monitoring agent connect to my host?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The most common problem is that the agent is unable to resolve the
hostname of the server. Check DNS and the ``/etc/hosts`` file.

The second most common problem is that there are firewall rules in
place that prohibit access to the server from the agent.

To test the connection, login to the server running the agent and run:
``mongo hostname:port/test`` If you are unable to connect, the agent
will not be able to connect.

In addition, |monitoring| does currently support monitoring for
Kerberos-enabled nodes: if your host is using Kerberos for
authentication, the |monitoring| Agent will not be able to connect to
it.

How do I download the preconfigured agent?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can download a preconfigured agent from the "Agent" section on the
`settings page`_.

.. _`settings page`: https://mms.mongodb.com/settings

How do I setup and configure the agent?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

See the README file included in the agent download.

Can I run the Monitoring agent on an AWS micro instances?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you are monitoring five or fewer ``mongod`` instances, you can use
a AWS micro instance.
Data Presentation
-----------------

What are all those vertical bars in my charts?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A *red bar* indicates a server restart.

A *purple bar* indicates the server is now a primary.

A *yellow bar* indicates the server is now a secondary.

Why is my hostname displayed in orange?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Your server either has startup warnings or a `very low ulimit set
<http://docs.mongodb.org/manual/reference/ulimit/>`_. This can
introduce problems. If your startup warning is about NUMA, see the
`MongoDB documentation <http://docs.mongodb.org/manual/>`_. If you have
a ulimit of 1024 or less, see the instructions for `increasing your
ulimit <http://docs.mongodb.org/manual/reference/ulimit/>`_.

Why is my Monitoring agent highlighted in red on the Agents tab?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Your agent is out of date. For instructions on updating the agent, see:
:doc:`/monitoring/tutorial/update-mms`.
