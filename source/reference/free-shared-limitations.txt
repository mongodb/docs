.. _atlas-free-tier:

================================================
|service| M0 (Free Tier), M2, and M5 Limitations
================================================

.. default-domain:: mongodb

Configuration Limitations
-------------------------

The following table lists the configuration limitations of |service|
``M0`` Free Tier and ``M2/M5`` shared clusters:

.. list-table::
   :widths: 30 70
   :header-rows: 1
   :stub-columns: 1

   * - Configuration Option
     - Limitation

   * - Cloud Service Provider and Region
     - Limits deployment to a subset of regions on |aws|, |gcp|, and
       Azure. To discover which cloud provider regions support free and
       shared tiers, see:

       - :ref:`Amazon Web Services (AWS) <amazon-aws>`
       - :ref:`Google Cloud Platform (GCP) <google-gcp>`
       - :ref:`Microsoft Azure <microsoft-azure>`

   * - MongoDB Version and Storage Engine
     - Offers :guilabel:`MongoDB 4.2 with WiredTiger` only.

   * - MongoDB Version Upgrade
     - Can't choose to upgrade the MongoDB version.

       |service| upgrades ``M0/M2/M5`` clusters to the newest MongoDB
       version after several patch versions become available for that
       version. To learn more about how MongoDB versions its software,
       see :manual:`MongoDB Versioning </reference/versioning>`.

   * - Cluster Tier
     - Limits free tier cluster to ``M0``.

   * - Cluster Memory
     - You cannot configure memory for ``M0`` Free Tier or ``M2/M5``
       shared clusters.

   * - Cluster Storage
     - You cannot configure storage size for ``M0`` Free Tier or
       ``M2/M5`` shared clusters.

   * - Replication Factor
     - Replication Factor is set to ``3 Nodes`` and cannot be modified
       for ``M0`` Free Tier, or ``M2/M5`` shared clusters.

   * - Replica Set Tags
     - ``M0`` Free Tier, and ``M2/M5`` shared clusters are not
       configured with pre-defined
       :ref:`replica set tags <replica-set-tags>`.

   * - Do You Want A Sharded Cluster
     - You cannot deploy a ``M0`` Free Tier or ``M2/M5`` shared
       cluster as a Sharded Cluster.

   * - Do You Want To Enable Backup
     - You cannot enable backups on ``M0`` Free Tier clusters.

       .. admonition:: Backup Alternative: `mongodump`

          .. include:: /includes/fact-mongodump-for-backup.rst

   * - Test Failovers
     - Unavailable to these cluster tiers.

   * - :doc:`Database Auditing </database-auditing>`
     - Unavailable to these cluster tiers.

   * - :ref:`Encryption at Rest using your Key Management <security-kms-encryption>`
     - Unavailable to these cluster tiers.

   * - :doc:`Network Peering Connections </security-vpc-peering>`
     - Unavailable to these cluster tiers.

   * - Access Tracking
     - Unavailable to these cluster tiers.

   * - |fts|
     - .. include:: /includes/fact-fts-shared-tier-limitations.rst

       An index definition |json| object cannot exceed 3KB in size.

       To learn more about |fts| limitations, see
       :ref:`Atlas Search Limitations on M0, M2, and M5 Clusters <atlas-fts-shared-tier-limitations>`.

Operational Limitations
-----------------------

The following table lists the operational limitations of |service|
``M0`` Free Tier and ``M2/M5`` shared clusters.

.. list-table::
   :widths: 30 70
   :header-rows: 1
   :stub-columns: 1

   * - Configuration Option
     - Limitation

   * - :manual:`Aggregation </aggregation>`
     - Doesn't support the following options:

       - The ``allowDiskUse`` option for its:

         - :manual:`aggregation command </reference/command/aggregate>`
         - :manual:`helper method </reference/method/db.collection.aggregate>`

       - :manual:`Expressions </meta/aggregation-quick-reference/#aggregation-expressions>`
         as values in aggregation fields that represent database and
         collection names (like
         :manual:`$merge </reference/operator/aggregation/merge/>`
         or :manual:`$out </reference/operator/aggregation/out/>`).

       - Returned documents larger than 16 MB for ``$lookup``.

   * - Throughput (|iops|)
     - Limit the maximum number of operations per second to:

       - ``M0``: 100
       - ``M2``: 200
       - ``M5``: 500

   * - Query Utilization
     - Limit queries to utilizing less than 100 percent of time in any
       five-minute period.

   * - Connections
     - Limited to a maximum of 500.

   * - Data Transfer Limits
     - Limited to a total data transferred into or out of the cluster
       as follows:

       - ``M0``: 10 GB in and 10 GB out per week

       - ``M2``: 20 GB in and 20 GB out per week

       - ``M5``: 50 GB in and 50 GB out per week

       |service| throttles the network speed of clusters which
       exceed the posted limits.

   * - Network Compression
     - Unsupported in these cluster tiers.

   * - Server-side JavaScript
     - Unavailable to these cluster tiers.

       .. example::

          :manual:`$where </reference/operator/query/where>` and
          :manual:`map-reduce </core/map-reduce>` are not supported.

   * - |api| Access
     -
       - Don't allow modification of an ``M0`` cluster using the
         :doc:`/reference/api/clusters` |api| endpoint.

       - Limit ``M2``/``M5`` cluster |api| support to a subset of |api|
         endpoints.

   * - Number of Free Tier clusters
     - Limit to *one* ``M0`` Free Tier cluster per |service| project.

   * - Database Commands
     - Limit to certain database commands. Some other database
       commands behave differently in these cluster tiers.

       .. seealso::

          To learn more, see
          :doc:`Command Limitations in Free Tier Clusters </unsupported-commands>`.

       Please contact |service| support for any questions or comments
       related to restricted commands.

   * - |service| Monitoring
     - Limit :guilabel:`Metrics` view to:

       - Connections
       - Logical Size
       - Network
       - Opscounter

       To learn more about these metrics, see
       :ref:`Real Time Metrics <real-time-metrics-status-tab>`.

   * - |service| Alerts
     - Limit triggers to alerts configured with one of the
       following :doc:`alert conditions </reference/alert-conditions>`:

       - Connections
       - Logical Size
       - Network
       - Opscounter

   * - Maximum |bson| Depth
     - Limited to ``50``. |service| doesn't support ``getParameter``
       that provides the ``maxBSONDepth`` value.

   * - Namespaces
     - Limited to 95 bytes.

   * - Database Names
     - Limited to 38 bytes.

   * - Database and Collections
     - Limited to a maximum of 100 databases and 500 collections total.

   * - Database Logs
     - Unavailable to these cluster tiers.

   * - Cluster Persistance
     - Deactivates idle ``M0`` clusters as per the
       :website:`Terms of Service </cloud-terms-and-conditions>`.

   * - Auto-Scaled Storage
     - Unavailable to these cluster tiers.

   * - :doc:`Performance Advisor </performance-advisor>`
     - Unavailable to these cluster tiers.

   * - :doc:`Real-Time Performance Panel </real-time-performance-panel>`
     - Unavailable to these cluster tiers.

   * - :manual:`Build Index with Rolling Build </tutorial/build-indexes-on-replica-sets/>`
     - Unsupported on these clusters.

   * - Custom Roles
     - Deploys changes to
       :doc:`custom roles </security-add-mongodb-roles>`
       in no more than 30 seconds.
