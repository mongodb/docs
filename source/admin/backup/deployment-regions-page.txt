.. _deployment-regions-interface:

==================
Deployment Regions
==================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

|onprem| supports backup regionalization, which allows each cluster or
shard to read from and write to snapshot stores in a region you
choose. To enable regionalized backup, you must configure deployment
regions. You then bind backup resources such as :ref:`snapshot stores
<blockstores-page>` or :opsmgr:`backup daemons
</reference/glossary/#std-term-Backup-Daemon>` to these deployment
regions.

The deployment region page lists all available deployment regions, and
allows you to define new deployment regions.

.. important::

   Regional backups ensure storage isolation of cluster data
   backup. Backup metadata, monitoring, and other |onprem| data not
   related to the specific cluster backup data can still move across
   regions depending on your |onprem| deployment configuration.

   To ensure data isolation during restore procedures, you must
   execute restores only against endpoints in that deployment's
   configured deployment region. This requirement applies when you
   restore replica sets and sharded clusters, as well as queryable
   restores.

   To fulfill backup data sovereignty requirements, you must ensure
   that you configure all backup and restore endpoints correctly and a
   user doesn't request an operation that causes backup data to move
   across regions.

   To further protect against unintentional cross-region backup or
   restore, consider configuring network restrictions for your data
   centers.


To define a new deployment region:

.. procedure::
   :style: normal
   
   .. step:: Click :guilabel:`Add New Deployment Region`.

   .. step:: Configure the deployment region.

      In the :guilabel:`Set up a Deployment Region`
      window, provide values for the following fields:

      .. list-table::
         :widths: 40 60
	 :header-rows: 1

         * - Field
	   - Value

         * - Deployment ID
	   - Unique identifier that references this deployment region
	     in configurations.

         * - Ingestion Endpoint
	   - |onprem| instance to which the
	     :opsmgr:`Backup Agent </reference/glossary/#std-term-backup-agent>`
	     writes snapshot or oplog data.

         * - Restore Endpoint
	   - |onprem| instance that serves restore requests.

         * - Queryable Proxy Server Endpoint
	   - |onprem| instance that serves
	     :opsmgr:`Queryable Backup </reference/glossary/#std-term-queryable-backup>`
	     requests.

         * - Deployment Description
	   - String that describes the purpose of the deployment region.

   .. step:: Click :guilabel:`Confirm`.
