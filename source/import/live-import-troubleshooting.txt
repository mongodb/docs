==============================
Live Migration Troubleshooting
==============================

.. default-domain:: mongodb

Before the :ref:`Live Migration <live-import-replica>` process begins,
Atlas performs a validation check to ensure that all the necessary
form fields and parameters are functional and correct. If any
parameters are invalid, Atlas returns an error and Live Migration does
not proceed. 

Listed below are some common Live Migration validation errors and
suggestions for what to check if you encounter them.

Common Live Migration Validation Errors
---------------------------------------

.. list-table::
   :header-rows: 1

   * - Error
     - Remediation

   * - **Could not reach specified source**
     - 1. Ensure that the correct subnet ranges are
          whitelisted on the source cluster. The four required subnet
          ranges can be found in the Live Migration modal window.

       2. Confirm that the hostname provided is resolvable to a public
          IP address. At a command prompt, use one of the following
          commands:

          .. code-block:: shell

             nslookup <hostname>
             ping <hostname>

       3. Ensure that you are not using a :doc:`VPC Peering Connection
          </security-vpc-peering>`, which is not compatible with Live
          Migration. If a VPC Peering Connection is your only option,
          use :doc:`mongomirror </import/mongomirror>` instead.

   * - **Could not resolve hostname**
     - No IP address was found for the given hostname. Confirm that
       the given hostname is correct and publicly accessible.

   * - **Invalid SSL options provided**
     - If you are using SSL:

       - Confirm that your SSL certificate is complete and correctly
         copied to the Live Migration modal window.

       - Confirm that the :guilabel:`Is SSL enabled?` toggle switch
         is in the ``Yes`` position.

       If you are not using SSL:

       - Check your connection string and confirm that the ``ssl``
         query parameter is not present. If ``--ssl`` is part of your
         connection string, your cluster requires an SSL connection.

       - Confirm that the :guilabel:`Is SSL enabled?` toggle switch
         is in the ``No`` position.

   * - **The username or password is not correct**
     - Confirm your credentials in the :manual:`mongo shell
       </mongo>` with the following commands:

       .. code-block:: javascript

		  use admin
		  db.getUser("<username>");

       If the issue persists, :manual:`update
       </tutorial/change-own-password-and-custom-data>` the MongoDB
       user's password.

   * - **User not authorized to execute command**
     - In order to perform the Live Migration procedure, the MongoDB
       user must have sufficient system privileges. See :ref:`Source
       Cluster Security <live-import-security>` for details.

   * - **Source disk usage is too large for destination**
     - Different Atlas service tiers have different amounts of disk
       space available. Ensure that your Atlas cluster has enough
       disk space for all the data on your source cluster. See
       :ref:`Create a New Cluster <create-cluster-instance>` for
       details on cluster sizing.

   * - **Source appears to be a standalone**
     - Your source deployment must be a MongoDB :manual:`replica set
       </replication>`. If your source deployment is currently a
       standalone node, :manual:`convert it
       </tutorial/convert-standalone-to-replica-set>` to a single-node
       replica set before performing Live Migration.

   * - **Unable to process the provided CA file**
     - Confirm that your CA file is complete and correctly pasted into
       the Live Migration modal window.
