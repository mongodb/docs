.. _mcli-atlas-measurements-databases-list-cmd:

==========================================
mongocli atlas metrics databases list
==========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/styles/corrections.rst

The ``metrics databases list`` command lists available databases on a specified |service| host.

You can get the hostnames associated with a particular |service| project
with the :ref:`process list <mcli-atlas-process-list-cmd>` command.

Syntax 
------

.. code-block:: text 

   mongocli atlas metrics databases list <hostname>:<port> 
        [ --limit <number-of-items-per-page> ]
        [ --page <page-number> ]
        [ --profile|-P <profile-name> ]
        [ --projectId <id-of-project> ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-atlas-measurements-databases-list-options:

Options
-------

.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option
     - Type
     - Description
     - Required?

   * - ``--limit``
     - integer
     - Number of items per page, up to a maximum of 500. Defaults to    
       ``100`` if omitted.
     - no

   * - ``--page``
     - integer
     - Page number (1-based). Defaults to ``1`` if not specified.
     - no

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are saved. If omitted, uses the 
       {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project that contains the 
       alerts to retrieve. If omitted, uses the project ID in 
       the profile or :ref:`environment variable <mcli-env-var>`.
     - no
   

.. _mcli-atlas-measurements-databases-list-output:

Output
------

.. include:: /includes/command-output-intro.rst

.. list-table::
   :header-rows: 1
   :widths: 30 10 60

   * - Name
     - Type
     - Description

   * - ``links``
     - document array
     - An array of documents, representing a :ref:`link <api-linking>` 
       to one or more sub-resources and/or related resources such as
       :ref:`list pagination <api-lists>`. See :ref:`api-linking` for
       more information.

   * - ``results``
     - object array 
     - Each object in the ``results`` array represents a single 
       database for the MongoDB process.

   * - ``results.databaseName``
     - string
     - Name of the database. You can use the value to
       :opsmgr:`retrieve metrics for the
       database </reference/api/process-databases-measurements>`.

   * - ``results.links``
     - document array
     - An array containing a single document with the following
       format:

       .. code-block:: json
          :copyable: false

          {
             "href" :
             "https://cloud.mongodb.com/api/atlas/v1.0/groups/
             {GROUP-ID}/processes/{HOST}:{PORT}/databases/{DATABASE-ID}",
             "rel" : "self"
          }

       You can use the ``href`` value to :opsmgr:`retrieve
       metrics for the database
       </reference/api/process-databases-measurements>`.

       See :ref:`api-linking` for more information on ``links``.

   * - ``totalCount``
     - number
     - The total number of items in the result set. This value might be 
       higher than the number of objects in the ``results`` array if the
       entire result set is paginated.

.. _mcli-atlas-measurements-databases-list-example:

Example
-------

The following example uses the ``mongocli atlas metrics databases
list`` command to retrieve the available databases for a host with ID
``atlas-ap6k8a-shard-00-02.qmljy.mongodb.net``, listening on port ``27017``.

.. code-block:: json

   mongocli atlas metrics databases list atlas-ap6k8a-shard-00-02.qmljy.mongodb.net:27017 

The command prints the following fields to the terminal. To learn more
about these fields, see
:ref:`mcli-atlas-measurements-databases-list-output`.

.. code-block:: json
   :copyable: false

   {
      "links":[
         {
            "rel":"self",
            "href":"https://cloud.mongodb.com/api/atlas/v1.0/groups/12345678/processes/atlas-ap6k8a-shard-00-02.qmljy.mongodb.net:27017/databases?pageNum=1&itemsPerPage=100"
         }
      ],
      "results":[
         {
            "databaseName":"local",
            "links":[
               {
                  "href":"https://cloud.mongodb.com/api/atlas/v1.0/groups/12345678/processes/atlas-ap6k8a-shard-00-02.qmljy.mongodb.net:27017/databases/local",
                  "rel":"self"
               }
            ]
         },
         {
            "databaseName":"sample",
            "links":[
               {
                  "href":"https://cloud.mongodb.com/api/atlas/v1.0/groups/12345678/processes/atlas-ap6k8a-shard-00-02.qmljy.mongodb.net:27017/databases/sample",
                  "rel":"self"
               }
            ]
         }
      ],
      "totalCount":2
   }
