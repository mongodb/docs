.. _atlasdatafederation-custom-resource:

=======================================
``AtlasDataFederation`` Custom Resource
=======================================

.. meta::
   :description: Configure a federated database instance in Atlas using the `AtlasDataFederation` custom resource with Kubernetes Operator.

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. note:: 

   |ak8so| doesn't support the ``AtlasDataFederation`` custom resource for 
   |service| for Government.

The ``AtlasDataFederation`` custom resource configures a {+fdi+} in
|service|. When you create the ``AtlasDataFederation`` custom
resource, |ak8so| tries to create or update a {+fdi+} in
|service|. You can use an {+fdi+} to run :ref:`federated queries
<atlas-data-federation>`.

.. include:: /includes/fact-ak8so-crds.rst

|ak8so| uses the |service| :oas-bump-atlas-tag:`Clusters API Resource 
<clusters>` and :oas-bump-atlas-tag:`Advanced {+Clusters+} API Resource 
<clusters>` to create a new {+fdi+} or
update an existing {+fdi+}. If you specify values for fields under
``spec.serverlessSpec``, |ak8so| uses the |service|
:oas-bump-atlas-tag:`Serverless Instance API Resource 
<serverless-instances>` to create or configure private endpoints for
your {+fdi+}.

If you remove the ``AtlasDataFederation`` resource from your |k8s| 
{+cluster+}, |ak8so| removes the {+fdi+} from |service|.

Examples
--------
     
The following example shows an ``AtlasDataFederation`` custom resource 
specification with configured private endpoints:

.. _atlasdatafederation-crd-params:

.. literalinclude:: /includes/ak8so-data-federation-CR-example.yaml

Parameters
----------

.. include:: /includes/manual-crds/atlas-data-federation.rst
