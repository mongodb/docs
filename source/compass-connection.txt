===================
Connect via Compass
===================

.. default-domain:: mongodb

.. meta::
   :keywords: connect

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The :guilabel:`Connect` dialog for a cluster provides the details to connect
to a cluster via `Compass
<https://www.mongodb.com/download-center?jmp=docs#compass>`__.

Prerequisites
-------------

TLS/SSL
   Clients must have support for TLS/SSL to connect to an |service| cluster.

   Clients must have support for the `SNI
   <https://tools.ietf.org/html/rfc6066#section-3>`_ TLS extension to connect
   to an |service| ``M0`` Free Tier or ``M2/M5`` shared starter cluster.
   The :abbr:`SNI (Server Name Indication)` TLS extension is
   supported by Compass version 1.5 and up.

.. include:: /includes/fact-connection-prereq-whitelist.rst

.. include:: /includes/fact-connection-prereq-user.rst

.. _compass-connect-automatically:

Connect to Your Cluster
-----------------------

.. tabs::

   tabs:
     - id: compass_latest
       name: Compass 1.8+
       content: |

         Use the following procedure to connect Compass 1.8 or later
         versions to your |service| cluster.

         .. include:: /includes/steps/connect-to-cluster-compass.rst

     - id: compass_old
       name: Compass 1.7 or earlier
       content: |
          For Compass 1.7 or earlier versions, you can manually create a new
          connection in `Compass
          <https://www.mongodb.com/download-center?jmp=docs#compass>`__.

          To set up a :guilabel:`New Connection` from Compass to your |service| cluster,
          enter the following information in Compass and click :guilabel:`Connect`:

          .. list-table::
             :header-rows: 1
             :widths: 40 60

             * - Field Name
               - Description

             * - :guilabel:`Hostname`

               - The hostname of primary for a replica set or the hostname for the
                 :binary:`mongos <bin.mongos>` for a sharded cluster.

                 For a replica set, you can locate the primary hostname in the |service|
                 UI by:

                 #. Clicking :guilabel:`Clusters`,
                 #. Clicking the cluster you want to connect to,
                 #. Click on the replica set member marked as :guilabel:`PRIMARY`, and
                 #. Copy the hostname of the replica set.

                 For a sharded cluster, from the |service| UI click :guilabel:`Connect`
                 for the cluster and click :guilabel:`Connect Your Application`.
                 Extract the :binary:`mongos <bin.mongos>` hostname from the
                 :manual:`URI connection string </reference/connection-string>`.

                 Make note of the port number of the primary or :binary:`mongos
                 <bin.mongos>` and use it to fill in the :guilabel:`Port` field in
                 Compass.

             * - :guilabel:`Port`

               - The port of the primary for a replica set or the port for the
                 :binary:`mongos <bin.mongos>` for a sharded cluster.

             * - :guilabel:`Authentication`
               - Select ``Username / Password``.

             * - :guilabel:`Username`

               - MongoDB user. The |service| connection details displays the
                 MongoDB administration user set up for the cluster. You can
                 connect with a different MongoDB user.

             * - :guilabel:`Password`

               - Password associated with the specified MongoDB user.

             * - :guilabel:`Authentication Database`

               - Specify ``"admin"``.

             * - :guilabel:`Replica Set Name`
               - The name of the |service| cluster's replica set. You can retrieve this
                 by clicking the :guilabel:`Connect` button for the cluster and
                 selecting :guilabel:`Connect Your Application`. Extract the replica
                 set name from the URI connection string's ``replicaSet`` value.

             * - :guilabel:`Read Preference`
               - Specify how Compass directs read operations. Options are
                 ``Primary``, ``Primary Preferred``, ``Secondary``,
                 ``Secondary Preferred``, and ``Nearest``. See
                 :manual:`/core/read-preference`.

             * - :guilabel:`SSL`
               - Select ``"Use System CA / Atlas Deployment"``

             * - :guilabel:`SSH Tunnel`
               - Select ``"Off"``

             * - :guilabel:`Favorite Name`
               - Enter a name for the connection if saving as a favorite.
