======================
Create a Rolling Index
======================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/api-requirements.rst

.. include:: /includes/api-base-url.rst

Syntax
------

.. code-block:: none

   POST /groups/{GROUP-ID}/clusters/{CLUSTER-NAME}/index

Required Roles
--------------

You must have one of the following roles to successfully call this resource:

- :authrole:`Project Owner`
- :authrole:`Project Cluster Manager`
- :authrole:`Project Data Access Admin`

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 15 10 75

   * - Path Element
     - Required/Optional
     - Description

   * - ``GROUP-ID``
     - Required.
     - Unique identifier of the :ref:`project <group-id>` which holds the
       cluster on which to create an index.

   * - ``CLUSTER-NAME``
     - Required.
     - The name of the cluster on which to create an index.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

This endpoint has no request query parameters.

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :widths: 25 15 45 15
   :header-rows: 1

   * - Name
     - Type
     - Description
     - Required

   * - ``db``
     - string
     - The name of the database that holds the collection on which to create
       an index.
     - Required

   * - ``collection``
     - string
     - The name of the collection on which to create an index.
     - Required

   * - ``keys``
     - array of objects
     - An array containing one or more objects in which the key is the
       field to be indexed and the value is the type of the index. For more
       information on index creation syntax, see the :manual:`createIndex()
       </reference/method/db.collection.createIndex/>` shell method.

       .. important::

          If you want to create a :manual:`multikey index </core/index-multikey/>`,
          you must list each field in its own object within the ``keys``
          object array. JSON does not guarantee item order, so if you list
          multiple fields in the same object, the index may not build correctly.

     - Required

   * - ``options``
     - object
     - A document that contains a set of options that controls the creation
       of the index. See :manual:`Index Options
       </reference/method/db.collection.createIndex/#options>`
       for more information.
     - Optional

   * - ``collation``
     - object
     - A document that contains a set of options to control index collation.
       See :manual:`Collation Options
       </reference/method/db.collection.createIndex/#option-for-collation>`
       for more information.
     - Optional

Response
--------

This endpoint returns an empty document.

Example
-------

Request
~~~~~~~


.. code-block:: none

   curl -u "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \
    --header "Accept: application/json" \
    --header "Content-Type: application/json" \
    --request POST "https://cloud.mongodb.com/api/atlas/v1.0/groups/{GROUP-ID}/clusters/{CLUSTER-NAME}/index" \
    --data '{ 
              "db": "test",
              "collection": "myCollection",
              "keys": [{ "myField": 1 }],
              "collation": { "locale": "us", "strength": 2 }
            }'

Response
~~~~~~~~

.. code-block:: none
   :copyable: false

   {}
