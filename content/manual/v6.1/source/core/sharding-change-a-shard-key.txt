.. _change-a-shard-key:

==================
Change a Shard Key
==================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

The ideal shard key allows MongoDB to distribute documents evenly
throughout the cluster while facilitating common query patterns. A
suboptimal shard key can lead to uneven data distribution and the
following problems:

- :ref:`Jumbo chunks <sharding-troubleshooting-jumbo-chunks>`
- :ref:`Uneven load distribution
  <sharding-troubleshooting-monotonicity>`
- :ref:`Decreased query performance over time
  <sharding-troubleshooting-scatter-gather>`

To address these issues, MongoDB allows you to change your shard key:

- Starting in MongoDB 5.0, you can :ref:`reshard a collection
  <sharding-resharding>` by changing a collection's shard key.
- Starting in MongoDB 4.4, you can :ref:`refine a shard key
  <shard-key-refine>` by adding a suffix field or fields to the existing
  shard key.

In MongoDB 4.2 and earlier, a document's shard key is immutable.

For more information on common performance and scaling issues and advice
on how to fix them, read :ref:`shardkey-troubleshoot-shard-keys`.

.. toctree::
   :titlesonly:

   /core/sharding-refine-a-shard-key.txt
   /core/sharding-reshard-a-collection.txt
