.. _billing-dashboards:

====================================
Create and Manage Billing Dashboards
====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can visualize your |service| billing data in |charts| by 
creating a billing dashboard. Billing dashboards are 
:ref:`dashboards <dashboards>` with prebuilt charts that 
help you monitor your |service| usage. After you ingest your
billing data, you can add a billing dashboard and customize 
it to suit your specific billing needs.

To learn more about how |service| bills your deployments, 
see :atlas:`Manage Billing </billing>`.

Billing Dashboards
------------------

Billing dashboards provide metrics and detailed charts about the 
usage in your organization across different categories 
and periods of time. The insights from your dashboard 
can help you optimize your |service| spending.

.. figure:: /images/charts/atlas-billing-dashboard.png
   :figwidth: 750px
   :alt: Atlas Billing Dashboard example.

By default, billing dashboards include the following metrics 
and charts:

- Total spending across your organization
- Biggest spenders in your organization
- Total spending by instance size, project, cluster, product category, or SKU
- Total cost by product category

Required Access
---------------

To create a billing dashboard, you must have at least 
:authrole:`Project Data Access Read/Write` permissions.

Limitations
-----------

At any given time, billing dashboards use 
the last twelve months of your organization's billing data.

If you change an existing invoice, |service| updates the
billing data in your ingestion only if you've incurred 
the invoice within the last three months. Any invoice changes
reflect in your dashboard after the next scheduled ingestion.

Create a Billing Dashboard
--------------------------

To ingest your billing data and add a billing dashboard:

.. procedure:: 
   :style: normal

   .. step:: In the left navigation menu, click :guilabel:`Ingestions`.
      
   .. step:: In the :guilabel:`Atlas Billing` card, click :guilabel:`Add configuration`.

      The :guilabel:`New Configuration` dialog box displays.

      .. figure:: /images/charts/atlas-billing-ingestion-configuration.png
         :figwidth: 500px
         :alt: Configuration box for the Atlas Billing Ingestion.

   .. step:: Configure the |service| Billing Ingestion.

      a. Enter your :guilabel:`Organization public API key` and :guilabel:`Organization private API key`.
      
         Your key pair must have at least :authrole:`Organization Billing Admin`
         and :authrole:`Organization Billing Viewer` access.
         
         To learn how to create and view an API key for your organization,
         see :atlas:`Grant Programmatic Access to Atlas 
         </configure-api-access/#grant-programmatic-access-to-service>`.

      #. From the dropdown, select the :guilabel:`Target deployment` to 
         store your billing data.
      #. (Optional) Change the :guilabel:`Database name`.

   .. step:: Click :guilabel:`Save`.

      |charts-short| uses the :oas-atlas-tag:`Invoices API </Invoices>`
      to ingest the last twelve months of your organization's billing 
      data into the specified deployment and database. After you create
      the initial ingestion, |service| ingests billing data daily.

   .. step:: In the :guilabel:`Atlas Billing` card, click :guilabel:`Add and Open`.
   
      |charts-short| generates the billing dashboard and saves it to 
      the :guilabel:`Dashboards` page. All dashboard and chart
      features, such as :ref:`dashboard filters <filter-dashboards>` 
      and :ref:`interactive filtering <interact-with-charts>`, apply to
      billing dashboards and its prebuilt charts.

Manage |service| Billing Ingestions
-----------------------------------

Edit an Ingestion
~~~~~~~~~~~~~~~~~

To edit an existing billing ingestion:

.. procedure::
   :style: normal

   .. step:: In the left navigation menu, click :guilabel:`Ingestions`.

   .. step:: In the :guilabel:`Atlas Billing` card, click the :guilabel:`Ellipses (...)`, and then click :guilabel:`Edit Configuration`.

   .. step:: Reconfigure your data ingestion information.

   .. step:: Click :guilabel:`Save`.

Delete an Ingestion
~~~~~~~~~~~~~~~~~~~

To delete an existing billing ingestion:

.. procedure::
   :style: normal

   .. step:: In the left navigation menu, click :guilabel:`Ingestions`.

   .. step:: In the :guilabel:`Atlas Billing` card, click the :guilabel:`Ellipses (...)`, and then click :guilabel:`Delete Configuration`.

   .. step:: Click :guilabel:`Delete` to confirm your selection.
