---
ref: adf-log-in-atlas
stepnum: 1
inherit:
  file: steps-adf-deploy-source.yaml
  ref: adf-log-in
---
ref: adf-left-nav-atlas
stepnum: 2
inherit:
  file: steps-adf-deploy-source.yaml
  ref: adf-left-nav
---
ref: configure-new-fdi-atlas
stepnum: 3
inherit:
  file: steps-adf-deploy-source.yaml
  ref: configure-new-fdi
---
ref: select-configure-method-atlas
stepnum: 4
inherit:
  file: steps-adf-deploy-source.yaml
  ref: select-configure-method
---
ref: specify-data-store-atlas
stepnum: 5
level: 4
title: "Specify your data store."
content: |

  .. tabs::

     .. tab:: Visual Editor
        :tabid: visual-editor

        If you are using the :guilabel:`Visual Editor`:

        a. Click :guilabel:`Add Data Sources` in the 
           :guilabel:`Datasets` section to choose your data store.

        #. Click :guilabel:`Atlas Cluster` to configure a {+fdi+} for
           data in an |service| cluster.

           Corresponds to :datalakeconf-atlas:`stores.[n].provider` 
           |json| configuration setting.

        #. Specify the |service| cluster that you want to use as a data
           store in the :guilabel:`Provide Namespaces in this 
           project` section. To specify, select the cluster from the 
           dropdown.

           Corresponds to :datalakeconf-atlas:`stores.[n].clusterName` 
           |json| configuration setting.
        
        #. Expand the databases and select the collections that you 
           want to add to your {+fdi+}.

           .. tip::

              To filter the databases and collections, enter text into 
              the :guilabel:`Search database or collection` field. The 
              dialog displays only databases and collections with names
              that match your search criteria.

           Corresponds to the
           :datalakeconf-atlas:`databases.[n].collections.[n].dataSources.[n].database`
           and :datalakeconf-atlas:`databases.[n].collections.[n].dataSources.[n].collection`
           |json| configuration settings.

        #. *Optional*. Specify the :guilabel:`Cluster Read Preference` 
           settings by expanding the section. 

           Corresponds to :datalakeconf-atlas:`stores.[n].readPreference`.
            
           .. list-table:: 
              :header-rows: 1
              :widths: 25 75 

              * - Field Name 
                - Description

              * - :guilabel:`Read Preference Mode`
                - Specifies the replica set member to which you want to 
                  route the read requests. You can choose one of the 
                  following from the dropdown: 

                  .. include:: /includes/data-federation/fact-read-preference-modes.rst

                  If you add an |service| cluster as a store, the
                  value default value is ``secondary``.
                  
                  If you don't set anything in your {+fdi+} storage
                  configuration, the default value is ``nearest``. To
                  learn more, see :manual:`Read preference mode 
                  </core/read-preference/#read-preference-modes>`.

                  Corresponds to :datalakeconf-atlas:`stores.[n].readPreference.mode`.

              * - :guilabel:`TagSets`
                - Specifies the list of tags or tag 
                  specification documents that contain name and value 
                  pairs for the replica set member to which you want to 
                  route read requests. To learn more, see :manual:`Read 
                  Preference Tag Sets </core/read-preference-tags/>`.

                  Corresponds to :datalakeconf-atlas:`stores.[n].readPreference.tagSets`.

              * - :guilabel:`Maxstaleness Seconds`
                - Specifies the maximum replication lag, or 
                  “staleness”, for reads from secondaries. To learn 
                  more, see :manual:`Read Preference 
                  maxStalenessSeconds 
                  </core/read-preference-staleness/>`.

                  Corresponds to :datalakeconf-atlas:`stores.[n].readPreference.maxStalenessSeconds`.

        #. Click :guilabel:`Next`.

     .. tab:: JSON Editor
        :tabid: json-editor
     
        a. Edit the |json| configuration settings. Your configuration
           for an |service| cluster data store should look similar to
           the following:

           .. literalinclude:: /includes/data-federation/atlas-config-format.json
              :linenos:
              :language: json

           To learn more about these configuration settings, see 
           :ref:`config-adf`.

        b. Skip to step 7.
---
ref: drag-drop-data-store-atlas
stepnum: 6
inherit:
  file: steps-adf-deploy-source.yaml
  ref: drag-drop-data-store
---
ref: save-configuration-atlas
stepnum: 7
inherit:
  file: steps-adf-deploy-source.yaml
  ref: save-configuration
...
