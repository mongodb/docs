=============================================
Connect to Hosts with Kerberos Authentication
=============================================

.. admonition:: Enterprise Feature

   Only MongoDB Enterprise provides support for Kerberos.

Kerberos is a generic authentication protocol available in MongoDB
Enterprise after version 2.4. The |monitoring| agent can authenticate
to monitored hosts using Kerberos in addition to the default MongoDB
authentication protocol.

Install the :doc:`monitoring agent </monitoring/tutorial/set-up-mms>`
and all requirements before beginning to configure Kerberos.

You must configure the Kerberos Key Distribution Center (KDC) to grant
tickets that are valid for at least four hours. The monitoring agent takes
care of periodically renewing the ticket. The KDC service provides session
tickets and temporary session keys to users and computers.

Install Required Operating System Packages
------------------------------------------

Debian and Ubuntu Linux
~~~~~~~~~~~~~~~~~~~~~~~

Install the following required packages:

.. code-block:: sh

   sudo apt-get install krb5-user libkerb5-dev build-essential

Red Hat Enterprise, CentOS and Fedora Linux
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Install the following required packages:

.. code-block:: sh

   sudo yum install krb5-appl-clients.x86_64 krb5-devel.x86_64

Configure Kerberos Environment
------------------------------

.. include:: /includes/steps/kerberos-configure-environment.rst

Create Kerberos Principal and MongoDB User
------------------------------------------

.. include:: /includes/steps/kerberos-create-users.rst
  
Specify Kerberos for Hosts
--------------------------

For each host that connects with Kerberos, go to the :guilabel:`Hosts`
page, and the :guilabel:`Hosts`, :guilabel:`Mongos`, or
:guilabel:`Configs` tab to display the lists of available hosts. Click the
:guilabel:`gear icon` on the right of any host and select
:guilabel:`Kerberos (GSSAPI)` as the Auth Mechanism on the
:guilabel:`Credentials` tab of the Edit Host interface.
