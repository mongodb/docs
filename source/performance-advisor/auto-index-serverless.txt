.. _auto-index-serverless:

================================================
Auto-Create Indexes for {+Serverless-Instances+}
================================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. facet::
   :name: genre
   :values: tutorial

|service| can automatically create indexes for your 
{+serverless-instance+} to improve query performance.

How Auto-Index Creation Works
-----------------------------

.. include:: /includes/fact-how-auto-index-works.rst

|service| can auto-create up to four indexes per collection in your
{+serverless-instance+}.

Auto-Index Creation Frequency
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If auto-index creation is enabled, |service| checks once per hour for
slow queries on your {+serverless-instance+}. If there are at least 50
slow queries logged in the last hour, |service| creates one new index
at a time if both of the following criteria are met:

- |service| finds high-impact index suggestions.
- |service| determines that building a new index won't negatively
  affect the performance of the {+serverless-instance+}. When
  determining performance impact, |service| checks concurrent index
  builds, |cpu|, memory, and other factors.

Enable or Disable Auto-Index Creation
-------------------------------------

|service| enables
auto-indexing for {+serverless-instances+} by default. You can manually
disable or re-enable auto-index creation with the {+atlas-ui+}. If enabled, auto-index creation applies to all
collections in the {+serverless-instance+}.

Enable Auto-Index Creation
~~~~~~~~~~~~~~~~~~~~~~~~~~

To enable auto-index creation for your {+serverless-instance+} with
the {+atlas-ui+}:

.. procedure::
   :style: normal

   .. include:: /includes/steps-open-performance-advisor.rst

   .. step:: In the :guilabel:`Create Indexes` panel, toggle :guilabel:`Turn on Auto-Create Suggested Indexes` to on.

Once you enable auto-index creation, |service| begins to automatically
create any suggested high-impact indexes.

Disable Auto-Index Creation
~~~~~~~~~~~~~~~~~~~~~~~~~~~

To disable auto-index creation for your {+serverless-instance+} with
the {+atlas-ui+}:

.. procedure::
   :style: normal

   .. include:: /includes/steps-open-performance-advisor.rst

   .. step:: In the :guilabel:`Create Indexes` panel, toggle :guilabel:`Turn on Auto-Create Suggested Indexes` to off.

After you disable auto-index creation, |service| stops automatically
creating any suggested high-impact indexes.

Review Automatically Created Indexes
------------------------------------

.. include:: /includes/fact-review-auto-indexes.rst

Drop Automatically Created Indexes
----------------------------------

.. include:: /includes/fact-drop-auto-indexes.rst
