.. _restore-from-local-file:

==============================================
Restore from a Locally-Downloaded Snapshot
==============================================

.. default-domain:: mongodb

.. meta::
   :keywords: restore, backup, file

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol


|service| provides a mechanism for downloading dedicated {+cluster+},
shared {+cluster+}, and {+old-backup+} snapshots as compressed files.

Restore Considerations
~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/fact-restore-reqs.rst

- This feature is unavailable for ``M0`` {+clusters+} and 
  for {+serverless-instances+}.

- The downloaded files consist of the raw files copied from the 
  ``data`` directory. ``mongorestore`` is incompatible with these 
  files. To access the data files, use the following procedure to start
  a :binary:`~bin.mongod` instance and point it to the extract 
  directory.

.. _restore-cloud-provider-snapshot-download:

Procedure
~~~~~~~~~

.. include:: /includes/fact-restore-cluster-downtime-warning.rst

.. tabs::

   .. tab:: Cloud Backups
      :tabid: cloud-p-pit-restore-dl

      To learn more about this backup type, see :ref:`backup-cloud-provider`.

      Considerations
      ``````````````

      When you manually download a cloud backup snapshot, your download 
      might get interrupted for some reason. |service| keeps
      the request alive and allows you to restart it as long as the 
      most recent download failure occurred no more than one hour ago.

      .. include:: /includes/steps/manual-restore-cps.rst

   .. tab:: {+Old-Backup+}
      :tabid: cb-dl

      To learn more about this backup type, see
      :ref:`legacy-backup`.

      .. include:: /includes/steps/manual-restore-cb.rst

Restore a Cloud Manager Snapshot to |service|
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can automatically restore a backup for a |mms| deployment to an 
|service| deployment. Before you restore a snapshot from a |mms| 
deployment to an |service| deployment, ensure that the hosts for 
your |service| deployment have sufficient storage space for the 
restored databases, plus additional space for dataset growth. Use 
:manual:`db.stats() </reference/method/db.stats/>`
to find the current database size.

The MongoDB server version must be one of the following:

- The same on both deployments.

- One version higher on the |service| deployment. 

Also, the instance types of the nodes in the |service| 
deployment should have at least as much memory and throughput capacity 
as the nodes in the |mms| deployment.

To learn more, see :cloudmgr:`Restoring a Deployment to MongoDB Atlas</tutorial/restore-deployment-to-atlas>`.
