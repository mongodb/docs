.. procedure:: 
   :style: normal 

   .. include:: /includes/nav/steps-db-deployments-page.rst

   .. include:: /includes/nav/steps-atlas-search.rst

   .. step:: Click :guilabel:`Create Index`.

      a. Click :guilabel:`Atlas Search` under :guilabel:`Services` in 
         the navigation bar.
      #. Select your {+cluster+} from the :guilabel:`Select data source` 
         dropdown and click :guilabel:`Go to Atlas Search`. 

   .. step:: Define the {+avs+} index.

      a. Click :guilabel:`Create Search Index`.
      #. Under :guilabel:`{+avs+}`, select :guilabel:`JSON Editor`  and
         then click :guilabel:`Next`.
      #. In the :guilabel:`Database and Collection` section, find the 
         ``sample_mflix`` database, and select the ``embedded_movies``
         collection.
      #. In the :guilabel:`Index Name` field, enter
         ``rrf-vector-search``. 
      #. Replace the default definition with the following index
         definition and then click :guilabel:`Next`.

   .. step:: Define the {+avs+} index. 

      a. Replace the default definition with the following index definition.

         This index definition indexes the ``plot_embedding`` field as
         the :ref:`vector <avs-types-vector-search>` type. The
         ``plot_embedding`` field contains embeddings created using
         OpenAI's ``text-embedding-ada-002`` embedding model. The index
         definition specifies ``1536`` vector dimensions and measures
         similarity using ``euclidean``.  

         .. code-block:: json 
            :copyable: true 
            :linenos: 

            {
              "fields": [
                {
                  "type": "vector",
                  "path": "plot_embedding",
                  "numDimensions": 1536,
                  "similarity": "euclidean"
                }
              ]
            }

   .. step:: Review the index definition and then click :guilabel:`Create Search Index`.

      A modal window displays to let you know that your index is building.

   .. step::  Click :guilabel:`Close` to close the :guilabel:`You're All Set!` modal window and wait for the index to finish building. 

      The index should take about one minute to build. While it
      builds, the :guilabel:`Status` column reads :guilabel:`Initial
      Sync`. When it finishes building, the :guilabel:`Status` column
      reads :guilabel:`Active`. 

   .. step:: Click :guilabel:`Create Index` to define the |fts| index.

   .. step:: Select an |fts| :guilabel:`Configuration Method` and click :guilabel:`Next`.

      - For a guided experience, select the |fts| :guilabel:`Visual Editor`.
      - To edit the raw index definition, select the |fts| :guilabel:`JSON Editor`.

   .. step:: Enter the Index Name, and set the Database and Collection.

      a. In the :guilabel:`Index Name` field, enter ``rrf-full-text-search``.

         .. include:: /includes/default-fts-index-name.rst 

      #. In the :guilabel:`Database and Collection` section, find the 
         ``sample_mflix`` database, and select the ``embedded_movies``
         collection.

   .. step:: Define the |fts| index. 

      The following index definition indexes the ``title`` field as the 
      :ref:`string <bson-data-types-string>` type for querying the
      field.  

      You can use the |fts| :guilabel:`Visual Editor` or the |fts| :guilabel:`JSON 
      Editor` in the |service| user interface to create the index.

      .. tabs:: 
  
         .. tab:: Visual Editor
            :tabid: vib
  
            a. Click :guilabel:`Next`.
            #. Click :guilabel:`Refine Your Index`.
            #. In the :guilabel:`Index Configurations` section, toggle to
               disable :guilabel:`Dynamic Mapping`. 
            #. In the :guilabel:`Field Mappings` section, click
               :guilabel:`Add Field` to display the :guilabel:`Add Field
               Mapping` window. 
            #. Select ``title`` from the :guilabel:`Field Name` dropdown.
            #. Select :guilabel:`String` from the :guilabel:`Data Type`
               dropdown.
            #. Click :guilabel:`Add`.

         .. tab:: JSON Editor
            :tabid: jsonib
  
            a. Replace the default index definition with the following definition.

               .. code-block:: json 
                  :copyable: true 
                  :linenos: 

                  {
                    "mappings": {
                      "dynamic": false,
                      "fields": {
                        "title": [{
                          "type": "string"
                        }]
                      }
                    }
                  }

            #. Click :guilabel:`Next`.

   .. step:: Click :guilabel:`Create Search Index`.

      A modal window displays to let you know that your index is building.

   .. step:: Close the :guilabel:`You're All Set!` modal window by clicking :guilabel:`Close` and wait for the index to finish building. 

      The index should take about one minute to build. While it is
      building, the :guilabel:`Status` column reads :guilabel:`Initial
      Sync`. When it is finished building, the :guilabel:`Status` column
      reads :guilabel:`Active`. 
      