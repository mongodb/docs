:template: product-landing
:hidefeedback: header
:noprevnext:

.. _atlas-data-federation:

================================
Set Up and Query Data Federation  
================================

.. default-domain:: mongodb

.. introduction:: 

   Seamlessly query, transform, and aggregate data from one or more 
   MongoDB Atlas databases, |aws| |s3| buckets, and {+adl+}  
   datasets. Get the insights you need or get the data into the hands 
   of those who need it!

   .. button:: Get Started
      :uri: https://www.mongodb.com/docs/atlas/data-federation/tutorial/getting-started/

   :doc:`Learn More About Atlas Data Federation <data-federation/overview>`

.. image:: /images/data-federation/adf-plp-hero.png 
   :alt: MongoDB Atlas Data Federation landing page hero image

.. kicker:: What You Can Do

Flexibility for Your Data
-------------------------

{+df+} provides the capability to federate queries across data stored 
in various supported storage formats, including |service| Clusters,  
{+dl+} Datasets, |aws| |s3| Buckets, and |http| Stores. You can derive 
insights or move data between any of the supported storage formats of 
the service.

.. tabs::

   .. tab:: Provide Data Downstream
      :tabid: adf-create-stores

      .. procedure::

         .. step:: Connect Your S3 Bucket

            Utilize the wizard to create a Federated Database and 
            provide credentials to your |s3| bucket allowing access to 
            {+df+}.

            See :ref:`Configuration for S3 Data Store 
            <adf-configuration-file-aws>`.

         .. step:: Map Your Virtual Collections

            Utilize the Visual Builder or the |json| of your Storage 
            Configuration to map source cluster data to Virtual 
            Collections inside your {+fdi+}.

            See :ref:`gst-deploy-adf`.

         .. step:: Run ``$out`` to S3

            Use any MongoDB Compatible tool (such as |service| 
            Scheduled Triggers or Apache Airflow) and orchestrate "$out 
            to S3" operations to write data from your cluster into 
            Parquet format files in |s3|.

            See :ref:`$out to S3 <adf-out-stage>`.

      .. image:: /images/data-federation/adf-plp-tab1.png 
         :alt: MongoDB Atlas Data Federation S3 data store configuration image

   .. tab:: Query Across Data Sources
      :tabid: adf-query-data

      .. procedure::

         .. step:: Connect to a Federated Database

            Configure and connect your {+fdi+} using IP Access Lists or 
            Private Link. Utilize your database username and password 
            or X.509 for authentication.

            See :ref:`Configure and Connect to Your Federated Database <config-connection>`.

         .. step:: Query Using Your Favorite Tools

            Connect and query using any MongoDB-compatible tool, 
            including SQL tools that use the MongoDB JDBC Driver or 
            Tableau Connector. 

            See :ref:`Run Federated Queries <query-adl>`.

         .. step:: Query Using Atlas SQL

            Utilize MongoDB's Atlas SQL dialect to query your 
            richly-structured MongoDB data.

            See :ref:`query-with-sql`.

      .. image:: /images/data-federation/adf-plp-tab2.png
         :alt: MongoDB Atlas Data Federation query federated databases image

   .. tab:: Query Data Lake Datasets
      :tabid: atlas-search-results

      .. procedure::

         .. step:: Create a Data Lake Pipeline

            Head over to {+adl+} and create a {+dl+} pipeline from an 
            |service| cluster collection. 

            See :adl:`Create a Data Lake </tutorial/add-dataset-pipeline/>`.

         .. step:: Map to Virtual Collections

            Create virtual collections in your {+fdi+} sourcing data 
            from your newly created {+dl+} dataset.

            See :ref:`Configuration for Data Lake Datasets <adf-configuration-file-adl>`.

         .. step:: Query with MongoDB Compass

            Connect your favorite native MongoDB Query Workbench like 
            Compass or connect any SQL-native workbench using the 
            MongoDB JDBC driver.

            See :compass:`Connect with Compass </connect/general-connection/>`.

      .. image:: /images/data-federation/adf-plp-tab3.png
         :alt: MongoDB Atlas Data Federation Data Lake datasets mapping image

.. kicker:: Related Products & Resources

Tutorials to get you started!
-----------------------------

Follow the tutorials below to get a headstart on solving your most 
pressing challenges!

.. card-group::
   :columns: 3
   :style: compact

   .. card::
      :cta: Follow the tutorial
      :url: https://www.mongodb.com/developer/how-to/mongodb-data-parquet/
      :icon: /images/data-federation/adf-plp-pipelines.png
      :icon-alt: MongoDB Atlas Data Federation icon for exporting data

      Export data from your Atlas Cluster to Parquet files

   .. card::
      :cta: Query multiple databases
      :url: https://www.mongodb.com/developer/products/atlas/query-multiple-databases-with-atlas-data-federation/
      :icon: /images/data-federation/adf-plp-atlas-dbs.png
      :icon-alt: MongoDB Atlas Data Federation icon for querying Atlas DBs

      Query across data from multiple Atlas clusters

   .. card::
      :cta: Try it in a sandbox
      :url: https://www.mongodb.com/atlas/data-federation-demo
      :icon: /images/data-federation/adf-plp-atlas-sql.png
      :icon-alt: MongoDB Atlas Data Federation icon for sandbox

      Learn from a walkthrough and query your own data in a sandbox 

.. toctree::
   :titlesonly:
   :hidden:

   /data-federation/overview
   /data-federation/tutorial/getting-started
   /data-federation/config/config-data-stores
   /data-federation/administration
   /data-federation/query/query-federated-database
   /data-federation/query/query-with-sql
   /data-federation/tutorials
   /data-federation/supported-unsupported
   /data-federation/supported-unsupported/limitations
