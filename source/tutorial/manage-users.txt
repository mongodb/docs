================
Manage MMS Users
================

.. default-domain:: mongodb

.. index:: users

Overview
--------

MMS users provide access to |mms| groups. You can create a new user in a group
to give access to that group. You can later give the user access to additional
groups. When you create a user, you assign the user a role in the group. A
role determines the actions the user can perform and the data the user can
access.

Procedures
----------

Add Users
+++++++++

.. include:: /includes/steps/add-user.rst

.. only:: classic or cloud

   If the console finds a connected Jira account, MMS will automatically
   add the user to your Jira group and the MMS console.

   Users can also create accounts using the `account registration page
   <https://mms.mongodb.com/user/register/user>`_, or through Jira at
   `jira.mongodb.org <http://jira.mongodb.org/>`_.

   .. index:: users; propagation

   .. note::

      If you create an account in Jira or make any changes to that
      account from *within* Jira, it can take up to 30 minutes for that
      change to propagate to MMS. During this window you cannot add a
      user to a group in MMS. Also, passwords changed in Jira are subject
      to the same propagation delay for MMS accounts.

.. only:: onprem

   .. note::

      With MongoDB Management Service On Prem, user accounts and groups are
      independent from JIRA. This is in contrast to the `MongoDB Management Service
      <http://mms.mongodb.com>`_, which shares account
      and group information with the `MongoDB JIRA
      <http://jira.mongodb.org/>`_ instance.

   Users can create accounts using the account registration
   page of your MMS installation.

View MMS Users
++++++++++++++

To view users, click the :guilabel:`Administration` tab and then
:guilabel:`Users` page. The :guilabel:`Users` page lists users who have
access to your MMS group, their roles, their time zones, and other
information. The page also lists any invitations to join the group waiting
for a reply, as well as any requests from users who want to join the group.
A user can request to join a group when first registering for MMS.

View Invitations
++++++++++++++++

When you invite a user to join a group, MMS then sends an email to the
prospective new user. To view invitations sent but not yet accepted, click
the :guilabel:`Administration` tab and then select the :guilabel:`Users`
page. The page lists any users with pending invitations. To cancel an
invitation, click :guilabel:`CANCEL INVITE`.

View Requests
+++++++++++++

Users can request access when they create their MMS account, as on the
registration page.

To view requests, click the :guilabel:`Administration` tab and then select the
:guilabel:`Users` page. The :guilabel:`Users` page lists any pending
requests to join your group. To approve or deny a request, click the
appropriate button.

Remove MMS Users
++++++++++++++++

.. include:: /includes/steps/remove-user.rst

.. index:: users; roles

.. _assign-roles-to-users:
           
Assign Roles to MMS Users
+++++++++++++++++++++++++

Assign :doc:`roles </reference/user-roles>` to MMS users to limit the actions
they can perform and the data they can view.

To assign roles to users in a :doc:`group </tutorial/create-group>`, you must
have either the :ref:`User Admin <user-admin-role>` role or :ref:`Owner
<owner-role>` role in the group.

.. only:: onprem

   To assign roles to any user in any group, you must have either the
   :ref:`Global User Admin <global-user-admin-role>` role or :ref:`Global
   Owner <global-owner-role>` role.

   You can assign roles either through MMS, as described here, or
   :ref:`through an LDAP server <assign-roles-with-ldap>` after you have
   :doc:`set up LDAP integration
   </tutorial/configure-for-ldap-authentication>` and created LDAP groups for
   your MMS roles.

To assign roles inside of |mms|, select the :guilabel:`Administration` tab
and then the :guilabel:`Users` page. Click the user's gear icon and select
:guilabel:`Edit User`. Click the appropriate checkboxes to assign
:doc:`roles </reference/user-roles>`.

.. only:: onprem

   .. _assign-roles-with-ldap:

   Assign MMS Roles with LDAP
   ++++++++++++++++++++++++++

   To assign roles through an LDAP server, you must first :doc:`set up LDAP
   integration </tutorial/configure-for-ldap-authentication>` and create LDAP
   groups for your MMS roles. You must also have the permissions described in
   :ref:`assign-roles-to-users`.

   For LDAP authentication, the welcome form includes the ability to assign
   LDAP groups to the MMS group-level and global roles.

   There is no planned upgrade path from existing MMS user authentication to
   using LDAP. You will need to recreate users, groups, and roles manually
   with your LDAP service, as described in the
   :doc:`/tutorial/configure-for-ldap-authentication` document.

   1. :doc:`Configure LDAP authentication </tutorial/configure-for-ldap-authentication>`.

   2. Create groups on your LDAP server for each of the available MMS
      group-level and global roles.

   To assign LDAP groups to MMS roles:

   1. Click the :guilabel:`Admin` link at the top right of the MMS page.

   2. Click :guilabel:`General` and then click :guilabel:`Groups`.

   3. Click the pencil icon at the far right of a group name. Edit the
      Roles interface by adding the appropriate LDAP group name to its
      corresponding MMS group name.

   Because MMS does not update role assignments stored in your LDAP server,
   assign roles by assigning users to groups in your LDAP server.

   Configure global roles in the ``conf-mms.properties`` :doc:`configuration
   file </reference/configuration>`.
