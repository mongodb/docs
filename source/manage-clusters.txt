.. _manage-clusters:

===============
Manage Clusters
===============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Use the following resources to configure and manage |service|
{+clusters+}. These settings don't apply to {+serverless-instances+}.

.. _create-cluster-instance:

Select {+Cluster+} Tier
-----------------------

Select your preferred {+cluster+} tier. The {+cluster+} tier dictates 
the memory, storage, and |iops| specification for each data-bearing 
server [#data-bearing]_ in the {+cluster+}.

.. note::

   You might see different values depending on your
   selected cloud provider and region.

.. _shared-tier-cluster:

{+Shared-Clusters+}
~~~~~~~~~~~~~~~~~~~

Use {+Shared-clusters+} as economical {+clusters+} for getting started 
with MongoDB and for low-throughput applications. These {+clusters+} 
deploy to a shared environment with access to a subset of |service| 
features. To learn more about {+shared-cluster+} limitations, see 
:ref:`atlas-free-tier`.

You can deploy one ``M0`` {+cluster+} (free sandbox replica set 
cluster) per |service| project. You can :doc:`upgrade </scale-cluster>` 
an ``M0`` {+free-cluster+} to an ``M2+`` {+shared-cluster+} at any time.

``M2`` and ``M5`` clusters (low-cost {+shared-clusters+}) provide the 
following added features compared to ``M0`` clusters:

- :ref:`Backups <m2-m5-snapshots>` for your {+cluster+} data

- Increased storage

- :doc:`API access </api>`

Considerations
``````````````

- |service| deploys MongoDB 5.0 for all :term:`{+shared-clusters+} 
  <shared cluster>` (``M0``, ``M2``, and ``M5``). However, 
  {+Shared-Clusters+} don't support all functionality in MongoDB 
  version 5.0 and later. To learn more, see :ref:`atlas-free-tier`.

- |service| supports {+shared-cluster+} deployment in a subset of cloud
  providers and regions. |service| grays out any {+shared-cluster+} 
  tiers that the selected cloud service provider and region doesn't 
  support. To learn more about the regions that support 
  {+shared-cluster+} deployments, see:

  - :ref:`Amazon Web Services (AWS) <amazon-aws>`
  - :ref:`Google Cloud Platform (GCP) <google-gcp>`
  - :ref:`Microsoft Azure <microsoft-azure>`

.. _atlas-low-traffic-tier:

{+Dedicated-Clusters+} for Low-Traffic Applications
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``M10`` and ``M20`` {+cluster+} tiers support development environments 
and low-traffic applications.

These clusters support replica set deployments only, but otherwise
provide full access to |service| features.

.. note::

   ``M10`` and ``M20`` {+cluster+} tiers run on a burstable performance 
   infrastructure.

.. _atlas-high-traffic-tier:

{+Dedicated-Clusters+} for High-Traffic Applications
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``M30+`` {+cluster+} tiers support production environments with
high-traffic applications and large datasets.

These clusters support replica set and sharded {+cluster+} deployments 
with full access to |service| features.

Some clusters have variants, denoted by the |angle| character. When you
select these clusters, |service| lists the variants and tags each
{+cluster+} to distinguish their key characteristics.

.. |angle| unicode:: U+276F

.. _nvme-storage:

NVMe Storage on AWS Clusters
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For applications hosted on :ref:`AWS <amazon-aws>` that require
low-latency and high-throughput I/O, |service| offers storage options
using locally attached ephemeral |nvme| |ssd|\s. The following
{+cluster+} tiers have an |nvme| option, with the size fixed at the 
{+cluster+} tier:

- ``M40``
- ``M50``
- ``M60``
- ``M80``
- ``M200``
- ``M400``

Clusters with |nvme| storage use :doc:`{+Cloud-Backup+}s 
</backup/cloud-backup/overview>`. You can't disable backup on |nvme| 
clusters. If you want to use hourly backups, |service| limits backups 
on |nvme| clusters to once every 12 hours.

|nvme| clusters use a :manual:`hidden secondary node
</core/replica-set-hidden-member>` that consists of a provisioned 
volume with high throughput and |iops| to facilitate backup.

You can't :ref:`pause <pause-cluster>` an |nvme| {+cluster+}.

.. note::

   |nvme| clusters auto-scale to the next higher tier when 90% of the
   available storage space is consumed, and the migration requires an
   :term:`initial sync`.

Free, Shared, and Dedicated Cluster Comparison
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/fact-free-tier-paid-tier.rst

.. seealso::

   :ref:`cluster-autoscaling`

.. include:: /includes/footnote-databearing.rst

Take the Next Steps
-------------------

You can manage {+clusters+} in the following ways:

.. list-table::
   :widths: 40 60
   :header-rows: 1

   * - Action
     - Description

   * - :doc:`/customize-storage`
     - Customize the storage capacity of your {+cluster+}. Each 
       {+cluster+} tier comes with a default set of resources. ``M10+`` 
       {+clusters+} provide the ability to customize your storage 
       capacity.

   * - :doc:`/cluster-autoscaling`
     - Configure the {+cluster+} tier ranges that |service| uses to
       automatically scale your {+cluster+} tier, storage capacity, or 
       both in response to {+cluster+} usage.

   * - :doc:`/cluster-additional-settings`
     - Configure additional {+cluster+} settings such as MongoDB 
       version, backup, and encryption options.

   * - :doc:`/scale-cluster`
     - Reconfigure an existing {+cluster+}. Modify any of the available 
       |service| configuration options.

   * - :doc:`/tutorial/major-version-change/`
     - Manage major version upgrades for your {+cluster+}. |service| 
       enables you to upgrade the major version of an |service| 
       {+cluster+} at any time.

   * - :doc:`/tutorial/cluster-maintenance-window/`
     - Configure maintenance windows for your {+cluster+}. You can set 
       the hour of the day that |service| should start weekly 
       maintenance on your {+cluster+}.

   * -  :doc:`/pause-terminate-cluster`
     - Pause, resume, or terminate an existing {+cluster+}. You can't 
       change the configuration of a paused {+cluster+}. Also, you 
       can't read data from or write data to a paused {+cluster+}.

   * - :doc:`/cluster-config/multi-cloud-distribution`
     - Configure multi-cloud distribution for increased availability.
       |service| offers options to improve the availability and 
       workload balancing of your {+cluster+}.

   * - :doc:`/reference/replica-set-tags`
     - Use replica set tags to direct queries from specific 
       applications to desired node types and regions. To use replica 
       set tags in your connection string and direct queries to desired 
       nodes, set the tag in the ``readPreferenceTags`` connection 
       string option.

.. toctree::
   :titlesonly:

   /customize-storage
   /cluster-autoscaling
   /cluster-additional-settings
   /scale-cluster
   /tutorial/major-version-change/
   /tutorial/cluster-maintenance-window/
   /pause-terminate-cluster
   /cluster-config/multi-cloud-distribution
   /reference/replica-set-tags
