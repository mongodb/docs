.. _mcp-server-tools:

========================
MongoDB MCP Server Tools
========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. meta::
   :keywords: MCP Server configuration, MCP, Model Context Protocol, AI, natural language, MCP Server, AI agents, Claude, Windsurf, Cursor, Visual Studio Code
   :description: Description of MongoDB MCP Server tools

.. facet::
   :name: genre
   :values: tutorial

The MongoDB MCP Server allows you to interact with MongoDB clusters
using natural language queries from AI clients that support MCP.
This page describes the MCP Server tools.

Overview
--------

The MongoDB MCP server provides the following tools categories:

- **Atlas tools**, which perform operations on Atlas system resources, like
  organizations, projects, clusters, database user accounts, and retrieving
  performance recommendations.
- **Local Atlas tools**, which allow you to list, connect to, create,
  and delete local Atlas deployments.
- **Database tools**, which perform operations such as inserting, updating,
  and deleting documents, and running queries and aggregation pipelines.

MCP Server Atlas Tools
----------------------

The Atlas tools are only available if you have set up Atlas API
credentials as shown in :ref:`mcp-server-configuration`.

The following table describes the Atlas tools:

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - MCP Server Atlas Tool Name
     - Description

   * - ``atlas-list-orgs``
     - Returns a list of Atlas organizations.

   * - ``atlas-list-projects``
     - Returns a list of Atlas projects.

   * - ``atlas-create-project``
     - Creates a new Atlas project.

   * - ``atlas-list-clusters``
     - Returns list of Atlas clusters.

   * - ``atlas-inspect-cluster``
     - Returns information about a specific Atlas cluster.

   * - ``atlas-create-free-cluster``
     - Creates a free Atlas cluster.

   * - ``atlas-connect-cluster``
     - Connects to an Atlas cluster using the configured service account.

       If you configured the MCP server without specifying a connection string, 
       this tool creates a temporary database user with a random password to establish
       the connection. For details, see :ref:`mcp-tools-considerations`.

   * - ``atlas-inspect-access-list`` 
     - Returns information about the :abbr:`IP (Internet Protocol)` and
       :abbr:`CIDR (Classless Inter-Domain Routing)` ranges that can
       access an Atlas cluster.

   * - ``atlas-create-access-list``
     - Configures the :abbr:`IP (Internet Protocol)` and :abbr:`CIDR
       (Classless Inter-Domain Routing)` access list for an Atlas
       cluster.

   * - ``atlas-list-db-users``
     - Returns a list of Atlas database users.

   * - ``atlas-create-db-user``
     - Creates an Atlas database user.

   * - ``atlas-list-alerts``
     - Returns a list of alerts for an Atlas project.

   * - ``atlas-get-performance-advisor``
     - Returns :ref:`Performance Advisor <performance-advisor>` recommendations 
       for an Atlas cluster. Supports operations for suggested indexes, drop index suggestions,
       slow query logs, and schema suggestions. Requires :authrole:`Project
       Read Only` access or higher.

       To learn more, see :ref:`mcp-pa-tool`.

MCP Server Local Atlas Tools
----------------------------

.. include:: /includes/local-atlas.rst

The following table describes the local Atlas tools:

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - MCP Server Local Atlas Tool Name
     - Description

   * - ``atlas-local-list-deployments``
     - Lists local Atlas deployments.

   * - ``atlas-local-create-deployment``
     - Creates a local Atlas deployment. To run this tool, you must
       disable :ref:`read only mode
       <mcp-server-configuration-read-only-mode>`.

   * - ``atlas-local-connect-deployment``
     - Connects to a local Atlas deployment.

   * - ``atlas-local-delete-deployment``
     - Deletes a local Atlas deployment. To run this tool, you must
       disable :ref:`read only mode
       <mcp-server-configuration-read-only-mode>`.

For examples that run the local Atlas tools, see
:ref:`mcp-server-examples-local-atlas-deployments`.

MCP Server Database Tools
-------------------------

The following table describes the database tools:

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - MCP Server Database Tool Name
     - Description

   * - ``connect``
     - Connects to a cluster.

   * - ``find``
     - Runs a database query.

   * - ``aggregate``
     - Runs an aggregation pipeline.

   * - ``count``
     - Returns the number of documents in a collection.

   * - ``insert-one``
     - Adds a single document to a collection.

   * - ``insert-many``
     - Adds multiple documents to a collection.

   * - ``create-index``
     - Adds an index to a collection.

   * - ``update-one``
     - Modifies a single document in a collection.

   * - ``update-many``
     - Modifies multiple documents in a collection.

   * - ``rename-collection``
     - Changes the name of a collection.

   * - ``delete-one``
     - Removes a single document from a collection.

   * - ``delete-many``
     - Removes multiple documents from a collection.

   * - ``drop-collection``
     - Deletes a collection from a database.

   * - ``drop-database``
     - Deletes a database.

   * - ``list-databases``
     - Returns a list of all databases available through the current
       connection.

   * - ``list-collections``
     - Returns a list of collections in a database.

   * - ``collection-indexes``
     - Returns information about collection indexes.

   * - ``collection-schema``
     - Returns collection :ref:`schema <schema-validation-overview>`
       information.

   * - ``collection-storage-size``
     - Returns collection size in megabytes.

   * - ``db-stats``
     - Returns database statistics.

   * - ``export``
     - Saves the results of a query or aggregation pipeline in JSON
       format to a file on the computer that runs the MCP Server.
       The results are also accessible through the ``exported-data``
       resource in the AI client application.

.. _mcp-tools-considerations:

Tool Details
------------

For additional information about specific MCP tools, 
see the following sections.

Connecting without Atlas Connection String
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you configured the MCP server without specifying a connection string
to an Atlas cluster, the ``atlas-connect-cluster`` tool
creates a temporary :ref:`database user <mongodb-users>` 
to establish connection to the cluster
by using the configured Atlas API service account credentials.

The temporary database user has the following characteristics:

- Randomly generated username and password.
- Automatically expires after 12 hours.
- Role assigned based on how you configured the MCP Server:

  - :atlasrole:`readAnyDatabase` if you enabled :ref:`read-only mode 
    <mcp-server-configuration-read-only-mode>`
    or disabled the ``create``, ``delete``, and ``update`` tool categories.
  - :atlasrole:`readWriteAnyDatabase` if the server has full permissions.

.. note:: 

   User credentials are stored only in the MCP Server's
   memory and are never returned to or exposed in the LLM context.

.. _mcp-pa-tool:

Performance Advisor Tool
~~~~~~~~~~~~~~~~~~~~~~~~

The ``atlas-get-performance-advisor`` tool allows you to access
:ref:`Performance Advisor <performance-advisor>` recommendations
through natural language queries. This tool helps you identify performance
optimization opportunities by analyzing slow queries and suggesting improvements.

.. include:: /includes/note-slow-query-sample-limit.rst

.. note::

    This tool requires :authrole:`Project Read Only` access or higher and an M10+ cluster.
    It is available with the ``--readonly`` flag.

.. list-table::
   :widths: 25 45 30
   :header-rows: 1

   * - Use Case
     - Example Prompts
     - Performance Advisor Operation

   * - Analyze Slow Queries
     - | ``Show me my slow queries``
       |
       | ``What is slowing down my cluster?``
       |
       | ``Show me queries that are longer than 5 seconds``
       |
       | ``Show me slow writes in the website.users namespace``

     - :oas-bump-atlas-op:`slowQueryLogs <listgroupprocessperformanceadvisorslowquerylogs>`
  
   * - Index Suggestions
     - | ``Are there any indexes I should create to improve performance?``
       |
       | ``What indexes do you recommend I drop?``
     - :oas-bump-atlas-op:`suggestedIndexes <listgroupclusterperformanceadvisorsuggestedindexes>`
       :oas-bump-atlas-op:`dropIndexSuggestions <listgroupclusterperformanceadvisordropindexsuggestions>`
   * - Schema Advice
     - | ``Show schema recommendations for my cluster``
       |
       | ``Help me optimize my database schema``

     - :oas-bump-atlas-op:`schemaAdvice <listgroupclusterperformanceadvisorschemaadvice>`

For detailed usage examples and sample outputs, see :ref:`mcp-server-performance-examples`.

Learn More
----------

To disable specific tools and restrict the MCP Server to read-only mode,
see :ref:`mcp-server-configuration`.

To see some MCP Server example natural language prompts, see
:ref:`mcp-server-examples`.
