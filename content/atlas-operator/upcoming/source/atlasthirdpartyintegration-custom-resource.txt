.. _atlasthirdpartyintegration-custom-resource:

==============================================
``AtlasThirdPartyIntegration`` Custom Resource
==============================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

The ``AtlasThirdPartyIntegration`` custom resource configures third
party integrations in an |service| project. These resources allow you
to manage :atlas:`third-party integrations
</tutorial/third-party-service-integration>` with various monitoring
services to collect and analyze the performance of your |service|
deployment.

.. include:: /includes/fact-ak8so-crds.rst

|ak8so| takes one of the following actions using the |service|
:oas-bump-atlas-tag:`Third-Party Service Integration API Resource
<third-party-integrations>`:

- Creates a new third-party service integration.
- Updates an existing third-party service integration.

Examples
--------

.. _atlasthirdpartyintegration-example-basic:

Basic Example
~~~~~~~~~~~~~

The following example shows an ``AtlasThirdPartyIntegration`` custom
resource that defines a Datadog integration within the ``my-project``
project.

.. code-block::

   apiVersion: atlas.mongodb.com/v1
   kind: AtlasThirdPartyIntegration
   metadata:
     name: my-atlas-integ
   spec:
     projectRef:
       name: my-project
       namespace: my-operator-namespace
     type: DATADOG
     datadog:
       apiKeySecretRef:
         name: datadog-secret
       region: US
       sendCollectionLatencyMetrics: enabled
       sendDatabaseMetrics: enabled

.. _atlasthirdpartyintegration-example-independent:

Independent CRD Example
~~~~~~~~~~~~~~~~~~~~~~~

The following example shows an ``AtlasThirdPartyIntegration``
:ref:`independent CRD <ak8so-independent-crd>` that defines the same
Datadog integration defined in the :ref:`Basic Example
<atlasthirdpartyintegration-example-basic>`. This custom resource
definition allows you to create this third-party integration in a
project you don't manage in the same instance of |ak8so| with which
you define this resource. To enable independent operation, you must
use an ``externalProjectRef`` instead of a ``projectRef``, and you
must supply a ``connectionSecret`` directly since this resource can't
inherit API credentials from its parent project.

.. code-block::

   apiVersion: atlas.mongodb.com/v1
   kind: AtlasThirdPartyIntegration
   metadata:
     name: my-atlas-integ
   spec:
     externalProjectRef:
       projectID: 66e2f2b621571b7e69a89b66
     connectionSecret:
       name: atlas-connection-secret
     type: DATADOG
     datadog:
       apiKeySecretRef:
         name: datadog-secret
       region: US
       sendCollectionLatencyMetrics: enabled
       sendDatabaseMetrics: enabled

Parameters
----------

.. include:: /includes/manual-crds/atlas-third-party-integration.rst