.. _permission-model:

=======================
Data Source Permissions
=======================

Data source permissions dictate which |charts-short|
users have access to the data source and the actions they can perform
on the data source. The following data source permissions are
available:

.. _data-source-roles:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Permission
     - Description

   * - Reader
     - Can access the data source by viewing existing charts or
       creating new charts which use the data source.

   * - Manager
     - Has all privileges of ``Reader`` and can also
       :ref:`modify the alias <mod-data-source-alias>` and
       :ref:`modify the connection URI <mod-data-source-uri>` of a data
       source.

   * - Owner
     - Has all privileges of ``Manager`` and can also
       :ref:`manage permissions <mod-data-source-permissions>` on the
       data source and :ref:`remove the data source
       <charts-remove-data-source>`.

       The creator of the data source automatically has the
       ``Owner`` role. The creator cannot be removed from the list of
       data source users and thier ``Owner`` role cannot be modified.

View Data Source Permissions
----------------------------

To view permissions for a specific data source, navigate to the
:doc:`Data Sources tab </data-sources>` and hover over the
data source's :guilabel:`Access` button. A tooltip describing the data
source permissions will appear. The tooltip displays your permissions,
the owner of the data source, and all other users who have access.

The following table lists the possible icons and their associated
permissions:

.. _data-source-permission-icons:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Icon
     - Description

   * - :icon:`eye` Eye Icon
     - You have ``Reader`` permission.

   * - :icon:`globe` Globe Icon
     - You have either ``Manager`` or ``Owner`` permission and
       :ref:`Everyone <data-source-access-everyone>` has some level
       of access to the data source.

   * - :icon:`users` Group Icon
     - You have either ``Manager`` or ``Owner`` permission and
       :ref:`additional users <data-source-specific-access>` have
       some level of access to the data source.

   * - :icon:`lock` Lock Icon
     - You have ``Owner`` permission and no other user has
       access.

.. _data-source-set-permissions:

Set Data Source Permissions
---------------------------

You can set data source permissions when you first
:ref:`add a data source <add-data-source>`, or you can
:ref:`modify permissions <mod-data-source-permissions>` on a data
source which has already been created.

Refer to the following sections for instructions on granting
:ref:`specific users <data-source-specific-access>` permissions on a
data source and granting
:ref:`all users on your MongoDB Charts deployment
<dashboard-access-everyone>` permissions on a data source:

.. _data-source-specific-access:

Specific User Access
~~~~~~~~~~~~~~~~~~~~

To grant specific users permissions on your data source:

1. Search for the desired user using the search bar directly above
   where the data source users are listed. You can search for users
   by their username or email address.

#. Click the desired user to add them to the permissions list.

#. Use the dropdown to the right of the user's name to assign the
   appropriate :ref:`role <data-source-roles>`.

   .. raw:: html

      <br>

   .. figure:: /images/charts/data-source-permissions.gif
      :alt: Adding a data source user
      :figwidth: 721px

#. Repeat steps 1-3 for each user you wish to grant data source access.

To remove access for a user you have added, click the trash can icon
to the right of the user's name.

.. _data-source-access-everyone:

Access for All Users
~~~~~~~~~~~~~~~~~~~~

In addition, to allow access to the dashboard for all users on your
|charts| deployment:

1. Toggle the switch on the right-side of the :guilabel:`Everyone` user
   to ``On``.

#. Select the :ref:`role <data-source-roles>` to apply to all |charts|
   users.

   .. note::

      If permissions are assigned to both :guilabel:`Everyone` and a
      specific user, the user's specific permissions take precedence
      over the permissions set to :guilabel:`Everyone`.

      For example, if :guilabel:`Everyone` has the ``Manager``
      role and a specific user Alice has the ``Reader`` role,
      Alice's effective permission level is ``Reader``.
