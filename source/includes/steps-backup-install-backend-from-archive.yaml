title: Stop any currently running instance.
stepnum: 1
ref: backup-install-stop
pre: |
  If you are upgrading an existing installation, please stop the
  currently running instance:
action:
  language: sh
  code: |
    <install_dir>/bin/mongodb-mms-backup-daemon stop
---
title: "Download the Backup archive."
stepnum: 2
ref: download
pre: |
  Download the Backup archive for the latest release from `the downloads
  page <http://www.mongodb.com/subscription/downloads/mms>`_.
---
title: "Install the Backup Daemon."
stepnum: 3
ref: install
pre: |
  Extract the archive, as in the following command:
action:
  language: sh
  code: |
    tar -zxf mongodb-mms-backup-daemon-<version>.x86_64.tar.gz
---
title: "Point the Backup Daemon to the |application| database."
stepnum: 4
ref: point-to-app-db
pre: |
  Open the ``<install-dir>/conf/conf-daemon.properties`` file and set the
  :setting:`mongo.mongoUri` value to the servers and ports hosting the
  |application| database. For example:
action:
  language: cfg
  code: |
    mongo.mongoUri=mongodb://mongodb1.example.net:27017,mongodb2.example.net:27017,mongodb3.example.net:27017
post: |
  Additionally, ensure that the file system that holds the
  :setting:`rootDirectory` has sufficient space to accommodate the
  current snapshots of all backed up instances.
---
title: "Synchronize the ``mms-gen-key`` file."
stepnum: 5
ref: backup-install-sync-genkey
content: |
  Synchronize the ``<install-dir>/bin/mms-gen-key`` file from the
  |application| server. This is required only if the Backup Daemon
  is installed on a different server than the |application|.
---
title: "Start the Backup Daemon."
stepnum: 6
ref: backup-install-backend-start
pre: |
  To start the Backup Daemon run:
action:
  language: sh
  code: |
    <install_dir>/bin/mongodb-mms-backup-daemon start
post: |
  If you run into any problems, the log files are at ``<install_dir>/logs``.
---
stepnum: 7
source:
  file: steps-install-basic-backup-daemon.yaml
  ref: access-backup-config
---
stepnum: 8
source:
  file: steps-install-basic-backup-daemon.yaml
  ref: configure-backup-database-uri
...
