==================
LDAP Configuration
==================

.. default-domain:: mongodb

Use the following endpoints to verify and save an LDAP configuration
for an |service| project. An LDAP configuration defines settings for
|service| to connect to your LDAP server over |tls| for user
authentication and authorization. Your LDAP server must be visible to
the internet or connected to your |service| cluster with
:doc:`VPC Peering </security-vpc-peering>`. In addition, your LDAP
server must use |tls|.

.. note::

   You must have the :atlasrole:`Atlas admin` user privilege to use
   these endpoints.

   In addition, to configure user authentication and authorization with
   LDAPS, your cluster must run MongoDB 3.6 or later. Groups for which
   you have configured LDAPS can not create a cluster using a version
   of MongoDB before 3.6 or later.

.. include:: /includes/fact-projects-groups-synonyms.rst

.. include:: /includes/api-base-url.rst

Endpoints
---------

.. list-table::
   :header-rows: 1
   :widths: 10 60 30

   * - Method
     - Endpoint
     - Description


   * - ``POST``

     - :doc:`/groups/{GROUP-ID}/userSecurity/ldap/verify </reference/api/ldaps-configuration-request-verification>`

     - Request verification of an |ldap| configuration. Use this
       endpoint to test your |ldap| configuration details before saving
       them.

   * - ``GET``

     - :doc:`/groups/{GROUP-ID}/userSecurity/ldap/verify/{REQUEST-ID} </reference/api/ldaps-configuration-verification-status>`

     - Retrieve the status of a request for verification of an |ldap|
       configuration.

   * - ``PATCH``

     - :doc:`/groups/{GROUP-ID}/userSecurity </reference/api/ldaps-configuration-save>`

     - Save an |ldap| configuration for a |service| project.

       If you change your |ldap| configuration, |service| performs a
       rolling restart of your cluster. This restart allows |service|
       to use the correct settings to authenticate users.

   * - ``GET``

     - :doc:`/groups/{GROUP-ID} </reference/api/ldaps-configuration-get-current>`

     - Get the current |ldap| configuration for an |service| project.

   * - ``DELETE``

     - :doc:`/groups/{GROUP-ID}/userSecurity </reference/api/ldaps-configuration-remove-usertodnmapping>`

     - Delete the current ``userToDNMapping`` from the |ldap|
       configuration for an |service| project.

       If you change your |ldap| configuration, |service| performs a
       rolling restart of your cluster. This restart allows |service|
       to use the correct settings to authenticate users.

.. toctree::
   :titlesonly:

   /reference/api/ldaps-configuration-request-verification
   /reference/api/ldaps-configuration-verification-status
   /reference/api/ldaps-configuration-save
   /reference/api/ldaps-configuration-get-current
   /reference/api/ldaps-configuration-remove-usertodnmapping
