=================================================================
Configure Local Mode for |onprem| Servers without Internet Access
=================================================================

.. default-domain:: mongodb

.. contents:: On this page 
   :local:
   :backlinks: none
   :depth: 1 
   :class: singlecol

.. |company| replace:: MongoDB, Inc.


Overview
--------

In a default configuration, the Automation Agents and Backup Daemons
access MongoDB binaries over the internet from |company|

To run Automation Agents or Backup Daemons on servers that do not have
internet access, you must run |onprem| in :guilabel:`Local Mode`. This
requires that you manually download the MongoDB binaries for each
version and platform you need to support and that you update the
:term:`version manifest`.

The following tutorial outlines the steps to run in :guilabel:`Local
Mode`.

.. note::

   The MongoDB Community Edition for Microsoft Windows with SSL support
   is incompatible with :guilabel:`Local Mode`.

Prerequisites
-------------

Required Access
~~~~~~~~~~~~~~~

To configure :guilabel:`Local Mode`, you must have :ref:`Global Owner
<global-owner-role>` access to |onprem|.

.. _local-mode-determine-versions:

Determine which Binaries to Store Locally and Download
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. note:: 
   The MongoDB Community Edition for Microsoft Windows with SSL support is
   incompatible with :guilabel:`Local Mode`.

You need binaries for each MongoDB version that corresponds to
deployments that you manage or plan to manage. For example:

- To import existing deployments into |onprem|, you need versions of
  the binaries that correspond to these deployments.

- To create via |onprem| Automation new deployments, you need versions
  of the binaries that correspond to these deployments.

- To upgrade existing deployment to a new version via |onprem|, you
  need both the current version, upgrade version, and versions used in
  intermediary step or steps.

  .. example::

     If you import an existing deployment of MongoDB 2.6 Community and
     want to upgrade it to MongoDB 3.0 Enterprise, you must download
     and store all archived binaries for:

     - MongoDB 2.6 Community Edition
     - MongoDB 3.0 Community Edition
     - MongoDB 3.0 Enterprise Edition

You do not need to download the archived MongoDB binary for every
platform, only the one(s) in your current and planned MongoDB
deployments.

Install Enterprise Dependencies (MongoDB Enterprise Only)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you plan on running :term:`MongoDB Enterprise` on Linux servers,
then you must manually install a set of dependencies to each server
**before installing MongoDB**. The MongoDB manual provides the
appropriate command to install the dependencies. See the link for the
server's platform:

.. include:: /includes/list-links-per-os-for-enterprise-dependencies.rst

Configure Local Mode
--------------------

.. include:: /includes/steps/configure-local-mode.rst

.. class:: hidden

   .. toctree::
      :titlesonly:

      /tutorial/resolve-pre-flight-check.txt

