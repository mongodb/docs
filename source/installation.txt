:noprevnext:

.. _install-charts:

============
Installation
============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The following document describes how to install |charts| within your
environment. For the latest information on |charts-short|, please visit
the `Charts <http://mongodb.com/charts>`_ web page.


System Requirements
-------------------

Metadata Database
~~~~~~~~~~~~~~~~~

|charts| requires a MongoDB deployment running version 3.4 or later to
store |charts-short| metadata. The |charts-short| metadata database can
be a cluster running on
`MongoDB Atlas <https://www.mongodb.com/cloud/atlas>`_, the cloud-hosted
service for running, monitoring, and maintaining MongoDB deployments.

.. note::

   |charts-short| does not require its own dedicated MongoDB
   deployment. If |charts-short| uses an existing MongoDB deployment,
   it will create and use the following databases: ``metadata``,
   ``app``, ``auth``, and ``log``.

Charts Server
~~~~~~~~~~~~~

|charts| must be installed on a single server running Docker CE or EE
(v17.06 or higher). The server must be in a network location that can
communicate with the metadata database and MongoDB servers that contain
the data you wish to visualize.

Supported Browsers
~~~~~~~~~~~~~~~~~~

End users accessing |charts| must use a current desktop version of
Chrome, Firefox, or Safari on any operating system.

Before You Install
------------------

This section lists the required steps to complete before installing
|charts-short|.

.. include:: /includes/steps/pre-installation.rst

Install |charts|
----------------

Use the following procedure to install |charts|:

.. cssclass:: important
.. admonition:: Windows Installation

   When installing |charts| on Windows, it is strongly recommended to
   use **Windows PowerShell**, rather than the Command Prompt. Windows
   Command Prompt does not handle quotation marks properly when
   creating the Docker secret for |charts| in step 6.

.. include:: /includes/steps/installation.rst

Start and Stop |charts|
-----------------------

.. include:: /includes/start-stop-charts.rst

.. _charts-install-troubleshooting:

Troubleshooting
---------------

If MongoDB Charts does not successfully load in a browser after starting the
Docker stack, try the following steps:

.. include:: /includes/steps/troubleshooting.rst

Troubleshooting Docker Connections
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You may encounter issues connecting |charts| to a MongoDB deployment
if the MongoDB deployment uses hostnames which are not routable
inside the Docker container. In this case, specify the `extra_hosts
<https://docs.docker.com/compose/compose-file/#extra_hosts>`_ option
in the Docker Compose file dowloaded in step 2 of the install
procedure to manually map the hosts to your Docker container:

.. code-block:: yaml

   services:
     charts:
       # Other settings will be set here
       extra_hosts:
         - "somehost:198.51.100.16"
         - "otherhost:198.51.100.17"
         - "anotherhost:203.0.113.0"

.. note::

   When manually mapping to a replica set, you must specify
   host entries for each replica set member, not just those
   in the connection string URI.


