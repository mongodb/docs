.. _rm-prereq-sqlserver:

================================================
Configure Migration Prerequisites for SQL Server
================================================

.. meta::
   :description: Configure SQL Server for migration jobs by enabling CDC at the database and table levels, using scripts generated by Relational Migrator.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

To run migration jobs from a SQL Server source database, 
the database may require some configuration changes. Before you start a 
migration job, {+rel-mig+} checks if the 
database is configured correctly. If {+rel-mig+} determines the 
database needs configuration changes, it automatically generates a 
SQL script with the required changes. It is recommended to have a 
Database Administrator (DBA) review the commands in this script and 
perform their execution on the database server. This topic 
provides more details on the required configuration steps.

About this Task
---------------

- This page covers the details of the SQL scripts automatically 
  generated by {+rel-mig+}.

- {+rel-mig+} automatically detects configuration settings when 
  connecting to your database and generates the appropriate SQL 
  statements to enable CDC if required.

- {+rel-mig+} does not create any indexes on SQL Server to 
  facilitate migration jobs. The create index creation permission is not 
  required.

Steps
-----

To configure your SQL Server instance for snapshot jobs, you must enable CDC 
at the database level. 

The easiest way to set up your database is to run the automatically 
generated script that {+rel-mig+} prompts you to download when
you :ref:`create a migration job <rm-create-jobs>`. To understand the 
permissions or run the SQL manually, read the following procedure.

.. include:: /includes/fact-enable-cdc-database.rst

.. note::
   
   Enabling CDC at the database-level CDC generates a small 
   number of system tables in the database, leaves user tables 
   unchanged, and does not add any performance overhead. Enabling
   CDC alone does not result in changes being captured.

Learn More
----------

{+rel-mig+} relies on the open-source Debezium connector to 
capture row-level changes. For more details, see
`Debezium SQL Server <https://debezium.io/documentation/reference/stable/connectors/sqlserver.html#_enabling_cdc_on_a_sql_server_table>`__.
