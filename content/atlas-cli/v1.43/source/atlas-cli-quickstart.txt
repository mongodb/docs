.. _atlas-cli-quick-start:

=========================================
Create and Configure an |service| Cluster
=========================================

.. meta::
   :description: Learn how to create and configure an Atlas cluster using the Atlas CLI, including loading sample data and connecting via the MongoDB Shell.

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial demonstrates how to use the :ref:`atlas-setup` command to: 

1. Create one cluster in your |service| project.
#. Load :atlas:`sample data </sample-data/available-sample-datasets/>` 
   into your |service| cluster.
#. Add your IP address to your project's IP access list.
#. Create a MongoDB user for your |service| cluster.
#. Connect to your new cluster using the MongoDB Shell, {+mongosh+}.

To perform all of these steps while also creating a new |service|
account, see :ref:`atlas-cli-onboarding`.

To create a {+cluster+} using a configuration file, run the
:ref:`atlas-clusters-create` command with the ``--file`` option instead
of ``atlas setup``. To learn more about the configuration file
for an |service| {+cluster+}, see :ref:`atlas-cli-cluster-config-file`.

You can also use ``atlas setup`` to create an |service| account and
authenticate with |service|. To learn more, see
:ref:`atlas-cli-onboarding`.

.. _atlas-cli-quick-start-reqs:

Prerequisites 
-------------

Before you begin, complete the following tasks: 

- Create an :atlas:`Atlas organization </organizations-projects/>`
- :ref:`install-atlas-cli` 
- :ref:`connect-atlas-cli`

.. _atlas-cli-quick-start-config-cluster:

Configure an |service| Cluster
------------------------------

Use the ``atlas setup`` command to create an ``M0`` 
cluster in |service|. ``M0`` clusters have some operational :ref:`limitations <atlas-free-tier>`.

You can run this command in the following ways: 
      
- **Default settings mode**: the command creates a sample shared-tier
  cluster with the default settings.
- **Interactive mode**: the command prompts you for the cluster
  settings and provides default values. 
- **Noninteractive mode**: you run the command with the options.
      
Click the tab to see the command for your preferred mode. 
  
.. tabs:: 

   .. tab:: Default Settings Mode
      :tabid: default

      The command creates a sample shared-tier cluster with the 
      following default settings:
 
      - Cluster name: ``Cluster<number>``
      - Service provider: ``AWS``
      - Provider region: ``US_EAST_1``
      - Cluster tier: ``M0``
      - Disk size: ``0.5`` GB
      - Database Username: ``Cluster<number>``
      - Database User Password: ``abcdef12345``
      - Allow connections from IP Address: ``<YourIPAddress>``
      - Load Sample Data: ``Yes``
      - Open Shell: ``No``

      .. note::

         The password is a random autogenerated value. ``abcdef12345`` 
         is an example value.

      .. io-code-block::
         
         .. input::
            :language: sh
            
            atlas setup --force

         .. output::
            :language: sh

            We are deploying Cluster9876543...

            Please store your database authentication access details in a secure location
            Database User Username: Cluster9876543
            Database User Password: abcdef12345

            Creating your cluster... [Its safe to 'Ctrl + C']
            Cluster created.
            Your connection string: mongodb+srv://cluster9876543.example.mongodb.net

            Loading sample data into your cluster... [Its safe to 'Ctrl + C']

            Now you can connect to your Atlas cluster with: mongosh -u Cluster9876543 -p abcdef12345 mongodb+srv://cluster9876543.example.mongodb.net

   .. tab:: Interactive Mode
      :tabid: interactive

      The command prompts you for the cluster settings and provides 
      default options. When prompted, press :kbd:`Y`, then press
      :kbd:`Enter` to accept the default settings. 

      .. io-code-block::
         
         .. input::
            :language: sh
            
            atlas setup

         .. output::
            :language: sh

            Press [Enter] to use the default values.

            Enter [?] on any option to get help.

            [Default Settings]
            Cluster Name: Cluster9876543
            Cloud Provider and Region: AWS - US_EAST_1
            Database User Username: Cluster9876543
            Load sample data: Yes
            Allow connections from (IP Address): <your-IP>
            ? Do you want to set up your first free database in Atlas with default settings (it's free forever)? Yes
            We are deploying Quickstart-9876543...

            Please store your database authentication access details in a secure location:
            Database User Username: Cluster9876543
            Database User Password: abcdef12345

            Creating your cluster... [Its safe to 'Ctrl + C']
            Cluster created.

            Your connection string: mongodb+srv://cluster9876543.example.mongodb.net

            Loading sample data into your cluster... [Its safe to 'Ctrl + C']

            Now you can connect to your Atlas cluster with: mongosh -u Cluster9876543 -p abcdef12345 mongodb+srv://cluster9876543.example.mongodb.net


   .. tab:: Non-Interactive Mode
      :tabid: noninteractive
      
      The command creates a sample shared-tier cluster with the 
      following settings:
      
      - Cluster name: ``getStarted``
      - Service provider: ``AWS``
      - Provider region: ``US_EAST-1``
      - Cluster tier: ``M0``
      - Disk size: ``2`` GB
      - MongoDB version: ``5.0``
      - Replica set members: ``3``
      
      .. io-code-block::

         .. input::
            :language: sh 

            atlas setup --clusterName getStarted --provider AWS --region US_EAST_1 --username testUser --password changeMe --accessListIp 192.0.2.15 --skipSampleData --force
            
         .. output::
            :language: sh

            We are deploying getStarted...

            Please store your database authentication access details in a secure location: 
            Database User Username: testUser
            Database User Password: changeMe

            Creating your cluster... [Its safe to 'Ctrl + C']

            Now you can connect to your |service| cluster with: mongosh -u testUser -p changeMe mongodb+srv://getStarted.example.mongodb.net

.. _atlas-cli-quick-start-summary:

Take the Next Steps
-------------------

Congratulations! You have successfully created a cluster to host your
data. 

Use the :manual:`connection string </reference/connection-string/#connection-string-options>` 
to connect to your cluster through {+mongosh+} or your application.

To view the status of your cluster:

- :ref:`Log in to the UI <atlas-account-login>`.
- Run an ``atlas clusters`` command in the {+atlas-cli+}.