==============================
Configure |service| API Access
==============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

To access the API, you must generate your own :ref:`API key <atlas-api-key>`.

To access whitelisted API operations, you must configure your :ref:`API
whitelist <whitelist-for-api-operations>` with the IP addresses you will use
when issuing the whitelisted commands. You also must have the ``Owner`` role
to issue whitelisted commands.

.. important::

   For |service| users with a non-empty API whitelist, all API
   access must originate from a whitelisted IP address. Ensure your
   configured whitelist entries provide appropriate coverage for all
   clients which require API access. An empty API whitelist grants
   access to all API endpoints except those that explicitly require
   whitelisting.

   |service| supports requiring API whitelisting at the organization
   level, such that any API activity for all projects within that
   organization must originate from an entry on each respective
   |service| user's API whitelist. For organizations that require API
   whitelisting, |service| users cannot access any API operations until
   they define at least one API whitelist entry.

   To require an API whitelist for an Organization:

   1. Log into |service|.

   #. Access the Organization using the :guilabel:`Context` picker in the
      top-left hand corner of the |service| UI.

   #. Click :guilabel:`Settings` from the left hand navigation.

   #. Toggle the :guilabel:`Require IP Whitelist for Public API` setting
      to :guilabel:`On`.

For a description of the |service| API's principles and conventions, see the
:doc:`/api`.

.. _generate-api-key:
.. _atlas-api-key:

Generate API Keys
-----------------

.. include:: /includes/remote/fact-configure-api-access.rst

.. _configure-access-to-whitelisted-ops:
.. _whitelist-for-api-operations:

Provide Access to Whitelisted API Operations
--------------------------------------------

Address-based whitelists protect API operations. Only client requests
that originate from a whitelisted IP address are permitted to perform the
operations.

Users have their own whitelists and own API keys. When you issue an API call,
you must use an API key from your user account and must issue the command from
an address on your user account's whitelist. You cannot use your key to issue
a whitelisted API request from an address on another user's whitelist, unless,
of course, you've added that address to your own whitelist.

On the :doc:`resources </reference/api-resources>` pages in this guide,
whitelisted operations are marked as such.

1. On the upper-right hand corner, click on your user name and select
   :guilabel:`Account`.  Click on :guilabel:`Public API Access`.

2. In the :guilabel:`API Whitelist` section, click :guilabel:`Add`.

3. Enter an IP address or CIDR range. To add multiple entries to your
   whitelist, repeat this step. If you leave your whitelist empty, you
   have no access to whitelisted operations.

   You can enter any of the following:

   .. list-table::
      :header-rows: 1

      * - Entry

        - Grants

      * - An IP address

        - Access to whitelisted operations from that address.

      * - A CIDR-notated range of IP addresses

        - Access to whitelisted operations from those addresses.

Delete an Address from the API Whitelist
----------------------------------------

1. On the upper-right hand corner, click on your user name and select
   :guilabel:`Account`.  Click on :guilabel:`Public API Access`.

2. In the :guilabel:`Whitelist` section, click the address's :guilabel:`gear icon`
   and select :guilabel:`Delete`.
