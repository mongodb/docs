# needs updates for new ui
title: Provision the new server.
stepnum: 1
ref: provision
content: |
  You can provision a server on either Amazon Web Services (AWS) or
  your own infrastructure. See the appropriate procedure:

  - :doc:`/tutorial/provision-aws-servers`

  - :doc:`/tutorial/add-existing-hardware`.
---
title: "Select the :guilabel:`Deployment` tab and then the :guilabel:`Deployment` page."
stepnum: 2
ref: select-deployment
---
title: "On the line listing the replica set, click the ellipses icon and select :guilabel:`Modify`."
stepnum: 3
edition:
  - cloud
ref: edit-replica-set-cloud
content: |
  If you do not see the replica set, click the topology icon (the first :guilabel:`Processes` icon).
---
title: "Click :guilabel:`edit mode`, and then click the arrow to the right of the replica set and click the :guilabel:`Edit` button."
stepnum: 3
edition:
  - onprem
ref: edit-replica-set
---
title: "Add a member to the replica set."
stepnum: 4
ref: add-member
content: |
  In the :guilabel:`Nodes Per Replica Set` field, increase the number of
  members by 1, and then click :guilabel:`Apply`.
---
title: "Verify changes."
stepnum: 5
ref: review-which-server
pre: |
  Verify the server to which |mms| will deploy the new replica set
  member. If necessary, select a different server.
content: |
  The :guilabel:`Deployment` page's :guilabel:`Topology View` lists the
  new replica set member and indicates the server to which |mms| will deploy
  it.

  If |mms| has not chosen the server you intended, click the
  :guilabel:`Deployment` page's :guilabel:`Server View` to display your
  available servers and their processes. Processes not yet deployed can be
  dragged to different servers. Drag the new replica set member to the
  server to which to deploy it.
---
title: "Click :guilabel:`Review & Deploy`."
stepnum: 6
ref: review-deployment
---
stepnum: 7
source:
  file: steps-deploy-replica-set.yaml
  ref: confirm-deployment
---
title: "Verify that the new member has synchronized."
stepnum: 8
ref: verify-synchronization
content: |
  Select the :guilabel:`Deployment` page's :guilabel:`view mode` to view
  the new member's :manual:`status </reference/replica-states>`. Verify
  that the new member has synchronized and is no longer in the
  ``Recovering`` state.
---
title: "Remove the old member from the replica set."
stepnum: 9
ref: remove-member
content: |
  Select the :guilabel:`Deployment` page's :guilabel:`edit mode`, and then
  click the arrow to the right of the replica set member. Then
  click the gear icon and select :guilabel:`Remove Member`. Then click
  :guilabel:`Review & Deploy`. Then click :guilabel:`Confirm &
  Deploy`.
---
title: "Shut down the old member."
stepnum: 10
ref: shut-down-member
content: |
  Select the arrow to the right of the removed replica set member, and
  then click the gear icon and select :guilabel:`Shut Down`. Then click
  :guilabel:`Review & Deploy`. Then click :guilabel:`Confirm &
  Deploy`.
---
title: "Optionally, unmanage the old member."
stepnum: 11
ref: un-manage-member
content: |
  Select the arrow to the right of the removed replica set member, and
  then click the gear icon and select :guilabel:`Unmanage`. Then click
  :guilabel:`Review & Deploy`. Then click :guilabel:`Confirm &
  Deploy`.
...
