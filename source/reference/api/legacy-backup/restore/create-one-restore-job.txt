========================================
Create One {+Old-Backup+} Restore Job
========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/admonitions/deprecated-continuous-backup.rst

.. include:: /includes/fact-projects-groups-synonyms.rst

Creates one restore job for the specified cluster.

This endpoint doesn't support the following:

- Creating checkpoint restore jobs for sharded clusters

- Creating restore jobs for queryable backup snapshots

.. include:: /includes/fact-restore-cluster-data-warning-api.rst

.. include:: /includes/api-requirements.rst

.. include:: /includes/api/facts/api-access-list-required.rst

Request
-------

.. include:: /includes/api/base-api-uri.rst

.. code-block:: http

   POST /groups/{GROUP-ID}/clusters/{CLUSTER-NAME}/restoreJobs

Request Parameters
------------------

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 15 10 10 65

   * - Path Parameter
     - Type
     - Necessity
     - Description

   * - ``GROUP-ID``
     - string
     - Required
     - Unique identifier of the :ref:`project <group-id>` that owns the
       snapshots.

   * - ``CLUSTER-NAME``
     - string
     - Required
     - Name of the cluster that contains the snapshots that you want to
       retrieve.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/api/no-query-single-parameters.rst

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/restore-job-request-documents.rst

Response
--------

.. include:: /includes/list-table-restore-jobs-http-response.rst

Example Requests
----------------

.. tabs::

   .. tab:: HTTP Restore
      :tabid: http

      Create a restore job that transfers a compressed snapshot using
      |http|.

      .. literalinclude:: /includes/api/requests/create-one-restore-job-http.sh
         :language: sh


   .. tab:: Automated Snapshot Restore
      :tabid: auto-snapshot

      Create an automated restore from a snapshot.

      .. literalinclude:: /includes/api/requests/create-one-restore-job-auto-snapshot.sh
         :language: sh


   .. tab:: Automated Oplog Restore
      :tabid: auto-oplog

      Create an automated restore from an Oplog timestamp.

      .. literalinclude:: /includes/api/requests/create-one-restore-job-auto-oplog.sh
         :language: sh


   .. tab:: Automated {+PIT-Restore+}
      :tabid: auto-pit

      Create an automated restore from a specific point in time.

      .. literalinclude:: /includes/api/requests/create-one-restore-job-auto-pit.sh
         :language: sh


   .. tab:: Automated Checkpoint Restore
      :tabid: auto-checkpoint

      Create an automated restore from a checkpoint. Valid for
      :term:`sharded clusters <sharded cluster>` running MongoDB
      clusters with an |fcv| of 4.0 or earlier only.

      .. important::

         Don't use checkpoint restores for MongoDB clusters with an
         |fcv| of 4.2 or later.

      .. literalinclude:: /includes/api/requests/create-one-restore-job-auto-checkpoint.sh
         :language: sh

Example Responses
-----------------

.. tabs::
   :hidden:

   .. tab:: HTTP Restore
      :tabid: http

      .. literalinclude:: /includes/api/responses/create-one-restore-job-http.json
         :language: json


   .. tab:: Automated Snapshot Restore
      :tabid: auto-snapshot

      .. literalinclude:: /includes/api/responses/create-one-restore-job-auto-snapshot.json
         :language: json


   .. tab:: Automated Oplog Restore
      :tabid: auto-oplog

      .. literalinclude:: /includes/api/responses/create-one-restore-job-auto-oplog.json
         :language: json


   .. tab:: Automated {+PIT-Restore+}
      :tabid: auto-pit

      .. literalinclude:: /includes/api/responses/create-one-restore-job-auto-pit.json
         :language: json


   .. tab:: Automated Checkpoint Restore
      :tabid: auto-checkpoint

      .. literalinclude:: /includes/api/responses/create-one-restore-job-auto-checkpoint.json
         :language: json

