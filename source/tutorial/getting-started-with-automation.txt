=======================================
Getting Started with MongoDB Automation
=======================================

.. default-domain:: mongodb

Overview
--------

MMS Automation provides an interface for provisioning machines,
configuring MongoDB nodes and clusters, and upgrading your MongoDB
deployment.

This page describes how to configure and use MongoDB Automation.

.. later interation: This page describes how to use the initial setup wizard 
   to configure and use MongoDB Automation for the first time. Once you
   have deployed your first instances with Automation, the initial setup
   wizard is no longer available.
   To configure automation or deploy instances without the
   wizard, see :doc:`/core/automation`

This tutorial deploys MongoDB instances on Amazon Web Services (AWS). You
must have an existing AWS account, as described in
:ref:`automation-prereqs`.

This tutorial includes linking the AWS account to MMS so that you can
provision machines directly from MMS. You then use Automation to provision
machines on that account and to create MongoDB deployments.

.. Before running the initial setup wizard, you create an MMS group to be
   used with Automation. Running the wizard includes linking the AWS
   account to MMS so that you can provision machines directly from MMS.
   You then use Automation to provision machines on that account and to
   create MongoDB deployments.
   You can also use MMS Automation with your own servers, as
   described elsewhere in this manual.

.. _automation-prereqs:

Prerequisites
-------------

To set up MongoDB Automation, you must have the following:

- An EC2 or VPC account with Amazon Web Services (AWS).

- Access to the AWS account's Access Key ID and Secret Access Key. To
  access the keys, click your username in the top right corner of AWS and
  select Security Credentials.

- Access to the AWS account's SSH public key, if it exists. If it does
  not yet exist, you can create the public key when configuring automation
  settings in MMS.

- An existing security group on that account.

- If you are deploying into an AWS Virtual Private Cloud (VPC), then the
  VPC must exist.

.. _automation-machine-size-considerations:

Considerations
--------------

In general, provision one machine per MongoDB instance. Make sure the
machines are large enough to support your deployment. Give your root
volume at least 20 GB.

MMS does not allow selection of AWS instances smaller than the "m1large"
instance. MMS currently allows selection of the AWS Linux or Unbuntu
operating systems for an instance.

Procedures
----------

Create an MMS Group for Use with MMS Automation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Create a new MMS group and send an email to your system administrator
asking that your MMS account be enabled for automation. Use the following
procedure to create the group:

.. include:: /includes/steps/add-group.rst

Configure Automation Settings
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/automation-configure.rst

Provision Machines
~~~~~~~~~~~~~~~~~~

This procedure launches the specified AWS instances and installs the
automation agent onto each one.

.. include:: /includes/steps/automation-provision-machines.rst

Create a MongoDB Deployment
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Once the machines you provisioned are listed as running, create a
MongoDB deployment.

.. include:: /includes/steps/automation-install-mongodb.rst

Install a Monitoring Agent
~~~~~~~~~~~~~~~~~~~~~~~~~~

Using the public key you provided, you can log into one of the servers and
install a monitoring agent. If you do this, the deployment should be
visible via the :guilabel:`Hosts Monitoring` tab.

To install the monitoring agent, do the following:

.. include:: /includes/steps/monitoring-install-go.rst

Remove the Deployment
~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/terminate-deployment.rst
