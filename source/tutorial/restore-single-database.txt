:orphan:

====================================
Restore One Database from a Snapshot
====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Backup snapshots contain a complete copy of your :program:`mongod` data
directory. You may want to restore some of the data in a snapshot.

To restore a single database instead of all databases in the snapshot,
load the snapshot first to a temporary :program:`mongod` instance and
then export from this instance the single database. Use the export of
the single database to restore to the target deployment.

.. include:: /includes/fact-pit-restore-change.rst

.. admonition:: Changed in MongoDB 3.0
   :class: note

   :program:`mongodump` and :program:`mongorestore`
   no longer support the :option:`--dbpath` option. These tools now
   must connect to a running :program:`mongod` instance.

Considerations
--------------

Before you attempt a restore, ensure your target storage has sufficient
space for the restore files and the restored database, plus additional
space for dataset growth. Use :manual:`db.stats()` to find the current
database size.

.. _select-snapshot-single-database:

Select and Prepare a Snapshot
-----------------------------

.. include:: /includes/steps/prepare-snapshot-single-database.rst

.. _retrieve-snapshot-single-database:

Retrieve a Snapshot using HTTPS
-------------------------------

.. include:: /includes/steps/download-snapshot-single-database.rst

.. important::
   Skip to :ref:`restore-single-database`.

.. _send-snapshot-single-database-by-scp:

Send Snapshot using SCP
-----------------------

Direct |mms| to copy the restore files to your server via ``SCP``.

.. include:: /includes/note-scp-key-pair-requirement.rst

.. include:: /includes/note-windows-scp-issue.rst

.. include:: /includes/steps/send-snapshot-single-database-scp.rst

.. _restore-single-database:

Restore the Database
--------------------

The following examples use:

- ``27017`` as the port for a running MongoDB instance that receives
  the restored backup.

- ``27018`` as the port for the temporary MongoDB instance that
  uses the snapshot to export the single database.

.. include:: /includes/steps/restore-single-database.rst
