====================================
MMS On-Prem Backup Binary Management
====================================

.. default-domain:: mongodb

The MMS service backup daemon recreates every replica set you backup up
and applies the oplog entries sent by the backup agents. MMS then
maintains a standalone MongoDB database on disk for each backed up replica
set, also called a *head*. Each head is consistent with the original
primary up to the last oplog supplied by the backup agent.

The backup daemon requires using a :program:`mongod` that matches the
version of any replica set it backs up. The configuration file in the
``/opt/mongodb/backup-daemon/`` folder includes two directives,
``mongodb.release.directory`` and ``mongodb.release.autoDownload``, to
manage the use and update of versions of these :program:`mongod` binaries.

mongodb.release.directory
-------------------------

Specify the full directory path.

This value should point to a folder that contains every MongoDB release
needed by the backup daemon. If you update versions manually, name the
folders within this full directory path mongodb-linux-x86_64-2.4.8,
mongodb-linux-x86_64-2.6.0, and so on. Or name folders mongodb248,
mongodb260, and so on.

mongodb.release.autoDownload
----------------------------

Specify true (active) or false (inactive).

The ``/opt/mongodb/backup-daemon/bin`` directory includes the 
`mongodb-fetch` utility that will download all of the latest releases directly
from mongodb.org. The ``mongodb.release.autoDownload`` setting will
automatically run this utility when the service starts.

If automatic downloading is a security concern, set this setting to
``false``. You must then place the needed mongodb releases in the
``mongodb.release.directory`` manually.
