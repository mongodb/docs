:noprevnext:

:orphan:

.. this does actually appear in the unified toc. the orphan tag is to suppress Snooty parser warnings as it still uses toctrees and we removed the drawer page that referenced this page.

.. _vercel:

=====================
Integrate with Vercel
=====================


.. default-domain:: mongodb

.. meta::
   :keywords: vercel
   :description: Provision and use MongoDB Atlas as your application's database directly from Vercel Marketplace using a simplified setup process and integrated billing through Vercel.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

|vercel| is a development platform that simplifies application deployments.
Vercel has a marketplace for developers to discover software packages
and provision applications. 

The |service-fullname| Native Integration with Vercel allows you to:

- Provision |service| resources directly from the Vercel dashboard, with
  billing managed through your Vercel account.
- Access resources in |service| through a provisioned linked account.
- Deploy MongoDB |service| clusters for new and existing Vercel applications.
- Choose from Free, Dedicated, and Flex MongoDB clusters, with options for every use case.

After you create MongoDB |service| clusters, Vercel adds your |service|
cluster credentials and other settings to your Vercel environments.

Find |service| in Vercel
~~~~~~~~~~~~~~~~~~~~~~~~

If you are a Vercel user with any role, you can discover |service| through the following methods:

.. procedure::
   :style: normal

   .. step:: Log into the |vercel| UI.
   
      Under the :guilabel:`Overview` tab locate the :guilabel:`Add new`
      button in the upper right corner and from the drop-down, select :guilabel:`Integration`.
      
   .. step:: Search for MongoDB |service| in Vercel Marketplace.
   
      In the left-side list, select :guilabel:`Any Type` and :guilabel:`Any Category`.
      Use the :guilabel:`Search` panel at the top of the page to search for ``MongoDB``
      and then select :guilabel:`MongoDB Atlas` in the list of Native Integrations.

   .. step:: Alternatively, locate MongoDB |service| under :guilabel:`Storage`.

      In the left-side list of all integrations in Vercel Marketplace,
      select :guilabel:`Categories` > :guilabel:`Storage`
      and then select :guilabel:`MongoDB Atlas` in the list of Native Integrations.

.. _considerations-vercel:

Considerations
---------------

- :ref:`Accounts in Vercel (Personal or Team) <vercel-personal-team-accounts>`
- :ref:`Vercel Projects <vercel-projects>`
- :ref:`IP Access Lists in Atlas and IP Allow Lists in Vercel <vercel-access-lists>`

.. _vercel-personal-team-accounts:

Accounts in Vercel (Personal or Team)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The integration with Vercel requires that you:

- `Create a new personal account <https://vercel.com/new>`__ or
  `create a new team <https://vercel.com/docs/concepts/teams/overview>`__
  in Vercel.
- Use an existing personal or team account in Vercel.

.. _vercel-projects:

Projects in Vercel
~~~~~~~~~~~~~~~~~~~

You can link one |service| {+cluster+} to more than one project in Vercel.

If you create a Native Integration of |service| in Vercel, |service|
creates a new Vercel-managed organization and project in |service| for you.

.. _vercel-access-lists:

IP Access Lists in |service| and IP Allow Lists in Vercel
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Vercel deployments use |vercel-dynamic|.

To connect to |a-service| {+cluster+}, the :doc:`IP access list
</security/ip-access-list/>` of your |service| {+cluster+} must allow all
IP addresses (0.0.0.0/0).
If |service| doesn't find an entry for 0.0.0.0/0 in your |service|
project's IP access list, |service| adds it on your behalf, as part of
the integration workflow.

.. include:: /includes/fact-wildcard-ip.rst

|service| creates a database user in the following format: ``Vercel-Admin-[name of resource]``
in the admin database and grants the built-in :manual:`readWriteAnyDatabase </reference/built-in-roles/#mongodb-authrole-readWriteAnyDatabase>`
MongoDB database role to all non-system databases in the |service| cluster.
For example, if your Vercel resource is named ``my-first-atlas-cluster``,
the database user that |service| creates is ``Vercel-Admin-my-first-atlas-cluster``.

.. _vercel-native-integration:

Vercel Native Integration
-------------------------

To integrate with Vercel, locate |service-fullname| in the Vercel Marketplace
and create a new MongoDB |service| account with billing conducted through Vercel.
A Native Integration of |service-fullname| in Vercel allows you to:

- Provision |service| resources directly from the Vercel dashboard and
  manage billing through your Vercel account. You can also directly
  access resources in |service| through a provisioned linked account.

- Deploy MongoDB |service| clusters for new and existing Vercel applications.

After you create MongoDB |service| clusters, Vercel adds your |service|
cluster credentials and other settings to your Vercel environments.

|service| provisions the account for you if you don't have one.
The |service| account is linked to the Vercel installation.
You have separate credentials for logging into |service|.

Considerations: Native Integration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following considerations apply to the Native Integration of |service| in Vercel.

- **Resource Mapping**
  
  A "team installation" in Vercel maps to an organization in |service|.
  An installed product (resource) in Vercel maps to a project and cluster in |service|.

- **API Access**
  
  Vercel requires programmatic access to |service| APIs to create and manage
  resources on behalf of users and to propagate environmental changes.

- **User Provisioning and Account Linking** 

  |service| provisions new |service| user accounts for Vercel users, links
  existing accounts, and sends a password reset email if you don't configure
  |service| credentials. User authentication requires |service| credentials
  to access |service|. 
  
  The user who initially installs the |service| Native Integration for
  the Vercel team becomes the |service| :authrole:`Organization Owner`.

- **Accessing |service| from Vercel**

  You can navigate to {+atlas-ui+} from Vercel via an :guilabel:`Open in Atlas`
  button. After logging in with your |service| credentials, |service| redirects
  you to the corresponding |service| resource. 

  - Users with existing |service| accounts. When accessing |service| from Vercel,
    Vercel prompts users with existing |service| accounts to confirm linking their
    |service| account to their Vercel installation. After the users confirm the
    linkage and log in with |service| credentials to prove their identity,
    |service| links the users' |service| accounts to their Vercel installation. 
  
  - New users. |service| provisions an account for new users and sends a
    password reset email so that users can configure their passwords and
    prove their identity. Once |service| obtains the user's credentials,
    |service| links the user's |service| account to their Vercel installation
    and grants this user the :authrole:`Organization Owner` role in |service|.
    |service| keeps organization's permissions in line with the permissions
    in Vercel. Vercel's "Admin" and "User" roles map to :authrole:`Organization Owner`
    and :authrole:`Organization Read Only` roles in |service|, respectively.

  If any user in the Vercel team installs additional |service| clusters using
  the Native Integration, |service| doesn't automatically add these users to
  the |service| organization created for the Vercel team. The |service|
  organization owner must ensure that all Vercel team users who need access
  to the |service| organization have it. This also applies to new Vercel
  team users who join the Vercel team after the initial installation of
  the Native Integration.

  Use one of the following methods to ensure that |service| adds additional
  Vercel team's users to the |service| Organization:

  - Vercel team users can access the |service| organization in the {+atlas-ui+} through the Vercel UI.
    if they're not already |service| users, |service| provisions accounts
    for them, with assignment to the |service| organization for the Native Integration.
  - The |service| Organization owner can invite |service| users to the |service| Organization.

- **Environment Variables**

  The Native Integration automatically configures the ``MONGODB_URI``
  environment variable for secure database connections. For the full list
  of environment variables, see the Vercel UI for the Native Integration of |service|.

- **Billing**

  The Vercel Native Integration creates a new |service| Organization from the Vercel UI
  which is automatically connected to a Vercel Marketplace billing plan
  as the active payment method for the |service| Organization. Billing occurs
  per one |service| organization and includes a collective bill for all
  MongoDB |service| clusters and services in the Organization. In Vercel
  and |service|, you can see a confirmation of Vercel Marketplace billing
  for the |service| Organization, as well as daily usage costs.

- **Security**
  
  |service| ensures secure connections via SCRAM authentication with IP allowlists
  for |service| clusters that you create through the Native Integration in Vercel.

- **Deletion or Uninstallation of the Native Integration**
  
  After uninstalling a Vercel integration, we recommend that the |service|
  Organization owner ensures that access assignments and billing methods
  are up-to-date, and removes stale or unwanted access to prevent automated
  reminders from MongoDB regarding overdue billing payments. |service| submits
  a final Vercel invoice for the |service| to Vercel, and removes the
  Vercel Marketplace payment method from the |service| Organization.
  
  This invoice is not a final |service| invoice, as there might still be
  additional charges incurred by the Organization after uninstallation
  for the most recent usage that might not have been billed for yet.
  You are responsible for adding a new payment method to the Organization
  to ensure any outstanding usage can be paid for.
  
  You can't uninstall or unlink the Native Integration from the {+atlas-ui+},
  although you can always delete your resources in |service|. If you delete a
  Vercel-linked cluster, this is reflected in the Vercel UI.

- **Getting Started in Vercel UI for Next.js**

  The Vercel UI for the Native Integration includes instructions for getting
  started with Next.js and |service|.

- **Deployment templates**

  The Vercel UI for the Native Integration includes deployment templates.
  These templates include example code and configuration files to help you
  get started with your |service| projects in Vercel.

.. _vercel-add-native-integration:

Add a Native Integration
-------------------------

To add the MongoDB |service| Native Integration in Vercel:

.. procedure::
   :style: normal

   .. step:: Install the MongoDB |service| Native Integration.

      a. Go to Vercel Marketplace and use search or left-side category filter
         for :guilabel:`Storage` to locate :guilabel:`MongoDB Atlas` in the list of Native Integrations.

      b. Click :guilabel:`Install` in the MongoDB |service| page for
         the integration, or click :guilabel:`Install` in the upper right
         corner of the Vercel UI page for the integration.

   .. step:: Accept :guilabel:`Terms and Conditions`.
   
      Click :guilabel:`Accept and Create`.

   .. step:: Choose a cluster tier.

      Choose a Free, Flex, or Dedicated |service| cluster:

      - Free ($0, Storage: 512 MB, RAM: Shared, vCPU: Shared)
      - Flex ($0.011/hour, Storage: Up to 5 GB, RAM: Shared, vCPU: Shared)
      - Dedicated ($0.08/hour, Storage: 10 GB, RAM: 2 GB, vCPU: 2xCPUs)

      .. important::

         Free clusters are available on all installation plans.
         Flex and Dedicated clusters are available only on Paid installation plans.

   .. step:: Choose a cluster region.

      A list of `Vercel regions <https://vercel.com/docs/edge-network/regions#region-list>`__
      displays. These regions map to MongoDB |service| regions in most cases.
      If you choose a Vercel region that doesn't have a corresponding
      |service| region, |service| chooses the closest region to the
      Vercel region that you selected.

   .. step:: Select an installation plan: Free or Paid. 

      - **Free plan $0** 
  
        No credit card is required. You can only create Free MongoDB Atlas clusters with this plan.
      - **Paid plan**

        Credit card is required. You can create Free, Flex, and Dedicated clusters
        with this plan. You'll only be billed for Flex and Dedicated clusters.

      If you choose a Flex or Dedicated |service| cluster, the Free plan is grayed out.
      If any member of your Vercel team uses this Native Integration with a Free plan
      and chooses to create a Flex or Dedicated cluster, the plan changes to a
      Paid plan. Even if you uninstall a MongoDB |service| cluster that isn't
      free, the plan remains as a Paid plan. To change the plan to a Free plan,
      uninstall the Native Integration and then install it again choosing a
      Free cluster and a Free plan. To learn how to uninstall any Native Integration,
      see the `Vercel documentation <https://vercel.com/docs/integrations/install-an-integration/product-integration#uninstall-an-integration>`__.

   .. step:: Choose the database name. 
   
      Vercel generates a name that you can choose or you can enter your own name.

   .. step:: Review your selections.

   .. step::  Click :guilabel:`Create MongoDB Atlas Cluster`.

      Vercel UI shows :guilabel:`Initializing` and then :guilabel:`Available`.
      This means that your MongoDB |service| cluster is ready to use.

Now you can use the Native Integration of |service| in Vercel to:

- Connect to a Vercel project.
- Pull your latest environment variables.

If you no longer need this MongoDB |service| cluster, you can uninstall
the Native Integration and by doing so delete a MongoDB |service| database.
For instructions, see the `Vercel documentation
<https://vercel.com/docs/integrations/install-an-integration/product-integration#uninstall-an-integration>`__. 

You can also delete the database (the resource), without uninstalling the whole
integration. This is useful in cases when you want to keep the integration
around to create other resources in the future, or if you have other resources
in the same integration.

If you delete a Vercel-linked |service| cluster, any projects that you linked to this
cluster in Vercel will no longer have access to this database cluster.
Before proceeding with the uninstallation and deletion of the |service| cluster,
ensure that this |service| cluster is no longer in use by any projects or application.

Contact Support
~~~~~~~~~~~~~~~

If you run into issues while using a Vercel Native Integration with MongoDB |service|,
contact Vercel Integration Support at MongoDB `vercel-integation-support@mongodb.com <mailto:vercel-integation-support@mongodb.com>`__.

.. _disconnect-vercel:

Disconnect a Vercel Integration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Before you disconnect Vercel projects from |service| {+clusters+},
to avoid downtime to any applications connected to the same |service|
{+clusters+}, verify that the {+cluster+}\'s users and network access
rules don't share other projects and applications connected to this
|service| {+cluster+}.

.. procedure::
   :style: normal

   .. step:: Go to your Vercel integration in the Vercel UI.

      Navigate to your Vercel account settings and locate the |service-fullname| integration.

   .. step:: Click to uninstall or remove the integration.

      Follow the Vercel UI prompts to uninstall the integration.
      For detailed instructions, see the `Vercel documentation <https://vercel.com/docs/integrations/install-an-integration/product-integration#uninstall-an-integration>`__.

   .. step:: Confirm that you want to disconnect this Vercel integration.

      Disconnecting the integration may result in downtime for your Vercel
      applications and any other applications connecting to the |service|
      {+clusters+} that you linked to Vercel.

      After uninstalling a Vercel integration, we recommend that the |service|
      :authrole:`Organization Owner` ensures that access assignments and billing methods
      are up-to-date, and removes stale or unwanted access to prevent automated
      reminders from MongoDB regarding overdue billing payments.

      |service| submits a final Vercel invoice for the |service| Vercel
      integration to Vercel, and removes the Vercel Marketplace payment
      method from the |service| Organization.

      This invoice is not a final |service| invoice, as there might still be
      additional charges incurred by the organization after uninstallation
      for the most recent usage that might not have been billed for yet.
      You are responsible for adding a new payment method to the organization
      to ensure any outstanding usage can be paid for.

   .. step:: After disconnection, manage remaining resources in |service.

      After you disconnect the Vercel integration, you can:

      - :ref:`Delete database users <delete-mongodb-users>`
      - :ref:`Delete IP access lists <delete-ip-access-list-entry-ui>`

      .. note::

         When you remove an integration in the Vercel UI, |service| also
         removes the integration.









