# These steps exist solely for sharing. They are common to several procedures.
#
title: Open MMS and select the :guilabel:`Settings` tab.
stepnum: 0
ref: settings
content: |
  .. only:: saas

     Visit the `MMS Settings Page <http://mms.mongodb.com/settings>`_ directly.
---
title: Retrieve the MMS API key for your MMS group.
stepnum: 0
ref: retrieve-monitoring-mms-api-key
content: |
  In the :guilabel:`Settings` tab on the :guilabel:`Monitoring Agent`
  page, click the box for your operating system. MMS will then display a
  procedure that includes a step to set your MMS API key. The step
  displays the actual MMS API key used by your MMS group. Copy the key.
---
title: Retrieve the MMS API key for your MMS group.
stepnum: 0
ref: retrieve-backup-mms-api-key
content: |
  In the :guilabel:`Settings` tab on the :guilabel:`Backup Agent`
  page, click the box for your operating system. MMS will then display a
  procedure that includes a step to set your MMS API key. The step
  displays the actual MMS API key used by your MMS group. Copy the key.
---
title: Edit the ``monitoring-agent.config`` file to include your MMS API key.
stepnum: 0
ref: configure-monitoring-mms-api-key
content: |
  In the ``<install-directory>/monitoring-agent.config`` file, set the
  ``mmsApiKey`` property to your API key.
---
title: Edit the ``local.config`` file to include your MMS API key.
stepnum: 0
ref: configure-backup-mms-api-key
content: |
  In the directory where you installed the Backup Agent, locate and
  open the ``local.config`` file. Enter your API key as the value for the
  ``mmsApiKey`` setting.
---
title: Configure the agent to use a proxy server.
optional: true
stepnum: 0
ref: proxy
action:
   pre: |
     If the agent will connect to MMS via a proxy server, you must specify
     the server in the ``http_proxy`` environment variable. To specify the
     server, use the ``export`` command, as in the following example:
   language: sh
   code: |
     export http_proxy="http://proxy.example.com:9000"
post: |
   To connect through a proxy, you must install the agent from a
   ``.tar.gz`` file, *not* from a ``.deb`` or ``.rpm`` file.
---
title: Start the Monitoring Agent.
stepnum: 0
ref: start-monitoring
pre: |
  Issue the following command:
post: |
  Remember, that you only need to run **1** Monitoring Agent for each MMS
  group. A single Monitoring Agent can collect data from many MongoDB
  instances.
...
