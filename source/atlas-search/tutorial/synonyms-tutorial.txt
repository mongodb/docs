.. _synonyms-tutorial:

==============================
How to Use Synonyms with |fts| 
==============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial describes how to add a collection that configures words 
as synonyms, create an index that defines synonym mappings on the 
``sample_mflix.movies`` collection, and run |fts| queries against the 
``title`` field using words that are configured as synonyms. It takes 
you through the following steps: 

1. Load one or more sample synonyms source collections in the 
   ``sample_mflix`` database.
#. Set up an |fts| index with one or more synonym mappings for the 
   ``sample_mflix.movies`` collection.
#. Run |fts| queries against the ``title`` field in the 
   ``sample_mflix.movies`` collection for words configured as synonyms 
   in the synonyms source collection.

Before you begin, ensure that your |service| cluster meets the 
requirements described in the :ref:`fts-tutorials-prereqs`. 

.. note:: 

   To create multiple synonym mappings and run the advanced sample 
   query in this tutorial, you will need an ``M10`` or higher 
   {+cluster+}.

Load the Sample Synonyms Source Collection 
------------------------------------------

Each document in the synonyms source collection describe how one or 
more words map to one or more synonyms of those words. To learn more 
about the fields and word mapping types in the synonyms source 
collection documents, see :ref:`synonyms-coll-format`. 

You must begin by creating the synonyms source collection and then add 
the collection to the database where you intend to use the synonyms 
source collection. In this section, you will create one or two sample 
synonyms source collections in the ``sample_mflix`` database, then use 
the synonyms source collections with an index of the ``movies`` 
collection in the same database.

.. include:: /includes/steps/fts-synonyms-tutorial-load-source-collection.rst 

Create the |fts| Index With Synonym Mapping Definition 
------------------------------------------------------

The synonym mapping in a collection's :ref:`index <synonyms-ref>` 
specifies the synonyms source collection and the analyzer to use 
with the collection. 

In this section, you will create an |fts| index that defines one 
synonym mapping or multiple synonym mappings for the 
``sample_mflix.movies`` collection. The mapping definition in the 
index references the synonyms source collection that you created in the 
``sample_mflix`` database. 

.. include:: /includes/steps/fts-synonyms-tutorial-create-index.rst

Search the Collection 
---------------------

----------

.. |arrow| unicode:: U+27A4

|arrow| Use the **Select your language** drop-down menu to set the 
language of the examples in this section.

----------

.. tabs-selector:: drivers

Synonyms can be used only in queries that use the :ref:`text-ref` 
operator. In this section, you will connect to your |service| cluster 
and the run the sample queries using the ``text`` operator against the 
``title`` field in the ``sample_mflix.movies`` collection. The sample 
queries use words that are configured as synonyms of different mapping 
types in the synonyms source collection, which is referenced in the 
synonyms mapping that the queries use.

.. tabs-drivers::

   .. tab::
      :tabid: shell

      .. include:: /includes/steps/fts-synonyms-tutorial-run-query-shell.rst

   .. tab:: 
      :tabid: compass

      .. include:: /includes/steps/fts-synonyms-tutorial-run-query-compass.rst

   .. tab:: 
      :tabid: go

      .. include:: /includes/steps/fts-synonyms-tutorial-run-query-go.rst

   .. tab:: 
      :tabid: java-sync 

      .. include:: /includes/steps/fts-synonyms-tutorial-run-query-java.rst

   .. tab::
      :tabid: nodejs

      .. include:: /includes/steps/fts-synonyms-tutorial-run-query-nodejs.rst

   .. tab::
      :tabid: python

      .. include:: /includes/steps/fts-synonyms-tutorial-run-query-python.rst
