stepnum: 1
source:
  file: steps-source-admin-navigation.yaml
  ref:  admin-backup-snapshot
---
title: "Click :guilabel:`Create New S3 Blockstore`."
stepnum: 2
level: 4
ref: create-new-s3-blockstore
---
title: "Provide the S3 blockstore details."
stepnum: 3
level: 4
ref: provide-new-s3-blockstore-details
content: |

   .. list-table::
      :widths: 30 70
      :header-rows: 1

      * - Field
        - Contents

      * - :guilabel:`Name`
        - Type the name for the S3 blockstore.
        
      * - :guilabel:`S3 Bucket Name`
        - Type the name of the S3 bucket where you want to host the the S3
          blockstore.

          .. important::

             You cannot move an S3 blockstore to another S3 bucket after the
             S3 blockstore has been created. If you need to use a different S3
             bucket to host your S3 blockstore, you need to create a new S3
             blockstore in that different S3 bucket.
      
      * - :guilabel:`S3 Endpoint`
        - Type the URL for an AWS S3 or an S3-compatible instance.

          .. note::

             MongoDB currently supports endpoints for:

             - :abbr:`AWS (Amazon Web Services)` :abbr:`S3 (Simple Storage Service)` 
               `API <http://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html>`_,
             - IBM `Cloud Object Storage <https://developer.ibm.com/recipes/tutorials/cloud-object-storage-s3-api-intro/>`_ 
               `API <https://ibm-public-cos.github.io/crs-docs/index.html>`_ and 
             - DellEMC `Elastic Cloud Storage <https://www.dellemc.com/en-us/storage/ecs/index.htm#collapse=>`_ 
               `API <https://www.emc.com/techpubs/ecs/ecs_s3_supported_features-1.htm>`_.

             IBM and DellEMC support a subset of the full AWS S3 API.

      * - :guilabel:`AWS Access Key`
        - Type your AWS Access Key ID.
        
      * - :guilabel:`AWS Secret Key`
        - Type your AWS Secret Access Key.
        
      * - :guilabel:`Datastore Type`
        - Select :guilabel:`Standalone`, :guilabel:`Replica Set` or
          :guilabel:`Sharded Cluster`. This MongoDB database stores
          the metadata for the blockstore.

      * - :guilabel:`MongoDB Host List` 
          (:term:`Replica Set` and :term:`Sharded Cluster` only) 

        - Type a comma-separated list of :program:`mongod` instances
          (for a Replica Set) or :program:`mongos` instances (for a
          Sharded Cluster) in the ``<hostname:port>`` format that
          comprise the blockstore metadata database.

          .. example::

             ``host1.example.com:27017, host2.example.com:27017, host2.example.com:27018``

      * - :guilabel:`MongoDB Hostname` 
          (Standalone only)
        - Type the hostname of the S3 blockstore metadata database.
        
      * - :guilabel:`MongoDB Port` 
          (Standalone only)
        - Type the port number of the S3 blockstore metadata database.
        
      * - :guilabel:`Username` (optional) 
        - If the S3 blockstore metadata database uses Username and Password
          (SCRAM-SHA-1) authentication, type the name of the user authorized
          to access the S3 blockstore metadata database.

          S3 Blockstore metadata databases only support Username and Password
          (SCRAM-SHA-1) authentication.

          To enable Username and Password (SCRAM-SHA-1) authentication on your
          S3 blockstore metadata database, see :manual:`how to configure your
          database for SCRAM-SHA-1 authentication </core/security-scram-sha-1>` 
          in the MongoDB manual.
        
      * - :guilabel:`Password` (optional) 
        - If the database uses Username and Password (SCRAM-SHA-1)
          authentication, type the password associated with the username that
          can access the S3 blockstore metadata database.
        
      * - :guilabel:`Connection Options` (optional) 
        - Type any additional :manual:`configuration file options 
          </reference/configuration-options>` for the MongoDB instance. 
          This field supports unescaped values only.

          For proper syntax, see :manual:`Connection String URI
          Format </reference/connection-string>` in the MongoDB manual.
        
      * - :guilabel:`Encrypted Credentials` (optional)
        - Select if the credentials for the database were encrypted using the
          :ref:`credentialstool <encrypt-mongodb-user-credentials>`. The
          credentials include the Username, Password, AWS Access Key ID and
          AWS Secret Key.

      * - :guilabel:`Use TLS/SSL` (optional)
        - Select if the S3 blockstore metadata database only accepts
          connection encrypted using :abbr:`TLS (Transport Layer
          Security)`/:abbr:`SSL (Secure Sockets Layer)`.

          To enable TLS on the S3 blockstore metadata database, see 
          :manual:`Configure mongod and mongos for TLS/SSL </tutorial/configure-ssl>`.
        
      * - :guilabel:`New Assignment Enabled` (optional)
        - Select if you want to enable this S3 blockstore after creating it. This
          is selected by default so the S3 blockstore can be assigned backup
          jobs. If you clear this checkbox, the S3 blockstore is created but you
          cannot assign backups to this S3 blockstore.

---
title: "Click :guilabel:`Create`."
stepnum: 4
level: 4
ref: create-blockstore 
...
