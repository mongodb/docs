.. _dl-drop-store-cmd:

===============
``dropStore``
===============

.. default-domain:: mongodb

.. include:: /includes/fact-data-lake-beta.rst

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

The ``dropStore`` command removes a {+data-lake-store+} from the
{+data-lake+} storage configuration. If existing collections reference
the {+data-lake-store+} you want to remove, the command fails and
returns a list of the dependent collections. 

.. _dl-drop-store-cmd-syntax:

Syntax 
------

.. code-block:: json 

   db.runCommand({ dropStore: "<store-name>" })

.. _dl-drop-store-cmd-params:

Parameters 
----------

.. list-table::
   :header-rows: 1
   :widths: 10 10 70 10 

   * - Parameter 
     - Type 
     - Description 
     - Required?

   * - ``dropStore``
     - string
     - Name of the {+data-lake-store+} to remove from the {+data-lake+}
       storage configuration.
     - yes

.. _dl-drop-store-cmd-output:

Output 
------

The command prints the following output if it succeeds. If the command
fails, see :ref:`dl-drop-store-cmd-errors` for recommended solutions.

.. code-block:: json 

   { "ok" : 1, "dropped" : "<store-name>" }

.. _dl--cmd-egs:

Example
-------

The following example uses the ``dropStore`` command to remove
the {+data-lake-store+} ``myStore`` from the {+data-lake+}
storage configuration. 

.. code-block:: json 

   use sample
   db.runCommand({ dropStore: "myStore" })

The previous command prints the following output: 

.. code-block:: json 
   :copyable: false

   { "ok" : 1, "dropped" : "myStore" }

.. _dl-drop-store-cmd-errors:

Troubleshoot Errors 
-------------------

If the command fails, it returns one of the following errors.

**Reason:**  The specified {+data-lake-store+} has dependent collections and can't be removed. 

.. code-block:: json 
   :copyable: false 

   {
     "ok" : 0,
     "errmsg" : "store has dependent collections: <database.collection>,<database.collection>,<...>",
     "code" : 2,
     "codeName" : "BadValue"
   }

**Solution:** First :ref:`drop the dependent collections
<dl-drop-collection-cmd>`, then re-run the ``dropStore`` command.

**Reason:** The specified {+data-lake-store+} doesn't exist.

.. code-block:: json 
   :copyable: false 

   {
     "ok" : 0,
     "errmsg" : "nonexistent store",
     "code" : 2,
     "codeName" : "BadValue"
   }

**Solution:** Ensure that the {+data-lake-store+} specified in the
command exists in the storage configuration. You can use
the :ref:`dl-list-stores-cmd` command to retrieve a list of valid
{+data-lake-stores+} in the storage configuration.
