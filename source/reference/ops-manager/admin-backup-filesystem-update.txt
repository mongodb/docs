.. _mcli-om-admin-backup-filesystem-update-cmd:

===================================================
mongocli ops-manager admin backup filesystem update
===================================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/admonitions/admin-requires-global-owner.rst

The ``admin backup filesystem update`` command updates one  
backup file system store configuration. You can also update the 
configuration using the :opsmgr:`UI
</tutorial/manage-filestore-storage/#edit-an-existing-file-system-store>`
and the :opsmgr:`API 
</reference/api/admin/backup/snapshot/fileSystemConfigs/update-one-file-system-store-configuration/>`.

.. _mcli-om-admin-backup-filesystem-update-syntax: 

Syntax 
------

.. code-block:: shell 

   mongocli ops-manager|om admin backup filesystem|fileSystem update <file-system-ID>
        [ --assignment ]
        [ --encryptedCredentials ]
        [ --label <tags> ]
        [ --loadFactor <number-of-backup-jobs> ]
        [ --mmapv1CompressionSetting <NONE|GZIP> ]
        [ --output|-o <output-format> ]
        [ --profile|-P <profile-name> ]
        --storePath <path-to-backups>
        [ --wtCompressionSetting <NONE|GZIP> ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-om-admin-backup-filesystem-update-args:

Arguments 
---------

.. list-table::
   :widths: 20 10 60 10
   :header-rows: 1

   * - Option 
     - Type
     - Description
     - Required?

   * - ``<file-system-ID>``
     - string 
     - Unique name for this file system store configuration.
     - yes

.. _mcli-om-admin-backup-filesystem-update-options: 

Options 
-------

.. list-table::
   :widths: 20 10 60 10
   :header-rows: 1

   * - Option 
     - Type
     - Description
     - Required?

   * - ``--assignment``
     - 
     - Flag that indicates whether this :opsmgr:`file system store 
       </reference/glossary/#term-file-system-store>` can be assigned backup 
       jobs.
     - no

   * - ``--encryptedCredentials``
     - 
     - Flag that indicates whether the username and password for this 
       file system store were encrypted using the
       :opsmgr:`credentialstool </tutorial/encrypt-user-credentials/>`.
     - no

   * - ``--label``
     - array of strings
     - Array of tags that specify which :opsmgr:`backup jobs 
       </reference/glossary/#term-backup-job>` |onprem| can assign 
       to which :opsmgr:`file system store 
       </reference/glossary/#term-file system-store>`. If omitted, this 
       file system store can only process the backup jobs for projects
       that do not use labels to filter their jobs. 
     - no

   * - ``--loadFactor``
     - number
     - Required if more than one snapshot store is in use.
     
       Number of backup work this :opsmgr:`snapshot store 
       </reference/glossary/#term-snapshot-store>` should perform 
       compared to another snapshot store. Value must be a positive, 
       non-zero integer.
     - no

   * - ``--mmapv1CompressionSetting``
     - string
     - Compression setting if you use the MMAPv1 storage engine for your
       snapshots. |onprem| accepts ``NONE`` or ``GZIP``.

       If your snapshots don't use the MMAPv1 storage engine, this value
       must be ``NONE``.

     - yes

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are saved. If omitted, uses the 
       {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--storePath``
     - string
     - 	Location where file system-based backups are stored on the file
        system store host. 
     - yes

   * - ``--wtCompressionSetting``
     - string
     - Compression setting if you use the WiredTiger storage engine for
       your snapshots. |onprem| accepts ``NONE`` or ``GZIP``.

       If your snapshots don't use the WiredTiger storage engine, this
       value must be ``NONE``. 
     - yes

.. _mcli-om-admin-backup-filesystem-update-output: 

Output 
------

If the command succeeds, it returns the following message in the default
format. If the command returns errors, see
:ref:`Troubleshooting <mcli-troubleshooting>` for recommended solutions.

.. code-block:: sh 
   :copyable: false 

   File System configuration '<file-system-ID>' updated.

If you request output in |json| format, the command returns the fields 
described in the :opsmgr:`API reference 
<reference/api/admin/backup/snapshot/fileSystemConfigs/update-one-file-system-store-configuration/#response>`.

.. _mcli-om-admin-backup-filesystem-update-egs: 

Examples 
--------

The following ``mongocli om admin backup filesystem update`` command 
updates the ``test`` file system store using the {+default-profile+},
which contains the credentials for accessing |onprem|.

.. tabs:: 

   .. tab:: Default Output 
      :tabid: default 

      .. code-block:: shell
     
         mongocli om admin backup filesystem update test --assignment --storePath /data/backup --mmapv1CompressionSetting NONE --wtCompressionSetting GZIP

      The previous command returns the following:

      .. code-block:: shell
         :copyable: false

         File System configuration 'test' updated.
      
   .. tab:: JSON Output 
      :tabid: json 

      .. code-block:: shell
     
         mongocli om admin backup filesystem update test --assignment --storePath /data/backup --mmapv1CompressionSetting NONE --wtCompressionSetting GZIP --output json

      The previous command returns the following:

      .. code-block:: shell
         :copyable: false

         {
           "id" : "test",
           "assignmentEnabled" : true,
           "loadFactor" : 1,
           "mmapv1CompressionSetting" : "NONE",
           "storePath" : "/data/backup",
           "wtCompressionSetting" : "GZIP"
         }
