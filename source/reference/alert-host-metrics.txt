.. _measurement-types:

============
Host Metrics
============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol


.. list-table::

   * - - ``ASSERT_REGULAR``
       - ``ASSERT_WARNING``
       - ``ASSERT_MSG``
       - ``ASSERT_USER``

     - Measures the rate of asserts for a MongoDB process, as collected
       from the MongoDB :dbcommand:`serverStatus` command's
       :serverstatus:`asserts` document.

   * - - ``BACKGROUND_FLUSH_AVG``

     - Amount of data flushed in the background.

   * - - ``CACHE_BYTES_READ_INTO``
       - ``CACHE_BYTES_WRITTEN_FROM``
       - ``CACHE_USAGE_DIRTY``
       - ``CACHE_USAGE_USED``

     - Applies to a MongoDB process's :manual:`WiredTiger
       </core/wiredtiger>` storage engine, as collected from the MongoDB 
       :dbcommand:`serverStatus` command's 
       :serverstatus:`wiredTiger.cache` and
       :serverstatus:`wiredTiger.concurrentTransactions` documents.

   * - - ``CONNECTIONS``
       - ``CONNECTIONS_MAX``
       - ``CONNECTIONS_PERCENT``

     - Measures connections to a MongoDB process, as collected from the
       MongoDB :dbcommand:`serverStatus` command's 
       :serverstatus:`connections` document.

   * - - ``CURSORS_TOTAL_OPEN``
       - ``CURSORS_TOTAL_TIMED_OUT``
       - ``CURSORS_TOTAL_CLIENT_CURSORS_SIZE``

     - Measures the number of :manual:`cursors </core/cursors>` for a
       MongoDB process, as collected from the MongoDB
       :dbcommand:`serverStatus` command's :serverstatus:`metrics.cursor`
       document.

   * - - ``DB_STORAGE_TOTAL``
       - ``DB_DATA_SIZE_TOTAL``
       - ``DB_INDEX_SIZE_TOTAL``

     - Measures the database's on-disk storage space, as collected from
       the MongoDB :dbcommand:`dbStats` command.

   * - - ``LOGICAL_SIZE``

     - Logical size of cluster data.

   * - - ``DISK_PARTITION_SPACE_USED_DATA``
       - ``DISK_PARTITION_SPACE_USED_INDEX``
       - ``DISK_PARTITION_SPACE_USED_JOURNAL``
       - ``DISK_PARTITION_UTILIZATION_DATA``
       - ``DISK_PARTITION_UTILIZATION_INDEX``
       - ``DISK_PARTITION_UTILIZATION_JOURNAL``

     - Measurements on the amount of disk space used on partitions
       containing different types of MongoDB data.

   * - - ``DOCUMENT_RETURNED``
       - ``DOCUMENT_INSERTED``
       - ``DOCUMENT_UPDATED``
       - ``DOCUMENT_DELETED``

     - Average rate per second of documents returned, inserted,
       updated, or deleted for a selected time period.

   * - - ``EXTRA_INFO_PAGE_FAULTS``
       - ``GLOBAL_ACCESSES_NOT_IN_MEMORY``
       - ``GLOBAL_PAGE_FAULT_EXCEPTIONS_THROWN``

     - Measurements on page faults related to the host.

   * - - ``FTS_MEMORY_RESIDENT``
       - ``FTS_MEMORY_VIRTUAL``
       - ``FTS_MEMORY_MAPPED``

     - Memory usage for :ref:`fts-top-ref` processes, in bytes.

   * - - ``FTS_DISK_UTILIZATION``

     - Disk space in use by :ref:`fts-top-ref` indexes, in bytes.

   * - - ``FTS_PROCESS_CPU_USER``
       - ``FTS_PROCESS_CPU_KERNEL``
       - ``NORMALIZED_FTS_PROCESS_CPU_USER``
       - ``NORMALIZED_FTS_PROCESS_CPU_KERNEL``

     - Percentage of CPU in use by :ref:`fts-top-ref` processes.

   * - - ``GLOBAL_LOCK_CURRENT_QUEUE_TOTAL``
       - ``GLOBAL_LOCK_CURRENT_QUEUE_READERS``
       - ``GLOBAL_LOCK_CURRENT_QUEUE_WRITERS``
       - ``GLOBAL_LOCK_PERCENTAGE``

     - Measures operations waiting on locks, as collected from the MongoDB
       :dbcommand:`serverStatus` command.

   * - - ``INDEX_COUNTERS_BTREE_ACCESSES``
       - ``INDEX_COUNTERS_BTREE_HITS``
       - ``INDEX_COUNTERS_BTREE_MISSES``
       - ``INDEX_COUNTERS_BTREE_MISS_RATIO``

     - Measurements concerning :term:`B-tree` index activity.

   * - - ``JOURNALING_COMMITS_IN_WRITE_LOCK``
       - ``JOURNALING_MB``
       - ``JOURNALING_WRITE_DATA_FILES_MB``

     - Measurements concerning :manual:`journaling </core/journaling/>`
       activity.

   * - - ``MEMORY_RESIDENT``
       - ``MEMORY_VIRTUAL``
       - ``MEMORY_MAPPED``
       - ``COMPUTED_MEMORY``

     - Measures memory for a MongoDB process, as collected from the
       MongoDB
       :dbcommand:`serverStatus` command's
       :serverstatus:`mem` document.

   * - - ``MUNIN_CPU_USER``
       - ``MUNIN_CPU_NICE``
       - ``MUNIN_CPU_SYSTEM``
       - ``MUNIN_CPU_IOWAIT``
       - ``MUNIN_CPU_IRQ``
       - ``MUNIN_CPU_SOFTIRQ``
       - ``MUNIN_CPU_STEAL``

     - Measurements concerning `munin-node <http://munin-monitoring.org/>`__
       CPU activity.

   * - - ``NETWORK_BYTES_IN``
       - ``NETWORK_BYTES_OUT``
       - ``NETWORK_NUM_REQUESTS``

     - Measures throughput for MongoDB process, as collected from the
       MongoDB
       :dbcommand:`serverStatus` command's
       :serverstatus:`network` document.

   * - - ``OPCOUNTER_CMD``
       - ``OPCOUNTER_QUERY``
       - ``OPCOUNTER_UPDATE``
       - ``OPCOUNTER_DELETE``
       - ``OPCOUNTER_GETMORE``
       - ``OPCOUNTER_INSERT``

     - Measures the rate of database operations on a MongoDB process
       since the process last started, as collected from the MongoDB
       :dbcommand:`serverStatus` command's
       :serverstatus:`opcounters` document.

   * - - ``OPCOUNTER_REPL_CMD``
       - ``OPCOUNTER_REPL_UPDATE``
       - ``OPCOUNTER_REPL_DELETE``
       - ``OPCOUNTER_REPL_INSERT``

     - Measures the rate of database operations on MongoDB
       :term:`secondaries <secondary>`, as collected from the MongoDB
       :dbcommand:`serverStatus` command's
       :serverstatus:`opcountersRepl` document.

   * - - ``OPERATIONS_SCAN_AND_ORDER``

     - For a selected time period, the average rate per second for
       operations that perform a sort but cannot perform the sort using
       an index.

   * - - ``AVG_READ_EXECUTION_TIME``
       - ``AVG_WRITE_EXECUTION_TIME``
       - ``AVG_COMMAND_EXECUTION_TIME``

     - Available to hosts running MongoDB 3.6 or later. The execution
       time in milliseconds per read, write, or command operation
       over the selected time period.

   * - - ``OPLOG_MASTER_TIME``
       - ``OPLOG_MASTER_TIME_ESTIMATED_TTL``
       - ``OPLOG_SLAVE_LAG_MASTER_TIME``
       - ``OPLOG_MASTER_LAG_TIME_DIFF``
       - ``OPLOG_RATE_GB_PER_HOUR``

     - Measurements that apply to the MongoDB process's
       :manual:`oplog </core/replica-set-oplog>`.

   * - - ``QUERY_EXECUTOR_SCANNED``

     - Average rate per second to scan index items during
       queries and query-plan evaluations. This rate is driven by
       the same value as ``totalKeysExamined`` in the output of
       :dbcommand:`explain`. This
       measurement is found on the host's ``Query Executor``
       chart, accessed when viewing metrics.

   * - - ``QUERY_EXECUTOR_SCANNED_OBJECTS``

     - Average rate per second to scan documents during queries
       and query-plan evaluations. |service| derives the rate using the
       :dbcommand:`explain` output's
       ``totalDocsExamined`` value. This measurement is found on the
       host's ``Query Executor`` chart, accessed when viewing
       metrics.

   * - - ``QUERY_TARGETING_SCANNED_PER_RETURNED``

     - Ratio of the number of index items scanned to the number of
       documents returned. This measurement is found on the host's
       ``Query Targeting`` chart, accessed when viewing metrics.

   * - - ``QUERY_TARGETING_SCANNED_OBJECTS_PER_RETURNED``

     - Ratio of the number of documents scanned to the number of
       documents returned. This measurement is found on the host's
       ``Query Targeting`` chart, accessed when viewing metrics.

   * - - ``RESTARTS_IN_LAST_HOUR``
    
     -  Number of times the host restarted within the previous hour.

   * - - ``SWAP_USAGE_USED``
       - ``SWAP_USAGE_FREE``

     - Swap space used and available, measured in bytes.

   * - - ``SYSTEM_MEMORY_USED``
       - ``SYSTEM_MEMORY_FREE``

     - Number of bytes of physical memory in use and available to the system.

   * - - ``SYSTEM_MEMORY_AVAILABLE``

     - Estimate of the number of bytes of system memory available for running
       new applications, without swapping.

   * - - ``SYSTEM_NETWORK_IN``
       - ``SYSTEM_NETWORK_OUT``

     - Average rate of physical bytes received and transmitted per second
       by the ``eth0`` network interface.

   * - - ``TICKETS_AVAILABLE_READS``
       - ``TICKETS_AVAILABLE_WRITES``

     - Measurement of the :manual:`WiredTiger </core/wiredtiger>` storage
       engine :serverstatus:`wiredTiger.cache` and :serverstatus:`wiredTiger.concurrentTransactions`
       documents as collected from the MongoDB :dbcommand:`serverStatus`
       command.

   * - - ``NORMALIZED_SYSTEM_CPU_USER``
       - ``NORMALIZED_SYSTEM_CPU_STEAL``

     - CPU usage of processes on the host server, scaled to a range of
       0-100% by dividing by the number of CPU cores.
