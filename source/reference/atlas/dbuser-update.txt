.. _mcli-atlas-dbuser-update-command:

============================
mongocli atlas dbuser update
============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``dbuser update`` command modifies a MongoDB database user's password 
and roles. You can also update a MongoDB database user through the |service| 
:atlas:`UI </security-add-mongodb-users/index.html#modify-database-users>` or 
:atlas:`API </reference/api/database-users-update-a-user/>`.

.. _dbuser-update-syntax:

Syntax
------

.. code-block:: text

   mongocli atlas dbuser update <username>    
        [ --output|-o <output-format> ]
        --password|-p <password-of-user>
        [ --profile|-P <profile-name> ]
        [ --projectId <project-ID> ]
        [ --role <name-of-role> ]

.. include:: /includes/fact-command-line-help.rst

.. _dbuser-update-options:

Options
-------

.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option 
     - Type
     - Description
     - Required?

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--password``, ``-p``
     - string
     - Password for authenticating the user to MongoDB. 
     - yes

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are saved. If omitted, uses the 
       {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project that contains the 
       cluster. If omitted, uses the project ID in 
       the profile or :ref:`environment variable <mcli-env-var>`.
     - no

   * - ``--role``
     - string or array of strings
     - Comma-separated list of user's roles and the databases 
       or collections on which the roles apply. A role allows the 
       user to perform particular actions on the specified database 
       or collection. To learn more about the list of 
       default roles, see :atlas:`MongoDB Database User Privileges 
       </security-add-mongodb-users/index.html#mongodb-database-user-privileges>`.
     - yes

   * - ``<username>``
     - string
     - Username of the user to update.
     - yes

.. _dbuser-update-command-output:

Output 
------
.. include:: /includes/command-output-intro.rst

.. include:: /includes/atlas-dbuser-output-fields.rst

.. _dbuser-update-examples:

Examples 
--------

The following examples use the ``mongocli atlas dbuser update`` command
to modify a MongoDB database user's password and roles. When you run the
command, it prints the :ref:`Output Fields
<dbuser-create-command-output>` to the terminal.
 
.. _dbuser-update-eg-1:

Update Password Example 
~~~~~~~~~~~~~~~~~~~~~~~

The following command modifies ``egUser``'s password to ``ChangeThisToAStrongPassword``.
The command uses the {+default-profile+}, which contains the project ID and
|svc-api-key|\s for accessing the cluster.

.. code-block:: sh
   :copyable: false

   mongocli atlas dbuser update egUser --password ChangeThisToAStrongPassword 
   --output json

The previous command prints the following fields
to the terminal. To learn more about these fields, see 
:ref:`Output <dbuser-create-command-output>`.

.. code-block:: json
   :copyable: false

   {
	    "roles": [{
			"roleName": "atlasAdmin",
			"databaseName": "admin"
	  	}],
	    "groupId": "5e2211c17a3e5a48f5497de3",
	    "username": "egUser",
	    "databaseName": "admin",
	    "ldapAuthType": "NONE"
    }

.. _dbuser-update-eg-2:

Update Roles Example 
~~~~~~~~~~~~~~~~~~~~

The following examples show two ways to update ``egUser``'s roles.  

The following command shows the ``--role`` option with 
``readWriteAnyDatabase`` and ``clusterMonitor`` privileges separated 
by a comma. The command uses the {+default-profile+}, which 
contains the project ID and |svc-api-key|\s for accessing the cluster.

.. code-block:: sh
   :copyable: false

   mongocli atlas dbuser update egUser --password ChangeThisToAStrongPassword --role readWriteAnyDatabase@admin,clusterMonitor@admin --output json

The following command specifies the ``--role`` option twice, 
once for each privilege. The command uses the {+default-profile+} where 
the project ID and |svc-api-key|\s for accessing the cluster are saved.

.. code-block:: sh
   :copyable: false

   mongocli atlas dbuser update egUser --password ChangeThisToAStrongPassword --role readWriteAnyDatabase@admin --role clusterMonitor@admin --output json

The commands print the following fields to the terminal. 
To learn more about these fields, see :ref:`Output 
<dbuser-create-command-output>`. 

.. code-block:: json
   :copyable: false

   {
	     "roles": [{
			     "roleName": "readWriteAnyDatabase",
			     "databaseName": "admin"
		    },
		    {
		     	 "roleName": "clusterMonitor",
			     "databaseName": "admin"
		    }],
	      "groupId": "5e2211c17a3e5a48f5497de3",
	      "username": "egUser",
	      "databaseName": "admin",
	      "ldapAuthType": "NONE"
    }
