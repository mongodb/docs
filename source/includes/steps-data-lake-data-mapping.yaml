title: "Copy the following ``storageSetConfig`` command to your preferred text editor."
ref: data-lake-prep-setconfig
level: 4
stepnum: 1
content: |

  .. code-block:: json
     :emphasize-lines: 6-7

     use admin;
     db.runCommand( { "storageSetConfig": {
       "stores": [{
         "name": "s3store",           // Creates an S3 store
         "provider": "s3",            // Specifies the provider 
         "region":"<bucket-region>",  // Update with the bucket region code
         "bucket": "<bucket-name>"    // Update with your bucket name
       }],
       "databases": [{ 
         "name": "sample",            // Creates a database named sample
         "collections": [{            
           "name": "*",               // Creates a collection for each directory //
           "dataSources": [{                      
             "storeName": "s3store",  // Links to the S3 store above
             "path": "/json/{collectionName()}"
           }]
         }]
       }]
     }})

  The storage configuration maps a set of data stores to a set of
  databases and collections. A store is a set of objects in an S3
  bucket under a specific prefix.
  
  .. example::

     In this example, the ``s3store`` contains all objects in the
     S3 bucket. We configured a ``sample`` database, and created
     a collection for the data in each ``/json/`` subdirectory.
     To learn more about how the ``path`` field maps data, see
     :doc:`/reference/config-files/data-lake-configuration`.

  .. include:: /includes/fact-data-lake-dynamic-collections.rst

---
title: "Change the two highlighted lines to match your configuration."
ref: getting-started-whitelist-info-data-lake
level: 4
stepnum: 2
content: |
  .. list-table::
   :widths: 20 20 40 20
   :header-rows: 1

   * - Key
     - Type
     - Description
     - Example

   * - ``stores.s3.region``
     - string
     - The |aws| `region code <https://docs.aws.amazon.com/general/latest/gr/rande.html>`__.
     - ``us-east-1``

   * - ``stores.s3.bucket``
     - string
     - The bucket name you chose in :doc:`Part 1: Prepare your S3 Bucket </tutorial/load-sample-data>`.
     - ``atlas-sample-data``

---
ref: data-lake-execute-setconfig
level: 4
stepnum: 3
title: "Execute the ``storageSetConfig`` command."
content: |
  a. Copy the filled-out command from your text editor.
  #. Paste the command into the ``mongo`` shell.
  #. Execute the command.

  Upon successful configuration, the ``mongo`` shell
  outputs the following:

  .. code-block:: sh

     { "ok" : 1 }

---
ref: data-lake-check-databases
level: 4
stepnum: 3
title: "Verify your database and collection mapping."
content: |
  a. Run the following command to display the mapped database:

     .. code-block:: sh

        show dbs

     Upon successful configuration, the ``mongo`` shell outputs
     the following:
 
     .. code-block:: sh
        :copyable: false

        sample  (empty)
  
     .. note::
     
        The ``(empty)`` in the output is expected.
  
  #. Switch to the ``sample`` database:

     .. code-block:: sh

        use sample

  #. Run the following command to display the mapped collections:

     .. code-block:: sh

        show collections

     Upon successful configuration, the ``mongo`` shell outputs
     the following:

     .. code-block:: sh
        :copyable: false

        airbnb
        weather
...
