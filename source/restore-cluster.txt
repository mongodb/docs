===================================================
Restore a Cluster from a Continuous Backup Snapshot
===================================================

.. default-domain:: mongodb

.. include:: /includes/fact-atlas-free-tier-limits.rst

|service| lets you restore data from a scheduled 
:doc:`continuous backup snapshot </backup/continuous-backups>` or from
a selected point between snapshots. For replica sets, you can restore
from selected points in time within the last 24 hours. For sharded
clusters you can restore from checkpoints between snapshots within the
last 24 hours.

.. include:: /includes/fact-backup-restore-considerations.rst

For instructions on restoring data from a 
:doc:`cloud provider snapshot </backup/cloud-provider-snapshots>`,
see :doc:`/restore/restore-cluster-cloud-provider-snapshot`

Prerequisites
-------------

.. include:: /includes/fact-stop-ops-during-restore.rst

Restore a Cluster
-----------------

To restore a cluster:

#. Click :guilabel:`Backup` in the left-hand navigation.

   The :guilabel:`Overview` lists the project's clusters. If the cluster
   has backup enabled, its :guilabel:`Status` is :guilabel:`Active`. If
   the cluster has backup disabled, its :guilabel:`Status` is
   :guilabel:`Inactive`.

#. Select a cluster's snapshot to use for the restore.

   Hover over the :guilabel:`Active` status of the cluster and click
   :guilabel:`Restore or Download`.

   Alternatively, you can click the ``...`` button for the cluster and
   select the :guilabel:`Restore`.

#. Follow the prompts to restore your cluster. 

   You may choose to:

   - Download your backup data via HTTPS and restore manually.

     \- or - 

   - Have |service| restore to a selected cluster. |service| can only
     restore to a cluster of the same type (i.e. replica set to replica
     set or sharded cluster to sharded cluster). 

     .. important::

        The restore process requires **downtime** for the target 
        cluster.

     .. note::

        The MongoDB versions must also be compatible. For instance, you
        cannot restore from a snapshot of a 4.0 cluster to a 3.6 or
        earlier cluster.

     If you have the proper project permissions, you can restore to a
     cluster of a different project in either |service| *or* |mms|:

     .. list-table::
        :widths: 20 80
        :header-rows: 1

        * - Restore to Project on
          - Required Roles on Destination Project

        * - |service|
          - :authrole:`Project Owner`

        * - |mms|
          - One of the following |mms| roles:

            - :cloudmgr:`Organization Owner </reference/user-roles/#Organization-Owner>`
            - :cloudmgr:`Project Owner </reference/user-roles/#Project-Owner>`
            - :cloudmgr:`Project Backup Admin </reference/user-roles/#Project-Backup-Admin>`

            When prompted for a destination cluster, select the |mms|
            project and then select a cluster belonging to that
            project.

#. Restart your application and ensure it uses the new target cluster.
