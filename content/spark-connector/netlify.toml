[build]
publish = "dist"
base = "content/spark-connector"

[build.environment]
REPO_NAME = "docs-spark-connector"
SECRETS_SCAN_ENABLED = "false"
MUT_COMMANDS_ENABLED = "false"


[context.production.environment]
ENV = "dotcomprd"

[context.preprd.environment]
ENV = "dotcomstg"

[context.deploy-preview.environment]
ENV = "prd"

[context.branch-deploy.environment]
ENV = "prd"

[context.preview-server.environment]
ENV = "prd"

[context.dev.environment]
ENV = "stg"


### OFFLINE REDIRECTS
### ALIAS REDIRECTS
### PAGE-SPECIFIC REDIRECTS
### WILDCARD REDIRECTS
### CATCH ALLS
## redirects any pages not at any of the active versions to current (makes eols technically unnecessary)


### OFFLINE REDIRECTS 
[[redirects]]
from = "/docs/spark-connector/v10.1/*"
to = "/docs/spark-connector/current/:splat"

[[redirects]]
from = "/docs/spark-connector/v10.0/*"
to = "/docs/spark-connector/current/:splat"

[[redirects]]
from = "/docs/spark-connector/v3.0/*"
to = "/docs/spark-connector/current/:splat"

[[redirects]]
from = "/docs/spark-connector/v2.4/*"
to = "/docs/spark-connector/current/:splat"

[[redirects]]
from = "/docs/spark-connector/v2.3/*"
to = "/docs/spark-connector/current/:splat"

[[redirects]]
from = "/docs/spark-connector/v2.2/*"
to = "/docs/spark-connector/current/:splat"

[[redirects]]
from = "/docs/spark-connector/v2.1/*"
to = "/docs/spark-connector/current/:splat"

[[redirects]]
from = "/docs/spark-connector/v2.0/*"
to = "/docs/spark-connector/current/:splat"

[[redirects]]
from = "/docs/spark-connector/v1.1/*"
to = "/docs/spark-connector/current/:splat"


### ALIAS REDIRECTS
[[redirects]]
from = "/docs/spark-connector/master/*"
to = "/docs/spark-connector/upcoming/:splat"

[[redirects]]
from = "/docs/spark-connector/v10.5/*"
to = "/docs/spark-connector/current/:splat"
status = 302


### PAGE-LEVEL REDIRECTS

[[redirects]]
from = "/docs/spark-connector/upcoming/batch-mode/"
to = "/docs/spark-connector/current/batch-mode/"

[[redirects]]
from = "/docs/spark-connector/upcoming/batch-mode/batch-read-config/"
to = "/docs/spark-connector/current/batch-mode/batch-read-config/"

[[redirects]]
from = "/docs/spark-connector/upcoming/batch-mode/batch-read/"
to = "/docs/spark-connector/current/batch-mode/batch-read/"

[[redirects]]
from = "/docs/spark-connector/upcoming/batch-mode/batch-write-config/"
to = "/docs/spark-connector/current/batch-mode/batch-write-config/"

[[redirects]]
from = "/docs/spark-connector/upcoming/batch-mode/batch-write/"
to = "/docs/spark-connector/current/batch-mode/batch-write/"

[[redirects]]
from = "/docs/spark-connector/upcoming/configuration/"
to = "/docs/spark-connector/current/configuration/"

[[redirects]]
from = "/docs/spark-connector/upcoming/faq/"
to = "/docs/spark-connector/current/faq/"

[[redirects]]
from = "/docs/spark-connector/upcoming/getting-started/"
to = "/docs/spark-connector/current/getting-started/"

[[redirects]]
from = "/docs/spark-connector/upcoming/java/api/"
to = "/docs/spark-connector/current/java/api/"

[[redirects]]
from = "/docs/spark-connector/upcoming/java/sql/"
to = "/docs/spark-connector/current/java/sql/"

[[redirects]]
from = "/docs/spark-connector/upcoming/python/api/"
to = "/docs/spark-connector/current/python/api/"

[[redirects]]
from = "/docs/spark-connector/upcoming/python/filters/"
to = "/docs/spark-connector/current/python/filters/"

[[redirects]]
from = "/docs/spark-connector/upcoming/python/sql/"
to = "/docs/spark-connector/current/python/sql/"

[[redirects]]
from = "/docs/spark-connector/upcoming/release-notes/"
to = "/docs/spark-connector/current/release-notes/"

[[redirects]]
from = "/docs/spark-connector/upcoming/scala/api/"
to = "/docs/spark-connector/current/scala/api/"

[[redirects]]
from = "/docs/spark-connector/upcoming/scala/filters/"
to = "/docs/spark-connector/current/scala/filters/"

[[redirects]]
from = "/docs/spark-connector/upcoming/scala/sql/"
to = "/docs/spark-connector/current/scala/sql/"

[[redirects]]
from = "/docs/spark-connector/upcoming/streaming-mode/"
to = "/docs/spark-connector/current/streaming-mode/"

[[redirects]]
from = "/docs/spark-connector/upcoming/streaming-mode/streaming-read-config/"
to = "/docs/spark-connector/current/streaming-mode/streaming-read-config/"

[[redirects]]
from = "/docs/spark-connector/upcoming/streaming-mode/streaming-read/"
to = "/docs/spark-connector/current/streaming-mode/streaming-read/"

[[redirects]]
from = "/docs/spark-connector/upcoming/streaming-mode/streaming-write-config/"
to = "/docs/spark-connector/current/streaming-mode/streaming-write-config/"

[[redirects]]
from = "/docs/spark-connector/upcoming/streaming-mode/streaming-write/"
to = "/docs/spark-connector/current/streaming-mode/streaming-write/"

[[redirects]]
from = "/docs/spark-connector/upcoming/tls/"
to = "/docs/spark-connector/current/tls/"

[[redirects]]
from = "/docs/spark-connector/upcoming/tutorials/"
to = "/docs/spark-connector/current/tutorials/"

### WILDCARD REDIRECTS

[[redirects]]
from = "/docs/spark-connector/:version/configuration/read/"
to = "/docs/spark-connector/:version/batch-mode/batch-read-config/"

[[redirects]]
from = "/docs/spark-connector/:version/configuration/write/"
to = "/docs/spark-connector/:version/batch-mode/batch-write-config/"

[[redirects]]
from = "/docs/spark-connector/:version/java-api/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/java/aggregation/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/java/datasets-and-sql/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/java/read-from-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-read/"

[[redirects]]
from = "/docs/spark-connector/:version/java/write-to-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-write/"

[[redirects]]
from = "/docs/spark-connector/:version/python-api/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/python/aggregation/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/python/filters-and-sql/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/python/read-from-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-read/"

[[redirects]]
from = "/docs/spark-connector/:version/python/write-to-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-write/"

[[redirects]]
from = "/docs/spark-connector/:version/r-api/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/r/aggregation/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/r/filters-and-sql/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/r/read-from-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-read/"

[[redirects]]
from = "/docs/spark-connector/:version/r/write-to-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-write/"

[[redirects]]
from = "/docs/spark-connector/:version/read-from-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-read/"

[[redirects]]
from = "/docs/spark-connector/:version/scala-api/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/scala/aggregation/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/scala/datasets-and-sql/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/scala/read-from-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-read/"

[[redirects]]
from = "/docs/spark-connector/:version/scala/streaming/"
to = "/docs/spark-connector/:version/streaming-mode/"

[[redirects]]
from = "/docs/spark-connector/:version/scala/write-to-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-write/"

[[redirects]]
from = "/docs/spark-connector/:version/spark-sql/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/sparkR/"
to = "/docs/spark-connector/:version/"

[[redirects]]
from = "/docs/spark-connector/:version/structured-streaming/"
to = "/docs/spark-connector/:version/streaming-mode/"

[[redirects]]
from = "/docs/spark-connector/:version/write-to-mongodb/"
to = "/docs/spark-connector/:version/batch-mode/batch-write/"

[[redirects]]
from = "/docs/spark-connector/:version/api-docs/"
to = "/docs/spark-connector/:version/"

#Online versions: dict_keys(['upcoming', 'current', 'v10.4', 'v10.3', 'v10.2'])
### CATCH ALLS (Redirects any /docs/spark-connector/ page that would've 404ed to the version's landing page)
[[redirects]]
from = "/docs/spark-connector/upcoming/*"
to = "/docs/spark-connector/intermediary/upcoming/:splat"
status = 302

[[redirects]]
from = "/docs/spark-connector/intermediary/upcoming/*"
to = "/docs/spark-connector/upcoming"
status = 302

[[redirects]]
from = "/docs/spark-connector/current/*"
to = "/docs/spark-connector/intermediary/current/:splat"
status = 302

[[redirects]]
from = "/docs/spark-connector/intermediary/current/*"
to = "/docs/spark-connector/current"
status = 302

[[redirects]]
from = "/docs/spark-connector/v10.4/*"
to = "/docs/spark-connector/intermediary/v10.4/:splat"
status = 302

[[redirects]]
from = "/docs/spark-connector/intermediary/v10.4/*"
to = "/docs/spark-connector/v10.4"
status = 302

[[redirects]]
from = "/docs/spark-connector/v10.3/*"
to = "/docs/spark-connector/intermediary/v10.3/:splat"
status = 302

[[redirects]]
from = "/docs/spark-connector/intermediary/v10.3/*"
to = "/docs/spark-connector/v10.3"
status = 302

[[redirects]]
from = "/docs/spark-connector/v10.2/*"
to = "/docs/spark-connector/intermediary/v10.2/:splat"
status = 302

[[redirects]]
from = "/docs/spark-connector/intermediary/v10.2/*"
to = "/docs/spark-connector/v10.2"
status = 302

### CATCH ALLS (add slug to paths without slug)
[[redirects]]
from = "/docs/spark-connector/upcoming/*"
to = "/docs/spark-connector/upcoming/:splat"
status = 200

[[redirects]]
from = "/docs/spark-connector/current/*"
to = "/docs/spark-connector/current/:splat"
status = 200

[[redirects]]
from = "/docs/spark-connector/v10.4/*"
to = "/docs/spark-connector/v10.4/:splat"
status = 200

[[redirects]]
from = "/docs/spark-connector/v10.3/*"
to = "/docs/spark-connector/v10.3/:splat"
status = 200

[[redirects]]
from = "/docs/spark-connector/v10.2/*"
to = "/docs/spark-connector/v10.2/:splat"
status = 200

[[redirects]]
from = "/docs/spark-connector/*"
to = "/docs/spark-connector/current/:splat"
