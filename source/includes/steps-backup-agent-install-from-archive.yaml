title: "Download the latest version of the Backup Agent archive."
stepnum: 1
edition:
  - cloud
ref: download-saas
pre: |
  On a system shell, issue a ``curl`` command to download the archive
  for the agent that works on your platform:
action:
  - heading: "For RHEL / CentOS (7.x) and SUSE 12 on x64 architecture:"
    language: sh
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/backup/mongodb-mms-backup-agent-latest.rhel7_x86_64.tar.gz
  - heading: "For RHEL / CentOS (7.x) on PowerPC architecture:"
    language: sh
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/backup/mongodb-mms-backup-agent-latest.rhel7_ppc641e.tar.gz
  - heading: "For Ubuntu 16.X on PowerPC architecture:"
    language: sh
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/backup/mongodb-mms-backup-agent-manager_latest_ppc64e1.ubuntu1604.tar.gz
  - heading: "For all other Linux distributions:"
    language: sh
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/backup/mongodb-mms-backup-agent-latest.linux_x86_64.tar.gz
---
title: "Download the latest version of the Backup Agent archive."
stepnum: 1
edition:
  - onprem
ref: download-hosted
pre: |
  On a system shell, issue a ``curl`` command to download the archive
  for the agent that works on your platform:
action:
  - heading: "For RHEL / CentOS (7.x) and SUSE 12 on x64 architecture:"
    language: sh
    code: |
      curl -OL https://<OpsManagerHost:Port>/download/agent/backup/mongodb-mms-backup-agent-latest.rhel7_x86_64.tar.gz
  - heading: "For RHEL / CentOS (7.x) on PowerPC architecture:"
    language: sh
    code: |
      curl -OL https://<OpsManagerHost:Port>/download/agent/backup/mongodb-mms-backup-agent-latest.rhel7_ppc641e.tar.gz
  - heading: "For Ubuntu 16.X on PowerPC architecture:"
    language: sh
    code: |
      curl -OL https://<OpsManagerHost:Port>/download/agent/backup/mongodb-mms-backup-agent-manager_latest_ppc64e1.ubuntu1604.tar.gz
  - heading: "For all other Linux distributions:"
    language: sh
    code: |
      curl -OL https://<OpsManagerHost:Port>/download/agent/backup/mongodb-mms-backup-agent-latest.linux_x86_64.tar.gz
---
title: "Install the Backup Agent."
stepnum: 2
ref: extract
pre: |
  To install the agent that works on your platform, issue the
  appropriate command to extract the archive:

  .. note::
     Replace ``<OpsManagerHost:Port>`` with the hostname and port
     of your |onprem| installation.

action:
  - heading: "For RHEL / CentOS (7.x) and SUSE 12 on x64 architecture:"
    language: sh
    code: |
      tar -xf mongodb-mms-backup-agent-latest.rhel7_x86_64.tar.gz
  - heading: "For RHEL / CentOS (7.x) on PowerPC architecture:"
    language: sh
    code: |
      tar -xf mongodb-mms-backup-agent-latest.rhel7_ppc641e.tar.gz
  - heading: "For Ubuntu 16.X on PowerPC architecture:"
    language: sh
    code: |
      tar -xf mongodb-mms-backup-agent-manager_latest_ppc64e1.ubuntu1604.tar.gz
  - heading: "For all other Linux distributions:"
    language: sh
    code: |
      tar -xf mongodb-mms-backup-agent-latest.linux_x86_64.tar.gz
post: |
  The Backup Agent is installed.
---
title: "Generate an agent API key or retrieve an existing agent API key for your |mms| group." 
stepnum: 3
ref: retrieve-backup-mms-api-key
pre: |
      a. Click :guilabel:`+ Generate Key`.

      .. include:: /includes/extracts/agent-api-key-generate-note.rst

      b. Enter your password and click :guilabel:`Verify`.
  
      c. Click :guilabel:`+ Generate Key` again.

      .. include:: /includes/extracts/agent-api-key-admonition.rst
---
title: "Edit the ``local.config`` file to include your Group ID and agent API key."
stepnum: 4
ref: configure-backup-mms-api-key
content: |
  In the directory where you installed the Backup Agent, locate and
  open the ``local.config`` file.

  For ``mmsGroupId``, enter your Group ID as the value.
  For ``mmsApiKey``, enter the group's :term:`agent API key`.

---
stepnum: 5
source:
  file: steps-source-install-agent.yaml
  ref: proxy
replacement:
  agentname: "Backup"
  httpProxy: ":bsetting:`httpProxy`"
  configfile: "<install-directory>/local.config"
---
title: "Start the Backup Agent."
stepnum: 6
ref: start
action:
  pre: |
    Issue the following command:
  language: sh
  code: |
    nohup ./mongodb-mms-backup-agent >> backup-agent.log 2>&1 &
...
