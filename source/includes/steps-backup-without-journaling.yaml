title: Flush writes to disk and lock the database to prevent further writes.
stepnum: 1
ref: flush
action:
  pre: |
    To flush writes to disk and to "lock" the database, issue the
    :method:`db.fsyncLock()` method in the :program:`mongo` shell:
  language: javascript
  code: |
    db.fsyncLock();
---
title: "Perform the backup operation described in :ref:`lvm-backup-operation`."
stepnum: 2
ref: backup
---
title: "After the snapshot completes, unlock the database."
stepnum: 3
ref: unlock
action:
  - pre: |
      To unlock the database after the snapshot has completed, use the
      following command in the :program:`mongo` shell:
    language: javascript
    code: |
      db.fsyncUnlock();
post: |
  .. include:: /includes/warning-fsync-lock-mongodump.rst

  .. include:: /includes/fact-2.0-fsync-lock-change.rst
...
