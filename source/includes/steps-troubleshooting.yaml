title: Verify the container is running.
ref: verify-container-troubleshooting
level: 4
stepnum: 1
source:
  file: steps-installation.yaml
  ref: verify-container
post: |
  Proceed to the next step if any of the following conditions are met:

  - The service is stuck at ``0/1`` replicas and its mode is not
    ``replicated`` after an extended period of time.  This may indicate
    that the service did not deploy properly.

  - If you recieve errors when running the ``charts-cli add-user``
    script.

  - The |charts-short| application is not loading in your web browser.
---
title: Retrieve the logs from the running service.
ref: get-service-logs
level: 4
stepnum: 2
content: |
  Retrieve the service logs by running the following command using the
  service ID from the previous step:

  .. code-block:: sh

     docker service logs <service ID>

  The following example contains sample output from the command. Note
  each step has a tick or cross which could explain the issue:

  .. literalinclude:: /includes/docker-mongodb-charts.log
     :language: sh

---
title: Delete and recreate the Docker Secret for the metadata database.
ref: delete-recreate-docker-secret
level: 4
stepnum: 3
content: |
  Malformed
  :manual:`Connection String URIs </reference/connection-string>`
  commonly cause issues when deploying |charts-short|. To modify the
  URI, you must remove the old Docker secret:

  .. code-block:: sh

     docker secret rm charts-mongodb-uri

  Then recreate the secret:

  .. code-block:: sh

     echo "mongodb://<username>:<password>@myhost.com/" | docker secret create charts-mongodb-uri -
---
title: Redeploy the Docker stack.
ref: redeploy-docker-stack
level: 4
stepnum: 3
content: |
  If there are no obvious problems with the configuration, try deleting
  and redeploying the Docker stack.

  .. code-block:: sh

     docker stack rm mongodb-charts

  Before redeploying, execute ``docker ps`` a few times until it shows no
  running Charts containers. It can take a little while for the
  containers to shut down. Then relaunch the stack using:

  .. code-block:: sh

     docker stack deploy -c charts-docker-compose.yml mongodb-charts

---
title: Contact MongoDB Support.
ref: contact-support
level: 4
stepnum: 4
content: |
  If you still have trouble accessing the |charts-short| application,
  please copy the logs from step 2 and contact MongoDB Support via the
  chat button within the |charts| application.

  .. note::

     The chat feature is not available when the Feedback and Support
     widget is disabled.

...
