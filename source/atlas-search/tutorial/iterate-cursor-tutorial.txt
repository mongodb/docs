.. facet::
   :name: programming_language
   :values: shell

.. meta::
   :keywords: code example, compass

.. _iterate-cursor-tutorial:

==============================================
How to Iterate Your Cursor to View All Results 
==============================================

.. default-domain:: mongodb

.. meta::
   :description: In this tutorial, learn how to iterate a cursor, pulling all results from it until it is exhausted.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial describes how to return all results for an |fts| query by
iterating your cursor until it is exhausted. By default, some |fts|
clients like {+mongosh+} and |compass| print up to the first 20
documents in the results. To view all results at once, we recommend that
you iterate your cursor until it is exhausted. To demonstrate how to
iterate your cursor to view all results, this tutorial takes you through
the following steps:  

1. Set up an |fts| index with :ref:`dynamic mapping
   <static-dynamic-mappings>` on the ``sample_mflix.movies`` collection. 
#. Run an |fts| query that iterates your cursor until it is exhausted to
   retrieve all documents that contain the term ``summer`` in the ``title``
   field. 

.. include:: /includes/atlas-roles/create-search-index.rst

Create the |fts| Index 
----------------------

In this section, you create an |fts| index that uses :ref:`dynamic
mapping <static-dynamic-mappings>` to automatically index all the
:ref:`dynamically indexable <bson-data-chart>` fields in the
``sample_mflix.movies`` collection. 

.. |search-type| replace:: :guilabel:`Atlas Search`
.. |index-name| replace:: ``iterate-cursor-tutorial``
.. |database-name| replace:: ``sample_mflix`` database
.. |collection-name| replace:: ``movies`` collection
   
.. include:: /includes/fts/iterate-cursor/procedures/steps-fts-iterate-cursor-tutorial-create-index.rst

Run the Sample Queries 
----------------------

----------

.. |arrow| unicode:: U+27A4

|arrow| Use the **Select your language** drop-down menu to select the 
MongoDB client that you want to use to run the example queries on this page.

----------

.. tabs-selector:: drivers

In this section, you connect to your |service| cluster and run
queries against the ``title`` field in the ``sample_mflix.movies``
collection to search for the term ``Summer`` with the :ref:`text
<text-ref>` operator. The collection includes over 75 documents that
contain the term ``Summer`` in the title, but by default, some |fts|
clients print only the top 20 results for the query. 

To view all the results for the query term at once, you iterate through
your cursor until you exhaust the cursor. 

.. tabs-drivers::

   .. tab::
      :tabid: shell

      .. include:: /includes/fts/iterate-cursor/procedures/steps-fts-iterate-cursor-tutorial-run-query-shell.rst

   .. tab::
      :tabid: compass

      .. note::

         By default, |compass| displays the first 10 results.

      .. include:: /includes/fts/iterate-cursor/procedures/steps/fts-iterate-cursor-tutorial-run-query-compass.rst
