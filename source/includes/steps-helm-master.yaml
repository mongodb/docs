---
title: "Change to the directory in which you cloned the repository."
level: 4
ref: helm-master-cd
---
title: "Customize your Helm Chart before upgrading it."
level: 4
optional: true
ref: helm-master-customize-chart
replacement:
  k8sonlineupgrade: |
    .. include:: /includes/install/helm-upgrade-k8s-options.rst

    .. tip::

        Alternatively, you can pass these values as options when you apply the
        Helm Chart:

        .. code-block:: sh

          helm upgrade <chart-name> helm_chart \
               --values helm_chart/values.yaml \
               --set namespace=<testNamespace>
  k8sonlineupgradev161: |

    .. include:: /includes/install/helm-upgrade-k8s-options.rst

    .. tip::

        Alternatively, you can pass these values as options when you apply the Helm Chart:

        .. code-block:: sh

          helm upgrade <chart-name> helm_chart \
               --values helm_chart/values.yaml \
               --set namespace=<testNamespace>

  k8sofflineupgrade: |

    .. include:: /includes/install/helm-upgrade-k8s-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm install <chart-name> helm_chart \
               --values helm_chart/values.yaml \
               --set registry.pullPolicy=IfNotPresent \
               --set namespace=<testNamespace>

  k8sofflineupgradev161: |

    .. include:: /includes/install/helm-upgrade-k8s-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you
       apply the Helm Chart:

       .. code-block:: sh

          helm install <chart-name> helm_chart \
               --values helm_chart/values.yaml \
               --set registry.pullPolicy=IfNotPresent \
               --set namespace=<testNamespace>

  osonlineupgrade: |

    .. include:: /includes/install/helm-upgrade-os-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm upgrade <chart-name> helm_chart \
               --values helm_chart/values-openshift.yaml \
               --set registry.imagePullSecrets=<openshift-pull-secret>

  osonlineupgradev161: |

    .. include:: /includes/install/helm-upgrade-os-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm upgrade <chart-name> helm_chart \
               --values helm_chart/values-openshift.yaml \
               --set registry.imagePullSecrets=<openshift-pull-secret>

  osofflineupgrade: |

    .. include:: /includes/install/helm-upgrade-os-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you
       apply the Helm Chart: 

       .. code-block:: sh

          helm install <chart-name> helm_chart \
               --values helm_chart/values-openshift.yaml \
               --set registry.pullPolicy=IfNotPresent \
               --set registry.imagePullSecrets=<openshift-pull-secret> \
               --set namespace=<testNamespace>

  osofflineupgradev161: |

    .. include:: /includes/install/helm-upgrade-os-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you
       apply the Helm Chart: 

       .. code-block:: sh

          helm install <chart-name> helm_chart \
               --values helm_chart/values-openshift.yaml \
               --set registry.pullPolicy=IfNotPresent \
               --set registry.imagePullSecrets=<openshift-pull-secret> \
               --set namespace=<testNamespace>
---
title: "{{method}}"
level: 4
ref: helm-master-install
replacement:
  k8sonline: |

    Invoke the following ``helm`` command:

    .. code-block:: sh

        helm install <chart-name> helm_chart \
             --values helm_chart/values.yaml

    .. include:: /includes/install/helm-install-k8s-options.rst

    .. tip::

        Alternatively, you can pass these values as options when you apply the
        Helm Chart:

        .. code-block:: sh

          helm install <chart-name> helm_chart \
               --values helm_chart/values.yaml \
               --set namespace=<testNamespace>


  k8soffline: |

    Invoke the following ``helm`` command:

    .. code-block:: sh

       helm install <chart-name> helm_chart \
            --values helm_chart/values.yaml \
            --set registry.pullPolicy=IfNotPresent

    .. include:: /includes/install/helm-install-k8s-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm install <chart-name> helm_chart \
               --values helm_chart/values.yaml \
               --set registry.pullPolicy=IfNotPresent \
               --set namespace=<testNamespace>


  osonline: |

    .. include:: /includes/install/install-os-311-helm.rst

    Invoke the following ``helm`` command:

    .. code-block:: sh

       helm install <chart-name> helm_chart \
            --values helm_chart/values-openshift.yaml

    .. include:: /includes/install/helm-install-os-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm install <chart-name> helm_chart \
               --values helm_chart/values-openshift.yaml \
               --set registry.imagePullSecrets=<openshift-pull-secret>

  osoffline: |

    .. include:: /includes/install/install-os-311-helm.rst

    Invoke the following ``helm`` command:

    .. code-block:: sh

       helm install <chart-name> helm_chart \
            --values helm_chart/values-openshift.yaml \
            --set registry.pullPolicy=IfNotPresent \
            --set registry.imagePullSecrets=<openshift-pull-secret>

    .. include:: /includes/install/helm-install-os-options.rst

    .. tip::

       Alternatively, you can pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm install <chart-name> helm_chart \
               --values helm_chart/values-openshift.yaml \
               --set registry.pullPolicy=IfNotPresent \
               --set registry.imagePullSecrets=<openshift-pull-secret> \
               --set namespace=<testNamespace>

  k8sonlineupgrade: |

    Invoke the following ``helm`` command:

    .. code-block:: sh

        helm upgrade <chart-name> helm_chart \
             --values helm_chart/values.yaml


  k8sonlineupgradev161: |
    
    Invoke the following ``helm`` command:

    .. code-block:: sh

        helm upgrade <chart-name> helm_chart \
             --values helm_chart/values.yaml

  k8sofflineupgrade: |

    Invoke the following ``helm`` command to upgrade with modified pull
    policy values: 

    .. code-block:: sh

       helm upgrade <chart-name> helm_chart \
            --values helm_chart/values.yaml \
            --set registry.pullPolicy=IfNotPresent

  k8sofflineupgradev161: |

    Invoke the following ``helm`` command to upgrade with modified pull
    policy values: 

    .. code-block:: sh

       helm upgrade <chart-name> helm_chart \
            --values helm_chart/values.yaml \
            --set registry.pullPolicy=IfNotPresent

  osonlineupgrade: |

    .. include:: /includes/install/install-os-311-helm.rst

    Invoke the following ``helm`` command:

    .. code-block:: sh

       helm upgrade <chart-name> helm_chart \
             --values helm_chart/values-openshift.yaml

  osonlineupgradev161: |

    Invoke the following ``helm`` command:

    .. code-block:: sh

       helm upgrade <chart-name> helm_chart \
             --values helm_chart/values-openshift.yaml

  osofflineupgrade: |

    .. include:: /includes/install/install-os-311-helm.rst

    Invoke the following ``helm`` command with
    modified pull policy values:

    .. code-block:: sh

       helm upgrade <chart-name> helm_chart \
            --values helm_chart/values-openshift.yaml \
            --set registry.pullPolicy=IfNotPresent \
            --set registry.imagePullSecrets=<openshift-pull-secret>

  osofflineupgradev161: |

    Invoke the following ``helm`` command with
    modified pull policy values:

    .. code-block:: sh

       helm upgrade <chart-name> helm_chart \
            --values helm_chart/values-openshift.yaml \
            --set registry.pullPolicy=IfNotPresent \
            --set registry.imagePullSecrets=<openshift-pull-secret>
---
title: "Connect to the internet."
level: 4
ref: helm-master-connect-internet
---
title: "Disconnect from the internet."
level: 4
ref: helm-master-disconnect-internet
---
title: "Add your OpenShift Pull Secret to the OpenShift Values file."
level: 4
ref: helm-master-openshift-pull-secret
content: |

  Add the name of your ``<openshift-pull-secret>`` to the
  ``registry.imagePullSecrets`` setting in the
  ``helm_chart/values-openshift.yaml`` file:

  .. code-block:: sh
     :emphasize-lines: 3

     registry:
     # The pull secret must be specified
       imagePullSecrets: <openshift-pull-secret>

---
title: "Export the |k8s-op-short| images as ``.tar`` archive files:"
level: 4
ref: helm-master-archive-files
replacement:
  versions: |
    .. include:: /includes/install/replace-op-and-om-versions.rst

  quayarchive: |

    .. code-block:: sh

       docker save quay.io/mongodb/mongodb-enterprise-operator:<op-version> -o mongodb-enterprise-operator.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-database:<db-version> -o mongodb-enterprise-database.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-ops-manager:<om-version> -o mongodb-enterprise-ops-manager.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-appdb:latest -o mongodb-enterprise-appdb.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-init-ops-manager:{+ops-manager-init-version+} -o mongodb-enterprise-init-ops-manager.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-init-appdb:{+appdb-init-version+} -o mongodb-enterprise-init-appdb.tar;
       docker save quay.io/mongodb/mongodb-enterprise-init-database:{+database-init-version+} -o mongodb-enterprise-init-database.tar;

  rharchive: |

    .. code-block:: sh

       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-operator:<op-version> -o mongodb-enterprise-operator.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-database:<db-version> -o mongodb-enterprise-database.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-ops-manager:<om-version> -o mongodb-enterprise-ops-manager.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-appdb:latest -o mongodb-enterprise-appdb.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-init-ops-manager:{+ops-manager-init-version+} -o mongodb-enterprise-init-ops-manager.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-init-appdb:{+appdb-init-version+} -o mongodb-enterprise-init-appdb.tar;
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-init-database:{+database-init-version+} -o mongodb-enterprise-init-database.tar;

---
title: "Copy these ``.tar`` files to the host running the
             |k8s| ``docker`` daemon."
level: 4
ref: helm-master-copy-tar
---
title: "Import the ``.tar`` files into ``docker``."
level: 4
ref: helm-master-import-tar
replacement:
  versions: |
    .. include:: /includes/install/replace-op-and-om-versions.rst
  quayimport: |

    .. code-block:: sh

       docker load -i mongodb-enterprise-operator.tar; \
       docker load -i mongodb-enterprise-database.tar; \
       docker load -i mongodb-enterprise-ops-manager.tar; \
       docker load -i mongodb-enterprise-appdb.tar; \
       docker load -i mongodb-enterprise-init-ops-manager.tar; \
       docker load -i mongodb-enterprise-init-appdb.tar; \
       docker load -i mongodb-enterprise-init-database.tar;

  rhimport: |

    .. code-block:: sh

       docker load -i mongodb-enterprise-operator.tar; \
       docker load -i mongodb-enterprise-database.tar; \
       docker load -i mongodb-enterprise-ops-manager.tar; \
       docker load -i mongodb-enterprise-appdb.tar; \
       docker load -i mongodb-enterprise-init-ops-manager.tar; \
       docker load -i mongodb-enterprise-init-appdb.tar; \
       docker load -i mongodb-enterprise-init-database.tar;

---
title: "Use ``docker`` to request the files."
level: 4
ref: helm-master-docker-request
replacement:
  quaypull: |

    .. code-block:: sh

      docker pull quay.io/mongodb/mongodb-enterprise-operator:<op-version>; \
      docker pull quay.io/mongodb/mongodb-enterprise-database:<db-version>; \
      docker pull quay.io/mongodb/mongodb-enterprise-ops-manager:<om-version>; \
      docker pull quay.io/mongodb/mongodb-enterprise-appdb:latest; \
      docker pull quay.io/mongodb/mongodb-enterprise-init-ops-manager:{+ops-manager-init-version+}; \
      docker pull quay.io/mongodb/mongodb-enterprise-init-appdb:{+appdb-init-version+}; \
      docker pull quay.io/mongodb/mongodb-enterprise-init-database:{+database-init-version+};

  rhpull: |

    .. code-block:: sh

      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-operator:<op-version>; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-database:<db-version>; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-ops-manager:<om-version>; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-appdb:latest; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-init-ops-manager:{+ops-manager-init-version+}; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-init-appdb:{+appdb-init-version+}; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-init-database:{+database-init-version+};

  versions: |

    .. include:: /includes/install/replace-op-and-om-versions.rst
...
