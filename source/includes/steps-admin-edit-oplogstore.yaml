stepnum: 1
source:
  file: steps-source-admin-navigation.yaml
  ref:  admin-backup-oplog
---
title: "Go to the row for the Oplog Store you want to edit."
stepnum: 2
level: 4
ref: select-oplogstore
---
title: "In the :guilabel:`MongoDB Connection` column, update any values that need to be changed in the following fields:"
stepnum: 3
level: 4
ref: edit-oplogstore
content: |

   .. list-table::
      :widths: 30 70
      :header-rows: 1

      * - Field

        - Contents

      * - :guilabel:`<hostname>:<port>`

        - Type in one or more hosts that comprise the Oplog Store
          database in the ``<hostname:port>`` format.

          .. important::

             If these hosts are changed, the Oplog Store database they
             host must have the same data as the original Oplog Store
             database. Changing the host to a new Oplog Store database
             results in data loss.

          - If the Oplog Store database is a Replica Set or Sharded
            Cluster, type a comma-separated list of |mongod| instances
            (for a Replica Set) or |mongos| instances (for a Sharded
            Cluster).

            .. example::

               ``host1.example.com:27017, host2.example.com:27017, host2.example.com:27018``

          - If the Oplog Store database is a standalone MongoDB
            instance, type the ``hostname:port`` of the instance.

      * - :guilabel:`MongoDB Auth Username`

        -

          .. list-table::
             :widths: 25 45 30
             :header-rows: 1

             * - Auth Mechanism
               - Action
               - Configure Instructions

             * - Username and Password (``SCRAM-SHA-1``)
               - Type the name of the user authorized to access the
                 Oplog Store database.
               - :ref:`SCRAM <authentication-scram>`

             * - x.509 (``X.509``)
               - Type the :rfc:`RFC2253 <2253>`\-formatted subject from
                 the client certificate of the user authorized to
                 access the Oplog Store database.
               - :manual:`x.509 </tutorial/configure-x509-client-authentication>`

             * - Kerberos (``GSSAPI``)
               - Type the |upn| of the user authorized to
                 access the Oplog Store database.
               - :manual:`Kerberos </core/kerberos>`

             * - LDAP (``PLAIN``)
               - Type the name of the |ldap| user authorized to access
                 the Oplog Store database.
               - :manual:`LDAP </core/security-ldap>`

      * - :guilabel:`MongoDB Auth Password`

        - .. include:: /includes/warning-plaintext-password.rst

          .. list-table::
             :widths: 20 40 40
             :header-rows: 1

             * - Auth Mechanism
               - Action
               - Configure Instructions

             * - Username and Password (``SCRAM-SHA-1``)
               - Type the password associated with the username that
                 can access the Oplog Store database.
               - :ref:`SCRAM <authentication-scram>`

             * - x.509 (``X.509``)
               - Leave it blank.
               - :manual:`x.509 </tutorial/configure-x509-client-authentication>`

             * - Kerberos (``GSSAPI``)
               - Kerberos retrieves the password from its
                 :doc:`keytab file </tutorial/enable-kerberos-authentication-for-group/>`.
                 You do not need to type a password into this field.
               - :manual:`Kerberos </core/kerberos>`

             * - LDAP (``PLAIN``)
               - Type the password of the |ldap| user authorized to
                 access the Oplog Store database.
               - :manual:`LDAP </core/security-ldap>`

      * - :guilabel:`Encrypted Credentials`

        - Select if the credentials for the database were encrypted
          using the
          :doc:`credentialstool </tutorial/encrypt-user-credentials>`.
          The credentials include the Username, Password, |aws| Access
          Key ID and |aws| Secret Key.

      * - :guilabel:`Use TLS/SSL`

        - Select if the Oplog Store database only accepts connection
          encrypted using |tls|.

          Beyond this checkbox, to connect this oplog store using
          |tls|, you must enable:

          - :manual:`TLS on the oplog store database </tutorial/configure-ssl>`.

          - |onprem| to :ref:`use TLS <configure-ssl-backing>` to
            connect to this oplog store.

            .. note::

               All backing databases share the same |tls| certificates.
               If you have enabled |tls| for another backing database,
               you need only select this checkbox to enable a |tls|
               connection to this oplog store.

      * - :guilabel:`Connection Options`

        - Type any additional
          :manual:`configuration file options </reference/configuration-options>`
          for the MongoDB instance. This field supports unescaped
          values only.

      * - :guilabel:`Assignment Labels`

        - Type a comma-separated list of labels to assign the
          Oplog Stores to specific projects.

      * - :guilabel:`Write Concern`

        - Select your preferred :manual:`Write Concern</core/write-concern/>`:

          .. list-table::
             :widths: 30 70
             :stub-columns: 1

             * - Default
               -

                 .. list-table::
                    :widths: 50 50
                    :stub-columns: 1
                    :header-rows: 1

                    * - Deployment Type
                      - Default Write Concern

                    * - Standalone
                      - Journaled

                    * - Replica sets or sharded clusters
                      - W2

             * - Journaled
               - A :term:`primary` or :term:`standalone` MongoDB
                 instance acknowledged the write and wrote that write
                 to their on-disk :term:`journals <journal>`.

             * - Acknowledged
               - A primary or standalone acknowledged the write.

             * - W2
               - More than one of the cluster members acknowledged
                 the write.

             * - Majority
               - A majority of the replica set members acknowledged the write.

---
title: "Select the checkbox in the :guilabel:`Assignment Enabled` column."
stepnum: 4
level: 4
ref: assign-oplogstores
content: |

  Select if you want to enable this Oplog Store after creating it. This
  is selected by default so the Oplog Store can be assigned backup
  jobs. If you clear this checkbox, the Oplog Store is created but you
  cannot assign backups to this Oplog Store.

---
title: "Click :guilabel:`Save`."
stepnum: 5
level: 4
ref: save-oplogstore-changes
---
title: "If you change any connection string values or the Write Concern, restart all the |onprem| instances including those running Backup Daemons."
stepnum: 6
level: 4
ref: restart-oplogstore-after-edits
content: |

   .. warning::

      Modifying the connection string values or the Write Concern for
      an existing blockstore requires you to restart all |onprem|
      components, including those only running the Backup Daemon to
      apply those changes. Connection parameters include:

      - :guilabel:`<hostname>:<port>`
      - :guilabel:`MongoDB Auth Username`
      - :guilabel:`MongoDB Auth Password`
      - :guilabel:`Encrypted Credentials`
      - :guilabel:`Use TLS/SSL`
      - :guilabel:`Connection Options`
      - :guilabel:`Write Concern`

      If you change to another Oplog Store host, the data on the
      existing Oplog Store is not copied automatically to the other
      Oplog Store.

   .. seealso::

      For more details on the MongoDB connection string |uri|, see
      :manual:`Connection String URI Format </reference/connection-string>`
      in the MongoDB Manual.




...
