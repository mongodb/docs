=====================================
Add Monitored Instances to Automation
=====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

|mms| Automation lets you deploy, reconfigure and upgrade your MongoDB
databases directly from the |mms| console.

If |mms| is already monitoring your MongoDB instances, you can add them
to Automation.

Automation relies on the Automation Agent, which you install on each
server that hosts a instance to be added to automated management. The
Automation Agents regularly poll |mms| to determine goal configuration
and deploy changes as needed.

Considerations
--------------

Automation supports most but not all available MongoDB options. See
:doc:`/reference/cluster-configuration-process-options` for supported
MongoDB deployment options.

When adding a MongoDB instance requiring authentication, you may import that
instance's users and roles. During import, |mms| prompts you to resolve any
conflicts that may occur between the imported instance's users and roles and
the managed instances' users and roles.

Automation and Updated Security Settings Upon Import
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/fact-imported-users-to-automation.rst

Prerequisites
-------------

|mms| is Monitoring the Instances
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

|mms| must be currently monitoring the MongoDB instances, and the
Monitoring Agent must be running. The instances must appear on the
|mms| :guilabel:`Deployment` page.

.. seealso::

   :doc:`/tutorial/add-existing-mongodb-processes` to enable |mms| to
   automate and monitor your MongoDB processes if |mms| does not
   currently do so. 

Before proceeding, please ensure that your instance meets the  
:doc:`/tutorial/provisioning-prep`.

Make sure Automation Agent User Can Authenticate with the MongoDB Instance
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. important::
   This prerequisite only applies if the MongoDB instance that you are
   importing uses Username/Password (``MONGODB-CR`` or ``SCRAM-SHA-1``)
   authentication. If your MongoDB instance does not use that
   authentication method, you can advance to the 
   :ref:`add-monitored-mongodb-process-to-automation`.

.. include:: /includes/prerequisite-for-adding-existing-deployment-to-automation.rst

.. _add-monitored-mongodb-process-to-automation:

Add a Monitored MongoDB Instance to Automation
----------------------------------------------

.. include:: /includes/steps/add-monitored-deployment-to-automation.rst

