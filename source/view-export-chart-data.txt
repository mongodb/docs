.. _view-export-chart-data:

==========================
View and Export Chart Data
==========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

While editing a chart in the Chart Builder, you can view underlying
data from the :guilabel:`Ellipses (...)` dropdown menu. Access to
underlying data is intended to help you build meaningful charts as well
as export that data for use with third-party tools.

.. figure:: /images/charts/editor-ellipse-menu.png
   :figwidth: 60%
   :alt: The ellipse menu is in the top-right corner of the charts editor.

.. _view-source-documents:

View Source Documents
---------------------

Once you have selected a :doc:`data source <data-sources>` for your
chart, you can view 20 sample documents from that data source by
clicking the :guilabel:`View Source Documents` from the
:icon-fa5:`ellipsis-h` menu.

.. note::
   If you want to explore your data source beyond 20 sample documents,
   you can use :compass:`Compass </>` or the 
   :atlas:`Atlas Data Explorer </data-explorer/>`.

The sample documents are intended for reference to help you build a
chart. The documents do not reflect any groupings or projections
applied to an existing chart (i.e. any :guilabel:`Encode` panel options
in the Chart Builder). The documents are produced with a query on your
data source that considers:

- :ref:`Pipelines applied to the data source <data-sources-pipeline>`

- :ref:`Sample mode <charts-sample-mode>` (if toggled on)

- :ref:`Queries <query-bar>` or
  :ref:`pipelines specified in the Chart Builder <charts-agg-pipeline>`
  
- Filters applied in the :ref:`Filter Tab <filter-tab>`

.. _view-aggregation-pipeline:

View Aggregation Pipeline
-------------------------

After you have configured a valid chart, you can view the source query
for the chart. MongoDB Charts uses a special type of query to create a
chart called an 
:manual:`aggregation pipeline </core/aggregation-pipeline>`. To view
the query, click :guilabel:`View Aggregation Pipeline` from the
:icon-fa5:`ellipsis-h` menu. This aggregation pipeline includes the
stages that both the data source and the Chart Builder apply.

.. important::

   Some Chart Builder :doc:`configuration options </customize-charts>`
   don't apply aggregation stages. These options are applied to a
   chart's visualization and do not affect the underlying data.

To use the pipeline in other MongoDB tools, such as 
:compass:`Compass </>` or the :manual:`mongo shell </mongo>`, click 
:icon-fa5:`copy` next to the pipeline in the 
:guilabel:`Aggregation Pipeline` modal.

.. _get-chart-data:

Get Chart Data
--------------

After you have configured a valid chart, you can view and export the
underlying data as a table. To view the chart data, click the 
:guilabel:`Get Chart Data` from the :icon-fa5:`ellipsis-h` menu. Each
row in the table represents a data point.

.. admonition:: Data Table Differs from Chart Visualization
   :class: important

   Some configuration options you see reflected on a chart
   visualization are not applied to the data table. The
   :guilabel:`Chart Data` table displays underlying data retrieved
   with your full aggregation pipeline, and not all Chart Builder
   configuration options apply aggregation stages. Review your data to
   verify its contents.

If you want to analyze your underlying data with a third-party tool,
you can download your data from the :guilabel:`Chart Data` modal. To
download your data, click :guilabel:`Download - CSV` or
:guilabel:`Download - JSON`.

.. figure:: /images/charts/editor-chart-data.png
   :figwidth: 60%
   :alt: Viewing chart data will display a table of the values used to create a chart. It also allows for downloading a CSV or JSON representation of that table.
