.. _mcli-om-agents-list-versions-command:

========================================
mongocli ops-manager agent versions list
========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``agent versions list`` command retrieves a list of all 
{+mdbagent+}s and their versions in one |onprem| project that you 
specify. You can also retrieve this information using the 
|mms| :opsmgr:`UI </tutorial/view-agent-status/>` or :opsmgr:`API 
</reference/api/agents/get-agent-versions-per-project/>`.

.. _om-agents-list-versions-syntax:

Syntax 
------

.. code-block:: sh

   mongocli ops-manager|om agent|s version|s list|ls
        [--projectId <project-ID>]
        [--profile|-P <profile-name>]
        [ --output|-o <output-format> ]

.. include:: /includes/fact-command-line-help.rst

.. _om-agents-list-versions-options:

Options
-------

.. list-table:: 
   :header-rows: 1
   :widths: 20 10 60 10 

   * - Option 
     - Type 
     - Description 
     - Required?

   * - ``--projectId``
     - string
     - .. include:: /includes/extracts/fact-basic-options-project-id.rst
     - no

   * - ``--profile``, ``-P``
     - string
     - .. include:: /includes/extracts/fact-basic-options-profile.rst
     - no

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

.. _om-agents-list-output:

Output
------

If the command succeeds, it returns the following output in the default
format. If the command returns errors, see
:ref:`Troubleshooting <troubleshooting>` for recommended solutions.

.. code-block:: sh
   :copyable: false

   HOSTNAME        ADDRESS        VERSION           DEPRECATED
   <domain-name>   <ip-address>   <agent-version>   <true-or-false>

.. include:: /includes/fact-default-output.rst

- :opsmgr:`Ops Manager API 
  </reference/api/agents/get-agent-versions-per-project>`

Example
-------

.. tabs::

   .. tab:: Default Output
      :tabid: default-output

      The following command retrieves a list of all {+mdbagent+}s and 
      their versions in one |onprem| project that you specify using 
      the {+default-profile+}, which contains credentials to access the 
      project and the project ID. The output is returned in the default 
      format.

      .. code-block:: sh

         mongocli om agent versions list

      The previous command prints the following to the terminal.

      .. code-block:: sh
         :copyable: false

         HOSTNAME             ADDRESS     VERSION         DEPRECATED
         repl-0.example.com   192.0.2.0   10.14.18.6453   false
         repl-1.example.com   192.0.2.1   10.14.18.6453   false
         repl-2.example.com   192.0.2.2   10.14.18.6453   false
         
   .. tab:: JSON Output
      :tabid: json-output

      The following command retrieves a list of all {+mdbagent+}s and 
      their versions in one |onprem| project that you specify using the 
      {+default-profile+}, which contains credentials to access the 
      project and the project ID. The output is returned in |json| 
      format.

      .. code-block:: sh

         mongocli om agent versions list --output json

      The previous command prints the following to the terminal in
      |json| format.

      .. code-block:: json
         :copyable: false

         {
            "count": 3,
            "entries": [
              {
                "address": "192.0.2.0",
                "confCount": 1710429,
                "hostname": "repl-0.example.com ",
                "hostnameShort": "repl-0.example.com ",
                "isManaged": true,
                "isModule": true,
                "isPrimary": false,
                "isVersionOld": false,
                "isVersionDeprecated": false,
                "lastConf": 1611174341721,
                "lastPing": 0,
                "msSinceLastConf": 9940,
                "numProcess": 1,
                "pingCount": 0,
                "pingState": "ok",
                "tagName": "",
                "version": "10.14.18.6453"
              },
              {
                "address": 192.0.2.1",
                "confCount": 1523759,
                "hostname": "repl-1.example.com ,
                "hostnameShort": "repl-1.example.com ",
                "isManaged": true,
                "isModule": true,
                "isPrimary": false,
                "isVersionOld": false,
                "isVersionDeprecated": false,
                "lastConf": 1611174341715,
                "lastPing": 0,
                "msSinceLastConf": 9946,
                "numProcess": 0,
                "pingCount": 0,
                "pingState": "ok",
                "tagName": "",
                "version": "10.14.18.6453"
              },
              {
                "address": "192.0.2.2",
                "confCount": 1523745,
                "hostname": "repl-2.example.com ",
                "hostnameShort": "repl-2.example.com ",
                "isManaged": true,
                "isModule": true,
                "isPrimary": false,
                "isVersionOld": false,
                "isVersionDeprecated": false,
                "lastConf": 1611174341715,
                "lastPing": 0,
                "msSinceLastConf": 9946,
                "numProcess": 0,
                "pingCount": 0,
                "pingState": "ok",
                "tagName": "",
                "version": "10.14.18.6453"
              }
            ],
            "isAnyAgentNotManaged": false,
            "isAnyAgentVersionDeprecated": false,
            "isAnyAgentVersionOld": false,
            "links": [
              {
                "rel": "self",
                "href": "http://om.example.com/api/public/v1.0/groups/5f1f39ffc902201990f53873/agents/current"
              },
             {
                "rel": "http://mms.mongodb.com/group",
                "href": "http://om.example.com/api/public/v1.0/groups/5f1f39ffc902201990f53873"
              }
            ],
            "minimumAgentVersionDetected": "10.14.18.6453",
            "minimumVersion": "10.14.0.6306"
          }
