[build]
publish = "dist"
base = "content/rust"

[build.environment]
REPO_NAME = "docs-rust"
SECRETS_SCAN_ENABLED = "false"
MUT_COMMANDS_ENABLED = "false"


[context.production.environment]
ENV = "dotcomprd"

[context.preprd.environment]
ENV = "dotcomstg"

[context.deploy-preview.environment]
ENV = "prd"

[context.branch-deploy.environment]
ENV = "prd"

[context.preview-server.environment]
ENV = "prd"

[context.dev.environment]
ENV = "stg"


### OFFLINE REDIRECTS
### ALIAS REDIRECTS
### PAGE-SPECIFIC REDIRECTS
### WILDCARD REDIRECTS
### CATCH ALLS
## redirects any pages not at any of the active versions to current (makes eols technically unnecessary)


### ALIAS REDIRECTS
[[redirects]]
from = "/docs/drivers/rust/master/*"
to = "/docs/drivers/rust/upcoming/:splat"

[[redirects]]
from = "/docs/drivers/rust/v3.3/*"
to = "/docs/drivers/rust/current/:splat"
status = 302

[[redirects]]
from = "/docs/drivers/rust/:version/fundamentals/"
to = "/docs/rust/:version/fundamentals/stable-api/"

[[redirects]]
from = "/docs/drivers/rust/:version/fundamentals/connections/"
to = "/docs/rust/:version/fundamentals/connections/connection-guide/"

[[redirects]]
from = "/docs/drivers/rust/:version/fundamentals/crud/"
to = "/docs/rust/:version/fundamentals/crud/compound-operations/"

[[redirects]]
from = "/docs/drivers/rust/:version/fundamentals/crud/read-operations/"
to = "/docs/rust/:version/fundamentals/crud/read-operations/retrieve/"

[[redirects]]
from = "/docs/drivers/rust/:version/fundamentals/crud/write-operations/"
to = "/docs/rust/:version/fundamentals/crud/write-operations/insert/"

[[redirects]]
from = "/docs/drivers/rust/:version/fundamentals/monitoring/"
to = "/docs/rust/:version/fundamentals/monitoring/cluster-monitoring/"

[[redirects]]
from = "/docs/drivers/rust/:version/fundamentals/aggregation/vector-search/"
to = "/docs/drivers/rust/:version/fundamentals/vector-search/"

### PAGE-LEVEL REDIRECTS
## v2.7
[[redirects]]
from = "/docs/drivers/rust/v2.7/fundamentals/aggregation/vector-search/"
to = "/docs/drivers/rust/v2.7/fundamentals/aggregation/"

##v2.8
[[redirects]]
from = "/docs/drivers/rust/v2.8/fundamentals/aggregation/vector-search/"
to = "/docs/drivers/rust/v2.8/fundamentals/aggregation/"

##v3.0
[[redirects]]
from = "/docs/drivers/rust/v3.0/fundamentals/aggregation/vector-search/"
to = "/docs/drivers/rust/v3.0/fundamentals/aggregation/"


### WILDCARD REDIRECTS

[[redirects]]
from = "/docs/drivers/rust/:version/compatibility/"
to = "/docs/drivers/compatibility/?all-languages=rust"

#Online versions: dict_keys(['upcoming', 'current', 'v3.2', 'v3.1', 'v3.0', 'v2.8', 'v2.7'])
### CATCH ALLS (Redirects any /docs/drivers/rust/ page that would've 404ed to the version's landing page)
[[redirects]]
from = "/docs/drivers/rust/upcoming/*"
to = "/docs/drivers/rust/intermediary/upcoming/:splat"
status = 302

[[redirects]]
from = "/docs/drivers/rust/intermediary/upcoming/*"
to = "/docs/drivers/rust/upcoming"
status = 302

[[redirects]]
from = "/docs/drivers/rust/current/*"
to = "/docs/drivers/rust/intermediary/current/:splat"
status = 302

[[redirects]]
from = "/docs/drivers/rust/intermediary/current/*"
to = "/docs/drivers/rust/current"
status = 302

[[redirects]]
from = "/docs/drivers/rust/v3.2/*"
to = "/docs/drivers/rust/intermediary/v3.2/:splat"
status = 302

[[redirects]]
from = "/docs/drivers/rust/intermediary/v3.2/*"
to = "/docs/drivers/rust/v3.2"
status = 302

[[redirects]]
from = "/docs/drivers/rust/v3.1/*"
to = "/docs/drivers/rust/intermediary/v3.1/:splat"
status = 302

[[redirects]]
from = "/docs/drivers/rust/intermediary/v3.1/*"
to = "/docs/drivers/rust/v3.1"
status = 302

[[redirects]]
from = "/docs/drivers/rust/v3.0/*"
to = "/docs/drivers/rust/intermediary/v3.0/:splat"
status = 302

[[redirects]]
from = "/docs/drivers/rust/intermediary/v3.0/*"
to = "/docs/drivers/rust/v3.0"
status = 302

[[redirects]]
from = "/docs/drivers/rust/v2.8/*"
to = "/docs/drivers/rust/intermediary/v2.8/:splat"
status = 302

[[redirects]]
from = "/docs/drivers/rust/intermediary/v2.8/*"
to = "/docs/drivers/rust/v2.8"
status = 302

[[redirects]]
from = "/docs/drivers/rust/v2.7/*"
to = "/docs/drivers/rust/intermediary/v2.7/:splat"
status = 302

[[redirects]]
from = "/docs/drivers/rust/intermediary/v2.7/*"
to = "/docs/drivers/rust/v2.7"
status = 302

### CATCH ALLS (add slug to paths without slug)
[[redirects]]
from = "/docs/drivers/rust/upcoming/*"
to = "/docs/drivers/rust/upcoming/:splat"
status = 200

[[redirects]]
from = "/docs/drivers/rust/current/*"
to = "/docs/drivers/rust/current/:splat"
status = 200

[[redirects]]
from = "/docs/drivers/rust/v3.2/*"
to = "/docs/drivers/rust/v3.2/:splat"
status = 200

[[redirects]]
from = "/docs/drivers/rust/v3.1/*"
to = "/docs/drivers/rust/v3.1/:splat"
status = 200

[[redirects]]
from = "/docs/drivers/rust/v3.0/*"
to = "/docs/drivers/rust/v3.0/:splat"
status = 200

[[redirects]]
from = "/docs/drivers/rust/v2.8/*"
to = "/docs/drivers/rust/v2.8/:splat"
status = 200

[[redirects]]
from = "/docs/drivers/rust/v2.7/*"
to = "/docs/drivers/rust/v2.7/:splat"
status = 200

[[redirects]]
from = "/docs/drivers/rust/*"
to = "/docs/drivers/rust/current/:splat"
