.. facet::
   :name: programming_language
   :values: csharp, go, java, javascript/typescript, kotlin, python, shell

.. _compound-query-date-range-tutorial:

=================================================
How to Run |fts| Queries with a Date Range Filter
=================================================

.. default-domain:: mongodb

.. meta::
   :keywords: dynamic mapping, compound query, must clause, should clause, must not clause, range operator, near operator, specific date range, search scoring, code example, compass, node.js, java sync, atlas ui
   :description: In this tutorial, learn to use the compound operator to search for movies released within a specified date range.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial describes how to create an index with dynamic mapping on 
the ``sample_mflix.movies`` collection. It shows how to run compound 
queries against the ``released`` field using the :ref:`range-ref` and 
:ref:`near-ref` operators. It takes you through the following steps: 

1. Set up an |fts| index with dynamic mapping for the 
   ``sample_mflix.movies`` collection.
#. Run |fts| compound queries against the ``released`` field in the 
   ``sample_mflix.movies`` collection.

Before you begin, ensure that your |service| cluster meets the 
requirements described in the :ref:`fts-tutorials-prereqs`.

.. include:: /includes/atlas-roles/create-search-index.rst

Create the |fts| Index With Dynamic Mapping 
-------------------------------------------

In this section, we create an |fts| index that uses :ref:`dynamic 
mapping <static-dynamic-mappings>` to index the fields in the 
``sample_mflix.movies`` collection. 

.. |search-type| replace:: :guilabel:`Atlas Search`
.. |index-name| replace:: ``date-range-tutorial``
.. |database-name| replace:: ``sample_mflix`` database
.. |collection-name| replace:: ``movies`` collection
   
.. include:: /includes/fts/date-range/procedures/steps-fts-date-range-tutorial-create-index.rst

Run a Compound Query
--------------------

----------

.. |arrow| unicode:: U+27A4

|arrow| Use the **Select your language** drop-down menu to set the 
language of the example on this page.

----------

.. tabs-selector:: drivers

You can use the :ref:`compound-ref` operator to combine two or more 
operators and clauses into a single query. This tutorial uses the  
:ref:`compound-ref` operator clauses to search for movies in the 
specified date range. In this section, connect to your |service| 
cluster and run the sample queries using the :ref:`compound-ref` 
operator against the ``released`` field in the ``sample_mflix.movies`` 
collection. 

.. tabs-drivers::

   .. tab::
      :tabid: atlas-ui

      .. include:: /includes/fts/date-range/procedures/steps-fts-date-range-tutorial-run-query-atlas-ui.rst

   .. tab::
      :tabid: shell

      .. include:: /includes/fts/date-range/procedures/steps/fts-date-range-tutorial-run-query-shell.rst

   .. tab::
      :tabid: compass

      .. include:: /includes/fts/date-range/procedures/steps/fts-date-range-tutorial-run-query-compass.rst

   .. tab:: 
      :tabid: csharp

      .. include:: /includes/fts/date-range/procedures/steps/fts-date-range-tutorial-run-query-csharp.rst

   .. tab:: 
      :tabid: go

      .. include:: /includes/fts/date-range/procedures/steps/fts-date-range-tutorial-run-query-go.rst

   .. tab:: 
      :tabid: java-sync

      .. include:: /includes/fts/date-range/procedures/steps/fts-date-range-tutorial-run-query-java.rst

   .. tab:: 
      :tabid: kotlin-coroutine

      .. include:: /includes/fts/date-range/procedures/steps/fts-date-range-tutorial-run-query-kotlin.rst

   .. tab::
      :tabid: nodejs

      .. include:: /includes/fts/date-range/procedures/steps/fts-date-range-tutorial-run-query-nodejs.rst

   .. tab::
      :tabid: python

      .. include:: /includes/fts/date-range/procedures/steps/fts-date-range-tutorial-run-query-python.rst
