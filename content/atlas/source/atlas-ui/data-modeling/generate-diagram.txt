.. _atlas-ui-create-data-model-diagram:
.. _atlas-ui-generate-data-model-diagram:

====================================
Generate an |erd-title| in |service|
====================================

.. facet::
   :name: genre
   :values: tutorial

.. meta:: 
   :description: Create an entity-relationship diagram in MongoDB Atlas.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Generate a visualization of your data model as an |erd| in 
|service|. Entity-relationship diagrams can help you understand and 
document the relationships between data in your database and plan 
changes to your schema.

.. include:: /atlas-ui/includes/shared/fact-data-model-sampling.rst

If you make any changes to your data after you generate a diagram, 
|service| doesn't automatically update the diagram. You must create a new 
diagram to see your changes.

Before You Generate an |erd-title|
----------------------------------

To generate an |erd| in |service|, your database 
must have at least one collection with data. 

Procedure
---------

.. procedure:: 
   :style: normal 

   .. include:: /includes/nav/steps-data-explorer.rst

   .. step:: Open the :guilabel:`Data Modeling` tab

      In the left sidebar, click :icon-lg:`Diagram` :guilabel:`Data Modeling`.

   .. step:: Click :guilabel:`Generate diagram`.

      If you have existing diagrams saved in the :guilabel:`Data Modeling` tab, 
      you can create a new diagram by clicking :icon-lg:`Plus` 
      :guilabel:`Generate new diagram` in the upper-right corner of the screen.

   .. step:: Set up your new diagram.

      In the :guilabel:`New diagram setup` modal: 
     
      - Select which MongoDB connection to use to generate your diagram.
      - Select which database to use for your data model diagram. 
      - Input a name for your diagram.

      After you specify each field, click :guilabel:`Next`. 

   .. step:: Select collections. 

      Use the checkboxes to select which collections to include in your data 
      model diagram. You can also use the search bar to filter for specific 
      collections.

   .. step:: (Optional) Choose if |service| automatically infers relationships between collections.

      In the :guilabel:`Select collections` modal, you can choose whether you 
      want |service| to :guilabel:`Automatically infer relationships` between 
      collections. When enabled, |service| analyzes the selected collections and 
      adds relationships based on indexed fields that contain references to 
      other collections.

      You can also :ref:`manually add and edit relationships 
      <atlas-ui-data-modeling-relationships>` after you generate your diagram.

      .. note:: 

         .. include:: /atlas-ui/includes/shared/fact-dm-annotation.rst

   .. step:: Click :guilabel:`Generate`.

      |service| generates an |erd| with the selected 
      collections and displays it in the current tab.
      
      After you generate a diagram, |service| displays the existing 
      diagrams in the :guilabel:`Data Modeling` tab.

Next Steps 
----------

- :ref:`atlas-ui-data-modeling-relationships`
- :ref:`atlas-ui-data-modeling-export`
- :ref:`atlas-ui-data-modeling-import`

Learn More 
----------

- :ref:`manual-data-modeling-intro`
- :ref:`atlas-ui-data-modeling`
