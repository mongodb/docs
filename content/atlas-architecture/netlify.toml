[build]
    publish = "dist"
    base = "content/atlas-architecture"

[build.environment]
    REPO_NAME = "docs-atlas-architecture"
    SECRETS_SCAN_ENABLED = "false"
    MUT_COMMANDS_ENABLED = "false"

[context.production.environment]
    ENV = "dotcomprd"

[context.preprd.environment]
    ENV = "dotcomstg"

[context.deploy-preview.environment]
    ENV = "prd"

[context.branch-deploy.environment]
    ENV = "prd"

[context.preview-server.environment]
    ENV = "prd"

[context.dev.environment]
    ENV = "stg"

ALLOW_INACTIVE_VERSIONS = true

### OFFLINE REDIRECTS
### ALIAS REDIRECTS
### PAGE-SPECIFIC REDIRECTS
### WILDCARD REDIRECTS
### CATCH ALLS
 ## redirects any pages not at any of the active versions to current (makes eols technically unnecessary)
 


### ALIAS REDIRECTS
	[[redirects]]
	from = "/docs/atlas/architecture/v20260203/*"
	to = "/docs/atlas/architecture/current/:splat"
	status = 302

    [[redirects]]
	from = "/docs/atlas/architecture/main/*"
	to = "/docs/atlas/architecture/current/:splat"


### PAGE-LEVEL REDIRECTS

    [[redirects]] 
    from = "/docs/atlas/architecture/current/changelog/"
    to = "/docs/atlas/architecture/current/release-notes/"

    [[redirects]] 
    from = "/docs/atlas/architecture/current/changelog/"
    to = "/docs/atlas/architecture/current/release-notes/"


### WILDCARD REDIRECTS (none)


### CATCH ALLS (add slug to paths without slug)
	[[redirects]]
	from = "/docs/atlas/architecture/current/*"
	to = "/docs/atlas/architecture/current/:splat"
	status = 200
 
	[[redirects]]
	from = "/docs/atlas/architecture/v20250228/*"
	to = "/docs/atlas/architecture/v20250228/:splat"
	status = 200
 
	[[redirects]]
	from = "/docs/atlas/architecture/v20250317/*"
	to = "/docs/atlas/architecture/v20250317/:splat"
	status = 200

	[[redirects]]
	from = "/docs/atlas/architecture/v20250604/*"
	to = "/docs/atlas/architecture/v20250604/:splat"
	status = 200

	[[redirects]]
	from = "/docs/atlas/architecture/v20250829/*"
	to = "/docs/atlas/architecture/v20250829/:splat"
	status = 200
 
 [[redirects]]
	from = "/docs/atlas/architecture/v20251125/*"
	to = "/docs/atlas/architecture/v20251125/:splat"
	status = 200

 [[redirects]]
	from = "/docs/atlas/architecture/*"
	to = "/docs/atlas/architecture/current/:splat"
