ref: go-clusters-view-cluster
level: 4
stepnum: 1
source:
  file: steps-connect-to-cluster-master.yaml
  ref: go-clusters-view

---
ref: go-clusters-review-secure
level: 4
stepnum: 2
source:
  file: steps-connect-to-cluster-master.yaml
  ref: go-clusters-secure
replacement:
  connChoice: {+mongosh+}
---
ref: go-clusters-review-ip-access-list-connection
level: 4
stepnum: 3
source:
  file: steps-connect-to-cluster-master.yaml
  ref: go-clusters-ip-access-list-connection

---
ref: create-mongodb-user-cluster
level: 4
stepnum: 4
source:
  file: steps-connect-to-cluster-master.yaml
  ref: create-mongodb-user

---
title: "Connect to your |service| {+database-deployment+} with {+mongosh+}."
level: 5
ref: download-install-shell
content: |

   Select :guilabel:`Connect with the MongoDB Shell`.

   The next screen offers you options to proceed based on whether or
   not you already have {+mongosh+}
   installed on your system.

   .. tabs::

      tabs:

        - id: download_shell
          name: I do not have the MongoDB Shell installed

          content: |

            Select your OS from the dropdown menu.

            .. tabs::

               tabs:

                 - id: windows
                   name: Windows
                   content: |

                     1. Download using one of the following options:

                        - Click :guilabel:`Download mongosh` to
                          begin the download.

                        - Click :guilabel:`Copy download URL` to copy a
                          download |url| to your clipboard, then either:

                          -  Use ``curl`` to fetch the installer file 
                             from the |url|, or

                          -  Paste the |url| in a browser window.

                        .. include:: /includes/facts/download-center-link.rst

                     #. Extract the files from the downloaded archive.

                     #. Add the {+mongosh+} binary to your ``PATH`` 
                        environment variable.

                        Ensure that the extracted MongoDB Shell binary 
                        is in the desired location in your filesystem, 
                        then add that location to your ``PATH``
                        environment variable.

                        a. Open the :guilabel:`Control Panel`.

                        #. In the :guilabel:`System and Security` 
                           category, click :guilabel:`System`.

                        #. Click :guilabel:`Advanced system settings`. 
                           The :guilabel:`System Properties` modal 
                           displays.

                        #. Click :guilabel:`Environment Variables`.

                        #. Select :guilabel:`Path` and click
                           :guilabel:`Edit`.

                        #. Click :guilabel:`New` and add the filepath to 
                           your {+mongosh+} binary.
                          
                        #. *Step 3* of the |service| modal displays a
                           copyable connection string. This string
                           includes the name of the MongoDB user that can
                           authenticate with the {+database-deployment+}. Copy this
                           string. To connect as a different MongoDB user,
                           change the
                           :mongosh:`--username </reference/options/#std-option-mongosh.--username>` option.
            
                        #. Paste the {+mongosh+} command and connection string
                           into your application.

                 - id: macos
                   name: macOS
                   content: |

                     1. Use the Homebrew command provided.

                     #. Copy the Homebrew command from the {+atlas-ui+}
                        window and run it in a terminal.

                     #. *Step 3* of the |service| modal displays a
                        copyable connection string. This string
                        includes the name of the MongoDB user that can
                        authenticate with the {+database-deployment+}. Copy this
                        string. To connect as a different MongoDB user,
                        change the
                        :mongosh:`--username </reference/options/#std-option-mongosh.--username>` option.

                     #. Paste the {+mongosh+} command and connection string
                        into a terminal. Run the command. The shell
                        prompts you for the
                        :mongosh:`password </reference/options/#std-option-mongosh.--password>`.

                 - id: linux
                   name: Linux
                   content: |

                     1. Download the installer using one of the
                        following options:

                        - Click :guilabel:`Download mongosh` to
                          begin the download.

                        - Click :guilabel:`Copy download URL` to copy a
                          download |url| to your clipboard, then either:

                          -  Use ``curl`` to fetch the installer file 
                             from the |url|, or

                          -  Paste the |url| in a browser window.

                        .. include:: /includes/facts/download-center-link.rst

                        .. note::

                           The type of file you download depends on the
                           operating system you selected. If you select 
                           a version of:

                           - **Ubuntu or Debian** you receive a ``.deb``
                             package.
                           - **RHEL, Amazon Linux, or SUSE** you receive
                             an ``.rpm`` package.

                           If your operating system isn't listed, see
                           the :mongosh:`.tgz installation instructions
                           </install>` in the {+mongosh+} documentation. 

                     #. Install the {+mongosh+} package.

                        .. include:: /includes/facts/tabs-install-mongosh.rst

                     #. *Step 3* of the |service| modal displays a
                        copyable connection string. This string
                        includes the name of the MongoDB user that can
                        authenticate with the {+database-deployment+}. Copy this
                        string. To connect as a different MongoDB user,
                        change the
                        :manual:`--username </reference/program/mongo/#cmdoption-mongo-username>` option.


                     #. Paste the {+mongosh+} command and connection string
                        into a terminal. Run the command. The shell
                        prompts you for the
                        :manual:`password </reference/program/mongo/#cmdoption-mongo-password>`.

        - id: connect_from_shell
          name: I have the MongoDB Shell installed

          content: |

            1. Select ``mongosh`` from the dropdown menu.
               We recommend that you upgrade to the latest version
               of the shell. To check the installed version of the
               {+mongosh+}, run:

               .. code-block:: sh

                  mongosh --version

            #. *Step 2* of the |service| modal displays a copyable
               connection string that includes the name of the
               MongoDB user that can authenticate with the {+database-deployment+}. Copy
               this string. To connect as a different MongoDB user,
               change the :mongosh:`--username </reference/options/#std-option-mongosh.--username>`
               option.

            #. Paste the {+mongosh+} command and connection string into a
               terminal. Run the command. The shell prompts you for the
               :mongosh:`password </reference/options/#std-option-mongosh.--password>`.

...
