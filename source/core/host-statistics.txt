===============
Host Statistics
===============

The MMS web console provides an extensive set of features for analyzing
the statistics collected by the Monitoring agent. For a basic overview
of the console, see the :doc:`usage </core/hosts>` documentation.
This document provides a more in-depth guide for the "Host Statistics"
page of the MMS console.

.. index:: host statistics

.. _access-host-statistics:

Accessing the Host Statistics
-----------------------------

.. include:: /includes/steps/view-host-statistics.rst

The charts on the host statistics
page are interactive and provide tools for navigating and working with
|monitoring| data. Click on the "info" buttons with an ``i`` in a circle to
raise informational boxes, to explore the functionality of the MMS console and
charts.

Global Page Controls
--------------------

There are four to seven columns in the line below the MMS console's menu
bar. From left to right, these are:

- The time elapsed since the monitoring agent collected the last ping response
  from the host.

- The hostname and port of the mongod instance. Click the hostname to view a
  page with host performance charts.

- The :ref:`host type <host-types>`. Possible types include:
  "primary," "secondary," "master," "slave," "standalone,"
  "recovering," and "unknown."

- The following optional columns appear as needed:

  - The name of the cluster to which this process belongs. Only cluster members
    display this value. Click the cluster name to view a page with performance
    charts ordered by shards and mongos within the cluster.

  - The name of the shard cluster to which this process belongs. Only shard
    cluster members display this value.

  - The name of the replica set to which this process belongs. Only replica set
    members display this value. Click the replica set name to view a page with
    performance charts from all members of a set.

- The version of MongoDB running on this process.

.. index:: granularity; chart granularity
   single: chart granularity
   single: display; granularity

The second line contains nine links that control the host statistics
page. |monitoring| displays the current selection in a larger font. In
the second line there is a "window" selector that narrows the amount of
data displayed. These options are:

- "by minute," which is the default setting. All charts plot one data
  point per minute. The "window" options are:

  - "one hour," which is the default window for this selection and
    charts 1 hour of data.

  - "six hours," which charts 6 hours of data.

  - "twelve hours," which charts 12 hours of data.

  - "twenty-four hours," which charts 24 hours of data.

- "by 5min," which re-plots all charts with five-minute averages. The
  "window" options are:

  - "six hours," which charts 6 hours of data.

  - "twelve hours," which charts 12 hours of data.

  - "twenty-four hours," which is the default window for this
    selection and charts 24 hours of data.

  - "forty-eight hours," which charts 24 hours of data.

- "by hour," which re-plots all charts with hourly averages. The
  "window" options are:

  - "one day," which charts 1 day of data.

  - "one week," which charts 1 week of data.

  - "two weeks," which charts 2 weeks of data.

  - "one month," which is the default window for this selection and
    charts 1 month of data.

  - "two months," which charts 2 months of data.

- "by day," which re-plots the chart to display a period of time
  greater than 24 hours. The "window" options are:

  - "one week," which charts 1 week of data.

  - "two weeks," which charts 2 weeks of data.

  - "one month," which is the default window for this selection and
    charts 1 month of data

  - "six months," which charts 6 months of data.

  - "one year," which charts 1 year of data.

.. index:: display; range

- "range," which allows you to specify a time rage for the charts to
  display.

- "avg/sec," which is the default setting. When selected, charts
  display the average number of events per second.

- "total," which allows you to re-plot the charts to display the total
  number of events.

- "gmt," which allows you to re-plot the charts to the GMT zone. Use
  this option when correlating MMS data with server logs in GMT rather
  than your local timezone.

- "refresh," which triggers a refresh of all charts.

On the next line, the "multi-chart zoom" slider allows you to change
the scope of all charts at once. Move the sliders on either end of this
bar to narrow all of the charts on this page at once.

.. index:: chart; interaction

Specific Chart Controls
-----------------------

You may also interact with the charts individually. Using the mouse you
can:

- Click-and-drag to select a portion of the chart to zoom into.

- Double-click to revert to the default zoom setting.

- Shift-click-and-drag (i.e. hold the shift key while clicking and
  dragging) to scroll left and right.

.. index:: chart; toolbar

You can control each |monitoring| chart using the buttons at the top
right of the chart container in the "chart toolbar." From left to
right, these controls are:

- "Add To Dashboard," a plus sign, takes you to a dashboard creation
  page where you can create a new dashboard and add a collection of
  charts to the new dashboard.

- "Expand Chart," an icon with two arrows expanding, raises a box with a
  larger version of the chart.

- "Chart Permalink," a chain, links to a page that only displays this chart.

- "Email Chart," an envelope, raises a dialogue box where you can
  input an email address and short message to send the chart to an
  arbitrary email address.

- "View Legend," the character ``i`` in a circle, raises a box with a key to
  the chart.

.. index:: chart; annotations

Chart Annotations
-----------------

Annotations may appear as colored vertical lines on your charts to
indicate server events. The following color/event combinations
are:

- A *red bar* indicates a server restart.

- A *purple bar* indicates the server is now a primary.

- A *yellow bar* indicates the server is now a secondary.

If you do not wish to see the chart annotations, you can disable them
on the "Setting" page.
