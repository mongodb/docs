.. _embedding-charts:

====================================
Embed Charts in Your Web Application
====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

As a dashboard :ref:`Author <dashboard-permissions>`, you can enable
external sharing on your charts, allowing your visualizations to be
embedded in external web sites or shared via links. You can either
require a verified signature to accompany each data request, or allow
anyone with the chart's identifying information to share it or embed it
in a web page.

If you want strict control over who can share your charts, use the
:guilabel:`Verified Signature Required` option. If your data
is non-sensitive and you prefer a simpler external sharing solution, use the
:guilabel:`Unauthenticated External Sharing` option.

.. note::

   You can enable external sharing for your chart with the verified
   signature required option even if you don't currently have an
   :ref:`external sharing key <admin-settings>`, but you'll need a key
   to generate a verified signature. If you are a 
   :atlas:`Project Owner </reference/user-roles#project-roles>` of your
   |service| project, you can generate an external sharing key on the
   :ref:`Admin Settings <admin-settings>` page. Otherwise, you must
   contact the |service| Project Owner and ask for an external sharing
   key.

.. _embedding-procedure:

Procedure
---------

.. tabs::

   tabs:
     - id: unauthenticated
       name: Unauthenticated External Sharing
       content: |

         .. include:: /includes/steps/embed-chart-unauthenticated.rst

     - id: verified-signature
       name: Verified Signature Required
       content: |

         .. include:: /includes/steps/embed-chart-verified.rst

.. _embedded-errors:

Embedded Charts Error Codes
---------------------------

If an shared chart fails to render, an error code is displayed:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Error Code
     - Error Cause

   * - ``-1``
     - Unknown error.

   * - ``1``
     - Invalid tenant ID. Check the ``tenant`` field in the iframe
       HTML and make sure it matches what you see in the
       :ref:`Embed Chart <embedding-procedure>` modal window.

   * - ``2``
     - Item not found. Check the ``id`` field in the iframe
       HTML and make sure it matches what you see in the
       :ref:`Embed Chart <embedding-procedure>` modal window.

   * - ``3``
     - Embedding not enabled. Check the settings in your chart's
       :ref:`Embed Chart <embedding-procedure>` modal window.

   * - ``4``
     - Embedding not allowed. Check the embedding settings in your
       chart's :ref:`data source <data-source-embedding>`.

   * - ``5``
     - Invalid payload. Your application server is not creating a
       usable :ref:`signature <admin-settings>`.

   * - ``6``
     - Invalid ``autorefresh`` value specified. The ``autorefresh``
       value must be an integer greater than 0.

   * - ``7``
     - :ref:`Filter <embed-options-filter>` not allowed. When filtering
       an Unauthenticated embedded chart, the fields used in the filter
       must be present in the
       :ref:`filter whitelist <specify-filter-fields>`. Additionally,
       filters on both Unauthenticated and Verified Signature embedded
       charts cannot use non-logical operators before a field name
       (e.g., :manual:`$expr </reference/operator/query/expr/>`,
       :manual:`$where </reference/operator/query/where/>`, or
       :manual:`$text </reference/operator/query/text/>`).

   * - ``8``
     - :ref:`Filter <embed-options-filter>` not valid. A ``filter``
       parameter contains an invalid value.

.. class:: hidden

   .. toctree::
      :titlesonly:

      /embedded-chart-options
