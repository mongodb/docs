title: Remove the broken secondary from your replica set.
stepnum: 1
ref: remove-broken-secondary
action:
  language: sh
  code: |
    rs.remove("<secondaryHost>:<secondaryPort>")
---
title: "Login to the server on which to create the new secondary."
stepnum: 2
ref: login-to-server
---
title: "Bring up new node as a standalone."
stepnum: 3
ref: bring-up-new-node
action:
  language: sh
  code: |
    tar -xvf <backupRestoreName>.tar.gz
    mv <backupRestoreName> data
    mongod --port <alternatePort> --dbpath /data
  post: |
    Where ``<alternatePort>`` is not the usual port on which 
    your secondary runs.
---
title: "Run the ``seedSecondary`` script to create oplog collection and seed it with correct timestamp."
stepnum: 4
source: 
  file: steps-restore-primary.yaml
  ref: seed
pre: | 
  The ``seedSecondary`` script re-creates the oplog collection and seed it
  with the correct timestamp.
---
title: "Shut down the new secondary on the alternate port."
stepnum: 5
ref: shut-down-new-secondary
---
title: "Start up the new secondary."
stepnum: 6
ref: start-new-secondary
action:
  language: sh
  code: |
    mongod --port <secondaryPort> --dbpath /data  --replSet <replicaSetName>
---
title: "Add the new secondary to the replica set on the primary host."
stepnum: 7
ref: add-new-secondary
action:
  language: sh
  code: |
    rs.add("<secondary-host>:<secondary-port>")
...
