=============
Resync Backup
=============

.. default-domain:: mongodb

Overview
--------

If the Backup Agent's :term:`tailing cursor <tailable cursor>` cannot
keep up with your deployment's :term:`oplog`, |mms| issues 
a ``Backup requires a resync`` alert. This is similar to when a
:term:`secondary` falls too far behind the :term:`primary` in a
:term:`replica set` and requires a resync.

If you receive a ``Backup requires resync`` alert, You must resync the
Backup Service for the specified MongoDB instance.

Considerations
--------------

To ensure the Backup oplog does not fall behind the deployment's oplog, always
provision adequate machine resources for the agent. If you stop your |mms|
agents for maintenance reasons, always restart them in a timely manner.
To provide a buffer for maintenance and for occasional activity bursts,
ensure that the oplog on the :term:`primary` is large enough to contain 24
hours of activity. For more information on the Backup oplog, see the
:ref:`faq-backup`.

Procedures
----------

Use the appropriate procedure below for your deployment type, sharded cluster
or replica set.

Resync a Sharded Cluster
++++++++++++++++++++++++

.. include:: /includes/steps/resync-shard.rst

Resync a Replica Set
++++++++++++++++++++

.. include:: /includes/steps/resync-replica-set.rst
