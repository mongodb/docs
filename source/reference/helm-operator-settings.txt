.. _meko-op-install-settings-helm:

===================================
|k8s-op| Helm Installation Settings
===================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecols

To provide optional settings, edit the Helm **values** |yaml| file that
corresponds to your deployment type in the directory where you cloned
the |k8s-op-short| repository:

- Vanilla |k8s|: **helm_chart/values.yaml**
- OpenShift: **helm_chart/values-openshift.yaml**

If the setting that you want to add doesn't exist in the **values**
|yaml| file, add its key and value:

.. example::

   .. code-block:: yaml
      :emphasize-lines: 2

      registry:
        appDb: quay.io/mongodb

.. tip::

    Alternatively, you can pass these values as options when you apply the
    Helm Chart:

    .. tabs::

       .. tab:: Kubernetes
          :tabid: k8s

          .. code-block:: sh

             helm upgrade <chart-name> helm_chart \
                  --values helm_chart/values.yaml \
                  --set namespace=<testNamespace>

       .. tab:: OpenShift
          :tabid: os

          .. code-block:: sh

             helm upgrade <chart-name> helm_chart \
                  --values helm_chart/values-openshift.yaml \
                  --set namespace=<testNamespace>

managedSecurityContext
----------------------

.. include:: /includes/op-setting-descs/managed-security-context.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **false**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 3

            # Set this to true if your cluster is managing SecurityContext for you.
            # If running OpenShift (Cloud, Minishift, etc.), set this to true.
            managedSecurityContext: false

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **true**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 3

            # Set this to true if your cluster is managing SecurityContext for you.
            # If running OpenShift (Cloud, Minishift, etc.), set this to true.
            managedSecurityContext: true

namespace
---------

.. include:: /includes/op-setting-descs/namespace.rst

.. example::

   .. code-block:: yaml
      :emphasize-lines: 2

      # Name of the Namespace to use
      namespace: mongodb

operator.env
------------

.. include:: /includes/op-setting-descs/operator-env.rst

.. example::

   .. code-block:: yaml
      :emphasize-lines: 3

      operator:
        # Execution environment for the operator, dev or prod.
        # Use dev for more verbose logging
        env: prod

operator.watchNamespace
-----------------------

.. include:: /includes/op-setting-descs/watch-namespace.rst

.. example::

   .. code-block:: yaml
      :emphasize-lines: 2

      operator:
        watchNamespace: *

operator.watchedResources
-------------------------

.. include:: /includes/op-setting-descs/operator-watchedresources.rst

.. example::

   .. code-block:: yaml
      :emphasize-lines: 2

      operator:
        watchedResources:
          - mongodbusers
          - mongodb 
          - opsmanagers

registry.appDb
--------------

.. include:: /includes/op-setting-descs/appdb-image-repository.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              appDb: quay.io/mongodb

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              appDb: registry.connect.redhat.com/mongodb

.. _registry-appdb-version:

registry.appDb.version
----------------------

.. include:: /includes/op-setting-descs/appdb-agent-version.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 3

            registry:
              appDb: quay.io/mongodb
                version: {+appdb-agent-version+}

   .. tab:: OpenShift
      :tabid: os

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 3

            registry:
              appDb: registry.connect.redhat.com/mongodb
                version: {+appdb-agent-version+}

registry.imagePullSecrets
-------------------------

.. include:: /includes/op-setting-descs/registry-imagepullsecrets.rst

.. example::

   .. code-block:: yaml
      :emphasize-lines: 3

      registry:
      # The pull secret must be specified
        imagePullSecrets: <openshift-pull-secret>

registry.initAppDb
------------------

.. include:: /includes/op-setting-descs/init-appdb-image-repository.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              initAppDb: quay.io/mongodb

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              initAppDb: registry.connect.redhat.com/mongodb

registry.initOpsManager
-----------------------

.. include:: /includes/op-setting-descs/init-ops-manager-image-repository.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              initOpsManager: quay.io/mongodb

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              initOpsManager: registry.connect.redhat.com/mongodb

registry.operator
-----------------

.. include:: /includes/op-setting-descs/registry-operator.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              operator: quay.io/mongodb

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              operator: registry.connect.redhat.com/mongodb

registry.opsManager
-------------------

.. include:: /includes/op-setting-descs/ops-manager-image-repository.rst

.. tabs::

   .. tab:: Kubernetes
      :tabid: k8s
   
      The default value is **quay.io/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              opsManager: quay.io/mongodb

   .. tab:: OpenShift
      :tabid: os
   
      The default value is **registry.connect.redhat.com/mongodb**.

      .. example::

         .. code-block:: yaml
            :emphasize-lines: 2

            registry:
              opsManager: registry.connect.redhat.com/mongodb
