title: Stop the |application| if not yet running in local mode.
stepnum: 1
ref: stop-ops-manager
pre:
  Use the command appropritate to your operating system.
action:
  - pre: |
      **On a Linux system installed with a package manager:**
    language: sh
    code: |
      sudo service mongodb-mms stop
  - pre: |
      **On a Linux system installed with a .tar file:**
    language: sh
    code: |
      <install_dir>/bin/mongodb-mms stop
---
title: "Edit the ``conf-mms.properties`` configuration file to enable local mode and to specify the local directory for MongoDB binaries."
stepnum: 2
ref: edit-config-file
pre: |
  Open :ref:`conf-mms.properties` with root privileges and set the
  following :ref:`automation.versions values
  <automation-versions-settings>`:
action:
  - pre: |
      Set the :setting:`automation.versions.source` setting to the value ``local``:
    language: cfg
    code: |
      automation.versions.source=local
  - pre: |
      Set :setting:`automation.versions.directory` to the directory on the
      |application| server where you will store the MongoDB binaries for
      access by the Automation Agent.

      The following example uses the default |onprem| directory for
      storing binaries in local mode:
    language: cfg
    code: |
      automation.versions.directory=/opt/mongodb/mms/mongodb-releases/
---
title: Start the |application|.
stepnum: 3
ref: start-ops-manager
pre:
  Use the command appropritate to your operating system.
action:
  - pre: |
      **On a Linux system installed with a package manager:**
    language: sh
    code: |
      sudo service mongodb-mms start
  - pre: |
      **On a Linux system installed with a .tar file:**
    language: sh
    code: |
      <install_dir>/bin/mongodb-mms start
---
title: "Populate the |application| server directory with the MongoDB binaries."
stepnum: 4
ref: populate-with-binaries
content: |
  Populate the directory you specified in the ``automation.versions.directory``
  setting with the necessary versions of MongoDB as determined by the
  :ref:`local-mode-determine-versions` topic on this page.

  .. important::

     If you have not yet read the :ref:`local-mode-determine-versions` topic
     on this page, please do so before continuing with this procedure.

  For example, to download MongoDB Enterprise 3.0 on Amazon Linux, issue a
  command similar to the following, replacing ``<download-url.tgz>`` with
  the download url for the archive:

  .. code-block:: sh

     sudo curl -OL <download-url.tgz>

---
title: Ensure that the "mongodb-mms" user owns the MongoDB binaries.
stepnum: 5
ref: mongodb-mms-as-owner
action:
  pre: |
    For example, if you store the binaries in the
    ``/opt/mongodb/mms/mongodb-releases/`` directory on a Linux platform,
    then the following sequence of commands would change ownership to
    "mongodb-mms" for **all** files in that directory:
  language: sh
  code: |
    cd /opt/mongodb/mms/mongodb-releases/
    sudo chown mongodb-mms:mongodb-mms ./*
# if no access to set the permissions for the mongodb-mms user, sudo chmod 777 ./*
---
title: "Open |onprem|."
stepnum: 6
ref: open-ops-manager
content: |
  If you have not yet registered a user, click the :guilabel:`Register`
  link and follow the prompts to register a user and create the first
  group. The first registered user is automatically assigned the
  :ref:`global-owner-role` role.
---
title: "Copy the version manifest to |onprem|."
stepnum: 7
ref: enter-version-manifest
content: |
  a. If you have not already done so, copy the :ref:`version manifest <version-manifest>` from `<https://opsmanager.mongodb.com/static/version_manifest/1.6.json>`_.

  b. Click the :guilabel:`Admin` link in the upper right to go to the system-wide Administration settings.

  c. Click the :guilabel:`General` tab and then click :guilabel:`Version Manifest`.

  d. Do one of the following:

     - If your browser has internet access, click :guilabel:`Update the MongoDB Version Manifest` and paste in the manifest.

     - If your browser does not have internet access, follow the instructions on the page.
---
title: "Specify which versions are available for download by Automation Agents associated with each group."
stepnum: 8
ref: select-versions
content: |
  a. Click :guilabel:`Ops Manager` in the upper left to leave the system-wide Administration settings.

  b. Click :guilabel:`Deployment` and then click :guilabel:`Version Manager`.

  c. Select the checkboxes for the versions of MongoDB that you have made available on the |application| server.

  d. Click :guilabel:`Review & Deploy` at the top of the page.

  e. Click :guilabel:`Confirm & Deploy`.
---
title: "Install the Automation Agent on each server on which you will manage MongoDB processes."
stepnum: 9
ref: install-automation-agent
content: |

  a. Click :guilabel:`Administration` and then :guilabel:`Agents`.

  b. In the :guilabel:`Automation` section of the page, click the link for the operating system to which you will install. Following the installation instructions.

  c. Pre-install the :ref:`MongoDB Enterprise Dependencies <mongodb-enterprise-dependencies>` if deploying MongoDB Enterprise.

...
