stepnum: 1
source:
  file: steps-source-admin-navigation.yaml
  ref:  admin-backup-snapshot
---
title: "Go to the row for the Blockstore you want to edit."
stepnum: 2
level: 4
ref: select-blockstore
---
title: "In the MongoDB Connection column, edit the necessary fields:"
stepnum: 3
level: 4
ref: edit-blockstore
content: |

   .. list-table::
      :header-rows: 1

      * - Field

        - Contents

      * - :guilabel:`<hostname>:<port>`

        - Type the :manual:`hostname and port number </reference/connection-string/>` 
          of the MongoDB database.

      * - :guilabel:`MongoDB Auth Username` (Optional)

        - If the database uses authentication, type the name of the user
          authorized to access the database.

      * - :guilabel:`MongoDB Auth Password` (Optional)

        - If the database uses authentication, type the password of the
          user authorized to access the database.

      * - :guilabel:`Encrypted Credentials` (Optional)

        - If you :ref:`encrypted the username and password <encrypt-user-credentials>` 
          using the ``credentialstool``, select this checkbox.

      * - :guilabel:`Use SSL` checkbox (Optional)

        - If the database uses SSL, select this checkbox.

      * - :guilabel:`Connection Options` (Optional)

        - Type any additional :manual:`configuration file options </reference/configuration-options>`
          for the MongoDB instance. This field supports unescaped values only.

      * - :guilabel:`Assignment Labels` (Optional)

        - Type a comma-separated list of labels to assign the
          blockstores to specific groups.

      * - :guilabel:`Load Factor` (Optional)

        - 
          .. note::
             Load Factor depends upon having more than one snapshot 
             store, particularly when backing up a sharded cluster.
             If you do not have more than one snapshot store, this
             setting can be ignored.

          Type an integer representing a proportional value of how
          backup jobs are assigned to the given snapshot store compared
          to other snapshot stores.

          By default, |mms| assigns snapshot stores one shard each.

          If a snapshot store has more than one shard assigned, it would
          result in one snapshot store being backed up more often than
          another. This ratio of backup jobs to shards can be changed
          using the load factor.

          An example of how the Load Factor affects backups:

          You are backing up a five-shard cluster. Your backup storage
          configuration has filestore (``A``) with one shard and
          blockstore (``B``) with four shards. These blockstores should
          not get equally distribution of backup jobs, as ``B`` is four
          times larger than ``A``. ``B`` should get a Load Factor of
          *four* and ``A`` should get a Load Factor of *one*.

      * - :guilabel:`Write Concern`

        - Select the proper :manual:`Write Concern</core/write-concern/>`.

---
title: "Check the checkbox in the :guilabel:`Assignment Enabled` column."
stepnum: 4
level: 4
ref: assign-blockstores
---
title: "Click :guilabel:`Save`."
stepnum: 5
level: 4
ref: save-blockstore-changes
--- 
title: "**Restart** all the |onprem| instances, including those running activated Backup Daemons."
stepnum: 6 
level: 4
ref: restart-blockstore-after-edits
action:
  - pre: |
      .. warning::
         After you save changes to the connection string, you must restart all
         the |onprem| instances, including those running activated Backup
         Daemons, for the changes to take effect.
...