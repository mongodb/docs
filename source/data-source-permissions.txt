.. _permission-model:

=======================
Data Source Permissions
=======================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Data source permissions dictate which actions users in your |service|
project can perform on the data source. You can also set data source
permissions to make a data source only visible to a subset of users.

The following table describes the data source permission levels:

.. _data-source-roles:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Data Source Permission
     - Description

   * - .. data:: Viewer
     - Can view any chart on a dashboard that uses the data source.
       You can grant this permission to
       :ref:`specific users <data-source-specific-access>` or
       :ref:`everyone in the Atlas project
       <data-source-access-everyone>` for the given data source.

       Data source ``Viewers`` cannot see the data source in the
       :ref:`Data Sources list <data-sources-view>`, or
       in the :guilabel:`Data Source` dropdown in the
       :ref:`Chart Builder <build-charts>`.

   * - .. data:: Author
     - Inherits all actions from ``Viewer`` and can also
       create and edit charts using the data source.

       .. note::

          If you create a data source and do not have the
          ``Project Owner``
          :atlas:`project role </reference/user-roles/#project-roles>`, 
          you will
          not be an ``Owner`` of that data source. The ``Owner``
          data source permission is reserved for users with the
          ``Project Owner`` role.

   * - .. data:: Owner
     - Inherits all permissions from ``Author`` and can also
       :ref:`manage all aspects of the data source
       <manage-existing-data-sources>`.

Permissions Granted by Project Roles
------------------------------------

|charts-short| automatically grants data source permissions for 
certain :atlas:`project roles </reference/user-roles/#project-roles>`. 
The following table lists project roles and the data source 
permission they grant:

.. list-table::
   :header-rows: 1
   :widths: 70 30

   * - Project Roles
     - Data Source Permission

   * - - :authrole:`Project Read Only`
       - :authrole:`Project Cluster Manager`
     - None. A data source ``Owner`` may 
       :ref:`grant Viewer permissions <data-source-set-permissions>` 
       to these roles.

   * - - :authrole:`Project Data Access Admin`
       - :authrole:`Project Data Access Read/Write`
       - :authrole:`Project Data Access Read Only`
     - ``Author``

   * - - :authrole:`Project Owner`
     - ``Owner``
      

Modify Data Source Authors and Owners
-------------------------------------

|service| automatically assigns data source permissions to users based
on their :atlas:`project roles </reference/user-roles/#project-roles>`. 
As such, to
modify data source :data:`Authors <Author>` and :data:`Owners <Owner>`,
you must do so through the |service| :guilabel:`Access Management` page.

To access the |service| :guilabel:`Access Management`:

1. In the top navigation, click the down arrow next to 
   :guilabel:`Access Manager`, then click :guilabel:`Project Access`.

#. Click :guilabel:`Edit Permissions` for a user whose permissions you
   wish to change.

#. Select new permission levels in the dropdown.

#. Click the check mark to save your changes.

View Data Source Permissions
----------------------------

To view permissions for a specific data source, navigate to the
:doc:`Data Sources page </data-sources>` and hover over the
data source's :guilabel:`Access` button. A tooltip describing the data
source permissions will appear. The tooltip displays your permissions,
the owner of the data source, and all other users who have access.

The following table lists the possible icons and their associated
permissions:

.. _data-source-permission-icons:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Icon
     - Description

   * - :icon:`globe` Globe Icon
     - You have either ``Author`` or ``Owner`` permission and
       :ref:`Everyone <data-source-access-everyone>` in your
       :atlas:`Atlas project </tutorial/manage-projects/>`
       has some level of access to the data source.

   * - :icon:`users` Group Icon
     - You have either ``Author`` or ``Owner`` permission and
       :ref:`additional users <data-source-specific-access>` have
       ``Viewer`` permission on the data source.

   * - :icon:`lock` Lock Icon
     - You have ``Owner`` permission and no other user has
       access.

.. _data-source-set-permissions:

Set Data Source Permissions
---------------------------

If you are a data source :data:`Owner`, you can :ref:`Modify permissions
<mod-data-source-permissions>` on a data source which has already been
created.

Refer to the following sections for instructions on granting
:ref:`specific users <data-source-specific-access>` permissions on a
data source and granting
:ref:`all users in your Atlas project
<dashboard-access-everyone>` permissions on a data source:

.. _data-source-specific-access:

Specific User Access
~~~~~~~~~~~~~~~~~~~~

.. note::

   You can only share data sources with users who are members of
   the |service| project associated with your |charts-short|
   instance.

To grant specific users with the ``Project Read Only``
:atlas:`project role </reference/user-roles/#project-roles>` permission 
to view charts which use your data source:

1. For the data source to which you want to manage access, click the 
   :guilabel:`Access` button.

#. Search for or select the user to whom you want to give access. You 
   can search for users by their username or email address.

#. Click the user to add them to the permissions list.

#. Repeat steps 2-4 for each user you wish to grant data source access.

To remove access for a user you have added, click the trash can icon
to the right of the user's name.

.. _data-source-access-everyone:

Access for All Users
~~~~~~~~~~~~~~~~~~~~

You can the grant the :data:`Viewer` permission to all users with the
``Project Read Only`` 
:atlas:`project role </reference/user-roles/#project-roles>`.
This allows all users to view any chart on a dashboard that uses that
data source.

To grant all users the :data:`Viewer` permission, toggle the switch on
the right-side of the :guilabel:`Everyone in <Project Name>` user to
``On``.

.. note::

   If you enable the :data:`Viewer` permission for everyone in your
   project, a user's specific permissions take precedence over the
   permissions set to :guilabel:`Everyone`.

   For example, if you grant :data:`Viewer` to all users and
   the :data:`Author` permission to a user named Alice, Alice's
   effective permission level is ``Author``.
