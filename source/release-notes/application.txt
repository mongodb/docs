=========================
|onprem| Server Changelog
=========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: twocols

.. _opsmgr-server-3.6:

|onprem| Server 3.6
-------------------

.. _opsmgr-server-3.6.4:

|onprem| Server 3.6.4
~~~~~~~~~~~~~~~~~~~~~

*Released on 2018-03-01*

- **Fix:** Avoid failures in alert processing when monitoring topology 
  for disk partitions cannot be derived correctly.
- **Fix:** Changes to the ``admin.system.version`` collection on 
  documents other than the ``featureCompatibilityVersion`` document 
  should not abort an initial sync of a backup.
- **Fix:** Prevent the deletion of the last :authrole:`Global Owner` of 
  an |onprem| installation.
- **Fix:** :doc:`Suggested Indexes </tutorial/performance-advisor>` for 
  nested predicate and sort should not ignore the predicate.
- Support for version 2.4.0 of the 
  :bic:`MongoDB Business Intelligence Connector </>`.

- Agent Upgrades: :ref:`automation-4.5.12.2514-1`, :ref:`backup-6.0.8.752-1`

.. _opsmgr-server-3.6.3:

|onprem| Server 3.6.3
~~~~~~~~~~~~~~~~~~~~~

*Released on 2018-02-01*

- **Fix:** Email delivery of System Alerts was suppressed and is now
  enabled.

- Security improvements.

- Add new API for administrators to :doc:`configure Backup infrastructure </reference/api/nav/administration-backup>`

- The bundled JDK is version 8u162.

- Add new property (mms.ignoreInitialUiSetup) that allows full
  automation of |onprem| installation and configuration.

- Agent Upgrades: :ref:`automation-4.5.11.2453-1`, :ref:`backup-6.0.6.724-1`

.. _opsmgr-server-3.6.2:

|onprem| Server 3.6.2
~~~~~~~~~~~~~~~~~~~~~

*Released on 2018-01-11*

- Add support for MongoDB 3.6.1.

- Add BI Connector information to the Diagnostic Archive.

- Allow Project User Admin to set team roles and remove teams from
  projects.

- Allow user to specify ``sampleRefreshIntervalSecs`` BI Connector 
  flag.

- Avoid "Inconsistent backup configuration" message when Monitoring
  Agent fails to communicate with MongoDB.

- Improve parsing of queries by Performance Advisor.

- Log Collection now collects log files from mongos instances.

- Log the list of TLS ciphers in use and any disabled by config.

- MongoDB Enterprise 3.6.2+ is needed on daemons to perform
  queryable restores of 3.6 sharded clusters.

- **Fix:** Bug that prevented backups on an S3-compatible snapshot 
  store from being terminated.

- Restrict downgrading clusterAuthMode in the Automation Agent UI.

- Upgrade ``jackson-databind`` to 2.9.3.

- When doing an automated restore, only allow restoring to clusters 
  that have a higher FCV than the snapshot and where all mongod 
  versions support the snapshots FCV.

- Expand access for the Automation Agent user by adding the 
  ``restore@admin`` role.

Fixes
`````

- **Fix:** Bug where Performance Advisor could display "A server error 
  has occurred".

- **Fix:** PIT restores of inactive replica sets.

- **Fix:** Add timeouts to Queryable Restores.

- **Fix:** Always set the correct :guilabel:`From` and 
  :guilabel:`Reply-To` fields in System Alert emails.

- **Fix:** Extra System Alerts are no longer created.

- **Fix:** Version Manifest no longer reverts to the on-disk version.

- **Fix:** MongoDB 3.6 sharded cluster import no longer blocked.

- **Fix:** Set correct :guilabel:`Maximum Number of Connections` for 
  MongoDB 3.6 for Alerting.

.. _opsmgr-server-3.6.1:

|onprem| Server 3.6.1
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-12-19*

- Agent Upgrades: :ref:`automation-4.5.9.2403`

- **Fix:** Point in time automated restores now downloads the correct
  utility.

- **Fix:** When |onprem| is configured to use LDAP for user
  authentication, do not allow users to be invited.

- **Fix:** Allow MongoDB Advanced Options to be edited for an entire
  sharded cluster.

- **Fix:** Allow clusterAuthMode independently of X509 auth.

- **Fix:** Allow import of deployments using the
  net.ssl.allowConnectionsWithoutCertificates parameter.

- **Fix:** Explicitly specify the collation {locale: "simple"} in
  createIndex during initial sync.

- **Fix:** Users should be able to convert from LDAP native to saslauthd
  using the UI.

- Performance improvements for queryable restores.

- Security enhancements.

.. _opsmgr-server-3.6.0:

|onprem| Server 3.6.0
~~~~~~~~~~~~~~~~~~~~~

*Released 2017-12-05*

- Added support for a new :doc:`organizations and projects hierarchy
  </organizations-projects>` to facilitate the management of your Ops
  Manager deployments. Groups are now known as Projects. You can put
  multiple Projects under an Organization.

- Added support for nested LDAP groups via the 'member' field when
  configuring |onprem| to use LDAP for |onprem| authentication.

  Although |onprem| 3.6 supports the use of either ``member`` or
  ``memberOf`` for configuration, support for LDAP via the ``memberOf``
  field will be removed in |onprem| 4.0. When possible, use
  ``member`` instead.
    
- Added support for a new :doc:`Agent API Key model
  </tutorial/manage-agent-api-key>`. Multiple Agent API Keys can now be
  associated with a project. This gives users the ability to perform
  Agent key rotation.

- The bundled JDK is version 8u152.

Automation
``````````

- Added support for management of the :doc:`MongoDB Connector for
  Business Intelligence </tutorial/deploy-bi-connector>`. The MongoDB
  Connector for Business Intelligence allows you to query a MongoDB
  database using SQL commands to aid in data analysis. It translates
  SQL queries from data analysis tools to MongoDB aggregation pipelines
  on MongoDB database.

- Added the ability to :doc:`retrieve the on-disk logs
  </tutorial/view-logs>` for all MongoDB and |onprem| Agent
  processes. The logs are sent to the |onprem| server and available
  for download by |onprem| administrators.

- Agent Upgrade: :ref:`automation-4.5.7.2375`

Backup
``````

- Added support for :doc:`queryable backups </tutorial/query-backup>`.
  This functionality allows you to query specific backup snapshot. You
  can use the queryable backups to:

  - Restore a subset of data within the MongoDB deployment.

  - Compare previous versions of data against the current data.

  - Identify the best point in time to restore a system by comparing 
    data from multiple snapshots.

  .. important::
    
     On Windows, :doc:`queryable restores </tutorial/query-backup/>` 
     only work on MongoDB 3.6 snapshots. Queryable restores on Windows 
     will work for MongoDB 3.2 and 3.4 snapshots once 
     :ref:`MongoDB 3.4.11 <3.4.11-changelog>` has been released.


- Added support for IBM Cloud Object Storage and DellEMC Elastic Cloud
  Storage for S3 Blockstore Snapshot Storage

- Added support for performing 
  :doc:`automated restores from one Project to another Project</tutorial/nav/backup-restore-deployments>`.

- Added the ability to reschedule the expiration time of a snapshot.

- Added support for automated restores via the Public API.

- Agent Upgrade: :ref:`backup-6.0.3.689`.
  
Monitoring
``````````

- Added :ref:`Real-Time Metrics <real-time-metrics-status-tab>`.

- Added the :doc:`Performance Advisor </tutorial/performance-advisor>`.
  The Performance Advisor monitors any operation with a query predicate
  that MongoDB considers slow and suggests new indexes to improve query
  performance.

- Added the :doc:`Data Explorer </data-explorer>`. This feature 
  provides the ability to introspect collections in your managed 
  MongoDB deployments via the Data Explorer view.

- Agent Upgrade: :ref:`monitoring-6.1.1.395`.

Release Advisories for |onprem| 3.6
```````````````````````````````````

.. include:: /release-notes/release-advisories/advisories-v3.6.rst

Deprecation
```````````

- MongoDB 2.4 is no longer supported for Automation and Backups:

  - All MongoDB 2.4 processes in Automation will be unmanaged.

  - All MongoDB 2.4 backups will be stopped.

- MongoDB 3.0 is no longer supported as a backing store for |onprem|.

Upcoming Incompatibilities
``````````````````````````

- Support for MongoDB 3.2 as a backing store for |onprem| will be
  removed in |onprem| 4.0.

- Support for restores delivered by SCP will be removed in |onprem|
  4.0.

- Support for LDAP via the ``memberOf`` field will be removed in Ops
  Manager 4.0. Use ``member`` instead. In |onprem| 3.6, you may use
  either ``member`` or ``memberOf``.

- Support for the older Agent API Key model will be removed in Ops
  Manager 4.0. Instead, use the new-style keys. In |onprem| 3.6, the
  new-style keys are preferred, the but the older keys will still work.

.. _opsmgr-server-3.4:

|onprem| Server 3.4
-------------------

.. _opsmgr-server-3.4.12:

|onprem| Server 3.4.12
~~~~~~~~~~~~~~~~~~~~~~

*Released on 2018-02-01*

- Agent Upgrades: :ref:`automation-3.2.16.2444-1`, :ref:`backup-5.0.12.725-1`

.. automation-3.2.16.2444-1 ?

- The bundled JDK is version 8u162

- Upgrade jackson-databind to 2.9.3

.. _opsmgr-server-3.4.11:

|onprem| Server 3.4.11
~~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-12-20*

- **Fix:** Issue importing a process into Automation running on a 
  custom build.

- **Fix:** Explicitly specify the collation ``{locale: simple}`` in
  createIndex during the initial sync of a backup.

- **Fix:** Allow ``clusterAuthMode`` to be configured when deployment 
  does not use MONGODB-X509 authentication.

- **Fix:** Allow importing a process into Automation using the
  ``allowConnectionsWithoutCertificates`` parameter.

- Security enhancements.

.. _opsmgr-server-3.4.10:

|onprem| Server 3.4.10
~~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-11-02*

- Agent Upgrades: :ref:`automation-3.2.16.2263-1`

- Fix a bug in credentialstool and encryptiontool where they fail to
  load dependencies correctly.

- Fix a bug where backup groom jobs could get stuck on
  partially-deleted snapshots.

- Fix a bug where some of the Cloud Manager interface could be shown
  when creating groups.

- Fix a bug where sorting during deletion of backups could run out of
  memory.

- Reduce memory usage of backup snapshot deletion.

- Remove a restriction where a shard key range could not have an equal
  minimum and maximum.

- Update JDK to 8u152.

.. _opsmgr-server-3.4.9:

|onprem| Server 3.4.9
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-10-05*


- Agent Upgrades: :ref:`automation-3.2.15.2257-1`, :ref:`backup-5.0.11.663-1`

- **Fix:** Allow the ``mongos`` ``autoSplit`` configuration parameter to
  be removed simultaneously with a major version upgrade from MongoDB
  3.2 to 3.4.

- **Fix:** During the initial sync of a new backup, documents with a
  compound ``_id`` that are moved on disk at the source during the 
  initial sync may be omitted from the backup under rare conditions. 
  This issue affects only MMAPv1.

- Increase the expiration period for snapshots downloaded during an
  automated restore and make the expiration periods a configurable
  parameter.

- Reduce the amount of memory used when a backup is terminated.

.. _opsmgr-server-3.4.8:

|onprem| Server 3.4.8
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-09-07*

- Allow session timeouts to be configured to a fraction of an hour.

- **Fix:** Downloading the global diagnostic archive could fail if more 
  than 32 MB of agent logs were stored.

- **Fix:** :doc:`"Inconsistent Backup Configuration" alert
  </reference/alerts/inconsistent-backup/>` runs for config servers.

  .. admonition:: Special Advisory
     :class: important

     After upgrading to |onprem| 3.4.8, the :guilabel:`Inconsistent
     Backup Configuration` alert may be triggered for config servers.
     The backup for these config servers should be resynchonized.

     1. Click :guilabel:`Backup`.
     #. From the config server row, click on the :guilabel:`Option` menu
        [**...**].
     #. Click :guilabel:`Resync`.

     Do not resync the entire :term:`sharded cluster` if a :term:`config
     server` triggers this alert. Resync the config server in question
     only.

- **Fix:** Changes to the storage engine for a config server backup are
  applied on resync.

- **Fix:** Validation for Backup Agent authentication mechanism failed 
  if ``MONGODB-X509`` was implicitly enabled.

- **Fix:** In :doc:`Local Mode </tutorial/configure-local-mode>`, checks
  during |onprem| startup allow configurations of deleted Groups to
  require MongoDB versions which are not present.

- Security enhancements.

.. _opsmgr-server-3.4.7:

|onprem| Server 3.4.7
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-08-03*

- Agent Upgrades: :ref:`automation-3.2.14.2187-1`,
  :ref:`backup-5.0.10.634-1`.

- Update JDK to 8u144.

- Additional logging for oplog extensions due to delayed backups.

- Additional logging for backup snapshots that retry due to unexpected
  file changes.

- **Fix:** Ability to restore SCCC sharded clusters without a healthy
  mongos.

- **Fix:** Race condition between snapshots and schedule update 
  requests.

- **Fix:** Do not query arbiters when executing an administrative error
  retrieval task.

- Security improvements.

.. _opsmgr-server-3.4.6:

|onprem| Server 3.4.6
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-07-06*

- Agent Upgrades: :ref:`automation-3.2.13.2141-1`, 
  :ref:`backup-5.0.8.601-1`.

- **Fix:** Server Pool servers can get stuck in cleaning state if 
  server is reimaged.

- **Fix:** Make Backup ingestion collection stats calls idempotent.

- **Fix:** Avoid skipping storage measurement rollups if customers have 
  a database named ``hm``.

- **Fix:** Cause Discovery to update shard ID when shard is repurposed 
  to arbiter.

- **Fix:** Following upgrade from 2.x to 3.4.x, show progress of 
  monitoring data migration.

- **Fix:** Make all metrics available to cluster view.

- **Fix:** Delay in Metric alerts check when opening and closing alerts 
  for oplog metrics.

- **Fix:** Metric alerts check may miss system measurements.

.. _opsmgr-server-3.4.5:

|onprem| Server 3.4.5
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-05-18*

- Agent Upgrades: :ref:`automation-3.2.12.2107`, 
  :ref:`monitoring-5.4.5.370`, :ref:`backup-5.0.7.494`.

- Ability to disable daily/weekly/monthly snapshots through the API.

- Fix validation error for automated restores where the source or
  target cluster uses the ``storage.wiredTiger.directoryForIndexes``
  parameter.

- Fix validation errors when using LDAP Authorization along with LDAP
  and SCRAM-SHA1 authentication.

- Various security enhancements.

.. _opsmgr-server-3.4.4:

|onprem| Server 3.4.4
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-03-30*

- Agent Upgrades: :ref:`automation-3.2.11.2025`, :ref:`backup-5.0.6.486`

- Fix for premature forceful shutdown of the HEAD :program:`mongod`
  instances for |onprem| Backup Daemons running on Windows.

- Fix problem with shutdown of :program:`mongod` processes during an
  automated restores on Windows.

- Fix for issues using Automation in multi-server deployments using SSL
  and encrypted PEM key files.

- Fix for restores of backup snapshots stored unencrypted using file 
  system storage.

- Expose newest AWS regions as a storage option for S3 blockstores.

- Optimization: Performance optimization for sending monitoring data to
  New Relic.

- Security enhancement: Set X-Frame-Options: DENY HTTP headers for all 
  authenticated requests.

- Security enhancement: New option to allow enablement of HTTP Strict
  Transport Security (HSTS) with configurable maximum age.

- Security enhancement: New option to allow use of browser session
  cookies, rather than time-limited persistent cookies.

- Security enhancement: New option to disable all browser caching.

.. _opsmgr-server-3.4.3:

|onprem| Server 3.4.3
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-02-17*

- Agent Upgrades: :ref:`automation-3.2.10.1997`,
  :ref:`backup-5.0.6.477`, :ref:`monitoring-5.4.4.366`

- Fix resource leak preventing successful backups when |onprem|
  Backup is running on Windows.

- Fix bug in removal of shards for sharded clusters on MongoDB 3.4.

- Various security enhancements.

- Support for running Automation, Backup and Monitoring Agents on MacOS
  Sierra.

- Support for MongoDB Enterprise builds for Debian 7.1.

- Fix import into Automation for deployments using LDAP authorization
  and SCRAM-SHA1 authentication.

- Automation will deploy SSL-capable Windows builds for MongoDB 3.2.12+
  and 3.4.2+.

- Fix possible stall in the oplog application phase of |onprem|
  Backups of MongoDB 3.4.

.. _opsmgr-server-3.4.2:

|onprem| Server 3.4.2
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-01-19*

- Agent Upgrades: :ref:`automation-3.2.9.1985`, :ref:`backup-5.0.5.472`

- Fixed PageDuty notifications failing to send for System Alerts.

- Fixed issue creating deployments with overlapping replica set / shard
  names of other deployments.

- Fixed Global Alert UI validation being incorrect for some roles.

- Fixed failure configuring MONGODB-CR + LDAP auth mechanisms + LDAP
  authz.

- Added option to disable checksums during restores.

- Upgrade to JDK8u121.

.. _opsmgr-server-3.4.1:

|onprem| Server 3.4.1
~~~~~~~~~~~~~~~~~~~~~

*Released on 2016-12-27*

- Agent Upgrades: :ref:`automation-3.2.8.1942`,
  :ref:`monitoring-5.4.3.361`, :ref:`backup-5.0.4.469`

- Support for |onprem| using Active Directory to authenticate to
  application databases.

- Fixed roles info being lost when editting a database user.

- Fixed issue starting backup when 'net.compression' is in use.

- Prevent |onprem| URLs from having a double forward slash when the
  URL configured by the user ends in a forward slash.

- Fixed editing LDAP group mappings.

- Fixed new OM 3.4.0 being unable to start for the first time without
  internet connectivity

.. _opsmgr-server-3.4.0:

|onprem| Server 3.4.0
~~~~~~~~~~~~~~~~~~~~~

*Released on 2016-11-29*

General
```````

- Added support to monitor, back up, and automate MongoDB 3.4
  deployments.

- Added support for deploying |onprem| on SUSE12.

- Added support for Automation Agents, Backup Agents and Monitoring
  Agents on Ubuntu 16.x Power (ppc64le) and RHEL 7 Power (ppc64le).

- Added support for mutual TLS/SSL between all Agents and |onprem|.

- Added the ability to assign tags to Projects and to filter global 
  alerts by tags.

- Added the ability to change a the name of a Project.

Automation
``````````

- Includes more flexible handling of MongoDB User and Roles;
  specifically:

  - Ability to choose whether or not specific users and roles are
    managed, and

  - Ability to choose whether or not to allow MongoDB Users and Roles
    to be managed externally from |onprem|.

- Added the ability to manage sharded collections and zones.

- Added support for MongoDB 3.4 LDAP Authorization.

- Added support for Kerberos Authentication on Windows.

Backup
``````

- Added support for uncompressed WiredTiger snapshots on the filesystem.

- Added support for storing snapshots in S3.

- Added support for WiredTiger encryption at rest.

- Added the ability to control the reference time for the snapshot
  schedule; e.g., specify that snapshots are taken every 6 hours,
  starting at 12:00:00 AM.

- Added support for all data-format affecting MongoDB configuration
  options: directoryPerDB, smallfiles, etc.

Monitoring
``````````

- Provides high resolution monitoring: metrics are now captured every
  10 seconds.

- Supports flexible retention monitoring: metrics at each resolution
  can be retained for a configurable amount of time.

- Allows hardware metrics to be collected for any managed MongoDB
  process (i.e. any process that is managed by an Automation Agent).

- Provides new API endpoint to retrieve all metrics for a particular
  MongoDB process in one API call.

Provisioning
````````````

- Added support for maintaining a pool of provisioned servers from which
  users in a group can request servers to host new MongoDB deployments.

Associated Agent Updates (v3.4)
```````````````````````````````

- :ref:`automation-3.2.7.1927`
- :ref:`monitoring-5.4.2.354`
- :ref:`backup-5.0.3.465`

Release Advisories for |onprem| 3.4
```````````````````````````````````

.. include:: /release-notes/release-advisories/advisories-v3.4.rst

For procedures to upgrade to 3.4, see
:doc:`/tutorial/nav/upgrade-application`.

|onprem| Server 2.0
-------------------

.. _opsmgr-server-2.0.10:

|onprem| Server 2.0.10
~~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-08-03*

- Update JDK to 8u144.

- **Fix:** Backup should compute size of incomplete snapshots.

.. _opsmgr-server-2.0.9:

|onprem| Server 2.0.9
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-05-23*

- Agent Upgrades: :ref:`backup-3.9.1.382-2.0.9`

- Upgrade to JDK8u131

.. _opsmgr-server-2.0.8:

|onprem| Server 2.0.8
~~~~~~~~~~~~~~~~~~~~~

*Released on 2017-01-19*

- Fixed minimum oplog check when starting backup from failing on
  ``RECOVERING`` members.

- Fixed restores on expired, but not yet deleted, snapshots.

- Upgrade to JDK8u121.

.. _opsmgr-server-2.0.7:

|onprem| Server 2.0.7
~~~~~~~~~~~~~~~~~~~~~

*Released on 2016-11-03*

- Agent Upgrades: :ref:`automation-2.5.22.1876`

- Improve filesystem backup performance by increasing disk buffer size.

- Fixed backup initial sync failures due to inefficient query on oplogs.

- Fixed starting backup when MongoDB was using Kerberos auth and
  Automation was not in use.

- Fixed old application settings appearing as overrides on the Ops
  Manager settings page

- Fixed publish failure due to ``weakCertificateValidation`` improperly
  being set based on the ``allowConnectionsWithoutCertificates`` setting.

- Support for Windows Server 2016 and Windows 10.

- Upgrade to JDK8u112. Unlimited strength encryption policy included by default.

.. _opsmgr-server-2.0.6:

|onprem| Server 2.0.6
~~~~~~~~~~~~~~~~~~~~~

*Released on 2016-08-18*

- Agent Upgrades: :ref:`automation-2.5.20.1755`
- Fixed case where acknowledged alerts could be opened again.

- Fixed issue where DNS failures on the hostname(s) of the |onprem|
  application database cause |onprem| to shutdown.

- File system snapshot stores can be used in group specific snapshot 
  store filters.

- Fixed issue where an unconfigured Backup Daemon could be assigned a
  backup job.

- Upgrade to JDK8u102.

.. _opsmgr-server-2.0.5:

|onprem| Server 2.0.5
~~~~~~~~~~~~~~~~~~~~~

*Released on 2016-07-14*

- Agent Upgrades: :ref:`automation-2.5.19.1732`,
  :ref:`monitoring-3.9.1.326`

- Fixed credentialstool on Windows, which is used to encrypt passwords
  in the config file.

- Fixed Backup Daemon auto-download of RHEL platform specific builds.

- Added support for LDAP referrals for |onprem| user authentication.

- Added support for changing LDAP search attribute for |onprem| user
  authentication.

- Fixed index creation UI in Firefox and IE11.

.. _opsmgr-server-2.0.4:

|onprem| Server 2.0.4
~~~~~~~~~~~~~~~~~~~~~

*Released on 2016-05-20*

- Agent Upgrades: :ref:`automation-2.5.18.1647`, :ref:`backup-3.9.1.382`

- Fixed failure to generate diagnostics archive due to large amount of
  log data.

- Validate Automation sslMode changes at publish time instead of draft.

- Allow Automation to transition from sslMode disabled to not having a
  sslMode.

- Fixed false positive auth mechanism validation failures when starting
  backup.

- Fixed issue with processing some types of aggregation queries when
  calculating suggested indexes.

- Fixed exception during a backup restore if that data previously was
  on a blockstore that has since been deleted.

- Removed Ubuntu 14.04 enterprise builds for MongoDB 2.4.X that were
  erroneously in the version manifest.

- Ability to edit LDAP Projects for Automation Admin was accidentally
  hidden.

- Fixed javascript error on empty profiler view.

- Upgrade to JDK8u92.

.. _opsmgr-server-2.0.3:

|onprem| Server 2.0.3
~~~~~~~~~~~~~~~~~~~~~

*Released on 2016-03-24*

- Agent Upgrades: :ref:`automation-2.5.17.1604`

- Fixed critical bug in conversion to config server replica sets.
  Conversions to config server replica sets should be not performed
  with |onprem| 2.0.2.

- Fixed |onprem| not recording HTTP access logs.

- Fixed LDAP PEM settings from failing pre-flight checks even when LDAP
  wasn't in use.

- Fixed Automated Point-In-Time restores of Sharded Cluster with config 
  server replica sets.

- Fixed removing SSL for a Deployment

- Email configuration changes no longer require a restart of the 
  |onprem| service.

- Allow specifying a temporary port for use during conversion to config
  server replica sets.

- Added Automation support for `net.ssl.disabledProtocols`.

- Allow control over the compression level of the File System Snapshot
  Store.

.. _opsmgr-server-2.0.2:

|onprem| Server 2.0.2
~~~~~~~~~~~~~~~~~~~~~

*Released on 2016-03-01*

- Agent Upgrades: :ref:`automation-2.5.16.1552`

- Added support rolling upgrades to config servers as a replica set
  (requires MongoDB 3.2.4+).

- Added support for running Agents, the |onprem| server, and MongoDB
  on SUSE12.

- Added support for Slack and Flowdock notifications as system alerts.

- Fixed Automation Admin Role missing from group LDAP configuration.

- Fixed charting problem on Chrome 48+.

- Fixed issue deleting processes that were part of a config server 
  replica set.

- Fixed issue where deployment drafts could prevent |onprem| from
  starting in local mode.

- Fixed issue where disabling 2FA in |onprem| still required 2FA for
  users that had it configured.

- |onprem| upgrades on Windows require an uninstall of the previous
  version. This restriction was added to prevent issues that could
  occur on upgrade that are still unresolved without uninstall.

- Upgrade to JDK8u74.

.. _opsmgr-server-2.0.1:

|onprem| Server 2.0.1
~~~~~~~~~~~~~~~~~~~~~

*Released 2016-01-21*

- Agent Upgrades: :ref:`automation-2.5.15.1526`.

- Stability and performance improvements for restores via automation.

- Support restores via automation for shared clusters with config
  server replica sets.

- Fixed editing of managed users not promoting to re-enter password
  (Relevant only to imported SCRAM-SHA1 users.)

- Fixed old errors from imports to automation impacting new imports.

- Automation now updates the location of the keyfile according to the
  defined downloadBase.

- Fixed cases where suggested indexes did not handle unexpected
  profiling data.

- Fixed issue with filesystem snapshots failing when trying to resume a
  snapshot after restart.

- Fixed LDAP form validation not allowing "ldaps".

- Fixed the Backup Daemon not recognizing Windows MongoDB Enterprise
  builds.

- Fixed cases where global diagnostic archive would fail if it was too
  large.

- Fixed importing into automation with SSL always requiring client
  certificates.

.. _opsmgr-server-2.0.0:

|onprem| Server 2.0.0
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-12-08*

General
```````

- Added support to monitor, back up, and automate MongoDB 3.2 
  deployments.

- Single |onprem| Package: there is no longer a separate package for the
  Backup Daemon. The single |onprem| package installs both the
  |application| and the Backup Daemon. You can configure any server with
  |onprem| to handle backups through the Backup Admin interface.

- Configuration in the Database: the |onprem| application configuration
  is now stored in the application database rather than in configuration
  files. This allows for central configuration management.

  Each |onprem| instance, on each server, must be configured with
  information on how to connect to the Application Database. Local
  config files override the information in the database: as such,
  switching to configuration in the database is not required, but is
  recommended.

- Backup agent port change: |onprem| no longer requires a separate port
  for backup traffic. All HTTP traffic is now over a single port. By
  default, |onprem| uses port ``8080``.

- |onprem| 2.0 updates the admin interface to show the topology of
  |onprem| software, the application database, and any backup databases.

- Added support to convert to LDAP authentication for |onprem| users at
  any time, with no downtime.

- Upgraded to JDK8u66.

Automation
``````````

- Added support for X.509 member authentication.

- Improved handling of adding members to replica sets: to avoid
  disrupting majority writes, new members are now added to
  :term:`replica sets <replica set>` as ``priority=0``, ``votes=0`` 
  until they reach secondary state, after which |mms| automatically 
  updates the configuration to match the :manual:`priority
  </reference/replica-configuration/#rsconf.members[n].priority>` and
  :manual:`votes </reference/replica-configuration/#rsconf.members[n].votes>`
  value specified in the deployment.

- Added the ability to manage indexes from the |onprem| UI.

- Improved index creation: indexes are now created in a rolling fashion.

- Added Automation support for Windows MongoDB instances.

Monitoring
``````````

- Added a new profiler with Suggested Indexes.

- Added support for maintenance windows during which time |onprem| does
  not send alert notifications.

Backup
``````

- Filesystem snapshot storage: added the ability to store snapshots
  on a plain shared file system instead of a MongoDB instance. With
  filesystem storage, |onprem| stores snapshots in a directory hierarchy
  and the data files themselves are compressed using gzip.

- Backup agent port change: |onprem| no longer requires a separate port
  for backup traffic. All HTTP traffic is now over a single port. By
  default, |onprem| uses port ``8080``

  |onprem| will automatically update any Backup Agents managed by
  Automation to use the new port. You will need to manually update any
  Backup Agents set up manually after upgrading |onprem|. The upgrade
  instructions describe how to configure the ``mothership`` field in the
  configuration files of non-automated Backup Agents.

- Sync store no longer required: a dedicated sync store is no longer
  required: Backup :term:`initial syncs <initial sync>` are "streamed"
  to the Backup Daemon and only use a small amount of temporary space in
  the :term:`oplog store <Oplog Store Database>`.

- Automated restores: added a new option to automatically restore a
  backup to a running :term:`replica set` or :term:`sharded cluster`.

- Added support for namespace whitelisting, which allows you to back up
  only a subset of your data.

- Added the ability to manage HTTP restore link expiration from the
  |onprem| UI and through the API for each individual restore request.

- Added support for the Backup Daemon to download required MongoDB
  binaries from the |onprem| web server when they are not available 
  locally.

Associated Agent Updates
````````````````````````

- :ref:`automation-2.5.11.1484`
- :ref:`monitoring-3.9.1.238`
- :ref:`backup-3.9.0.336`

Release Advisories for |onprem| 2.0
```````````````````````````````````

.. include:: /release-notes/release-advisories/advisories-v2.0.rst

See: :doc:`/tutorial/nav/upgrade-application` for upgrade instructions
for your operating system.

.. _opsmgr-server-1.8:

|onprem| Server 1.8
-------------------

.. _opsmgr-server-1.8.3:

|onprem| Server 1.8.3
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-12-15*

- Fixed issue where monitoring settings for existing servers were not 
  always editable.

- Support for additional Amazon Simple Email Server regions. To specify
  regions other than the default US-EAST, see
  :setting:`aws.ses.endpoint`.

- Fixed SNMP notification mechanism for System Alerts.

- Fixed user privileges for MongoDB 3.0 missing from UI on 
  :guilabel:`Users & Roles` page.

- Upgraded to JDK8u66.

.. _opsmgr-server-1.8.2:

|onprem| Server 1.8.2
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-10-20*

- Agent Updates: :ref:`automation-2.0.14.1398`,
  :ref:`monitoring-3.7.1.227`, and :ref:`backup-3.4.2.314`.

- MONGODB-X509 authentication mechanism no longer requires MongoDB
  Enterprise.

- Fixed system alerts failing to connect to Application Database and
  Backup Databases running with SSL.

- Fixed issue where Backup resync of a Config Server could cause the
  Backup Job to get stuck.

.. _opsmgr-server-1.8.1:

|onprem| Server 1.8.1
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-08-17*

- Agent Updates: :ref:`automation-2.0.12.1238`,
  :ref:`monitoring-3.7.0.212`

- Updated Backup ``seedSecondary`` script for MongoDB 3.0.

- Fixed adding users with ``GLOBAL`` roles to individual groups.

- Fixed Host Down alerts not firing correctly for arbiters.

- Fixed error when trying to enable X.509 authentication for Monitoring
  only (without Automation).

- Fixed error when trying to enable host log collection.

- Fixed case where an acknowledged Alert can be re-opened when Alert
  processing is behind.

- Fixed case where monitoring classified a Config Server as a
  Standalone when there were no :program:`mongos` services.

.. _opsmgr-server-1.8.0:

|onprem| Server 1.8.0
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-06-23*

Security
````````

- Automation now supports 
  :doc:`SSL </tutorial/enable-ssl-for-a-deployment>` and 
  MongoDB Enterprise authentication mechanisms: 
  :doc:`Kerberos </tutorial/enable-kerberos-authentication-for-group>`, 
  :doc:`LDAP </tutorial/enable-ldap-authentication-for-group>`, and 
  :doc:`X.509 </tutorial/enable-x509-authentication-for-group>`.

  |onprem| 1.8 can start new MongoDB instances using SSL and enterprise
  authentication mechanisms and import existing instances using SSL and
  enterprise authentication for management.

- Added the ability to :doc:`specify a proxy server
  </tutorial/use-with-http-proxy>` for |onprem| to use to
  access external services.

- Added :ref:`support for self-signed CAs and client certificates
  <ldap-over-ssl>` when using SSL LDAP for |onprem| user authentication.

Alerts
``````

- :doc:`System Alerts </core/system-alerts>`: system alerts allow an 
  |onprem| Administrator to receive alerts when the state of the 
  software itself is unhealthy.

- :doc:`Global Alerts </tutorial/manage-global-alerts>`: global alerts 
  allow an |onprem| administrator to monitor any set of |onprem| groups 
  without needing to configure the alerts on a group-by-group basis.

- Added the ability to :ref:`deliver Project, Global, and System alerts 
  via an HTTP webhook <group-settings-page>`.

- Lowered the alerting check frequency from five minutes to one minute,
  allowing for more responsive alerts.

Automation
``````````

- Automation now uses distribution-specific builds for MongoDB Community
  Edition when one is available for the operating system and version in
  use. Previously, Automation used the generic MongoDB Community Edition
  build.

  Upgrading the Automation Agent and |onprem| to the new version will
  not automatically change your MongoDB deployments to a distribution-
  specific build: if you wish to use the distribution-specific build,
  you will need to 
  :doc:`update the MongoDB version </tutorial/change-mongodb-version>`.

- Added support to :doc:`change the storage engine for a MongoDB
  deployment using Automation </tutorial/edit-deployment>`.

- **Beta**: Added Automation support for Windows MongoDB instances.
  This feature must be enabled for an |onprem| group for it to be 
  available.

Monitoring
``````````

- Standby Monitoring Agents now check in with |onprem| more frequently.
  You can now configure the Monitoring Agent session timeout to allow
  for faster failover. See: :ref:`standby-monitoring-agent` for
  more information.

Backup
``````

- Added the ability to configure the Backup Database's block size.
  The :doc:`/tutorial/configure-block-size` tutorial describes
  how to configure the size of the blocks in the Backup Database's 
  blockstore.

- Added the ability to initiate backup SCP restores through the 
  Public API. See: :doc:`/reference/api/restore-jobs`.

Associated Agent Updates (v1.8)
```````````````````````````````

- :ref:`automation-2.0.9.1201`
- :ref:`monitoring-3.3.1.193`
- :ref:`backup-3.4.1.283`

Considerations for Upgrade (v1.8)
`````````````````````````````````

- |onprem| 1.8 requires that the :ref:`mms-application-database` and
  :ref:`backup-database` run MongoDB 2.6 or later.
  |onprem| will not start after upgrade if your backing databases are
  using an earlier version of MongoDB. The MongoDB Manual provides
  upgrade tutorials with each release. To upgrade from MongoDB 2.4 to
  2.6, see: :manual:`Upgrade MongoDB to 2.6 </release-notes/2.6-upgrade/>`.

- When you upgrade to |onprem| 1.8, |onprem| disables all Automation
  Agents until they are upgraded to :ref:`automation-2.0.9.1201`. You
  can upgrade the Automation Agents by clicking the link that appears in
  the :guilabel:`Please upgrade your agents` banner that will appear on
  the :guilabel:`Deployment` page in the |onprem| interface.

- Direct upgrade is only allowed from |onprem| 1.5 and |onprem| 1.6. To
  upgrade to |onprem| 1.8 from an earlier version of MongoDB, you must
  first upgrade to |onprem| 1.6, and then to 1.8.

- In |onprem| 1.8, :setting:`mms.multiFactorAuth.level` replaces the
  deprecated :setting:`mms.multiFactorAuth.require` setting. 
  :setting:`mms.multiFactorAuth.level`
  supports more values than its predecessor.

  |onprem| will not start with :setting:`mms.multiFactorAuth.require` 
  in the properties file, but will report an error indicating that the 
  setting has been deprecated, and that you must update your 
  configuration.

- |onprem| 1.8 does not include the Backup HTTP Service: its
  functionality is now part of :doc:`System Alerts</core/system-alerts>`
  and :doc:`Global Alerts </tutorial/manage-global-alerts>`.

- System Alerts give new insight into the health of |onprem| and may
  immediately trigger on upgrade if |onprem| is not in the expected
  state. For example, if your Application or Backup databases have
  startup warnings or if the connection strings to those databases point
  to any unreachable MongoDB instances, |onprem| will issue an alert.

- The |onprem| Deployment user interface has been streamlined such that
  the :guilabel:`View Mode` and :guilabel:`Edit Mode` dual views have
  been merged into a unified view.

.. _opsmgr-server-1.6:

|onprem| Server 1.6
-------------------

.. _opsmgr-server-1.6.4:

|onprem| Server 1.6.4
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-08-17*

- |onprem| no longer shuts down if the :ref:`mms-application-database`
  is unreachable. (This issue was erroneously reported as resolved in
  |onprem| 1.6.3.)

.. _opsmgr-server-1.6.3:

|onprem| Server 1.6.3
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-06-23*

- Agent updates: :ref:`automation-1.4.18.1199-1`

- Added full support for restores of WiredTiger backups. Previously,
  |onprem| only supported 
  :ref:`SCP Individual File <delivery-methods-file-formats>` restores 
  for WiredTiger backups.

- Added optimization to prevent some Backup Daemon background tasks
  from doing excessive logging when databases are down.

- Fixed a user interface issue when displaying an empty Automation diff.

.. _opsmgr-server-1.6.2:

|onprem| Server 1.6.2
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-04-28*

- Fixed issue with grooms on a WiredTiger Backup Blockstore.

- Fixed a possible connection leak with the SCP Individual File restore 
  type.

- LDAP users are now periodically synced with the LDAP server to prevent
  communications after a user is removed from a group.

- Fixed an issue with backups of MongoDB 3.0 :program:`mongod` instances
  running with the ``--setParameter failIndexKeyTooLong=0`` option.

.. _opsmgr-server-1.6.1:

|onprem| Server 1.6.1
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-03-26*

- Agent updates: :ref:`Automation Agent 1.4.15.999 <automation-1.4.15.999>`.

- **Security Update**: resolved an issue where users removed from LDAP
  groups were not always removed from corresponding |onprem|
  groups. This upgrade is **highly recommended** for anyone using LDAP
  authentication.

- Selecting wildcards in the Version Manager is no longer supported
  when ``automation.versions.source`` is set to ``local``.

- Added a 1 hour timeout to kill a Backup :term:`head database` if
  it does not shutdown cleanly.
  You must perform a resync following a hard kill.

- Windows support for Backup Daemon using Windows 64-bit 2008 R2+
  MongoDB builds.

- Fix for Backups stored in :ref:`WiredTiger <considerations-backup-storage-engine>` 
  format in which a single collection grows from under 8 GB to over 
  8 GB in size.

- The time before an unreachable :program:`mongos` process is 
  deactivated is now configurable on a per group basis. See
  :ref:`admin-only-group-settings`.

- The time before a standby Monitoring Agent takes over after the
  primary Monitoring Agent stops responding is now configurable to a
  minimum of 90 seconds. See the
  ``mms.monitoring.agent.session.timeoutMillis`` setting in
  :doc:`/reference/configuration`.

- For Backup HTTP pull restore, the link expiration and the number of
  allowed uses of a link are now configurable.

.. _opsmgr-server-1.6.0:

|onprem| Server 1.6.0
~~~~~~~~~~~~~~~~~~~~~

*Released 2015-03-02*

New Features
````````````

- Initial release of :ref:`Automation <automation>`. Automation manages 
  many basic administrative tasks for MongoDB deployments, including 
  version upgrades, adding replica set members, adding shards, and 
  changing oplog size. You can both 
  :doc:`import existing deployments into Automation </tutorial/add-monitored-deployment-to-automation>` 
  and :doc:`create new deployments on your provisioned hardware </tutorial/add-servers-automation>`.

- Windows support (Monitoring and Backup only). You can
  :doc:`/tutorial/install-on-prem-windows` using MSI files. |onprem|
  supports Windows Server 2008 R2 and above.

- Support for MongoDB 3.0, including support for backups that use the
  :ref:`WiredTiger <considerations-backup-storage-engine>` storage engine.

  To monitor or back up MongoDB 3.0 deployments, you must install
  |onprem| 1.6 or higher. To monitor a MongoDB 3.0 deployment, you must
  also run Monitoring Agent version 2.7.0 or higher.

- Support for using the SSL and MONGODB-X509 authentication mechanisms for
  the backing MongoDB databases. See
  :doc:`/tutorial/configure-ssl-connection-to-backing-mongodb`.

- Public API endpoints to manage Automation configuration. For more
  information, see :ref:`Automation <api-automation>` in the API
  documentation.

Improvements
````````````

- The |onprem|'s :doc:`Administration </core/administration-interface>`
  interface provides more information to make it easier to monitor the
  health of the |onprem| installation.

- The |onprem| Deployment tab now displays all deployment information on
  one page, with icons for selecting view options. The new Topology View
  groups all hosts by the replica set or sharded cluster they are part of.
  The new Servers View shows information about MongoDB processes and
  |onprem| agents grouped by server.

- Fixed an isssue (`MMS-2273 <https://jira.mongodb.org/browse/MMS-2273>`_)
  where, in certain situations, the Backup Agent was not reporting a
  cluster snapshot as potentially inconsistent.

- Improved handling of cursor timeouts by the Backup Agent. To use this
  improvement, upgrade to the latest Backup Agent, which is included
  with |onprem|. The improvement became available with 
  :ref:`Backup Agent 2.3.3.209-1 <backup-2.3.3.209-1>`.

Considerations for Upgrade to 1.6
`````````````````````````````````

- |onprem| 1.8.0, when released, **will not** support MongoDB 2.4 for 
  the :ref:`mms-application-database` and :ref:`backup-database`.
  |onprem| Server 1.8.0 *will* continue to support MongoDB 2.4 for your
  monitored and backed-up databases.

- |onprem| 1.6.0 supports direct upgrades only from MMS On Prem 1.3 and
  above.

- The procedure to configure |onprem| to run with HTTPS has changed and 
  is greatly simplified. The previous procedure no longer works. For 
  the new procedure, see :doc:`/tutorial/configure-ssl-connection-to-web-interface`.

- The connection string to the Backup Blockstore database is now 
  configured through the Administration interface's 
  :ref:`Blockstores page <blockstores-page>` and not through the 
  ``mongo.backupdb.mongoUri`` field in the ``conf-daemon.properties`` 
  configuration file.

- |onprem| no longer requires you to supply the replica set name of the
  backing MongoDB instances. The ``mongo.replicaSet`` and
  ``mongo.backupdb.replicaSet`` properties have been removed from the
  configuration files. These properties had previously controlled
  whether |onprem| treated a connection to a backing instance as a
  standalone or replica set, for the purpose of setting the write
  concern. |onprem| now sets write concern based on how many hosts are
  supplied in the connection string.

- You can disable Automation for the entire |onprem| installation 
  through the ``mms.featureFlag.automation`` setting in the 
  ``conf-daemon.properties`` :doc:`configuration file </reference/configuration>`.

- Removed the :guilabel:`Dashboards` view from the |onprem| UI. You can
  view monitoring metrics from the :guilabel:`Deployment` tab.
  See: :doc:`/tutorial/view-diagnostics` for an overview
  of the available metrics and how to access them.

.. _opsmgr-server-1.5:

MMS Onprem Server 1.5
---------------------

.. _opsmgr-server-1.5.5:

MMS Onprem Server 1.5.5
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2015-03-26*

- **Security Update**: resolved issue where users removed from LDAP 
  groups were not always removed from corresponding |onprem| groups. 
  This upgrade is **highly recommended** for anyone using LDAP 
  authentication.

.. _opsmgr-server-1.5.4:

MMS Onprem Server 1.5.4
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2015-03-18*

- Fixed race condition that could cause the Backup Daemon to hang when
  the MongoDB process for a :term:`head database` fails to start.

- Fixed an issue where a rollback occurring shortly after a terminate 
  could step on the terminate.

- The time before an unreachable :program:`mongos` process is
  deactivated is now configurable on a per group basis. See
  :ref:`admin-only-group-settings`.

- The time before a standby Monitoring Agent takes over after the
  primary Monitoring Agent stops responding is now configurable to a
  minimum of 90 seconds. See the
  ``mms.monitoring.agent.session.timeoutMillis`` setting in
  :doc:`/reference/configuration`.

- For Backup HTTP pull restore, the link expiration and the number of
  allowed uses of a link are now configurable.

.. _opsmgr-server-1.5.3:

MMS OnPrem Server 1.5.3
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2014-12-17*

Significant improvements in performance for the processing of MMS OnPrem
Monitoring data for MMS OnPrem Projects with a large number of hosts

.. _opsmgr-server-1.5.2:

MMS OnPrem Server 1.5.2
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2014-11-18*

- Added Support for archive restores (``.tar.gz``) for databases whose
  filenames exceed 100 characters.

- API: Skip missed points in metrics data, instead of returning empty
  data.

- API: Return correct number of data points when querying metric data
  with the period option.

- Backup Agent update to ``2.3.3.209-1``

.. _opsmgr-server-1.5.1:

MMS OnPrem Server 1.5.1
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2014-09-26*

- Fix cases where replica set member alerts (e.g. no primary, number
  of healthy members) could send false positives.

- Skip ``backup-daemon`` :setting:`rootDirectory` and
  :setting:`mongo.backupdb.mongoUri` overlap check when the
  :setting:`mongo.backupdb.mongoUri` is on a different
  host.

- ``mms-gen-key`` script handles user's effective group being
  different than the username.

- Security enhancements.

.. _opsmgr-server-1.5.0:

MMS OnPrem Server 1.5.0
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2014-09-02*

Considerations for Upgrade
``````````````````````````

- MMS OnPrem *only* supports direct upgrades from 1.3 and 1.4.

- Change in configurations and policy for 2FA:  Two-factor
  authentication must now be explicitly enabled using the
  :setting:`mms.multiFactorAuth.require` setting.

- The default LDAP group separator became ``;;``. Previously the
  separator was ``,``. See the :ref:`LDAP configuration
  <default-ldap-separator>` documentation for more information.

- Suppressed hosts will only remain suppressed for 30 minutes.

  Previously, if after deleting a host, from MMS OnPrem Monitoring the
  hostname and port combination would be added to a suppression list
  with an infinite lifetime. The suppression list prevented a race
  condition where host in a cluster would be auto-discovered by another
  member of a deployment before the host could was fully removed. Now,
  hostname and port combinations remain on the suppression list for only
  30 minutes.

- Set the :setting:`mms.remoteIp.header` in the
  ``conf-mms.properties`` file  if clients access the MMS OnPrem 
  Application via a load balancer.

- :setting:`mongo.backupdb.mongoUri` is no longer in
  ``conf-mms.properties``. This was previously a required field in this
  file. It remains in the backup daemons's ``conf-daemon.properties``.

- Stored MongoDB profile data is not transferred between OnPrem 1.4
  and OnPrem 1.5 during the upgrade process.

Improvements
````````````

- When an MMS OnPrem Backup job fails to bind, the system periodically
  and automatically retries.

- All MMS OnPrem Backup jobs will retry indefinitely.

- Point in Time restores are now available with one second granularity.

New Features
````````````

- MMS OnPrem :doc:`Public API </reference/api>`.

- Explicit support for multiple MMS OnPrem Backup Blockstore databases 
  and the ability to pin MMS OnPrem Projects to specific backup daemons 
  and databases. See 
  :doc:`/tutorial/assign-snapshot-stores-to-data-center`.

- MMS OnPrem can authenticate using LDAP to both the database backing 
  MMS OnPrem and the monitored and backed up MongoDB deployments. 
  See :ref:`security-ldap`.

- Enhanced auditing. See :doc:`/reference/audit-events` for more
  information.

- Ability to acknowledge alerts with comments.

- New cluster page that shows individual, sum or average metrics for
  all shards in a cluster.


.. _opsmgr-server-1.4:

MMS OnPrem Server 1.4
---------------------

.. _opsmgr-server-1.4.3:

MMS OnPrem Server 1.4.3
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2014-07-22*

- Addressed issues related to Backup Job assignment for 2.6.x clusters
  that used the :authrole:`clusterMonitor` role to support MMS OnPrem
  Monitoring.

- Fixed problem importing email addresses for users for deployments
  that use LDAP integration.

- Fixed rare race condition caused high CPU usage in the MMS OnPrem 
  HTTP Service if the application cannot connect to one of the backing 
  databases.

- Additional security enhancements.

.. _opsmgr-server-1.4.2:

MMS OnPrem Server 1.4.2
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2014-05-29*

- Critical bug fix for backing up MongoDB 2.6 deployments that include
  user or custom role definitions:

  - The :data:`system.version` collection in the admin database will
    be included in all future snapshots.

  - The :data:`system.roles` collection in the admin database will be
    included after a new initial sync is performed.

  Users capturing backups of MongoDB 2.6 replica sets or clusters with
  MMS OnPrem that include custom role definitions should perform a new
  initial sync. Taking a new initial sync will ensure that the role
  definitions are included in the backup.

- Disable MongoDB :collflag:`usePowerOf2Sizes` for insert-only MMS 
  OnPrem Backup collections.

- Speed optimization for MMS OnPrem Backup HTTP pull restores.

- Fix for LDAP integration, MMS OnPrem now passes full ``dn`` correctly 
  when authenticating the user.

MMS OnPrem Server 1.4.1
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2014-04-28*

- Ability to Backup replica sets or clusters using Kerberos 
  authentication.

- Ability to Backup replica sets or clusters running specific custom
  MongoDB builds provided by MongoDB, Inc.

- Fix validation issue preventing Backup of MongoDB 2.6.0 clusters.

- Reduced log noise from Monitoring Agent when monitoring MongoDB 2.0 
  or unreachable ``mongod``\s.

.. _opsmgr-server-1.4.0:

MMS OnPrem Server 1.4.0
~~~~~~~~~~~~~~~~~~~~~~~

*Released 2014-04-08*

- Includes MMS OnPrem Backup: continuous backup with point-in-time 
  recovery of replica sets and cluster-wide snapshots of sharded 
  clusters.

- Finer-grained roles and permissions.

- Improved user interface for alerts.

- Enhanced Activity Feed for auditing of all activity.

- Monitoring Agent distributed as OS-specific binary. Python dependency 
  removed.

- LDAP integration for managing users and groups.

MMS OnPrem 1.4.0 requires MongoDB 2.4.9+ instances for :doc:`backing
storage </tutorial/prepare-backing-mongodb-instances>`.

.. _opsmgr-server-1.3.0:

MMS OnPrem Server 1.3.0
-----------------------

*Released 2013-12-01*

- Packaging/support for Debian and SUSE Linux.

- Kerberos authentication support between MMS OnPrem server and backing
  MongoDBs, as well as between Monitoring Agent and the MongoDBs it
  monitors.

- OnPrem users can be overall site administrators. (MMS OnPrem Admins)

- New admin section where MMS OnPrem Admins can manage user roles and 
  message banners.

- Tunable advanced password and session management configurations.

- Encryption key rotation, more specific CORS policy, auth tokens 
  removed from chart URLs, and other security enhancements.

.. _opsmgr-server-1.2.0:

MMS OnPrem Server 1.2.0
-----------------------

*Released 2013-07-24*

- Redesigned user interface and enhanced algorithm to auto-discover
  hosts and derive host topology.

- SNMP monitoring.

- Ability to export charts.

- Option to store encrypted authentication credentials in the ``mmsDb``
  property in the configuration file.

- Ability to classify users within an MMS OnPrem Project as group 
  administrators or read-only users.
