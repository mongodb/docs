=========================
Visualizing Movie Details
=========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. |dataset| replace:: ``test.movieDetails``

*Total Estimated Time to Complete: 20-30 minutes*

Introduction
------------

This tutorial explores features and capabilities of |charts| with
a :doc:`data source </data-sources>` containing information gleaned
from `IMDb <https://www.imdb.com/>`_ and `Rotten Tomatoes
<https://www.rottentomatoes.com/>`_. The tutorial demonstrates how to
use filters to refine a large result set down to an easily
understandable chart.

Prerequisites and Setup
-----------------------

.. include:: /includes/tutorial-prereqs.rst

Download the example dataset from
https://raw.githubusercontent.com/steveren/docs-assets/charts-tutorial/movieDetails.json.
To download the documents, right-click on the URL and select
:guilabel:`Save Link As`. This file contains the data you will import
into the ``test.movieDetails`` collection of your Atlas cluster in the
following step.

The ``movieDetails.json`` file is 1.4 MB and contains records for 2295
movies. The following is a sample document from the dataset:

.. code-block:: json

   {
   	"_id" : ObjectId("5b107bec1d2952d0da904dd7"),
   	"title" : "Titan A.E.",
   	"year" : 2000,
   	"rated" : "PG",
   	"runtime" : 94,
   	"countries" : [
   		"USA"
   	],
   	"genres" : [
   		"Animation",
   		"Action",
   		"Adventure"
   	],
   	"director" : "Don Bluth, Gary Goldman, Art Vitello",
   	"writers" : [
   		"Hans Bauer",
   		"Randall McCormick",
   		"Ben Edlund",
   		"John August",
   		"Joss Whedon"
   	],
   	"actors" : [
   		"Matt Damon",
   		"Bill Pullman",
   		"John Leguizamo",
   		"Nathan Lane"
   	],
   	"plot" : "A young man learns that he has to find a hidden Earth ship before an enemy alien species does in order to secure the survival of humanity.",
   	"poster" : "http://ia.media-imdb.com/images/M/MV5BMjE0NTU0ODg4NV5BMl5BanBnXkFtZTcwNzY3MTQyMQ@@._V1_SX300.jpg",
   	"imdb" : {
   		"id" : "tt0120913",
   		"rating" : 6.6,
   		"votes" : 50875
   	},
   	"tomato" : {
   		"meter" : 52,
   		"image" : "rotten",
   		"rating" : 5.7,
   		"reviews" : 99,
   		"fresh" : 51,
   		"consensus" : "Great visuals, but the story feels like a cut-and-paste job of other sci-fi movies.",
   		"userMeter" : 60,
   		"userRating" : 3.2,
   		"userReviews" : 69055
   	},
   	"metacritic" : 48,
   	"awards" : {
   		"wins" : 1,
   		"nominations" : 7,
   		"text" : "1 win & 7 nominations."
   	},
   	"type" : "movie"
   }

Import the Data
~~~~~~~~~~~~~~~

Before you can use your dataset with |charts-short|, you need to add
it to a MongoDB collection. Use :manual:`mongoimport
</reference/program/mongoimport/>` to import the contents of that file
into the ``test.movieDetails`` collection.

.. code-block:: javascript

   mongoimport --host <atlasHostname> --ssl -u <username> -p <password> --authenticationDatabase admin \
   --db test --collection movieDetails \
   --drop --file <path/to/movieDetails.json>

.. note::

   Refer to :manual:`mongoimport </reference/program/mongoimport/>`
   for more information on using the import tool to add data to
   a MongoDB collection.

.. include:: /includes/add-data-source-steps.rst

Create a New Dashboard
----------------------

*Time to Complete: 3 minutes*

Now that you have created your data source and linked it to the
order data collection, create a dashboard to hold all of your
visualizations:

1. Click the :guilabel:`Dashboards` tab.

#. Click the :guilabel:`New Dashboard` button.

#. Copy the following into the :guilabel:`Title` input:

   .. code-block:: none

      Movie Details

4. Copy the following into the :guilabel:`Description` input:

   .. code-block:: none

      Insights from the Movie Details dataset.

#. Click :guilabel:`Create`.

After clicking create, |charts-short| navigates you to your newly
created dashboard and prompts you to add your first chart.

Build Charts
------------

*Time to Complete: 10 minutes (5 minutes per chart)*

This tutorial covers two types of charts: a sorted column chart and
a scatter chart.

- The :ref:`sorted column chart <movie-details-column>`
  displays columns representing the number
  of awards won by directors with at least 50 total awards,
  sorted from highest to lowest and broken down by film genre.

- The :ref:`scatter chart <movie-details-scatter>` shows
  a diagram of movies with at least one
  award win along with their TomatoMeter rating
  and their :abbr:`MPAA (Motion Picture Association of America)` rating
  (e.g. G, PG, PG-13, R).

.. include:: /includes/encoding-channels.rst

.. _movie-details-column:

Column Chart Showing Directors with the most Awards
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To discover which directors of films represented in this dataset have
won the most awards, use the ``directors`` and ``awards.wins`` database
fields in your chart. A column chart makes it easy to sort and compare
fields with numerical values, so it is a good choice for this use case.

.. include:: /includes/steps/column-chart-award-wins.rst

.. _movie-details-scatter:

Scatter Chart of Award-Nominated Movies with their TomatoMeter Rating
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Next, add a chart to your dashboard showing the TomatoMeter rating
and :abbr:`MPAA (Motion Picture Association of America)` rating
of movies with the most award nominations. A scatter chart is a good
choice for visualizing how data points clump together around certain
values and allows the representation of several different data
dimensions.

.. include:: /includes/steps/grid-chart-award-wins.rst

Arrange the Dashboard
---------------------

Now that you have two charts on your dashboard, you can arrange them
for maximum legibility. These two charts are horizontally oriented,
so you may wish to make them wider and stack them one above the other.
You can change the shape of each chart by clicking and dragging on the
lower right corner of the chart, and you can move them around the page
by clicking and dragging on the upper left corner of the chart.

.. seealso::

   :ref:`Manage Existing Dashboards <manage-existing-dashboards>`

Your finished dashboard should look similar to this:

.. figure:: /images/charts/tutorial2-dashboard.png
   :figwidth: 750px
   :alt: Finished dashboard
