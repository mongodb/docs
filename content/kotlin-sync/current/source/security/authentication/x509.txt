.. _kotlin-sync-auth-x509:

====================
X.509 Authentication
====================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: certificate, code example

Overview
--------

In the **X.509** authentication mechanism, the server and client use the
:wikipedia:`TLS <Transport_Layer_Security>` protocol to exchange X.509 public-key
certificates. You can use this mechanism to authenticate to MongoDB Atlas, MongoDB
Enterprise Advanced, and MongoDB Community Edition.

.. tip:: X.509 Mechanism

   To learn how to use TLS/SSL with the {+driver-short+},
   see the :ref:`kotlin-sync-tls` guide.

   For more information about X.509 certificates, see
   :manual:`Use x.509 Certificates to Authenticate Clients on Self-Managed Deployments
   </tutorial/configure-x509-client-authentication/>` in the {+mdb-server+} manual.

Specify X.509 Authentication
----------------------------

The examples in this section show how to specify the ``X.509`` authentication mechanism 
and use the following placeholder values:

* ``hostname``: The network address of your MongoDB deployment, open to your client.
* ``port``: The port number of your MongoDB server.
* ``authenticationDb``: The MongoDB database that contains your user's
  authentication data. If you omit this parameter, the driver uses the
  default value ``admin``.

Select the :guilabel:`Connection String` or the :guilabel:`MongoCredential`
tab below for instructions and sample code for specifying this authentication
mechanism:

.. tabs::

   .. tab::
      :tabid: Connection String

      To specify the ``X.509`` authentication mechanism by using a connection
      string, set the ``authMechanism`` parameter to ``MONGODB-X509``
      and the ``tls`` parameter to ``true`` as shown in the following example:

      .. literalinclude:: /includes/security/authentication.kt
         :language: kotlin
         :dedent:
         :start-after:  start-x509-connect-string
         :end-before: end-x509-connect-string
      
   .. tab::
      :tabid: MongoCredential

      To specify the ``X.509`` authentication mechanism by using the
      ``MongoCredential`` class, use the
      `createMongoX509Credential() <{+core-api+}/MongoCredential.html#createMongoX509Credential(java.lang.String)>`__
      and `applyToSslSettings() <{+core-api+}/MongoClientSettings.Builder.html#applyToSslSettings(com.mongodb.Block)>`__
      builder methods as shown in the following example:

      .. literalinclude:: /includes/security/authentication.kt
         :language: kotlin
         :dedent:
         :start-after:  start-x509-mcred
         :end-before: end-x509-mcred

Additional Information
----------------------

To learn more about authenticating to MongoDB, see
:manual:`Authentication </core/authentication/>` in the {+mdb-server+} manual.

To learn more about creating a ``MongoClient`` object by using the
{+driver-short+}, see the :ref:`kotlin-sync-mongoclient` guide.