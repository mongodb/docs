stepnum: 1
ref: nav-to-fts-partial-match
inherit:
  file: steps-source-project-nav.yaml
  ref: project-nav-search

---
stepnum: 2
ref: click-create-fts-index-partial-match
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-fts-index

---
stepnum: 3
ref: select-a-config-method-partial-match
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: select-a-configuration-method

---
stepnum: 4
ref: name-index-partial-match
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: name-index

---
stepnum: 5
ref: enter-index-definition-partial-match
title: "Define an index on the ``title`` and ``plot`` fields."
content: |
  You can use the :guilabel:`Visual Editor` or the :guilabel:`JSON 
  Editor` in the |service| user interface to create the index. 

  Visual Editor
  +++++++++++++
  
  a. Click :guilabel:`Next`.
  #. Click :guilabel:`Refine Your Index`.
  #. Click :guilabel:`Add Field`.
  #. Configure the following fields:
              
     .. list-table:: 
        :header-rows: 1
        :widths: 20 80
   
        * - UI Field Name 
          - Configuration 

        * - :guilabel:`Field Name`
          - Enter ``plot``.

        * - :guilabel:`Enable Dynamic Mapping`
          - Toggle to :guilabel:`Off`.

  #. Specify the data type and the settings for the operator you want 
     to use to run the query.

     .. tabs:: 

        .. tab:: autocomplete
           :tabid: autocomplete

           i. Click :guilabel:`Add Data Type` and select   
              :guilabel:`Autocomplete` to run the query using the 
              :ref:`autocomplete-ref` operator.

           #. Modify the default settings under the data type as shown 
              below:

              .. list-table:: 
                 :header-rows: 1
                 :widths: 20 80
   
                 * - UI Field Name 
                   - Configuration

                 * - :guilabel:`Max Grams`
                   - ``15``

                 * - :guilabel:`Min Grams`
                   - ``2``

                 * - :guilabel:`Tokenization`
                   - :guilabel:`edgeGram`

                 * - :guilabel:`Fold Diacritics`
                   - :guilabel:`true`

              To learn more about these settings, see 
              :ref:`bson-data-types-autocomplete`.

        .. tab:: phrase
           :tabid: phrase

           i. Click :guilabel:`Add Data Type` and select   
              :guilabel:`String` to run the query using the 
              :ref:`phrase-ref` operator.

           #. Modify the default settings under the data type as shown 
              below:

              .. list-table:: 
                 :header-rows: 1
                 :widths: 20 80
   
                 * - UI Field Name 
                   - Configuration

                 * - :guilabel:`Index Analyzer`
                   - ``lucene.standard``

                 * - :guilabel:`Search Analyzer`
                   - ``lucene.standard``

                 * - :guilabel:`Index Options`
                   - :guilabel:`offsets`

                 * - :guilabel:`Store`
                   - :guilabel:`true`

                 * - :guilabel:`Ignore Above`
                   - -

                 * - :guilabel:`Norms`
                   - :guilabel:`include`

              To learn more about these settings, see 
              :ref:`bson-data-types-string`.

        .. tab:: regex
           :tabid: regex

           i. Click :guilabel:`Add Data Type` and select   
              :guilabel:`String` to run the query using the 
              :ref:`regex-ref` operator.

           #. Modify the default settings under the data type as shown 
              below:

              .. list-table:: 
                 :header-rows: 1
                 :widths: 20 80
   
                 * - UI Field Name 
                   - Configuration

                 * - :guilabel:`Index Analyzer`
                   - ``lucene.keyword``

                 * - :guilabel:`Search Analyzer`
                   - ``lucene.keyword``

                 * - :guilabel:`Index Options`
                   - :guilabel:`offsets`

                 * - :guilabel:`Store`
                   - :guilabel:`true`

                 * - :guilabel:`Ignore Above`
                   - -

                 * - :guilabel:`Norms`
                   - :guilabel:`include`

              To learn more about these settings, see 
              :ref:`bson-data-types-string`.

        .. tab:: wilcard
           :tabid: wildcard

           i. Click :guilabel:`Add Data Type` and select   
              :guilabel:`String` to run the query using the 
              :ref:`wildcard-ref` operator.

           #. Modify the default settings under the data type as shown 
              below:

              .. list-table:: 
                 :header-rows: 1
                 :widths: 20 80
   
                 * - UI Field Name 
                   - Configuration

                 * - :guilabel:`Index Analyzer`
                   - ``lucene.keyword``

                 * - :guilabel:`Search Analyzer`
                   - ``lucene.keyword``

                 * - :guilabel:`Index Options`
                   - :guilabel:`offsets`

                 * - :guilabel:`Store`
                   - :guilabel:`true`

                 * - :guilabel:`Ignore Above`
                   - -

                 * - :guilabel:`Norms`
                   - :guilabel:`include`

              To learn more about these settings, see 
              :ref:`bson-data-types-string`.

  #. Click :guilabel:`Save Changes`. 
  #. Click :guilabel:`Create Search Index`.

     .. note::

        The :guilabel:`You're All Set!` modal window appears to let you 
        know your index is building.

  #. Click the :guilabel:`Close` button.

  JSON Editor
  +++++++++++
  
  1. Replace the default index definition with the following example 
     index definition for the operator you intend to use for running 
     the query and click :guilabel:`Next`.

     .. tabs:: 

        .. tab:: autocomplete
           :tabid: autocomplete

           .. code-block:: json

              {
                "mappings": {
                  "dynamic": false,
                  "fields": {
                    "plot": [
                      {
                        "type": "autocomplete",
                        "tokenization": "edgeGram",
                        "minGrams": 2,
                        "maxGrams": 15,
                        "foldDiacritics": true
                      }
                    ]
                  }
                }
              }

        .. tab:: phrase
           :tabid: phrase

           .. code-block:: json

              {
                "mappings": {
                  "fields": {
                    "plot": {
                      "analyzer": "lucene.standard",
                      "type": "string"
                    }
                  }
                }
              }

        .. tab:: regex
           :tabid: regex

           .. code-block:: json

              {
                "mappings": {
                  "fields": {
                    "plot": {
                      "analyzer": "lucene.keyword",
                      "type": "string"
                    }
                  }
                }
              }

        .. tab:: wildcard
           :tabid: wildcard

           .. code-block:: json

              {
                "mappings": {
                  "fields": {
                    "plot": {
                      "analyzer": "lucene.keyword",
                      "type": "string"
                    }
                  }
                }
              }

  #. Click :guilabel:`Create Search Index`.

---
stepnum: 6
ref: wait-for-index-partial-match
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: wait-for-index

...
