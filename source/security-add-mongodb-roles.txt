.. _mongodb-roles:

==============================
Configure Custom MongoDB Roles
==============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can create custom MongoDB roles in |service| when the built-in
|service| :ref:`database user privileges <atlas-user-privileges>`
cannot describe your desired set of priveleges. Use this functionality
to create custom roles with a specific set of privileges to match
your exact needs for your environment.

.. note::

   If a :ref:`MonogDB user <mongodb-users>` is assigned a custom role,
   they cannot be assigned any other roles.

.. include:: /includes/fact-role-auditing.rst

.. important::

   |service| rolls back any role modifications not made through the UI
   or :doc:`API </reference/api/custom-roles>`. You must use the
   |service| UI or API to add, modify, or delete custom roles on
   |service| clusters.

.. _add-mongodb-roles:

Add Custom MongoDB Roles
------------------------

.. include:: /includes/steps/add-roles.rst

To add custom MongoDB roles through the |service| API, see
:doc:`/reference/api/custom-roles-create-a-role`.

Modify Custom MongoDB Roles
---------------------------

To modify existing custom MongoDB roles for an |service| project:

1. Navigate to the :guilabel:`Clusters` view.

#. Select the :guilabel:`Security` tab.

#. Click :guilabel:`MongoDB Roles`.

#. Click :guilabel:`Edit` for the role you want to modify. You can
   modify the following components of the role:

   - The :guilabel:`Actions or Roles` the role inherits.

   - The database(s) and collection(s) on which those actions and
     roles apply.

#. Click :guilabel:`Update Custom Role` to save the changes.

To modify existing custom MongoDB roles through the |service| API, see
:doc:`/reference/api/custom-roles-update-a-role`.

Delete Custom MongoDB Roles
---------------------------

To delete existing custom MongoDB roles for an |service| project:

1. Navigate to the :guilabel:`Clusters` view.

#. Select the :guilabel:`Security` tab.

#. Click :guilabel:`MongoDB Roles`.

#. Click :guilabel:`Delete` for the role you want to delete.

#. Click :guilabel:`Delete` in the dialog to confirm deletion.

To delete existing custom MongoDB roles through the |service| API, see
:doc:`/reference/api/custom-roles-delete-a-role`.

Condsiderations
~~~~~~~~~~~~~~~

You cannot delete a role in the following scenarios:

- When deleting the role would leave one or more child roles with no
  parent roles or actions.

- When deleting the role would leave one or more
  :ref:`MongoDB users <mongodb-users>` with no roles.
