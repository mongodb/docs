.. _mcli-config-command:

===============
mongocli config
===============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. _mcli-config-command-desc:

Description
-----------

The ``config`` command configures the {+mcli+} to access MongoDB
services, including |service-fullname|, |cloud|, and |mms-full|. The
command groups the settings for accessing the service into a named profile.

When you run the command, it prompts you for the following:

.. list-table::
   :widths: 30 40 30
   :header-rows: 1

   * - Setting
     - Description
     - Necessity

   * - ``Public API Key`` & ``Private API Key``
     - Public and Private API key for programmatic access to your
       project using the {+mcli+}. For more information on generating
       these keys, see:
      
       - :atlas:`Configure Atlas API Access </configure-api-access>`
       - :cloudmgr:`Configure Cloud Manager Public API Access
         </tutorial/configure-public-api-access>`
       - :opsmgr:`Configure Ops Manager Public API Access
         </tutorial/configure-public-api-access>`
       
     - Required.

   * - ``Project ID``
     - ID of your project.
     - Optional.
   
   * - ``Ops Manager Base URL``
     - URL of the |onprem| instance.
     - Required for |onprem| access.

{+mcli+} saves these settings as a profile in the ``mongocli.toml``
configuration file. 

If the ``$XDG_CONFIG_HOME`` environment variable is
not set, this file is located in the ``$HOME/.config``
directory. If the ``$XDG_CONFIG_HOME`` environment variable is set, the
``mongocli.toml`` file is in the directory specified in
``$XDG_CONFIG_HOME``. You can then use this profile to access the
service through the {+mcli+}. To learn more about configuring a profile,
see :ref:`mcli-config-file`.

.. _mcli-config-command-syntax:

Syntax
------

.. code-block:: text
   :copyable: false

   mongocli config 
        [ --profile|-P <profile-name> ]
        [ --service cloud|cloud-manager|ops-manager ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-config-command-options:

Options
-------
.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10 

   * - Option 
     - Type
     - Description
     - Required?

   * - ``--profile``, ``-P``
     - string
     - Name for the profile where the access information is saved. 
       If this is omitted, the access information is saved as the 
       ``default`` profile.
     - no

   * - ``--service``
     - string
     - MongoDB service for which you are configuring {+mcli+} access. 
       Value can be:

       - ``cloud`` - for |service|
       - ``cloud-manager`` - for |cloud-short|
       - ``ops-manager`` - for |mms|

       If this is omitted, defaults to ``cloud`` for |service|.
     - no

.. _mcli-config-command-output:

Output 
~~~~~~

The command does not print any output to the terminal. To verify that 
the command was successful, you can look for the profile in the 
``mongocli.toml`` file. If the command returns errors, see 
:ref:`Troubleshooting <troubleshooting>` for recommended solutions.

.. _mcli-config-command-examples:

Examples
--------

The following examples use the ``mongocli config`` command to:

1. Create a profile for accessing a service.

2. Save the access information for the service under that profile. 

.. tabs::

   .. tab:: Atlas
      :tabid: atlas

      The following commands show different ways to create a profile for
      accessing |service|.

      **Example 1** 
      
      The following command saves the access keys for
      |service| in the ``default`` profile.

      .. code-block:: text
         :copyable: false
   
         mongocli config
         Public API Key: abcdefgh
         Private API Key: [? for help]
         ************************************
         Project ID [optional]: 7ehf04abc10defb66c7d1234c

      **Example 2** 
      
      The following command creates a custom profile 
      named ``egAtlasProfile`` for accessing |service|.

      .. code-block:: text
         :copyable: false
   
         mongocli config --profile egAtlasProfile
         Public API Key: abcdefgh
         Private API Key: [? for help]
         ************************************
         Project ID [optional]: 7ehf04abc10defb66c7d1234c

   .. tab:: Cloud Manager
      :tabid: cloud-manager

      **Example 1**

      The following command saves the access keys for
      |cloud-short| in the ``default`` profile.

      .. code-block:: text
         :copyable: false
   
         mongocli config --service cloud-manager
         Public API Key: abcdefgh
         Private API Key: [? for help]
         ************************************
         Project ID [optional]: 7ehf04abc10defb66c7d1234c

      **Example 2** 
      
      The following command creates a custom profile 
      named ``egCMProfile`` for accessing |service|.

      .. code-block:: text
         :copyable: false
   
         mongocli config --service cloud-manager --profile egCMProfile
         Public API Key: abcdefgh
         Private API Key: [? for help]
         ************************************
         Project ID [optional]: 7ehf04abc10defb66c7d1234c

   .. tab:: Ops Manager 
      :tabid: ops-manager

      **Example 1**

      The following command saves the access keys for
      |mms| in the ``default`` profile.

      .. code-block:: text
         :copyable: false
   
         mongocli config --service ops-manager
         Ops Manager Base URL: http://om-svc.mongodb.svc.cluster.local:8080
         Public API Key: abcdefgh
         Private API Key: [? for help]
         ************************************
         Project ID [optional]: 7ehf04abc10defb66c7d1234c

      **Example 2**

      The following command creates a custom profile 
      named ``egOMprofile`` for accessing |mms|. 

      .. code-block:: text
         :copyable: false
   
         mongocli config --service ops-manager --profile egOMprofile
         Ops Manager Base URL: http://om-svc.mongodb.svc.cluster.local:8080
         Public API Key: abcdefgh
         Private API Key: [? for help]
         ************************************
         Project ID [optional]: 7ehf04abc10defb66c7d1234c
