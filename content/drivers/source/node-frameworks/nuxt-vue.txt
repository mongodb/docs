.. _node-nuxt-vue-integration:

===================================
Integrate MongoDB with Nuxt and Vue
===================================

.. facet::
    :name: genre
    :values: tutorial

.. meta::
    :keywords: nuxt, vue, webapp, full-stack, code example
    :description: Build a complete Nuxt and Vue application that connects to MongoDB. Learn how to integrate MongoDB with Vue components and use Nuxt server routes.

.. contents:: On this page
    :local:
    :backlinks: none
    :depth: 2
    :class: singlecol

Overview
--------

This tutorial guides you through building a Nuxt application that uses Vue and integrates
with MongoDB.  Nuxt is a Vue framework that provides
file-based routing, server-side rendering, and built-in API routes through its
Nitro server engine. Nuxt combined with Vue allows you to build complete
applications without a separate back-end server.

The application in this tutorial contains the following layers:

- **Database layer**: MongoDB provides data storage and retrieval
- **Server layer**: Nuxt server routes handle API logic and database interactions
- **Presentation layer**: Vue implements the user interface with reactive data binding

Why Use MongoDB with Nuxt and Vue?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Nuxt builds on Vue to provide a full-stack framework with a Node.js runtime for 
server routes, making it a natural fit for the MongoDB Node.js driver. You can 
connect to MongoDB directly from your Nuxt server routes or server-side 
utilities and return documents to your Vue components without 
maintaining a separate back-end service or API layer.

MongoDB's flexible document structure maps easily to JavaScript objects. 
As a result, you can work seamlessly with MongoDB data in your Vue components, 
whether you are using the Options API or the Composition API. The documents you 
fetch from MongoDB can be passed straight into your components and templates, 
reducing the need for complex data transformation or an additional 
object-relational mapping (ORM) layer.

Nuxt's server-side rendering (SSR) and data-fetching utilities let you query 
MongoDB on the server before rendering pages. This lets you hydrate your 
Vue components with ready-to-use data, improving perceived performance and 
SEO for data-driven applications. 

.. _node-nuxt-vue-qs-tutorial:

Quick Start Tutorial
--------------------

This tutorial shows you how to build a web application by using 
Nuxt and Vue. The application accesses sample restaurant data, queries
the data, and displays the results on a locally hosted site. The tutorial
also includes instructions on connecting to a MongoDB cluster hosted
on MongoDB Atlas and accessing and displaying data from your database.

.. tip::

    If you prefer to connect to MongoDB by using the Node.js driver without
    Nuxt, see the :driver:`Get Started with the Node.js Driver </node/current/get-started/>`
    guide.

.. _node-nuxt-vue-setup:

Set Up Your Project
~~~~~~~~~~~~~~~~~~~

Follow the steps in this section to install the project dependencies,
create an Atlas cluster, and set up the application directories.

.. procedure::
    :style: connected

    .. step:: Verify the prerequisites

        To create the Quick Start application, install the following software
        in your development environment:

        .. list-table::
            :header-rows: 1

           * - Prerequisite
             - Notes

           * - `Node.js <https://nodejs.org/>`__
             - Use version 20 or later.

           * - Code editor
             - This tutorial uses `Visual Studio Code <https://code.visualstudio.com/>`__, but you can use the editor
               of your choice.

           * - Terminal app and shell 
             - For macOS or Linux users, use Terminal or a
               similar app. For Windows users, use PowerShell.          

    .. step:: Create a MongoDB Atlas cluster

        MongoDB Atlas is a fully managed cloud database service that hosts your
        MongoDB deployments. If you do not have a MongoDB deployment, you can create a MongoDB
        cluster for free (no credit card required) by completing the
        `MongoDB Get Started <https://www.mongodb.com/docs/get-started/?language=nodejs>`__
        tutorial.

        .. tip::

            Ensure that the ``sample_restaurants`` dataset is loaded into your cluster.
            This tutorial queries data from that dataset. To learn how to load the
            ``sample_restaurants`` dataset into your cluster, see the `MongoDB Get Started 
            <https://www.mongodb.com/docs/get-started/?language=nodejs>`__ tutorial.
            

        To connect to your MongoDB cluster, you must use a **connection URI**. To
        learn how to retrieve your connection URI, see the `Add your connection string
        <https://www.mongodb.com/docs/get-started/?language=nodejs#add-your-connection-string>`__
        section of the MongoDB Get Started tutorial.

        .. tip::

            Save your MongoDB Atlas connection string in a secure location. You will
            add it to your ``.env`` file in a later step.

    .. step:: Install Nuxt and Vue

        Use the official Nuxt CLI to initialize a new Nuxt project with Vue.
        Open your terminal and navigate to your desired project directory.
    
        Run the initialization command:

        .. code-block:: bash

            npm create nuxt@latest 

        Configuration Prompts
        ^^^^^^^^^^^^^^^^^^^^^

        The CLI prompts you to configure your project. 
        Use the following responses:

        #. **Prompt:** Need to install the following packages:
           create-nuxt@latest-number. Ok to proceed?

           **Response:** Type ``y`` and press Enter.

        #. **Prompt:** Which template would you like to use? 

           **Response:** Select ``minimal - Minimal setup for Nuxt 4 (recommended)``.

        #. **Prompt:** Where would you like to create your project?

           **Response:** Press ``Enter`` to accept the default directory or
           type a different path.

        #. **Prompt:** Which package manager would you like to use? 

           **Response:** Select ``npm``.

        #. **Prompt:** Initialize git repository?

           **Response:** Select ``Yes`` or ``No`` based on your preference.

        #. **Prompt:** Would you like to install any of the official
           modules?
           
           **Response:** Select ``No``.

    .. step:: Install dependencies

        Navigate to your project directory and install the MongoDB driver, 
        Lucide icons, Tailwind, and related dependencies by running the 
        following commands:

        .. code-block:: bash

            npm install mongodb lucide-vue-next
            npm install -D @types/node @nuxtjs/tailwindcss

        You can safely ignore any warnings about deprecated packages from the
        Tailwind installation.

.. _node_nuxt-vue_configure-the-backend:

Configure the Back End
~~~~~~~~~~~~~~~~~~~~~~

After setting up the project structure, follow the steps in this section to set up 
the back end.

.. procedure::
    :style: connected

    .. step:: Configure your environment variable

        Create a ``.env`` file at the root of your project to securely store your
        connection URI by running the following command in your project root:

        .. code-block:: bash

            touch .env

        Open the ``.env`` file and add your connection URI:

        .. code-block:: bash

            MONGODB_URI=<Your Connection URI>

        .. note::

            Replace ``<Your Connection URI>`` with the connection URI you 
            received from MongoDB Atlas.

    .. step:: Update your Nuxt configuration

        Open the ``nuxt.config.ts`` file in your project root and replace its
        contents with the following code to load environment variables
        and configure the Tailwind CSS module:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/nuxt.config.ts
            :caption: nuxt.config.ts
            :language: typescript

        The ``nuxt.config.ts`` file loads environment variables from the
        ``.env`` file and configures Tailwind support for styling your Vue 
        components.

    .. step:: Create a database connection

            Run the following commands in your project root to create a utility file
            to hold the MongoDB connection logic:

            .. code-block:: bash

                mkdir -p server/utils
                touch server/utils/mongodb.ts

            Open the ``server/utils/mongodb.ts`` file and add the following code:

            .. literalinclude:: /includes/node-frameworks/nuxt-vue/mongodb.ts
                :caption: server/utils/mongodb.ts
                :language: typescript

            This code creates a reusable MongoDB client that connects to your
            Atlas cluster by using the connection URI stored in your environment
            variable. The client connects to the ``sample_restaurants`` database,
            which contains information about restaurants around New York City. 
            
    .. step:: Create restaurant route

        Nuxt server routes handle API requests and interact with the database.
        Run the following commands in your project root to create a server
        route for fetching restaurant data:

        .. code-block:: bash

            mkdir -p server/api/restaurants
            touch server/api/restaurants/index.get.ts

        Open the ``server/api/restaurants/index.get.ts`` 
        file and add the following code:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/index.get.ts
            :caption: server/api/restaurants/index.get.ts
            :language: typescript            
    
        This file defines a server route that queries the ``restaurants``
        collection. It retrieves the first 50 restaurant documents and returns
        them as a JSON response.

    .. step:: Create filtered restaurant route

        Run the following command in your project root to create the 
        new route file:

        .. code-block:: bash

            touch server/api/restaurants/browse.get.ts

        Open the ``server/api/restaurants/browse.get.ts`` file
        and add the following code:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/browse.get.ts
            :caption: server/api/restaurants/browse.get.ts
            :language: typescript

        This file defines a server route that queries the ``sample_restaurants``
        database for restaurants in ``Queens`` whose names contain the word
        ``Moon`` and returns the matching documents as a JSON response.

.. _node_nuxt-vue_configure-the-frontend:

Configure the Front End
~~~~~~~~~~~~~~~~~~~~~~~

After setting up the back end, follow the steps in this section to set up
the presentation layer for your application.

.. procedure::
    :style: connected

    .. step:: Create a main.css file

        Run the following command in your project root to create a main CSS
        file for global styles:

        .. code-block:: bash

            mkdir -p app/assets/css
            touch app/assets/css/main.css

        Open the ``app/assets/css/main.css`` file and add the following code:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/main.css
            :caption: app/assets/css/main.css
            :language: css

            This file imports Tailwind CSS directives that generate utility 
            classes for styling your application. Tailwind provides a 
            comprehensive set of pre-built classes for layout, spacing, 
            colors, and typography without requiring custom CSS.

    .. step:: Create restaurant list component

        Run the following commands in your project root to create a Vue
        component for displaying restaurant data:

        .. code-block:: bash

            mkdir -p app/components
            touch app/components/RestaurantList.vue

        Open the ``app/components/RestaurantList.vue`` file and add the following code:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/RestaurantList.vue
            :caption: app/components/RestaurantList.vue
            :language: vue

        This Vue component fetches restaurant data from your Nuxt server route 
        and displays it in a responsive grid layout. It dynamically adapts the 
        API endpoint and page content based on the current route, showing 
        either all restaurants or filtered results.

    .. step:: Create the navbar component

        Run the following command in your project root to create a Vue
        component for the navigation bar:

        .. code-block:: bash

            touch app/components/Navbar.vue

        Open the ``app/components/Navbar.vue`` file and add the following code:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/Navbar.vue
            :caption: app/components/Navbar.vue
            :language: vue

        This Vue component renders the navbar above the restaurant results, 
        and contains the :guilabel:`All Restaurants` 
        and :guilabel:`Filtered Restaurants` links. These allow you to navigate 
        between the routes.

    .. step:: Create the index page
        
        Run the following command in your project root to create an index page
        for the application:

        .. code-block:: bash

            mkdir -p app/pages
            touch app/pages/index.vue

        Open the ``app/pages/index.vue`` file and add the following code:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/index.vue
            :caption: app/pages/index.vue
            :language: vue

        This file displays the results from the ``index.get.ts`` server route 
        by using the ``RestaurantList`` and ``Navbar`` components.

    .. step:: Create the filtered restaurants page

        Run the following command in your project root to create a new
        Vue page for displaying filtered restaurant data:

        .. code-block:: bash

            touch app/pages/browse.vue

        Open the ``app/pages/browse.vue`` file and add the following code:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/browse.vue
            :caption: app/pages/browse.vue
            :language: vue

        This file displays the results of a filtered query on the
        ``sample_restaurants`` database that returns all restaurants in
        ``Queens`` with names that contain the word ``Moon``. It also uses
        the ``RestaurantList`` and ``Navbar`` components to construct the page.

    .. step:: Update the app.vue file

        Open the ``app/App.vue`` file and replace its contents with the
        following code to connect the components:

        .. literalinclude:: /includes/node-frameworks/nuxt-vue/app.vue
            :caption: app/app.vue
            :language: vue

    .. step:: Verify your file structure
            
            Before continuing, ensure your file tree closely matches the structure below.
            You can safely ignore any additional project files.

            .. code-block:: text
                :copyable: false

                your-project-directory/
                ├── .env <-- Environment variable file
                ├── app/
                │   ├── app.vue <-- Main application component
                │   ├── assets/
                │   │   └── css/
                │   │       └── main.css <-- Tailwind config
                │   ├── components/
                │   │   ├── Navbar.vue <-- All restaurants and filtered restaurants links
                │   │   └── RestaurantList.vue <-- Container for restaurant data
                │   └── pages/
                │       ├── browse.vue <-- Filtered restaurants page
                │       └── index.vue <-- All restaurants page
                ├── server/
                │   ├── api/
                │   │   └── restaurants/
                │   │       ├── browse.get.ts <-- Filtered restaurants route
                │   │       └── index.get.ts <-- All restaurants route
                │   └── utils/
                │       └── mongodb.ts <-- MongoDB connection utility
                ├── nuxt.config.ts <-- Nuxt configuration file
                └── package.json

.. _node_nuxt-vue_run-your-application:

Run Your Application
~~~~~~~~~~~~~~~~~~~~

Perform the following steps to start the server and view the rendered 
restaurant data.

.. procedure::
    :style: connected
    
    .. step:: Start the server

        Run the following command in your project root to start the development server:

        .. code-block::  bash

            npm run dev

        If successful, the command outputs the following information in the terminal:

        .. code-block:: text
            :copyable: false                                                                  
             
            Nuxt 4.2.2 (with Nitro 2.13.1, Vite 7.3.1 and Vue 3.5.27)
            
            Local:    http://localhost:3000/
            Network:  use --host to expose

            Using default Tailwind CSS file                             
            DevTools: press Shift + Option + D in the browser (v3.1.1)                  

            Vite client built in 22ms                                                   
            Vite server built in 19ms                                                    
            Nuxt Nitro server built in 247ms                                       
            Vite server warmed up in 0ms                                                 
            Vite client warmed up in 1ms                                                
            Connected to MongoDB Atlas                     

    .. step:: View the application 

        Open ``http://localhost:3000/`` in your browser. The initial landing page 
        displays the first 50 restaurants in the ``sample_restaurants`` database.

        .. figure:: /figures/nuxt-landing.png
            :alt: The landing app that displays the first 50 restaurants in the sample_restaurants database.
            
    .. step:: View the filtered results

        Click the :guilabel:`Filtered Restaurants` link in the navigation bar
        to view the filtered restaurant results. The page displays all restaurants
        in ``Queens`` with names that contain the word ``Moon``.

        .. figure:: /figures/nuxt-filtered.png
            :alt: The filtered restaurants page that displays all restaurants in Queens with names that contain the word Moon.

Congratulations on completing the Quick Start tutorial!

After you complete these steps, you have a Nuxt and Vue application that connects
to your MongoDB deployment, runs queries on sample restaurant data, and renders the 
results in your browser.

Additional Resources
--------------------

To learn more about using MongoDB, Nuxt, and Vue, view the following resources:

- `Nuxt <https://nuxt.com/docs/getting-started/introduction>`__ documentation
- `Vue <https://vuejs.org/guide/introduction.html>`__ documentation
- :driver:`Node.js driver </node/current/>` documentation