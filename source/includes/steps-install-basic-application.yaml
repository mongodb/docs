title: "Download the |onprem| package."
stepnum: 1
ref: application-package-download
content: |
  On **server 1**, download the latest version of the |onprem|
  package by issuing ``curl -OL`` with the URL for the latest version. If
  the **server 1** does not have Internet access, download the package to
  another server and ``scp`` it to **server 1**.

  To download the |onprem| package:

  a. In a browser, go to `http://www.mongodb.com/download <http://www.mongodb.com/download>`_.

  b. Submit the subscription form.

  c. On the :guilabel:`MongoDB Enterprise Downloads` page, scroll to the :guilabel:`MongoDB Ops Manager` section and click the :guilabel:`here` link.

  d. On the :guilabel:`Ops Manager Download` page, acknowledge the recommendation to contact MongoDB for production installs.

  e. On the :guilabel:`MongoDB Ops Manager Downloads` page, copy the link address of the "Monitoring, Automation and Core" :guilabel:`RPM` link.

  f. Open a system prompt.

  g. Download the |onprem| package by issuing a ``curl`` command that uses the copied link address:

     .. code-block:: none

        curl -OL <link-address-for-ops-manager-rpm>

     The downloaded package is named ``mongodb-mms-<version>.x86_64.rpm``,
     where ``<version>`` is replaced by the version number.

---
title: "Install the |onprem| package on both **server 1** and **server 2**."
stepnum: 2
ref: application-package-install
pre: |
  Issue ``rpm --install`` with root privileges and specify the name of the
  downloaded package:
action:
  language: sh
  code: |
    sudo rpm --install <downloaded-package>
---
title: "Configure the |onprem|."
stepnum: 3
ref: mms-application-configure
pre: |
  On **server 1**, open ``/opt/mongodb/mms/conf/conf-mms.properties`` with
  root privileges and set values for the options described in this step. For
  detailed information on each option, see the :doc:`/reference/configuration`
  page.
action:
  - pre: |
      Set :setting:`mms.centralUrl` as
      follows, where ``<ip_address>`` is the IP address of the server running
      |onprem|.
    language: cfg
    code: |
      mms.centralUrl=http://<ip_address>:8080
  - pre: |
      Set the following :ref:`email-address-settings` as appropriate. Each may
      be the same or different.
    language: cfg
    code: |
      mms.fromEmailAddr=<email_address>
      mms.replyToEmailAddr=<email_address>
      mms.adminFromEmailAddr=<email_address>
      mms.adminEmailAddr=<email_address>
      mms.bounceEmailAddr=<email_address>
  - pre: |
      Set the :setting:`mongo.mongoUri` option to the servers and ports
      hosting the |application| Database. For example:
    language: cfg
    code: |
      mongo.mongoUri=mongodb://mongodb1.example.net:27017,mongodb2.example.net:27017,mongodb3.example.net:27017
  - pre: |
      **If, and only if,** your automated MongoDB deployments will not
      have access to the internet, set :ref:`automation-versions-settings`.
      You also must configure |onprem| for access to MongoDB binaries, as
      described in :doc:`/tutorial/configure-local-mode`.
    language: cfg
    code: |
      automation.versions.source=<mode>
      automation.versions.directory=<directory-that-stores-MongoDB-binaries>
---
title: "Start |onprem|."
stepnum: 4
ref: application-start
pre: |
  Issue the following command:
action:
  language: sh
  code: |
    sudo service mongodb-mms start
---
stepnum: 5
level: 4
source:
  file: steps-source-install-onprem.yaml
  ref: home-page
---
title: "Configure |onprem|."
stepnum: 6
level: 4
ref: configure-app
content: |
  |onprem| presents several configuration pages. For each page, enter
  information as appropriate and click :guilabel:`Continue`. When
  configuration is complete, |onprem| opens the :guilabel:`Deployment`
  page.
---
title: "Copy the ``gen.key`` file from the **server 1** to **server 2**."
stepnum: 7
level: 4
ref: sync-genkey
pre: |
  |onprem| requires an identical :ref:`gen-key` file be stored on both
  servers running |onprem| and uses the file to encrypt data at rest in
  the |application| Database and Backup Database.

  Use ``scp`` to copy the ``gen.key`` file from the ``/etc/mongodb-mms/``
  directory on **server2** to the ``/etc/mongodb-mms/`` directory on
  **server2**. You must copy the ``gen.key`` file before starting |onprem|
  on **server2**.
---
title: "Configure the Backup Database."
stepnum: 8
level: 4
source:
  file: steps-source-install-onprem.yaml
  ref: configure-backup-database-uri
...
