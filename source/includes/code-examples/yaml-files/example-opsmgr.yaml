START-secure-appdb-full
---
apiVersion: mongodb.com/v1
kind: MongoDBOpsManager
metadata:
  name: om-appdb-tls-enabled
spec:
  replicas: 1
  version: "4.2.6"
  adminCredentials: ops-manager-admin-secret
  configuration:
    mms.fromEmailAddr: admin@example.com
    mms.security.allowCORS: "false"
  security:
    tls:
      ca: "opsmgr-ca" # Optional. Name of the ConfigMap file
                      # containing the certicate authority that
                      # signs the certificates that the Ops Manager
                      # resource uses.
      secretRef:
        name: "opsmgr" # Optional. Name of the secret for the
                       # Ops Manager custom  resource.
  applicationDatabase:
    members: 3
    version: "4.2.11-ent"
      security:
        tls:
          ca: "appdb-ca" # Optional. Name of the ConfigMap file
                         # containing the certicate authority that
                         # signs the certificates used by the
                         # application database.
          secretRef:
            prefix: "appdb" # Optional. The ``<prefix>`` of the
                            # application database secret's name that
                            # contains your MongoDB deployment's TLS
                            # certificates. If you omit the prefix, this
                            # setting defaults to the value of
                            # metadata.name of the Ops Manager custom resource.
...
END-secure-appdb-full
