.. _mcli-om-server-usage-capture-command:

========================================
mongocli ops-manager serverUsage capture
========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``serverUsage capture`` command generates a snapshot of the usage 
of all deployments in the projects and organizations associated with 
your profile. This snapshot includes the current information for each 
|mongod| and |mongos| process:

- memory statistics
- date
- organization
- project
- |ipaddr|
- |iana| port

You can also retrieve this information using the |mms| :opsmgr:`UI 
</admin/general/mongodb-usage-page/>` or :opsmgr:`API 
</reference/api/usage/generate-daily-usage-snapshot/>`.

.. _om-server-usage-capture-syntax:

Syntax 
------

.. code-block:: text

   mongocli ops-manager|om serverUsage capture

.. include:: /includes/fact-command-line-help.rst

.. _om-server-usage-capture-options:

Options
-------

.. list-table:: 
   :header-rows: 1
   :widths: 20 10 60 10 

   * - Option 
     - Type 
     - Description 
     - Required?

   * - ``--profile``, ``-P`` 
     - string 
     - Name of the profile where your credentials are saved.

       If omitted, uses the {+default-profile+}. To learn more about 
       creating a profile, see :ref:`mcli-configure`.

     - no

.. _om-server-usage-download-output:

Output
------

If the command succeeds, it returns the message ``Snapshot captured.`` 
If the command returns errors, see :ref:`Troubleshooting 
<troubleshooting>` for recommended solutions.

For more information, see the :opsmgr:`Ops Manager API </reference/api/usage/generate-daily-usage-snapshot/>`.

Example
-------

The following command generates a snapshot.

.. code-block:: sh

   mongocli om serverUsage capture

The previous command prints the following to the terminal.

.. code-block:: sh
   :copyable: false

   Snapshot captured.
