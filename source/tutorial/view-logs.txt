======================
View and Retrieve Logs
======================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

|mms| collects log information for both MongoDB processes and its agents. For
MongoDB processes, you can access both real-time logs and on-disk logs.

- The MongoDB logs provide the diagnostic logging information for your
  :manual:`mongod </reference/program/mongod>` and 
  :manual:`mongos </reference/program/mongos>` processes.
- The Agent logs provide insight into the behavior of your |mms| agents.

MongoDB Real-Time Logs
----------------------

The :term:`Monitoring Agent` issues the :manual:`getLog
</reference/command/getLog>` command with every monitoring ping. This command
collects log entries from RAM cache of each MongoDB process.

|mms| enables real-time log collection by default. You can disable log
collection for either all MongoDB processes in |a-mms| project or for
individual MongoDB processes. If you disable log collection, |mms| continues
to display previously collected log entries.

View MongoDB Real-Time Logs
+++++++++++++++++++++++++++

.. include:: /includes/extracts/admonition-pii-log-role.rst

.. include:: /includes/steps/view-host-logs-from-buffer.rst

Enable or Disable Log Collection for a Deployment
+++++++++++++++++++++++++++++++++++++++++++++++++

.. include:: /includes/steps/enable-host-logs.rst

Enable or Disable Log Collection for the Project
++++++++++++++++++++++++++++++++++++++++++++++++

.. include:: /includes/steps/enable-host-logs-group.rst

MongoDB On-Disk Logs
--------------------

|mms| collects on-disk logs even if the MongoDB instance is not running.
The {+aagent+} collects the logs from the location you 
specified in the MongoDB ``systemLog.path`` 
:manual:`configuration option </reference/configuration-options>`. The 
MongoDB on-disk logs are a subset of the real-time logs and therefore 
less verbose.

You can configure log rotation for the on-disk logs. |mms| rotates logs by
default.

.. only:: onprem

   View MongoDB On-Disk Logs
   +++++++++++++++++++++++++

   .. include:: /includes/extracts/admonition-pii-log-role.rst

   .. include:: /includes/steps/log-request.rst

Configure Log Rotation
++++++++++++++++++++++

.. include:: /includes/steps/manage-host-logs-on-disk.rst

.. _agent-logs:

Agent Logs
----------

|mms| collects logs for all your {+aagent+}s, Monitoring Agents, and
Backup Agents. 

View Agent Logs
+++++++++++++++

.. include:: /includes/extracts/admonition-pii-log-role.rst

.. include:: /includes/steps/view-agent-logs.rst

Configure Agent Log Rotation
++++++++++++++++++++++++++++

If you are using :ref:`Automation<automation>` to manage your cluster, 
use the following procedure to configure rotation of the agent log files.

.. note::

   If you are not using Automation, see the following documentation for
   information about how to manually configure logging settings in the 
   agent configuration files:

   * :ref:`Monitoring Agent Logging Settings <monitoring-agent-logging-settings>`	

   * :ref:`Backup Agent Logging Settings <backup-logging-settings>`

.. include:: /includes/steps/manage-agent-logs-on-disk.rst
