===========================
Manage Alert Configurations
===========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

.. include:: /includes/extracts/manage-alert-configurations-overview.rst

Default Alert Configurations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

|mms| creates the following alert configurations for a project
automatically upon creation of the project:

- :alert:`User joined the project`

.. only:: cloud

   - :alert:`Host is exposed to the public Internet`

- :alert:`Host's SSL certificate will expire within 30 days`

- :alert:`Monitoring Agent is down`

If you enable Backup, |mms| creates the following alert configurations
for the project, if they do not already exist:

- :alert:`Backup oplog is behind`

- :alert:`Backup requires a resync`

- :alert:`Cluster is missing an active mongos`

.. only:: cloud

   If you enter a payment method, |mms| creates the following alert configuration:

   - :alert:`Credit card is about to expire`

.. _settings-for-mms-alert-notifications:

Default Settings for Notification Options
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Project administrators can configure default settings for the following
notification options:

- PagerDuty

- Flowdock

- HipChat

- Slack

- DataDog

- Webhook

To configure default settings for one of the above notification
options, click :guilabel:`Settings`, then
:guilabel:`Project Settings`. Locate the notification option and enter
the default values.

|mms| will fill in the default values automatically when a user
selects that option when creating an alert configuration. If the key,
token, or |url| that is used to send the notification becomes invalid,
|mms| will send an email to the project owner and will eventually
remove the key, token, or |url|.

Considerations
--------------

SMS Delivery
~~~~~~~~~~~~

Many factors may affect alert delivery, including do not call lists,
caps for messages sent or delivered, delivery time of day, and message
caching.

Check with your telephone service contract for the costs associated
with receiving text messages.

If you choose SMS, |mms| sends alert text messages to all users in the
project who have filled in their mobile numbers for their accounts.

Alert Intervals
~~~~~~~~~~~~~~~

You can create multiple alert configurations with different
frequencies. The minimum frequency for an alert is 5 minutes. 

The time between re-notifications increases by the frequency amount
every alert cycle up to a maximum of 24 hours. For example, if the
frequency amount is 5 minutes, and the alert condition is first
triggered at 9am, subsequent alerts occur at 9:05am, 9:15am, 9:30am,
etc.

You can set the time to elapse before |mms| sends an alert after an
alert condition occurs. This helps eliminate false positives.

.. _create-alert-configuration:

Create a New Alert Configuration
--------------------------------

When you create a new alert configuration you have the option of using
an existing configuration as a template.

.. include:: /includes/steps/alert-configuration-create.rst

Modify an Alert Configuration
-----------------------------

Each alert configuration has a distribution list, a frequency for
sending the alert, and a waiting period after an alert state triggers
before sending the first alert. The minimum frequency for sending an
alert is 5 minutes.

.. include:: /includes/steps/alert-configuration-edit.rst

Delete an Alert Configuration
-----------------------------

If you delete an alert configuration that has open alerts, |mms|
cancels the open alerts whether or not they have been acknowledged and
sends no further notifications.

.. include:: /includes/steps/alert-configuration-delete.rst

Disable or Enable an Alert Configuration
----------------------------------------

When you disable an alert configuration, |mms| cancels active alerts
related to the disabled configuration. The configuration remains
visible but grayed-out and can be later re-enabled. If you need to
disable an alert only for a period of time, you can alternatively
:ref:`suspend alerts <suspend-alerts-during-maintenance-window>`.

To disable or enable an alert configuration:

.. include:: /includes/steps/alert-configuration-disable-enable.rst

View the History of Changes to an Alert Configuration
-----------------------------------------------------

.. include:: /includes/steps/alert-configuration-history.rst
