=======================================
Add Existing MongoDB Instances to |mms|
=======================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

|mms| provides a wizard for adding your existing MongoDB instances to
monitoring and management. The wizard prompts you to install an Automation
Agent if none exists, and then prompts you to identify the :term:`cluster
<sharded cluster>`, the :term:`replica set`, or the :term:`standalone` to add. You
can choose to add the instance to :ref:`Monitoring
<monitoring-functional-overview>` or to both :ref:`Monitoring
<monitoring-functional-overview>` and :ref:`Automation
<automation>`.

Considerations
--------------

Unique Names
~~~~~~~~~~~~

Instances must have unique names within the group.

.. include:: /includes/important-unique-names-deployment-items.rst

Preferred Hostnames
~~~~~~~~~~~~~~~~~~~

If the MongoDB instance is accessible only by specific hostname or IP
address, or if you need to specify the hostname to use for servers with
multiple aliases, set up a preferred hostname. For details, see the
:guilabel:`Preferred Hostnames` setting in :ref:`group-settings-page`.

Authentication
~~~~~~~~~~~~~~

- When adding to Monitoring:
    If your MongoDB instance requires authentication, you must
    provide the necessary credentials for monitoring when adding the
    instance to |mms|. For information on configuring authentication,
    see :doc:`/tutorial/edit-host-authentication-credentials`.

- When adding to Automation:
    If the |mms| group has MongoDB authentication settings enabled for
    its instances, the MongoDB instance to import must support the
    group's authentication mechanism.

    If either the MongoDB instance requires authentication or
    the |mms| group has authentication settings enabled, you must add
    an automation user with the appropriate roles to the MongoDB
    instance to perform the import. If the |mms| group has
    authentication settings enabled, add the |mms| group's automation
    user to the MongoDB instance. See
    :ref:`add-existing-mongodb-prerequisites`.

.. _automation-updated-security-settings:

Automation and Updated Security Settings Upon Import
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/fact-imported-users-to-automation.rst

.. _add-existing-mongodb-prerequisites:

Prerequisites
-------------

.. important::

   The following prerequisite applies only when adding your instance to
   Automation and if that MongoDB instance uses Username/Password 
   (``MONGODB-CR`` or ``SCRAM-SHA-1``) authentication. If your MongoDB
   instance does not use that authentication method, you can advance to the
   :ref:`add-existing-mongodb-process`.

.. include:: /includes/prerequisite-for-adding-existing-deployment-to-automation.rst

.. _add-existing-mongodb-process:

Add an Existing MongoDB Instance
--------------------------------

.. include:: /includes/steps/add-existing-mongodb-processes.rst
