.. index:: hosts-tab

============
Manage Hosts
============

.. default-domain:: mongodb

.. _creating-host-aliases:
.. index:: aliases
   single: host aliases

Create Host Aliases
-------------------

You can create aliases, or labels, for the hosts you monitor with MMS. These aliases
are arbitrary and are useful if your machines have existing hostnames that do
not sufficiently describe the system in the context of MMS.

In most cases, hosts are automatically aliased during auto-discovery.

To set an alias for a host:

1. Click the :guilabel:`Hosts`, :guilabel:`Mongos`, or :guilabel:`Configs`
   tabs.

#. To the right of any Host, click the gear icon in the far right column of the
   hosts table. Select :guilabel:`Edit Host`.

#. The :guilabel:`Edit Host` interface appears. Click the :guilabel:`Host Label` tab.

#. Type the host alias and click the :guilabel:`Submit` button. Port numbers are not
   appended to host aliases.

.. note::

   When you add or update a Host Label value, all previous hostname aliases are
   reset.

.. index:: removing hosts
.. index:: procedure; removing hosts
.. _removing-hosts:

Remove Hosts
------------

MMS cannot ignore hosts added in the discovery process. To delete a host from
the MMS dashboard, click the gear icon on the far right of the host entry in
the :guilabel:`Hosts`, :guilabel:`Mongos`, or :guilabel:`Configs` pages and
select :guilabel:`Remove Host`.

To add monitoring for a host you have deleted from MMS, you must add the host
manually using the :guilabel:`+Add Host` button at the top of thepage.

For more about monitoring hosts, see :doc:`Monitoring Hosts with MMS
</tutorial/add-hosts-to-monitoring>` and :doc:`Manage Monitored Hosts
</tutorial/manage-hosts>`.

.. index:: database profiling
.. _db-profiling-section:

Profile Databases
~~~~~~~~~~~~~~~~~

|monitoring| can collect data from MongoDB's profiler to provide statistics
about performance and database operations. A link at the bottom of the Host
Statistics page that displays the profile levels.

Be aware of these issues:

- Profile data can include sensitive information, including the content of
  database queries. Ensure that exposing this data to |monitoring| is consistent
  with your information security practices.

- The profiler can consume resources which may adversely affect MongoDB
  performance. Consider the implications before enabling profiling.

To allow |monitoring| to collect profile data for a specific host:

1. Click the :guilabel:`Hosts`, :guilabel:`Mongos`, or :guilabel:`Configs`
   tabs.

#. To the right of any Host, click the gear icon in the far right column of the
   hosts table. Select :guilabel:`Edit Host`.

#. The :guilabel:`Edit Host` interface appears. Click the :guilabel:`Profiling` tab.

#. Click the :guilabel:`On button` to enable transmission to MMS of database
   profile statistics.

#. Use the mongo shell to modify the ``setProfilingLevel`` command. This starts
   database profiling. See the `database profiler
   <http://www.mongodb.org/display/DOCS/Database+Profiler>`_ documentation for
   instructions for using the profiler.

.. note::

   The Monitoring agent attempts to minimize its effect on the
   monitored systems. If resource intensive operations, like polling
   profile data, begins to impact the performance of the database,
   |monitoring| will throttle the frequency that it collects data. See
   :ref:`db-stats-warning` for more information about the agent's
   throttling process.

   When enabled, |monitoring| samples profiling data from monitored
   instances: the agent only sends the most recent 20 entries from last
   minute.

When profiling is on, all configuration changes made in the MMS console can
take up to 2 minutes to propagate to the agent and another minute before
profiling data appears in the MMS interface.

If you have profiling data, and wish to delete it from the system,
there is a button on the bottom of the Profile Data tab, that says
Delete Profile Data. When you click on this button, the MMS Console
raises a confirmation dialogue. When you confirm, |monitoring| will
begin removing stored profile data from this server's record.

.. note::

   If |monitoring| is storing a large amount of profile data for your
   instance, the removal process will not be instantaneous.

.. index:: host labels

Host Labels
~~~~~~~~~~~

You can label hosts to narrow the list of hosts in the MMS display. This helps
if you monitor a large number of hosts and want to access a more limited set of
hosts. Hosts may belong to none, one, or multiple labels.

To add or edit a host label:

1. Click the :guilabel:`Hosts`, :guilabel:`Mongos`, or :guilabel:`Configs`
   tabs.

#. Click the :guilabel:`all hosts` link directly above the :guilabel:`Last
   Ping` column heading.

#. Select :guilabel:`Edit Labels` from the drop down lists. The :guilabel:`Host
   Labels` interface appears.

#. To edit or delete an existing host label, click the pencil icon or trash icon.

#. To add a new host label, type the name and click the :guilabel:`Add Label`
   button.

To add or tag a host with a label:

1. Click the :guilabel:`Hosts`, :guilabel:`Mongos`, or :guilabel:`Configs`
   tabs.

#. To the right of any Host, click the gear icon in the far right column of the
   hosts table. Select :guilabel:`Edit Host`.

#. The :guilabel:`Edit Host` interface appears. Click the :guilabel:`Host
   Labels` tab.

#. Click to select one or more labels to assign to the host.

To display hosts by their host label:

1. Click the :guilabel:`Hosts`, :guilabel:`Mongos`, or :guilabel:`Configs`
   tabs.

#. Click the :guilabel:`all hosts` link directly above the :guilabel:`Last
   Ping` column heading.

#. Select the appropriate host label. The list of hosts will display only hosts
   tagged with the selected label.
