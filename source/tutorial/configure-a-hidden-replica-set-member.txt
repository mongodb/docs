=====================================
Configure a Hidden Replica Set Member
=====================================

.. default-domain:: mongodb

Hidden members are part of a :term:`replica set` but cannot become
:term:`primary` and are invisible to client applications. Hidden members
do, however, vote in :ref:`elections <replica-set-elections>`. For a
detailed description of hidden members and their purposes, see
:doc:`/core/replica-set-hidden-member`.

Typically, hidden mode is used with the slaveDelay member option. In 
most other cases you do not need to make a node hidden -- for example 
if you simply want a member to never be primary, use priority:0 instead.

.. include:: /includes/fact-replica-set-sync-prefers-non-hidden.rst

To configure a secondary member as hidden, set its
:data:`~local.system.replset.members[n].priority` value to ``0`` and
set its :data:`~local.system.replset.members[n].hidden` value to
``true``
in its member configuration:

.. code-block:: javascript
   :emphasize-lines: 4-5

   {
     "_id" : <num>
     "host" : <hostname:port>,
     "priority" : 0,
     "hidden" : true
   }

Example
-------

The following example hides the secondary member currently at the index
``0`` in the :data:`~local.system.replset.members` array. To configure
a :term:`hidden member`, use the following sequence of operations in a
:program:`mongo` shell connected to the primary, specifying the member
to configure by its array index in the
:data:`~local.system.replset.members` array:

.. code-block:: javascript

   cfg = rs.conf()
   cfg.members[0].priority = 0
   cfg.members[0].hidden = true
   rs.reconfig(cfg)

After re-configuring the set, this secondary member has a priority of
``0`` so that it cannot become primary and is hidden. The other members
in the set will not advertise the hidden member in the
:dbcommand:`isMaster` or :method:`db.isMaster()` output.

.. include:: /includes/fact-rs-conf-array-index.rst

.. include:: /includes/warning-rs-reconfig.rst

.. versionchanged:: 2.0
   For :term:`sharded clusters <sharded cluster>` running with replica
   sets before 2.0, if you reconfigured a member as hidden, you *had*
   to restart :program:`mongos` to prevent queries from reaching the
   hidden member.

Related Documents
-----------------

- :ref:`Replica Set Reconfiguration <replica-set-reconfiguration-usage>`

- :doc:`/core/replica-set-elections`

- :ref:`Read Preference <replica-set-read-preference>`
