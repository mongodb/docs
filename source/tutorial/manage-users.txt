============
Manage Users
============

.. default-domain:: mongodb

.. index:: users

.. only:: saas

   You can manage the users that have access to your MMS groups, and
   also enables you to create and manage groups.

.. only:: hosted

   You can manage the users that have access to your |mms| groups, create
   and manage groups, and assign :doc:`roles </reference/user-roles>` to
   users to provide controlled access to the MMS application.

   There is no planned upgrade path from existing MMS user
   authentication to using LDAP. You will need to recreate users,
   groups, and roles manually with your LDAP service, as described in
   the :doc:`/tutorial/configure-for-ldap-authentication` document.

Add Users
---------

.. include:: /includes/steps/add-user.rst

.. only:: saas

   If the console finds a connected Jira account, MMS will automatically
   add the user to your Jira group and the MMS console.

   Users can also create accounts using the `account registration page
   <https://mms.mongodb.com/user/register/user>`_, or through Jira at
   `jira.mongodb.org <http://jira.mongodb.org/>`_.

   .. index:: users; propagation

   .. note::

      If you create an account in Jira or make any changes to that
      account from *within* Jira, it can take up to 30 minutes for that
      change to propagate to MMS. During this window you cannot add a
      user to a group in MMS. Also, passwords changed in Jira are subject
      to the same propagation delay for MMS accounts.

.. only:: hosted

   .. note::

      With MongoDB Management Service On Prem, user accounts and groups are
      independent from JIRA. This is in contrast to the `MongoDB Management Service
      <http://mms.mongodb.com>`_, which shares account
      and group information with the `MongoDB JIRA
      <http://jira.mongodb.org/>`_ instance.

   Users can create accounts using the account registration
   page of your MMS installation.

View Requests
-------------

To view requests, click the :guilabel:`Users` tab and then select the
:guilabel:`Requests` page. The :guilabel:`Requests` page lists pending
requests to join your group. Users can request access when they create
their MMS account, as on the registration page.

View Invitations
----------------

To view invitations, click the :guilabel:`Users` tab and then select the
:guilabel:`Invitations` page. The :guilabel:`Invitations` page lists
pending invitations to your group. When you invite a user, MMS then sends
an email to the prospective new user and lists the invitation until the
user accepts.

View Users
----------

To view users, click the :guilabel:`Users` tab and then select the
:guilabel:`Users` page. The :guilabel:`Users` page lists users who have
access to your MMS group, their roles, their time zones, and other
information.

Remove Users
------------

.. include:: /includes/steps/remove-user.rst

.. _assigning-roles-to-users:

Assigning Roles to Users
------------------------

You can assign :doc:`roles </reference/user-roles>` to users to limit the
actions they can perform and the data they can view. You **cannot** assign
your own roles.

.. only:: saas

   Upon successful login, the first user completes a welcome form to create the
   initial MMS group. This form includes assigning roles.

.. only:: hosted

   You can assign roles either through MMS or :ref:`through an LDAP server
   <assign-roles-with-ldap>`.

   Upon successful login, the first user completes a welcome form to create the
   initial MMS group. This form includes assigning roles. For LDAP
   authentication, the welcome form includes the ability to assign LDAP groups
   to the MMS group-level and global roles.

Required Permissions
~~~~~~~~~~~~~~~~~~~~

You must have either the :ref:`User Admin <user-admin-role>` role or
:ref:`Group Owner <group-owner-role>` role in a group to assign roles to
users in that group.

.. only:: hosted

   You must have either the :ref:`Global User Admin
   <global-user-admin-role>` role or :ref:`Global Owner
   <global-owner-role>` role to assign roles to any user in any group.

.. index:: users; roles

Assign a Role with MMS
~~~~~~~~~~~~~~~~~~~~~~

To assign roles with |mms|, go to the :guilabel:`Users` tab, then click the
:guilabel:`Users` page, and then click the pencil icon to the right of the
user. Click the appropriate checkboxes to assign roles.

You cannot change your own roles. You can view your roles, but |mms| does not
let you save changes to your own roles.

.. only:: hosted

   .. _assign-roles-with-ldap:

   Assign Roles with LDAP
   ~~~~~~~~~~~~~~~~~~~~~~

   First, :doc:`configure LDAP authentication </tutorial/configure-for-ldap-authentication>`.

   Next, create groups on your LDAP server for each of the available MMS
   group-level and global roles.

   To assign LDAP groups to MMS roles, click the Admin link at the top
   right of any MMS page, then click Monitoring, which displays the Groups
   page. Click the pencil
   icon at the far right of a group name. Edit the Roles interface by adding
   the appropriate LDAP group name to its corresponding MMS group name.

   Because MMS does not update role assignments stored in your LDAP server,
   assign roles by assigning users to groups in your LDAP server.

   Configure global roles in ``conf-mms.properties`` file.

   See :doc:`/tutorial/configure-for-ldap-authentication` for more details
   about LDAP integration with MMS.
