title: "Verify all clusters in your project use MongoDB 3.6 or later."
stepnum: 1
level: 4
ref: verify-clusters
content: |

  Call the :doc:`/reference/api/clusters-get-all` |api| endpoint to
  return all clusters and their MongoDB versions:

  .. example::

     .. code-block:: sh

        curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \
             --header "Accept: application/json" \
             --header "Content-Type: application/json" \
             --include \
             --request GET "https://cloud.mongodb.com/api/atlas/v1.0/groups/{GROUP-ID}/clusters?pretty=true"

     If successful, the response should include:

     .. code-block:: json

        {
          "results": [{
            ...
            "mongoDBMajorVersion": "4.2",
            "mongoDBVersion": "4.2.3",
            ...
          },{
            ...
            "mongoDBMajorVersion": "4.0",
            "mongoDBVersion": "4.0.14",
            ...       }
          ]
        }

  If all clusters return a ``"mongoDBMajorVersion"`` value of 3.6 or
  greater, you can continue. If need to upgrade, follow the
  :doc:`/tutorial/major-version-change` procedure or call the :doc:`/reference/api/clusters-modify-one` endpoint to upgrade.

---
title: "Update All Applications to Use Private IP for Peering Connection Strings."
stepnum: 2
level: 4
ref: update-applications
content: |

  Change any |url|\s in your applications that use your
  |service| clusters to use
  :ref:`Private IP for Peering connection strings <connstring-private>`.
---
title: "Disable Private IP Mode on Your Clusters."
stepnum: 3
level: 4
ref: curl-disable-private-ip
content: |

  Call the |api| endpoint to
  :doc:`Disable Private IP Mode </reference/api/set-private-ip-mode-for-project>`.

  .. example::

     Using ``curl``, you would invoke this command:

     .. code-block:: sh

        curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \
             --header "Accept: application/json" \
             --header "Content-Type: application/json" \
             --include \
             --request PATCH "https://cloud.mongodb.com/api/atlas/v1.0/groups/{GROUP-ID}/privateIpMode?pretty=true" \
             --data '
               {
                 "enabled" : false
               }'

     Change ``{GROUP-ID}`` to the
     :ref:`Project ID of your project <atlas-modify-project-settings>`.

     If successful, the response displays:

     .. code-block:: json
        :emphasize-lines: 2
        :linenos:

        {
          "enabled" : false
        }

...
