# YAML configuration for the DevDocs GitHub Code Example Copier
# See documentation at https://github.com/mongodb/code-example-tooling/tree/main/examples-copier/docs

source_repo: "10gen/docs-mongodb-internal"
source_branch: "main"

copy_rules:
  # Copy Atlas SDK Go examples from project-copy directory
  - name: "atlas-sdk-go-project-examples"
    source_pattern:
      type: "prefix"
      pattern: "content/code-examples/tested/go/atlas-sdk/project-copy/"
    targets:
      # Target: Architecture Center Go SDK artifact repo
      - repo: "mongodb/atlas-architecture-go-sdk"
        branch: "main"
        # Strip the source prefix and keep only the relative path from project-copy/
        path_transform: "${relative_path}"
        commit_strategy:
          # Create a PR and require review for changes
          type: "pull_request"
          pr_title: "Update Atlas SDK Go examples from ${source_repo} PR ${pr_number}"
          pr_body: |
            Automated update of Atlas SDK Go project examples
            
            **Source Details:**
            - Repository: ${source_repo}
            - Branch: ${source_branch}
            - Source PR: #${pr_number}
            - Commit: ${commit_sha}
            
            **Changes:**
            - Files updated: ${file_count}

          commit_message: "Update Atlas SDK Go examples from ${source_repo} PR #${pr_number}"
          auto_merge: false
        deprecation_check:
          enabled: true
          file: "deprecated_examples.json"
