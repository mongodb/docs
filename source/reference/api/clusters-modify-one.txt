.. _modify-one-cluster-ref:

================
Modify a Cluster
================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/styles/corrections.rst

.. include:: /includes/fact-projects-groups-synonyms.rst

.. note::

   This feature is not available for ``M0`` (Free Tier) clusters, and
   has limited functionality for ``M2`` and ``M5`` clusters. For more
   information, see :ref:`Atlas M0 (Free Tier), M2, and M5 Limitations
   <atlas-free-tier>`.

.. include:: /includes/api-requirements.rst

.. include:: /includes/api/base-api-uri.rst

Syntax
------

.. code-block:: http

   PATCH /groups/{GROUP-ID}/clusters/{CLUSTER-NAME}

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 15 10 10 65

   * - Path Parameter
     - Type
     - Necessity
     - Description

   * - ``GROUP-ID``

     - string

     - Required

     - Unique identifier for the :ref:`project <group-id>` containing
       the cluster.

   * - ``CLUSTER-NAME``

     - string

     - Required

     - Name of the cluster to modify.

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. important::

   If modifying any of the ``providerSettings`` or ``replicationSpec``
   values, you *must* specify the ``providerSettings.providerName``.
   For ``M2`` and ``M5`` clusters, you must also specify the
   ``providerSettings.backingProviderName``.

   You cannot modify a ``paused`` cluster other than to resume the
   cluster. Nor can you pause a cluster with pending changes.

   You do not need to provide all parameters when modifying a cluster,
   only the parameters you want to change and any parameters required
   to make that change.

.. include:: /includes/api/list-tables/modify-cluster-request-body.rst

Response Elements
-----------------

.. include:: /includes/list-table-cluster-http-response.rst

Example
-------

Request
~~~~~~~

.. tabs::

   tabs:
     - id: single-region
       name: Modify Single Region
       content: |

         .. literalinclude:: /includes/api/requests/modify-one-cluster-single-region.sh
            :language: shell
            :linenos:
            :emphasize-lines: 6-13

     - id: multi-region
       name: Modify Multi-Region
       content: |

         .. literalinclude:: /includes/api/requests/modify-one-cluster-multi-region.sh
            :language: shell
            :linenos:
            :emphasize-lines: 6-33

     - id: global
       name: Modify Global
       content: |

         .. literalinclude:: /includes/api/requests/modify-one-cluster-global.sh
            :language: shell
            :linenos:
            :emphasize-lines: 6-19

Response
~~~~~~~~

.. tabs::

   hidden: true

   tabs:
     - id: single-region
       name: Modify Single Region
       content: |

         .. literalinclude:: /includes/api/responses/modify-cluster-multi.json
            :language: json
            :linenos:
            :emphasize-lines: 39-40, 62, 64
            :copyable: false

     - id: multi-region
       name: Modify Multi-Region
       content: |

         .. literalinclude:: /includes/api/responses/modify-cluster-multi.json
            :language: json
            :linenos:
            :emphasize-lines: 46, 72, 89-109
            :copyable: false

     - id: global
       name: Modify Global
       content: |

         .. literalinclude:: /includes/api/responses/modify-cluster-global.json
            :language: json
            :linenos:
            :emphasize-lines: 74-87
            :copyable: false

.. _mod-cluster-considerations:

Considerations
--------------

.. include:: /includes/fact-cross-region-limits.rst
