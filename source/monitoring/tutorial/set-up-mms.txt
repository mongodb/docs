.. _tutorial-install-mms-agent:

============================
Install the Monitoring Agent
============================

Overview
--------

The MMS monitoring agent is a lightweight component that runs within your
infrastructure, connects to your MongoDB processes, collects data about the
state of your deployment, and then sends the data to the |monitoring| service
which processes and renders this data. The agent initiates all connections to
the |monitoring| service, and communications between the agent and the
|monitoring| service are encrypted. A single agent can collect data from
multiple MongoDB processes. Consider the following diagram of an example
deployment:

.. include:: /images/mms-deployment.rst

.. only:: hosted

   This tutorial will guide you through the steps necessary
   to install and deploy |monitoring| on your system. You must install
   the On-Prem Monitoring server itself before installing the
   monitoring agent.

.. only:: saas

   This tutorial will guide you through the steps necessary
   to install and deploy the Monitoring agent on your system.

See the :doc:`/monitoring/faq` page for additional information.

Considerations
--------------

You must configure the networking rules of your deployment so that:

- the Monitoring Agent can connect to all :program:`mongod` and
  :program:`mongos` instances that you want to monitor.

.. only:: saas

   - the Monitoring agent can connect to ``mms.mongodb.com`` on port 443
     (i.e. ``https``.)

.. only:: hosted

   - the Monitoring agent can connect to |monitoring| server on port 443
     (i.e. ``https``.)

The |monitoring| server does not make *any* outbound connections to the agents
or to MongoDB instances. If :ref:`Exposed DB Host Check is enabled,
<exposed-db-host-check>` the |monitoring| server will attempt to connect to
your servers occasionally as part of a vulnerability check.

Ensure all :program:`mongod` and :program:`mongos` instances are not
accessible to hosts outside your deployment.

Procedures
----------

Install Agent Without Kerberos or Network Authentication
++++++++++++++++++++++++++++++++++++++++++++++++++++++++

.. include:: /includes/steps/monitoring-install-go.rst

.. _legacy-agent-installation:

Install Agent With Kerberos or Network Authentication
+++++++++++++++++++++++++++++++++++++++++++++++++++++

Deployments that use Kerberos or network authentication should follow
these instructions to install the monitoring agent based on the operating
system, Python version, and other factors.

.. toctree::
   :titlesonly:

   Install on Red Hat </monitoring/tutorial/install-agent-centos-rhel>
   Install on Debian and Ubuntu </monitoring/tutorial/install-agent-debian-ubuntu>
   Install on Windows </monitoring/tutorial/install-agent-windows>
   Requirements for Python 2.4 </monitoring/tutorial/install-python-2.4-requirements>
   Production Deployments </monitoring/tutorial/deploy-mms-in-production>
   Install PyMongo C Extensions </monitoring/tutorial/install-pymongo>
   PyMongo Packaging </monitoring/tutorial/building-pymongo-packages-with-c>
