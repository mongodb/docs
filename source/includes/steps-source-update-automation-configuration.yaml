title: "Retrieve the automation configuration from |mms|."
stepnum: 0
level: 4
ref: check-automation-config
pre: |
  Use the :doc:`automationConfig </reference/api/automation-config>` resource
  to retrieve the configuration. Issue the following command, replacing:

  - ``<username>`` with your user name,

  - ``<apiKey>`` with your :doc:`API credentials
    </tutorial/configure-public-api-access>`,

  - ``<url>`` with the URL of |mms|, and 

  - ``<group_id>`` with the project ID from your :doc:`Project Settings
    <manage-project-settings>`:

action:
  language: none
  code: |
    curl -u "<username>:<apiKey>" "http://<url>/api/public/v1.0/groups/<group_id>/automationConfig" --digest -i
post: |
  Confirm that the ``version`` field of the retrieved :ref:`automation
  configuration <automation-configuration-sample-entity>` matches the
  ``version`` field in the :ref:`mms-cluster-config-backup.json
  <other-representations-automation-configuration>` file,
  which is found on any server running the Automation Agent.
---
title: "Edit the automation configuration."
stepnum: 0
level: 4
ref: open-for-editing
pre: |
  Refer to :doc:`/reference/cluster-configuration` for detailed descriptions of settings.
---
title: Send the updated automation configuration.
stepnum: 0
level: 4
ref: send-updated-configuration
pre: |
  Use the :doc:`automationConfig </reference/api/automation-config>` resource
  to send the updated automation configuration.

  Issue the following command, replacing ``<configuration>`` with path to the
  updated configuration document. Replace the username, API key, URL, and
  project ID as in previous steps.
action:
  language: none
  code: |
    curl -u "<username>:<apiKey>" -H "Content-Type: application/json" "http://<url>/api/public/v1.0/groups/<group_id>/automationConfig" --digest -i -X PUT --data @<configuration>
post: |
  Upon successful update of the configuration, the API returns the HTTP
  ``200 OK`` status code to indicate the request has succeeded.
---
title: Confirm successful update of the automation configuration.
stepnum: 0
level: 4
ref: confirm-update-of-config
pre: |
  Retrieve the automation configuration from |mms| and confirm it contains the
  changes. To retrieve the configuration, issue the following command,
  replacing username, API key, URL, and project ID as in previous steps.
action:
  language: none
  code: |
    curl -u "<username>:<apiKey>" "http://<url>/api/public/v1.0/groups/<group_id>/automationConfig" --digest -i
---
title: Check the deployment status to ensure goal state is reached.
stepnum: 0
level: 4
ref: check-deployment-status
pre: |
  Use the :doc:`automationStatus </reference/api/automation-status>` resource
  to retrieve the deployment status. Issue the following command, replacing
  username, API key, URL, and project ID as in previous steps.
action:
  language: none
  code: |
    curl -u "<username>:<apiKey>" "http://<url>/api/public/v1.0/groups/<group_id>/automationStatus" --digest -i
post: |
  Confirm that the values of all the ``lastGoalVersionAchieved`` fields in the
  ``processes`` array match the ``goalVersion`` field. For more information on
  deployment status, see :doc:`/reference/api/automation-status`.
...
