.. _manage-existing-data-sources:
.. _charts-modify-data-source:

============================
Manage Existing Data Sources
============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Users who are :data:`Owners <Owner>` of a data source can
modify certain properties of that data source. This page outlines the
modifications data source ``Owners`` can make.

.. _mod-data-source-alias:

Rename a Data Source
--------------------

By default, the name of a data source is its corresponding database
and collection name. A data source ``Owner`` can rename that
data source.

To rename a data source:

1. Navigate to your :ref:`Data Sources List <data-sources-view>`.

#. Hover over the desired data source's :guilabel:`Name` field.

#. Click the appearing :icon-fa5:`pencil-alt` icon.

#. Click the check mark to save the new name.

.. _data-source-embedding:

Modify External Sharing Settings
--------------------------------

A data source ``Owner`` grant others the ability to either:

- :ref:`Embed charts <embedding-charts>` to use the data source in
  external web pages.
- View charts when given a link to that chart.

To share a chart via embed or link, you must enable external sharing
both on the data source and the individual chart.

External sharing is disabled by default for all data sources. To enable
external sharing for a data source:

1. Navigate to your :ref:`Data Sources List <data-sources-view>`.

#. Click :icon-mms:`ellipsis` on the far right side of the desired data
   source.

#. Select :guilabel:`External Sharing Options` from the dropdown menu.

#. Toggle
   :guilabel:`Enable external sharing for charts that use this data source`
   to :guilabel:`On`.

#. Select either:

   a. :guilabel:`Authenticated Embedding Only`.

      Embedded charts require authentication through an
      :abbr:`SSO (Single Sign-On)` provider to be viewed. Authentication
      providers add an extra layer of security to your data.

      To learn how to configure an embedding authentication provider,
      see :doc:`/configure-auth-providers`.

      Users may view charts that use this data source on dashboards when they are logged into |charts|. They can't view the charts on dashboards shared via a public link.

   #. :guilabel:`Unauthenticated or Authenticated Access`.

      Embedded charts can be viewed either with or without
      authentication through an authentication provider. Though less
      difficult to implement, not configuring authentication for your
      embedded charts is less secure. Use this option only for charts
      that display non-sensitive data.

      - Embedded charts can render using both unauthenticated and
        authenticated requests.

      - Any charts using this data source can be viewed on
        :ref:`dashboards shared via a link <dashboard-access-link>`.

After enabling embedding for a data source, you can enable embedding
for individual charts which use that data source.

.. note::

   If you change the sharing option for a data source from
   :guilabel:`On` to :guilabel:`Off`, all embedded charts or charts in
   dashboards shared by links that use this data source stop
   rendering immediately.

.. _mod-data-source-permissions:

Modify Data Source Permissions
------------------------------

A data source ``Owner`` can modify :ref:`user permissions 
<permission-model>` on that data source. To modify user permissions:

1. Navigate to your :ref:`Data Sources List <data-sources-view>`.

#. Click the :guilabel:`Access` button in the :guilabel:`Permissions`
   column for the data source you want to modify permissions.

#. Perform the desired permission changes for the data source. Refer
   to the :ref:`Data Source Permissions <permission-model>` page for
   details on the permissions available and instructions on
   :ref:`setting the permissions <data-source-set-permissions>`.

#. Click :guilabel:`Apply Changes`.

.. _modify-data-source-read-preference:

Modify Data Source Read Preference
----------------------------------

A data source's read preference determines which :manual:`replica set 
member </core/replica-set-members>` the data source reads data from. A 
data source ``Owner`` can modify the read preference of a data source 
only if that data source is a collection on an |service| cluster. You 
can't modify the read preference of a data source if that data source 
is a collection in your |dl|. |adl| has a read preference of Nearest.

Read preference options are:

- :manual:`Secondary </core/replica-set-members#secondaries>`
- :atlas:`Analytics Node </faq#analytics-nodes-overview>`
- :manual:`Nearest </core/read-preference/#nearest>`
- :manual:`Primary </core/replica-set-members#replica-set-primary-member>`

If your Atlas cluster includes one or more
:atlas:`analytics nodes </faq/#analytics-nodes-overview>`, they are
the best choice for your data source read preference. Analytics nodes
provide :manual:`workload isolation </core/workload-isolation>` and
reduce strain on your cluster's data-bearing nodes.

.. important::

   Not all Atlas clusters include analytics nodes, and the
   :guilabel:`Analytics Node` option appears in the read preference
   selection UI whether analytics nodes are available or not. Consult
   your :atlas:`cluster configuration </scale-cluster/>` and ensure
   that your cluster has analytics nodes available before choosing
   :guilabel:`Analytics Node` for your data source's read preference.

   If you select :guilabel:`Analytics Node` for your data source's
   read preference when no analytics nodes are available, any charts
   which use the data source will produce an error the next time they
   read from the data source.

If your Atlas cluster does not have analytics nodes available, the next
best choice is :guilabel:`Secondary`. Reading from a secondary node
reduces strain on your primary node.

To modify the read preference for a data source:

1. Navigate to your :ref:`Data Sources List <data-sources-view>`.

#. Click the ellipsis (:guilabel:`...`) button on the right-hand side
   of the data source you want to modify.

#. Click :guilabel:`Edit Read Preference`.

#. Select your desired setting from the dropdown menu.

#. Click the :guilabel:`Save` button.

.. note::

   After changing a data source's read preference, it takes a few 
   minutes for the change to take effect. All data sources which read 
   from the same Atlas cluster will use the selected read preference 
   setting.

.. _charts-remove-data-source:

Delete a Data Source
--------------------

A data source ``Owner`` can delete that data source. To delete a data
source:

1. Navigate to your :ref:`Data Sources List <data-sources-view>`.

#. Click the ellipsis (:guilabel:`...`) button on the right-hand side
   of the data source you want to delete.

#. Click :guilabel:`Delete Data Source`.

#. Click :guilabel:`Delete Data Source` again in the dialog to confirm
   deletion.

.. important::

   |charts-short| displays a warning if the data source you
   attempt to delete is in use by at least one chart.
   Any charts using the deleted data source will need to be
   reconfigured using a different data source or deleted.
