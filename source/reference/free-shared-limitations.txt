.. _atlas-free-tier:

================================================
|service| M0 (Free Tier), M2, and M5 Limitations
================================================

.. default-domain:: mongodb

Configuration Limitations
-------------------------

The following table lists the configuration limitations of |service|
``M0`` Free Tier and ``M2/M5`` shared clusters:

.. list-table::
   :widths: 30 70
   :header-rows: 1
   :stub-columns: 1

   * - Configuration Option
     - Limitation

   * - Cloud Service Provider and Region
     - ``M0`` Free Tier clusters and ``M2/M5`` shared clusters are only
       deployable in a subset of regions on |aws|, |gcp|, and Azure.
       For more information on which cloud provider regions support
       free and shared tiers, see:

       - :ref:`Amazon Web Services (AWS) <amazon-aws>`
       - :ref:`Google Cloud Platform (GCP) <google-gcp>`
       - :ref:`Microsoft Azure <microsoft-azure>`

   * - MongoDB Version and Storage Engine
     - |service| locks the MongoDB version and storage engine for
       ``M0/M2/M5`` clusters to
       :guilabel:`MongoDB 4.2 with WiredTiger`.

       .. include:: /includes/admonitions/version-4.4-beta-shared-tier-exception.rst

   * - MongoDB Version Upgrade
     - You can't upgrade the MongoDB version that ``M0/M2/M5`` clusters
       run.

       |service| upgrades ``M0/M2/M5`` clusters to the
       newest MongoDB version after several patch versions become
       available for that version. To learn more about how MongoDB
       versions its software, see
       :manual:`MongoDB Versioning </reference/versioning>`.

   * - Cluster Tier
     - You must select the ``M0`` cluster tier to deploy a Free Tier
       cluster.

   * - Cluster Memory
     - You cannot configure memory for ``M0`` Free Tier or ``M2/M5``
       shared clusters.

   * - Cluster Storage
     - You cannot configure storage size for ``M0`` Free Tier or
       ``M2/M5`` shared clusters.

   * - Replication Factor
     - Replication Factor is set to ``3 Nodes`` and cannot be modified
       for ``M0`` Free Tier, or ``M2/M5`` shared clusters.

   * - Replica Set Tags
     - ``M0`` Free Tier, and ``M2/M5`` shared clusters are not
       configured with pre-defined
       :ref:`replica set tags <replica-set-tags>`.

   * - Do You Want A Sharded Cluster
     - You cannot deploy a ``M0`` Free Tier or ``M2/M5`` shared
       cluster as a Sharded Cluster.

   * - Do You Want To Enable Backup
     - You cannot enable backups on ``M0`` Free Tier clusters.

       .. admonition:: Backup Alternative: `mongodump`

          .. include:: /includes/fact-mongodump-for-backup.rst

   * - Test Failovers
     - You cannot perform primary failover testing on ``M0`` Free Tier
       or ``M2/M5`` shared clusters.

   * - Database Auditing
     - You cannot configure
       :doc:`database auditing </database-auditing>` on ``M0`` Free
       Tier or ``M2/M5`` shared clusters.

   * - Encryption at Rest using your Key Management
     - You cannot configure :ref:`security-kms-encryption` on
       ``M0`` Free Tier or ``M2/M5`` shared clusters.

   * - Network Peering Connections
     - You cannot configure :doc:`/security-vpc-peering` on
       ``M0`` Free Tier or ``M2/M5`` shared clusters.

   * - Access Tracking
     - You cannot view the database access history for ``M0`` Free
       Tier, or ``M2/M5`` shared clusters.

Operational Limitations
-----------------------

The following table lists the operational limitations of |service|
``M0`` Free Tier and ``M2/M5`` shared clusters:

.. list-table::
   :widths: 30 70
   :header-rows: 1
   :stub-columns: 1

   * - Configuration Option
     - Limitation

   * - :manual:`Aggregation </aggregation>`
     - |service| ``M0`` Free Tier clusters do not support the
       ``allowDiskUse`` option for the
       :manual:`aggregation command </reference/command/aggregate>`
       or its
       :manual:`helper method </reference/method/db.collection.aggregate>`.

       On Free Tier and shared clusters, aggregation fields that represent
       database and collection names (such as :manual:`$merge
       </reference/operator/aggregation/merge/>` into and
       :manual:`$out </reference/operator/aggregation/out/>` values) cannot
       accept :manual:`expressions
       </meta/aggregation-quick-reference/#aggregation-expressions>` as values.

   * - Throughput
     - Maximum operations:

       - ``M0``: 100 per second
       - ``M2``: 200 per second
       - ``M5``: 500 per second

   * - Query Utilization
     - The percentage of time that a query is running over any five
       minute period must remain under 100% on ``M0`` Free Tier and
       ``M2/M5`` shared clusters .

   * - Connections
     - ``M0`` Free Tier and ``M2/M5`` shared clusters are allowed a
       maximum of 500 connections.

   * - Data Transfer Limits

     - ``M0/M2/M5`` clusters limit the total data transferred into or
       out of the cluster in a rolling seven-day period. This varies by
       cluster tier as follows:

       - ``M0``: 10 GB in and 10 GB out per period

       - ``M2``: 20 GB in and 20 GB out per period

       - ``M5``: 50 GB in and 50 GB out per period

       |service| throttles the network speed of clusters which
       exceed the posted limits.

   * - JavaScript
     - ``M0`` Free Tier and ``M2/M5`` shared clusters do not support
       server-side JavaScript.

       .. example::

          :manual:`$where </reference/operator/query/where>` and
          :manual:`map-reduce </core/map-reduce>` are not supported.

   * - |api| Access
     - You cannot modify or configure an ``M0`` Free Tier cluster
       using the :doc:`/reference/api/clusters` |api| endpoint. A
       subset of |api| endpoints support ``M2`` and ``M5`` shared
       clusters.

   * - Number of Free Tier clusters
     - You can deploy at most *one* ``M0`` Free Tier cluster per
       |service| project.

   * - Database Commands
     - Certain database commands are unsupported or behavior
       differently in an ``M0`` Free Tier cluster. To learn more, see
       :doc:`Command Limitations in Free Tier Clusters </unsupported-commands>`.

       Please contact |service| support for any questions or comments
       related to restricted commands.

   * - |service| Monitoring
     - The :guilabel:`Metrics` view of an ``M0`` Free Tier or
       ``M2/M5`` shared cluster only displays the following metrics:

       - Connections
       - Logical Size
       - Network
       - Opscounter

       For more information on these metrics, see
       :ref:`Real Time Metrics <real-time-metrics-status-tab>`.

   * - |service| Alerts
     - ``M0/M2/M5`` clusters can only trigger alerts configured with
       one of the following
       :doc:`alert conditions </reference/alert-conditions>`:

       - Connections
       - Logical Size
       - Network
       - Opscounter

   * - Namespaces and Database Names
     - ``M0`` Free Tier and ``M2/M5`` shared cluster namespaces are
       limited to 95 bytes. Database names are limited to 38 bytes.

   * - Database and Collections
     - ``M0`` Free Tier and ``M2/M5`` shared clusters have a maximum
       of 100 databases and 500 collections total.

   * - Database Logs
     - ``M0`` Free Tier and ``M2/M5`` shared clusters do not provide
       downloadable logs.

   * - Cluster Persistance
     - |service| may deactivate idle ``M0`` Free Tier clusters as per
       the :website:`Terms of Service </cloud-terms-and-conditions>`.

   * - Auto-Expand Storage
     - ``M0`` Free Tier and ``M2/M5`` shared clusters do not provide
       automatically scaling storage.

   * - Performance Advisor
     - ``M0`` Free Tier and ``M2/M5`` shared clusters do not provide
       access to the :doc:`Performance Advisor </performance-advisor>`.

   * - Real-Time Performance Panel
     - ``M0`` Free Tier and ``M2/M5`` shared clusters do not provide
       access to the :doc:`Real-Time Performance Panel </real-time-performance-panel>`.

   * - Build Index with Rolling Build
     - ``M0`` Free Tier and ``M2/M5`` shared clusters do not provide
       the ability to :manual:`build indexes with a rolling build
       </tutorial/build-indexes-on-replica-sets/>`.

   * - Custom Roles
     - Changes to :doc:`custom roles </security-add-mongodb-roles>`
       make take up to 30 seconds to deploy in ``M0`` Free Tier and
       ``M2/M5`` shared clusters.
