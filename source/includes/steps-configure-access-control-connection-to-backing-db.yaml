title: "Open the ``conf-mms.properties`` file with elevated privileges."
level: 4
stepnum: 1
level: 4
ref: config-files
content: |

  Open the ``conf-mms.properties`` file in your preferred text editor
  with ``root`` (Linux) or :guilabel:`Administrator` (Windows)
  privileges.

  This file configures |onprem|'s connection to the
  :ref:`mms-application-database`.
---
title: "Configure |onprem| to connect to the |application| Database."
stepnum: 2
level: 4
ref: configure-application-access-control
content: |

  :setting:`mongo.mongoUri` contains the connection string used to
  access the :ref:`mms-application-database`.

  The :setting:`mongo.mongoUri` reference provides examples of the
  connection string format for each authentication mechanism and
  details the required permissions for the connecting user.

  For an |application| Database using Kerberos authentication, the
  :setting:`mongo.mongoUri` setting would resemble:

  .. code-block:: ini

     mongo.mongoUri=mongodb://username%40REALM.example.net@mydb1.example.net:
     40000/?authMechanism=GSSAPI
---
title: "*(Optional)* Configure any other authentication mechanism-specific settings."
stepnum: 3
level: 4
ref: configure-auth
content: |

  Edit the following settings in  ``conf-mms.properties``:

  .. tabs::

     tabs:
       - id: kerberos
         name: Kerberos
         content: |
         
           If you are using Kerberos authentication, you must
           :ref:`configure the Kerberos settings
           <configuration-kerberos-settings>`, as in the following:

           .. code-block:: ini

              jvm.java.security.krb5.kdc=kdc.example.com
              jvm.java.security.krb5.realm=EXAMPLE.COM
              mms.kerberos.principal=mms/mmsweb.example.com@EXAMPLE.COM
              mms.kerberos.keyTab=/path/to/mms.keytab

       - id: x509
         name: x.509
         content: |

           If you are using x.509 Client Certificate Authentication,
           you must also be connecting over |tls-ssl|. The next
           section, :ref:`configure-ssl-backing`, covers the |tls-ssl|
           configuration instructions.

---
title: "Restart all the |onprem| instances, including those with the Backup Daemon enabled."
stepnum: 4
level: 4
ref: restart-onprem-and-daemon
content: |

  If the |application| Database is running over SSL, proceed to the
  :ref:`SSL configuration tutorial <configure-ssl-backing>`.

  Restart |onprem| using the appropriate command for your platform:

  .. tabs::

     tabs:
       - id: linux-pkg
         name: DEB or RPM
         content: |
         
           .. code-block:: sh
         
              sudo service mongodb-mms restart
         
       - id: linux-tar
         name: Archive
         content: |

           .. code-block:: sh
         
              <install_dir>/bin/mongodb-mms restart

       - id: windows
         name: Windows
         content: |
         
           a. Click :guilabel:`Control Panel`.
         
           b. Click :guilabel:`System and Security`.
         
           c. Click :guilabel:`Administrative Tools`.
         
           d. Click :guilabel:`Services`.
         
           e. In the **Services** list, right-click on the
              :guilabel:`MongoDB Ops Manager HTTP Service` and click
              :guilabel:`Restart`.
         
           f. Optionally, in the **Services** list, right-click on the
              :guilabel:`MongoDB Backup Daemon Service` and click
              :guilabel:`Restart`.
...
