.. _pa-autopilot:

======================================
Autopilot Mode for Performance Advisor
======================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. admonition:: Early Access Feature
   :class: note

   Autopilot mode for Performance Advisor is currently only available as
   an Early Access feature. Only Early Access participants can enable
   autopilot mode. For more information on autopilot limitations, see
   :ref:`autopilot-limitations`.

Autopilot mode for Performance Advisor periodically checks for index
recommendations and automatically creates indexes deemed to have a high
impact on cluster performance.

.. _autopilot-limitations:

Autopilot Mode Availability
---------------------------

You can enable autopilot mode for your cluster if all of
the following criteria are met:

- You are enrolled in the Early Access program.

- Your cluster is running MongoDB 4.4.

- Your cluster is between tiers ``M10`` and ``M30`` (inclusive).

You cannot enable autopilot mode on sharded clusters.

How Autopilot Mode Creates Indexes
----------------------------------

Autopilot mode prioritizes creating indexes with the highest
:guilabel:`Impact` score. :guilabel:`Impact` is the estimated
performance improvement that the index would bring. To learn more about
the :guilabel:`Impact` score and how the Performance Advisor ranks
indexes, see :ref:`pa-index-ranking`.

Performance Advisor does not show individual index recommendations by
default. Instead, Performance Advisor shows the number of index
recommendations per impact level (high and medium). To view the
individual indexes that the autopilot would create, click
:guilabel:`View Recommendations`. Only high impact indexes are
created automatically.

Enable Autopilot Mode
---------------------

Autopilot mode is off by default. To enable autopilot mode:

1. Open :guilabel:`Performance Advisor`.

#. In the :guilabel:`Create Indexes` panel, toggle
   :guilabel:`Autopilot Mode` to on.

Alternatively, if you click :guilabel:`View Recommendations`, you can
enable autopilot mode from the individual recommendations view.

You can also enable autopilot mode via the |api| using the
:ref:`create-one-cluster-ref` and :ref:`modify-one-cluster-ref`
endpoints.

Once you enable autopilot mode, |service| immediately begins creating
high impact indexes if they are suggested.

Review Automatically Created Indexes
------------------------------------

|service| sends an email alert when an index is automatically created.
You can view automatically created indexes from the Data Explorer
:ref:`Indexes <data-explorer-indexes>` view. Data Explorer shows indexes
created by autopilot mode with the :guilabel:`Auto-Created` property.

Drop Automatically Created Indexes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can drop auto-created indexes as you would any other index. To drop
an auto-created index, click the :guilabel:`Drop Index` button. If you
drop an auto-created index, autopilot mode will not recreate that index.
However, that index may still appear as a recommendation in the
Performance Advisor.
