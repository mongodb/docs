==============================================
Configure Users and Groups with LDAP for |mms|
==============================================

.. default-domain:: mongodb

.. important::

   You must start with a fresh installation of the latest version of MMS.
   There is no method for converting an existing MMS deployment to use LDAP
   user management.

Overview
--------

You can configure MMS to use a Lightweight Directory Access Protocol (LDAP)
service to manage user authentication. Users log in using the standard MMS
interface. MMS synchronizes user name and email addresses in MMS user records
with the values in LDAP user records.

User Authentication
~~~~~~~~~~~~~~~~~~~

When a user logs in, MMS searches LDAP for a matching user. To perform the
search, MMS logs into LDAP as the "search" user, using the credentials
specified in the :setting:`mms.ldap.bindDn` and
:setting:`mms.ldap.bindPassword` settings in the :doc:`MMS configuration file
</reference/configuration>`.

MMS searches LDAP within the base distinguished name defined in the
:setting:`mms.ldap.user.baseDn` setting of the MMS configuration file and
matches the user according to the LDAP attribute defined in the
:setting:`mms.ldap.user.searchAttribute` setting. If a matching user is found,
MMS authenticates the supplied password against the LDAP password.

Access Control
~~~~~~~~~~~~~~

LDAP groups let you control access to MMS. You map LDAP groups to MMS roles
and assign the LDAP groups to the users who should have those roles.

To use LDAP groups effectively, :doc:`create additional MMS groups
</tutorial/create-group>` to control access to specific deployments in your
organization. For example, create separate MMS groups for development
environments and for production environments. Provide access to a deployment
by mapping an LDAP group to a role in the MMS group.

This tutorial describes how to map LDAP groups to global MMS roles and to
group-level MMS roles. You do the former through the :doc:`MMS configuration
file </reference/configuration>` and the latter through the MMS interface.

Global Owner Access
~~~~~~~~~~~~~~~~~~~

Your LDAP installation must include a group that you can assign to the
MMS :setting:`mms.ldap.global.role.owner` setting. The first user to log into MMS
with LDAP authentication must belong to this LDAP group. This user will also create
the initial MMS group.

For example, if LDAP has an ``admin`` group for use by MMS administrators, set
the :setting:`mms.ldap.global.role.owner` property to ``admin`` during the
appropriate step in the procedure below.

Prerequisites
-------------

The :ref:`MMS Application server <mms-application-package>` must be installed
and configured. You must either start with a new MMS installation or reset
your installation to a clean state. For assistance, contact your MongoDB
account manager.

The LDAP server must be installed, configured, and accessible to MMS.

Procedure
---------

.. include:: /includes/steps/configure-ldap-authentication.rst
