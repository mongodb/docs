.. _paid-tier-command-limitations:

=========================================
Unsupported Commands in ``M10+`` Clusters
=========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

|service| requires clients to authenticate to access an |service|
cluster. |service| provides a curated list of
:ref:`Database User Privileges <atlas-user-privileges>`.
These privileges provide access to a subset of MongoDB commands.

The following table lists the most common commands and shell methods
that database user privileges do not support. The
functionality provided by these commands are largely subsumed by
|service|, or are restricted to ensure cluster stability and
performance.

Replication
-----------

.. list-table::
   :widths: 40 60
   :header-rows: 1

   * - Commands
     - Shell Method

   * - :dbcommand:`applyOps`
     -

   * - :dbcommand:`replSetFreeze`
     - :method:`rs.freeze() <rs.freeze>`

   * - :dbcommand:`replSetInitiate`
     - :method:`rs.initiate() <rs.initiate>`

   * - :dbcommand:`replSetMaintenance`
     -

   * - :dbcommand:`replSetReconfig`
     - :method:`rs.reconfig() <rs.reconfig>`

   * - :dbcommand:`replSetResizeOplog`
     -

   * - :dbcommand:`replSetStepDown`
     - :method:`rs.stepDown() <rs.stepDown>`

   * - :dbcommand:`replSetSyncFrom`
     - :method:`rs.syncFrom() <rs.syncFrom>`

   * - ``resync``
     -

Sharding
--------

.. list-table::
   :widths: 40 60
   :header-rows: 1

   * - Commands
     - Shell Method

   * -
     - :method:`sh.disableBalancing() <sh.disableBalancing>`

   * -
     - :method:`sh.enableBalancing() <sh.enableBalancing>`

   * - :dbcommand:`mergeChunks`
     -

   * - :dbcommand:`removeShard`
     -

   * - :dbcommand:`refineCollectionShardKey` [1]_
     - 

.. [1] This command is not supported on :ref:`global write <global-writes-collections>` clusters only.

User and Role Management
------------------------

.. list-table::
   :widths: 40 60
   :header-rows: 1

   * - Commands
     - Shell Method

   * - :dbcommand:`createUser`
     - :method:`db.createUser() <db.createUser>`

   * - ``getUser`` [2]_
     - :method:`db.getUser() <db.getUser>` and
       :method:`db.getUsers() <db.getUsers>` [2]_

   * - :dbcommand:`dropUser`
     - :method:`db.dropUser() <db.dropUser>`

   * - :dbcommand:`grantRolesToUser`
     - :method:`db.grantRolesToUser() <db.grantRolesToUser>`

   * - :dbcommand:`revokeRolesFromUser`
     - :method:`db.revokeRolesFromUser() <db.revokeRolesFromUser>`

   * - :dbcommand:`updateUser`
     - :method:`db.updateUser() <db.updateUser>`

   * - :dbcommand:`createRole`
     - :method:`db.createRole() <db.createRole>`

   * - :dbcommand:`dropRole`
     - :method:`db.dropRole() <db.dropRole>`

   * - :dbcommand:`updateRole`
     - :method:`db.updateRole() <db.updateRole>`

.. [2] You can call ``getUser`` for your own user account.


Administrative
--------------

.. list-table::
   :widths: 40 60
   :header-rows: 1

   * - Commands
     - Shell Method

   * - :dbcommand:`setParameter`
     - :method:`db.setLogLevel() <db.setLogLevel>`

       Others that use :dbcommand:`setParameter`.

   * - :dbcommand:`logRotate`
     -

   * - :dbcommand:`shutdown`
     - :method:`db.shutdownServer() <db.shutdownServer>`

   * - ``eval``
     - :method:`db.eval() <db.eval>`

   * - :dbcommand:`fsync`
     - :method:`db.fsyncLock() <db.fsyncLock>`

   * - :dbcommand:`setFeatureCompatibilityVersion`
     -

Aggregation Pipeline
--------------------

.. include:: /includes/fact-planCacheStats-not-supported.rst

MongoDB 4.2+ Incompatibility
----------------------------

MongoDB versions 4.2 and later do not support the following commands 
and methods:

.. list-table::
   :widths: 40 60
   :header-rows: 1

   * - Commands
     - Shell Method

   * - ``parallelCollectionScan``
     -
   * - ``clone``
     - :method:`db.cloneDatabase() <db.cloneDatabase>`
   * - ``copydb``
     - :method:`db.copyDatabase() <db.copyDatabase>`


Contact Support
---------------

Please contact |service| support if your use case requires access
to a command not currently supported by the existing |service|
database user privileges.
