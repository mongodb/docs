title: "Specify path to trusted CA certificate."
stepnum: 1
ref: certificate
pre: |
  Configure the agent with the trusted CA certificate that signed the
  MongoDB instance's certificate.
post: |
  In the agent's install directory, edit the ``monitoring-agent.config``
  file and set the :bsetting:`sslTrustedServerCertificates` field to the path of a
  file containing one or more certificates in PEM format.

  By default, the agent connects to MongoDB instances using a trusted
  certificate. For testing purposes, you can set the
  :msetting:`sslRequireValidServerCertificates` setting to ``False`` to bypass
  this check. This configuration is **not** recommended for production use as
  it makes the connection insecure.

  For additional information on these settings, see
  :ref:`monitoring-agent-ssl-settings`.

## when steps.yaml gets the ability to do replacement text, this step
## should reuse text from step 1 in steps-backup-agent-configure-ssl.yaml
---
title: Activate SSL for the agent's connection to the MongoDB instance.
stepnum: 2
ref: activate
pre: |
  When you add hosts to monitor, or if modifying existing host,
  check :guilabel:`My deployment supports SSL for MongoDB connections`. 
post: |
  .. include:: /includes/fact-optional-monitoring-agent-global-ssl.rst
...
