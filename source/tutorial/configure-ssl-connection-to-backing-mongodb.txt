==========================================================
Configure the Connections to the Backing MongoDB Instances
==========================================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

If you set up your
:doc:`backing MongoDB instances </tutorial/prepare-backing-mongodb-instances>`
to use access control or to run over |tls-ssl|, then you must update
|onprem|'s configuration files with the necessary information for
accessing the MongoDB instances.

The ``conf-mms.properties`` file configures the connection from
|onprem| to the |application| database.

.. cond:: onprem

   .. include:: /includes/fact-no-support-for-scram-sha-256-on-backing-databases.rst

Prerequisites
-------------

This tutorial assumes you have:

- deployed the :ref:`mms-application-database`

- deployed :ref:`mms-backup-blockstore-database`

- configured both databases to use access control and/or |tls-ssl|. 

.. note::

   To learn how to deploy MongoDB with access control or to use
   |tls-ssl|, see :manual:`Security Concepts </core/security>` in the
   MongoDB manual.

Procedures
----------

.. _configure-auth-backing:

Configure |onprem| to Connect to Backing Databases with Access Control
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

|onprem| can authenticate with the Backing Databases using
username/password (``MONGODB-CR``/``SCRAM-SHA-1``) or |ldap| with the
MongoDB Community edition. The MongoDB Enterprise Edition adds
Kerberos and x.509 Client Certificate as authentication mechanisms.

If your |application| database uses access control, you must configure
|onprem| to be able to connect to the database.

.. include:: /includes/steps/configure-access-control-connection-to-backing-db.rst

.. _configure-ssl-backing:

Configure |tls-ssl| Connections to Backing Databases
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can configure the |application| database, blockstores, and Oplog
store to use |tls-ssl| using this procedure. All of these backing
databases must use the same |tls-ssl| settings and certificates.

.. include:: /includes/steps/configure-ssl-connection-to-backing-mongodb.rst
