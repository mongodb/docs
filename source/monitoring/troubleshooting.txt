===============
Troubleshooting
===============

The document provide troubleshooting advice for common issues
encountered installing the |monitoring| agent.  For answers to other
questions, see the:doc:`FAQ </monitoring/faq>`.

.. _troubleshooting:

.. index:: troubleshooting
   single: agent; troubleshooting

Install All Requirements
------------------------

Make sure that the system running the agent has ``pymongo``
installed. If your system runs a 2.4.x series Python, verify the
installation of other :ref:`requirements <mms-requirements>`.

To check and see if PyMongo is installed, use the following statement
in the Python interpreter:

.. code-block:: pycon

   >>> import pymongo

If this operation produces no error, PyMongo is installed.

Ensure Connectivity Between Agent and Monitored Hosts
-----------------------------------------------------

Ensure that the system running the agent can resolve and connect to the
MongoDB instances. To confirm, log into the system where the agent
is running and issue a command in the following form:

.. code-block:: sh

   mongo [hostname]:[port]

Replace ``[hostname]`` with the hostname and ``[port]`` with the
port that the database is listening on.

Ensure Connectivity Between Agent and MMS Server
------------------------------------------------

Verify that the Monitoring agent can connect on TCP port 443
(outbound) to the MMS server (i.e. "``mms.mongodb.com``".)

Allow Agent to Discover Hosts and Collect Initial Data
------------------------------------------------------

Allow the agent to run for 5-10 minutes to allow host discovery and initial
data collection.

Provide Correct Authentication Credentials
------------------------------------------

If your MongoDB instances run with authentication enabled, ensure that the
monitoring agent has these credentials. You can supply these credentials when
adding a host by specifying credentials in the "Add Host Interface," for every
host that has authentication enabled. You may also click on the "Edit" host
button (i.e. the gear icon) on the Hosts page in the MMS console to provide
credentials.

Check Agent Output or Log
-------------------------

If you continue to encounter problems, check the agent's output or
logs for errors.
