.. _backup-cloud-provider:

========================
Cloud Provider Snapshots
========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/fact-atlas-free-tier-limits.rst

.. important::

   :ref:`Azure <microsoft-azure>`-backed clusters only.

|service| cloud provider backup service takes full-copy snapshots
of data in your cluster and allows you to restore from those stored
snapshots.
   
|service| only supports cloud provider snapshots on  
:term:`replica set` clusters.

Enable Backup
-------------

You can enable backup during the 
:doc:`cluster creation </create-new-cluster>` or during the 
:doc:`modification of an existing cluster </scale-cluster>`. 
From the cluster configuration modal, toggle 
``Do you want to enable backup?`` to ``Yes`` and select the
:guilabel:`Cloud Provider Snapshots` card.

.. include:: /includes/fact-backup-method-selection.rst

.. warning::

   |service| only supports cloud provider backups for 
   :ref:`Azure <microsoft-azure>`-backed replica sets. 
   A project with cloud provider backups
   *cannot* provide snapshot backups of sharded clusters *or* clusters
   backed by other cloud service providers.

.. _cloud-provider-snapshot-storage-location:

Snapshot Storage Location
-------------------------

|service| cloud provider snapshots are stored in the same region as the
corresponding cluster. For multi-region clusters, snapshots are
stored in the cluster's preferred region.

|service| retains these snapshots based on the :ref:`retention policy
<cloud-provider-retention-policy>`.

.. _cloud-provider-backup-schedule:

Backup Schedule
---------------

|service| takes the first snapshot when you enable cloud provider
snapshots for a cluster, and takes subsequent snapshots of the cluster 
every 24 hours from that point in time.

.. _cloud-provider-retention-policy:

Retention Policy
----------------

|service| retains the last 3 snapshots for each cluster. If you disable 
backup for a cluster or terminate a cluster, |service| immediately 
deletes the backup snapshots for the cluster.
