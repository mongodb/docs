ref: fts-sort-date-speed-tutorial-step1
level: 4
stepnum: 1
inherit:
  file: steps-fts-tutorial-run-query.yaml
  ref: connect-to-database-deployment-fts
---
ref: fts-sort-date-speed-tutorial-step2
level: 4
stepnum: 2
inherit:
  file: steps-fts-tutorial-run-query.yaml
  ref: use-sample-mflix
---
ref: fts-sort-date-speed-tutorial-step3
level: 4
stepnum: 3
title: "Run an |fts| query against the indexed field and sort the results very fast."
content: |
  .. include:: /includes/extracts/fts-sort-date-for-speed-constant-desc.rst 

  .. include:: /includes/extracts/fts-sort-date-for-speed-stage.rst

  .. io-code-block::
     :copyable: true

     .. input::
        :language: js
        :linenos:

        db.movies.aggregate([
        {
          $search: {
            "compound": {
              "filter": [{
                "wildcard": {
                  "query": "Summer*",
                  "path": "title"
                }
              }],
              "must": [{
                "near": {
                  "pivot": 13149000000,
                  "score": {
                    "boost": {
                      "value": 100
                    }
                  },
                "path": "released",
                "origin": ISODate("2014-04-18T00:00:00.000+00:00")
                }
              }]
            }
          }
        },
        {
          $project: {
            "_id": 0, 
            "title": 1,
            "released": 1,
            "score": {
              "$meta": "searchScore"
            }
          }
        },
        {
          $limit: 5
        }])

     .. output::
        :language: json

        {
          title: 'Summer of Blood',
          released: ISODate("2014-04-17T00:00:00.000Z"),
          score: 99.34720611572266
        },
        {
          title: 'Summer in February',
          released: ISODate("2014-01-17T00:00:00.000Z"),
          score: 62.58031463623047
        },
        {
          title: 'Summertime',
          released: ISODate("2014-08-01T00:00:00.000Z"),
          score: 59.17375564575195
        },
        {
          title: 'Summer Nights',
          released: ISODate("2015-01-28T00:00:00.000Z"),
          score: 34.810577392578125
        },
        {
          title: 'Summer Games',
          released: ISODate("2012-02-08T00:00:00.000Z"),
          score: 15.98293399810791
        }
...
