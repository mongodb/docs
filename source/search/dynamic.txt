:template: guide

.. _guides-search-dynamic:

=====================
Build a Dynamic Index
=====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

.. short-description::

   Retrieve documents in MongoDB with full-text search.

In this guide, you will learn how to create a search index
for relevance-based search as an alternative to document-based search.

.. time:: 15

What You'll Need
----------------

- A MongoDB account. See :ref:`guides-create-atlas-account`.
- An Atlas cluster. See :ref:`guides-create-a-cluster`.
- Sample datasets :ref:`loaded into your cluster <guides-load-sample-data>`.

Procedure
---------

.. procedure::
   :style: normal

   .. include:: /includes/navigate_to_collections.rst

   .. include:: /includes/create_index_sample_sales.rst

   .. step:: Click :guilabel:`Create Search Index`. Wait for the 
      :guilabel:`Status` column to read :guilabel:`Active`.

      You now have a search index definition. This definition 
      recursively indexes fields of 
      :ref:`many common data types <bson-data-chart>` across indexed 
      documents.

   .. step:: Click on the name of your search index. In the
      left-hand menu of the :guilabel:`Index Overview`, click
      :guilabel:`Search Tester`.

   .. step:: Type ``notepad`` into the search bar, then click 
      :guilabel:`Search`. 
      
   .. step:: Review the results.

      Your results should include the fields listed in the following
      sample documents.

      .. code-block:: json

         SCORE: 0.20185701549053192
         salesDate: 2013-03-07T09:27:58.283+00:00
         items: Array
         storeLocation: "Austin"

         SCORE: 0.20185701549053192
         salesDate: 2013-05-05T19:03:06.358+00:00
         items: Array
         storeLocation: "London"

         SCORE: 0.20185701549053192
         salesDate: 2016-06-20T14:09:52.408+00:00
         items: Array
         storeLocation: "Denver"

      Each record also includes a :ref:`relevance score <scoring-ref>`.
      You can expand ``Array`` and ``Object`` fields to view their 
      contents by clicking on them.

   .. step:: Click :guilabel:`Edit Query Syntax`. The modal window
      displays the query sent through the {+fts+} API.

      When building applications using {+fts+}, you can use this 
      syntax to construct queries for programmatic execution.



Summary
-------

If you successfully completed the procedure in this guide, you have
created an Atlas Search index with dynamic field mappings and used it
to perform a relevance-based query against the 
``sample_supplies.sales`` collection. In the next guide, you will learn 
how to perform a refined search by creating an index with static field 
mappings.

.. guide-next::