===
FAQ
===

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Can I bring an existing MongoDB deployment into |service-fullname| for management?
----------------------------------------------------------------------------------

No. However, you can upload data from existing MongoDB deployment into
|service-fullname|.

- You can use the :doc:`Live Migrate </import/live-import>` feature
  in |service| to migrate from a source replica set to an |service|
  replica set cluster.

- You can use the :doc:`Live Migrate </import/live-import-sharded>`
  feature in |service| to migrate from a source sharded cluster to
  an |service| sharded cluster.

- You can use :binary:`~bin.mongomirror` to migrate data from an existing
  MongoDB replica set into |service-fullname|.

- You can use :binary:`mongodump <bin.mongodump>` and
  :binary:`mongorestore <bin.mongorestore>` to seed |service-fullname|
  clusters from an existing standalone, replica set, and sharded
  cluster .

For information, see :doc:`/import`.

You can also write scripts using official MongoDB supported drivers to
upload data.

Which versions of MongoDB does |service| use for the clusters?
--------------------------------------------------------------

.. include:: /includes/extracts/fact-mongodb-version.rst

Can I migrate between regions?
------------------------------

Yes. You can change one or more regions for a given cluster within the
original cloud service provider for that cluster. Using a rolling-migration
strategy for moving nodes from the original region to a new region, MongoDB
|service| preserves cluster availability.

.. admonition:: AWS Only
   :class: important
   
   Amazon Web Services (AWS) Virtual Private Cloud (VPC) peering connections
   are region-specific. Clusters utilizing an existing :abbr:`VPC (Virtual
   Private Cloud)` peering connections to an :abbr:`AWS (Amazon Web
   Services)` :abbr:`VPC (Virtual Private Cloud)` in a given :abbr:`AWS
   (Amazon Web Services)` region lose access to that peering connection if
   moved to a different :abbr:`AWS (Amazon Web Services)` region. :abbr:`AWS
   (Amazon Web Services)` does not support :abbr:`VPC (Virtual Private
   Cloud)` peering connections between different regions. See
   :doc:`/security-vpc-peering` for complete documentation.

If you need to migrate data between regions on different cloud service
providers, you can:

- :doc:`Perform live migration </import/live-import>`, or

- :doc:`Migrate using mongomirror </import/mongomirror>`, or

- :doc:`Seed the destination cluster using mongorestore </import/mongorestore>`, or

- :doc:`Restore a backup from the source cluster to the destination cluster </import/mongorestore>`.

.. seealso:: :ref:`import-strategies`

Do you support cross-region deployments?
----------------------------------------

Yes. You can specify additional regions for high availability or local reads
when :doc:`creating </create-new-cluster>` or :doc:`scaling </scale-cluster>`
a deployment.

|service| does *not* support cross-cloud service provider deployments.

What AWS Regions does |service| support?
----------------------------------------

|service| supports all AWS regions other than those in China and US GovCloud.
For more information, see :doc:`/reference/amazon-aws`.

.. _high-availability:

How does |service-fullname| deliver high availability?
------------------------------------------------------

|service| clusters use MongoDB's replication capability to deliver high
availability. All |service| clusters are either replica sets or sharded
clusters where each shard is a replica set. For complete documentation
on MongoDB replica sets and replication, see :manual:`Replication
</replication>`.

|service| uses a rolling upgrade strategy for executing maintenance
or infrastructure operations, such as applying security patches or
scaling up a |service| cluster. The rolling upgrade strategy ensures 
that the cluster can process reads and writes for the majority of the 
maintenance or infrastructure operation. During the rolling upgrade 
procedure:

- |service| applies the changes to each secondary node in the cluster.
- |service| directs the primary node to step down to the secondary state
  and trigger an election of a new primary.
- Once the cluster has a new primary, |service| applies the changes to
  the former primary node.

Applications must hold write operations while the cluster elects a new
primary. The cluster can continue to process 
:manual:`secondary read operations </core/read-preference>`
during this period. Elections on |service| clusters typically complete
within a few seconds. Factors such as network latency may extend the
time required for replica set elections to complete, which in turn
affects the amount of time your cluster may operate without a primary.
These factors are dependent on your particular cluster architecture.

.. include:: /includes/fact-retry-writes.rst

For ``M10+`` clusters, |service| provides a :doc:`Test Failover
</tutorial/test-failover>` feature for application developers to check
that their applications are designed to detect and react appropriately
to a replica set election. By designing applications that can seamlessly
handle a replica set election, developers no longer have to worry about
the underlying maintenance occurring on their clusters.

|service| maintenance operations include OS patches and maintenance
patches for the MongoDB database itself (e.g. v3.6.3 to v3.6.4).
Infrastructure operations include repair operations required to replace
faulty infrastructure, and scheduled infrastructure replacements
such as changing the cluster size.

Please contact |service| support if you would like help architecting your
application to use |service-fullname| with optimal availability.

How can I pay for |service-fullname| without a credit card?
-----------------------------------------------------------

For alternative ways of purchasing |service|, please `contact MongoDB
Inc. <https://www.mongodb.com/contact?jmp=docs>`_.

Can I specify my own VPC for my |service-fullname| project?
-----------------------------------------------------------

No. An |service| project, and its clusters, are associated with a
region-specific Virtual Private Cloud (VPC).

|service| creates a :abbr:`VPC (Virtual Private Cloud)` when you deploy the
first ``M10+`` dedicated paid cluster to a given provider and region. For
multi-region clusters, |service| creates one :abbr:`VPC (Virtual Private
Cloud)` per region if there is not already a :abbr:`VPC (Virtual Private
Cloud)` for that region.

*(AWS deployments only)* |service| also creates
a :abbr:`VPC (Virtual Private Cloud)` when you create a :doc:`VPC peering
connection </security-vpc-peering>` to an :abbr:`AWS (Amazon Web Services)`
:abbr:`VPC (Virtual Private Cloud)`. |service| creates the :abbr:`VPC (Virtual
Private Cloud)` in the same region as the peered :abbr:`VPC (Virtual Private
Cloud)`.

To use a different VPC (e.g. on the customer's own cloud infrastructure
accounts), you would need to use MongoDB Cloud Manager or
Ops Manager.

|service-fullname| or Cloud Manager?
------------------------------------

|service| offers a managed experience, but without all of the
configurations and infrastructure flexibility that some MongoDB users
require. For example, |service| only supports MongoDB versions 3.4, 3.6,
and 4.0 with the WiredTiger storage engine. You also cannot
customize the replica set or sharded cluster configuration.

MongoDB Cloud Manager offers users more control, exposing numerous
MongoDB configuration options such as the storage engine, startup
parameters, and access control options. Cloud Manager also provides
the ability to manage MongoDB on the infrastructure of your choice.
MongoDB Cloud Manager is better suited for advanced operations users
who require this higher level of control, but Cloud Manager requires
users to manage the full lifecycle of their infrastructure.

.. _cm-create-atlas-project:

As an existing |mms-full| account holder, how do I create a new |service-fullname| project?
-------------------------------------------------------------------------------------------

In the :guilabel:`Context` drop down in |mms|, select :guilabel:`New Project`.

The :guilabel:`Create a New Project` screen provides you the choice to
create either an |service| project or a |mms| project. Select
:guilabel:`MongoDB Atlas` and continue with the creating the project.

.. _atlas-create-atlas-project:

As an existing |service| account holder, how do I create a new |service| project?
---------------------------------------------------------------------------------

In the :guilabel:`Context` drop down in |mms|, select :guilabel:`New Project`.

The :guilabel:`Create a New Project` screen provides you the choice to
create either an |service| project or a |mms| project. Select
:guilabel:`MongoDB Atlas` and continue with the creating the project.

Can I disable SSL/TLS on my deployment?
---------------------------------------

No.

.. _how-do-i-remove-my-company-project:

How do I remove my project?
---------------------------

You can remove a project if:

- You have the :authrole:`Project Owner` role for the project.

- The project has no outstanding invoices.

- The project has no active clusters.

To delete a project for an organization, you can delete from the
organization's :guilabel:`Projects` view or the project's
:guilabel:`Project Setting` view. For details, see :ref:`delete-project`.

.. _can-i-pause-or-stop-cluster:

Can I pause or stop my |service| clusters?
------------------------------------------

You can pause an ``M10+`` paid cluster for up to 7 days at a time. 
|service| automatically resumes the cluster after 7 days. For complete
documentation, see :ref:`pause-cluster`.

.. _how-do-i-modify-my-alert-settings:

How do I modify alerts?
-----------------------

To modify an existing alert settings, go to :guilabel:`Alerts` and
select :guilabel:`Alert Settings`. Click the ellipsis ``...`` to modify
(edit, clone, disable, delete) the setting for an active Alerts.

Does MongoDB |service| expose the oplog?
----------------------------------------

Yes. To access the :term:`oplog`, a database user must have read access on the
``local`` database. To create a user with read access on ``local``:

1. Click :guilabel:`Clusters`, then :guilabel:`Security`.

2. Click :guilabel:`Add New User` and enter a user name. For example, "oploguser".

3. Click :guilabel:`Show Advanced Options` and select the ``read`` role and
   the ``local`` database. This restricts the user to read operations on the
   ``local`` database.

4. Enter a password and click :guilabel:`Add User`.

.. note::

   To increase the size of an oplog for a cluster, click :guilabel:`Support`
   in the |service| navigation pane and file a help ticket with the
   following information:

   - The name of and URL for the |service| cluster,

   - The desired oplog size, and

   - The use case that requires a larger oplog.

.. _can-i-deploy-more-than-24-shards:

Can MongoDB |service| deploy clusters with more than 24 shards?
---------------------------------------------------------------

While MongoDB |service| out of the box allows selection of up to 24 shards,
customers interested in more than 24 shards should inquire with MongoDB.
Contact us at `https://www.mongodb.com/contact <https://www.mongodb.com/contact?jmp=docs>`_.

How does |service| encrypt my data?
-----------------------------------

|service| uses whole volume (disk) encryption for any data at rest,
including your cluster data and backups of that data.

|service| also requires TLS encryption for client data
and intra-cluster network communications.

If your organization requires more specific information regarding
|service| encryption, please contact |service| support. From the
|service| project or cluster view, click :guilabel:`Support` in the
left-hand navigation bar.

.. _can-i-pre-split-chunks:

Can I pre-split chunks in a |service| sharded cluster?
------------------------------------------------------

The :authrole:`Atlas admin` MongoDB user role has the necessary
privileges to pre-split chunks in an empty sharded collection.

See :manual:`Create Chunks in a Sharded Cluster 
</tutorial/create-chunks-in-sharded-cluster>` for complete documentation
on sharded cluster chunk creation and management.

Where can I view the system status of the MongoDB Cloud?
--------------------------------------------------------

Visit https://status.cloud.mongodb.com for the status of the
MongoDB Cloud, including |service| and |mms|. 

You can also subscribe to an 
`RSS feed <http://status.cloud.mongodb.com/rss>`_ of the MongoDB
Cloud Status page using your preferred RSS reader.

.. _faq-3.2-EOL:

I have a cluster running MongoDB 3.2. How does the upcoming End of Life affect me?
----------------------------------------------------------------------------------

.. include:: /includes/extracts/fact-3.2-eol-upgrade-faq.rst

To prepare for upgrading your cluster from MongoDB 3.2 to MongoDB
3.4 or greater, do the following:

- Read the :manual:`Release Notes </release-notes/3.4>` for MongoDB Server 3.4.

- Read the :manual:`Compatibility Changes </release-notes/3.4-compatibility/>` for MongoDB Server 3.4.

- Check that your application's :driver:`MongoDB driver version </driver-compatibility-reference/>` is compatible with MongoDB 3.4.

- Upgrade your application's :driver:`MongoDB driver </>` to the latest version that supports MongoDB 3.4.

- Use the :doc:`/tutorial/test-failover` feature to test application 
  resilience to elections. |service| uses a 
  :ref:`rolling strategy <high-availability>` to support high cluster 
  availability when performing the major MongoDB version change. The
  rolling upgrade procedure requires at least one election per
  replica set.

For guidance on performing the major version change upgrade yourself,
see :doc:`/tutorial/major-version-change` for a MongoDB-recommended
procedure. This procedure includes creating a staging cluster for the 
purpose of testing and validating application and cluster performance 
and functionality on the new MongoDB version.

To contact |service| support with questions, comments, or concerns
regarding the 3.2 End of Life and planned upgrade, select 
:guilabel:`Support` in the left-hand navigation of the |service| UI.

.. _faq-tls-1.0-deprecation:

What versions of TLS does |service| support?
--------------------------------------------

|service| deployments created after July 2018 support only 
Transport Layer Security (TLS) protocol versions 1.1 and 1.2 by default. 
|service| deployments created before July 2018 support TLS protocol 
version 1.0, 1.1, and 1.2 by default. After August 2018, |service| will
support only TLS 1.1 and 1.2 by default for all |service| clusters.

Deprecating TLS 1.0 improves your security of 
data-in-transit and aligns with industry best practices.
This is why MongoDB 4.0 requires TLS 1.1 or later when TLS 
is enabled. As |service| requires TLS connections for all |service| 
clusters, |service| clusters running MongoDB 4.0 always use
TLS 1.1 or later by default. 

You can read more about timing and reasons for the change from the 
`Payment Card Industry (PCI) <https://blog.pcisecuritystandards.org/migrating-from-ssl-and-early-tls>`_ 
as well as the 
`National Institute of Standards and Technology (NIST) <https://www.nist.gov/news-events/news/2014/04/nist-revises-guide-use-transport-layer-security-tls-networks>`_.

If you have questions about TLS support or cannot update your
applications to support TLS 1.1 or later by late August 2018, 
please contact |service| support. 

To open a |service| support ticket, log into the your |service|
account. Click the :guilabel:`Support` link in the |service| UI
and fill in the requested details.

How do I know if my applications support TLS 1.1 or later?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

TLS 1.1 was defined in April 2006. Applications whose underlying 
programming languages or security libraries predate TLS 1.1 
may require updating to a more recent version to support TLS 1.1 or 
later. You may also need to update the application host operating 
system to support TLS 1.1 or later.

MongoDB and |service| do not provide services to audit external 
applications for which versions of TLS support they support. 
Third party services such as 
`howsmyssl.com <https://www.howsmyssl.com/s/api.html>`_ 
may provide the appropriate tooling. MongoDB does not endorse the
aforementioned service, and its reference is intended only as 
informational. Defer to your organization's procedures
in selecting the appropriate vendor or service for auditing
your applications to ensure TLS 1.0 is disabled.

What do I have to do to update my clusters for TLS 1.1 or later?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

|service| will automatically update your existing clusters to
only support TLS 1.1 or later in late August 2018. The only thing you 
should consider doing is auditing your applications for support of
TLS 1.1 or later and updating any components of your technology stack 
that do not support TLS 1.1 or later.

Can I force enable TLS 1.0?
~~~~~~~~~~~~~~~~~~~~~~~~~~~

|service| allows users to manually enable TLS 1.0 during
:ref:`cluster creation <create-cluster-more-configuration-options>` and 
:ref:`cluster modification <scale-cluster-more-configuration-options>`.

Enabling TLS 1.0 for any |service| cluster carries significant risks. 
Consider enabling TLS 1.0 only for as long as required to update your 
application stack to support TLS 1.1 or later. 

.. _faq-support:

How do I get support for my Atlas clusters?
-------------------------------------------

|service| provides support for the use of the service itself. Support for
development and performance of the database itself requires a MongoDB
subscription. For details, `contact MongoDB Inc.
<https://www.mongodb.com/contact?jmp=docs>`_.

You can open support tickets from the |service| UI. Log in to your |service|
account and navigate to the organization or project for which you have a
question, comment, or concern. From the navigation bar, click
:guilabel:`Support` to open the support ticket form. Fill in the information as
requested, and an |service| technical support engineer will reach out to you.

How do I delete my user account?
--------------------------------

`Open an Atlas support ticket <https://cloud.mongodb.com/support>`__
to delete your |service| account.
