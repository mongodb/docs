stepnum: 1
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: backup
---
stepnum: 2
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: shutdown
---
stepnum: 3
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: uninstall-daemon
---
stepnum: 4
level: 4
# Note: This step is borrowed from the rpm install procedure, not from steps-source-upgrade.
source:
  file: steps-install-on-prem-with-rpm-packages.yaml
  ref: download
---
title: "Install the |onprem| package on each server being used for |onprem|."
stepnum: 5
level: 4
ref: install
content: |
  Install the ``.rpm`` package to each server by issuing the following
  command, where ``<version>`` is the version of the ``.rpm`` package:

  .. code-block:: sh

       sudo rpm -Uvh mongodb-mms-<version>.x86_64.rpm

  On |onprem| Application servers, the installer preserves your existing
  ``conf-mms.properties`` configuration file and names the new configuration
  file ``conf-mms.properties.rpmnew``. Both are located in
  ``/opt/mongodb/mms/conf/``.

  On Backup Daemon servers, the installer creates the ``/opt/mongodb/mms/`` directory.

---
stepnum: 6
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: start
---
stepnum: 7
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: log-in-as-global-owner
---
stepnum: 8
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: configuration
---
stepnum: 9
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: back-up-old-conf-file
---
stepnum: 10
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: replace-old-conf-file
---
stepnum: 11
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: restart-ops-manager
---
stepnum: 12
level: 4
source:
  file: steps-source-upgrade-onprem.yaml
  ref: backup-agent-configuration
...
