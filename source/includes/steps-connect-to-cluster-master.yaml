title: "Click :guilabel:`Connect`."
level: 4
ref: go-clusters-view-setup-connection-security
content: |

  
  a. Click :guilabel:`Databases` in the top-left corner of |service|. 
  
  b. In the :guilabel:`{+Database-Deployments+}` view, click :guilabel:`Connect`
     for the {+cluster+} or {+serverless-instance+} to which you want to connect.

  |service| highlights the :guilabel:`Setup connection security` step.
---
title: "Click :guilabel:`Connect`."
level: 4
ref: go-clusters-view
content: |

  a. Click :guilabel:`Databases` in the top-left corner of |service|. 
  
  b. In the :guilabel:`{+Database-Deployments+}` view, click :guilabel:`Connect`
     for the {+database-deployment+} to which you want to connect.
---

title: "Choose your Connection Security."
level: 4
ref: go-clusters-secure
content: |

  :guilabel:`Choose Connection Type` from the set of available buttons.

  .. note:: Options Display if Feature Enabled

     |service| displays the connection type options after you enable
     :doc:`Private IP for Peering </security-vpc-peering>`,
     :ref:`Private Endpoint <atlas-configure-private-endpoint>`, or
     both. If you haven't enabled either feature, no buttons display
     and **Connection Type** defaults to **Standard**.

  .. tabs::

     .. tab:: Standard Connection
        :tabid: standard

        Use this connection type for allowed public IP addresses.

     .. tab:: Private IP for Peering
        :tabid: peering

        Use this connection type if you enabled peering:

        - For |gcp| or |azure| and are connecting with {{connChoice}}
          from a peered network, or
        - For |aws| and are connecting with {{connChoice}} from a
          peered network which uses a custom |dns| service.

        If neither of these apply, add your IP address to your IP
        access list and use the Standard Connection string. If you are
        connecting directly to |service| from an office or home
        network, this might be the preferred option.

        .. note:: Peer must be available

           You can't select this option unless one of your peers
           is marked as ``AVAILABLE``. Navigate to
           :guilabel:`Network Access` to
           :doc:`check the status of your peers </security-vpc-peering>`.

        .. note:: Multi-Cloud Clusters

           If your application isn't hosted on the same cloud service
           provider as your cluster's :term:`primary`, the application
           can only perform secondary reads.

           With multi-cloud clusters, consider adding the
           :manual:`readPreference </reference/connection-string#read-preference-options>`
           connection option to your
           :manual:`connection string </reference/connection-string>`.
           Use one of the following values:

           - :readmode:`primaryPreferred`
           - :readmode:`secondary`
           - :readmode:`secondaryPreferred`

     .. tab:: Private Endpoint Connection
        :tabid: private

        Use the connection string for the appropriate interface
        endpoint if you are connecting with {{connChoice}} over a
        Private Endpoint connection either because {{connChoice}}:

        - Runs inside your cloud provider network, or
        - Has transitive network access to your cloud provider network.

        If neither of these apply, add your IP address to your IP
        access list and use the Standard Connection string. If you are
        connecting directly to |service| from an office or home
        network, this might be the preferred option.

        .. note::

           You can't select this option unless your configured
           PrivateLink connection is ready to use. Navigate to
           :guilabel:`Network Access` to :ref:`check the status of your
           {+aws-pl+} <atlas-troubleshoot-private-endpoint>`.
replacement:
  connChoice: "your driver or Compass"
---
title: "Click :guilabel:`Add Your Current IP Address`."
level: 4
ref: go-clusters-setup-connection-security-ip-address
content: |

  To secure your MongoDB |service| cluster, limit access
  to specified IP addresses.

  The menu expands to show the :guilabel:`Add a connection IP address`
  modal.
---
title: "Choose how you want to limit connections to your {+database-deployment+}."
level: 4
ref: go-clusters-ip-access-list-connection
content: |

  .. tabs::
     :hidden:

     .. tab:: Standard Connection
        :tabid: standard

        :guilabel:`Add a Connection IP Address`

        .. important::

           Skip this step if |service| indicates in the
           :guilabel:`Setup connection security` step that you have
           already configured an IP access list entry in your {+database-deployment+}.
           To manage the IP access list, see
           :ref:`Add Entries to the Access List <access-list>`.

        |service| allows standard client connections to the {+database-deployment+}
        from entries in the :ref:`project's IP access list
        <access-list>`. The project IP access list differs from the
        :ref:`API access list <enable-api-access-list>`, which
        restricts *API* access to specific IP or |cidr| addresses.

        If the IP access list is empty, |service| prompts you to add an
        IP address to the project's IP access list. You can either:

        - Click :guilabel:`Add Your Current IP Address` to allow
          access from your current IP address.

        - Click :guilabel:`Add an IP Address` to add a single IP
          address or a |cidr|\-notated range of addresses.

        Provide an optional description for the newly added IP address
        or |cidr| range. Click :guilabel:`Add IP Address` to add the
        address to the IP access list.

     .. tab:: Private IP for Peering
        :tabid: peering

        :guilabel:`Add a Connection IP Address`

        .. important::

           Skip this step if |service| indicates in the
           :guilabel:`Setup connection security` step that you have
           already configured an IP access list entry in your {+database-deployment+}.
           To manage the IP access list, see :ref:`Add Entries to the
           IP access list <access-list>`.

        |service| allows standard client connections to the cluster
        from entries in the :ref:`project's IP access list
        <access-list>`. The project IP access list differs from the
        :ref:`API access list <enable-api-access-list>`, which
        restricts *API* access to specific IP or |cidr| addresses.

        If the IP access list is empty, |service| prompts you to add an
        IP address to the project's IP access list. Click
        :guilabel:`Add a Different IP Address` to add a single IP
        address or a |cidr|\-notated range of addresses.

        Provide an optional description for the newly added IP address
        or |cidr| range. Click :guilabel:`Add IP Address` to add the
        address to the IP access list.

     .. tab:: Private Endpoint Connection
        :tabid: private

        :guilabel:`Choose PrivateLink`

        Select the PrivateLink in your |aws| region from the
        :guilabel:`Choose PrivateLink` menu.

---
title: "Create a Database User."
level: 4
ref: create-mongodb-user
content: |

  .. important::

     **Skip this step** if |service| indicates in the
     :guilabel:`Setup connection security` step that you have at least
     one database user configured in your project. To manage existing
     database users, see :ref:`mongodb-users`.

  To access the {+database-deployment+}, you need a MongoDB user with access to the
  desired database or databases on the {+database-deployment+} in your project. If your
  project has no MongoDB users, |service| prompts you to create a new
  user with the :ref:`Atlas Admin <atlas-user-privileges>` role.

  a. Enter the new user's :guilabel:`Username`.
  b. Enter a :guilabel:`Password` for this new user or click
     :guilabel:`Autogenerate Secure Password`.
      
  c. Click :guilabel:`Create Database User` to save the user.

  Use this user to connect to your {+database-deployment+} in the following step.

  Once you have added an IP address to your IP access list and added a
  database user, click :guilabel:`Choose Your Connection Method`.

---
title: "Click :guilabel:`Choose a connection method`."
level: 4
ref: connection-details

---
title: "Get the Connection String for |compass| from |service|."
level: 4
ref: connect-details-compass
content: |

     a. Click :guilabel:`I have MongoDB Compass`.

     #. Choose your version of |compass| in the dropdown. To check
        the version of |compass| that you have installed on your system,
        click :guilabel:`About MongoDB Compass` in the application.

     #. Copy the connection string presented in the |service|
        :guilabel:`Connect` dialog.
---
title: "Open |compass| and Connect to |service|."
level: 4
ref: open-compass
content: |

  .. tabs::

     .. tab:: Paste Connection String
        :tabid: paste

        Use the copied connection string for connecting to |compass| if
        your deployment uses a single cloud provider or doesn't use any
        of the following: SSL, authentication certificates, or an SSH tunnel.

        a. Click :guilabel:`New Connection` and paste the connection
           string into the :guilabel:`Paste your connection string` field.

        #. (*Optional*) To save this connection for future use, click
           :guilabel:`Create Favorite` and add a name for this connection.
           You can find saved favorite connections under :guilabel:`Favorites`
           in the left pane of the |compass| :guilabel:`Connect` window.

        #. Click :guilabel:`Connect`.

     .. tab:: Fill in Connection Fields Individually
        :tabid: fill

        Fill in connection fields individually if your deployment spans
        more than one cloud provider or if it uses one of the following:
        SSL, authentication certificates, or an SSH tunnel.

        #. Click :guilabel:`Fill in Connection Fields Individually`.

        #. Under the :guilabel:`hostname` tab, enter the hostname and port,
           and choose your authentication mechanism from the dropdown.
           
        #. Under the :guilabel:`More options` tab, configure the following:

           - If your deployment uses SSL or an SSH tunnel, specify
             SSL or SSH tunnel options.
           - If your deployment spans more than one cloud provider,
             specify :manual:`read preference options </reference/connection-string#read-preference-options>`.
           - If your deployment uses X.509 certificates, add a
             :ref:`self-managed X.509 certificate <self-managed-x509>`
             or an :manual:`auto-generated X.509 certificate </core/security-x.509/>`
             managed by |service|.

           To learn more, see :compass:`Connect to MongoDB </connect/>`
           in the |compass| documentation.

        #. (*Optional*) To save this connection for future use, click
           :guilabel:`Create Favorite` and add a name for this connection.
           You can find saved favorite connections under :guilabel:`Favorites`
           in the left pane of the |compass| :guilabel:`Connect` window.

        #. Click :guilabel:`Connect`.

...
