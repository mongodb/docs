.. _restore-archive-snapshots:

==================================
Back Up, Restore, and Archive Data
==================================

.. default-domain:: mongodb

.. _backup-cluster:

Backups are copies of your data that encapsulate the state of your
cluster at a given time. Backups provide a safety measure in the
event of data loss.

.. note::

   You must have the :authrole:`Project Owner` role for an |service|
   project to manage backups for or to restore a backup to clusters in
   that project.

Considerations
--------------

Be aware that:

- |service| backups are not available for ``M0`` {+free-clusters+}.
  You may use :ref:`mongodump <command-line-tools-mongodump>` to back
  up your ``M0`` cluster data and
  :ref:`mongorestore <command-line-tools-mongorestore>` to restore that
  data. To learn how to manually back up your data, see
  :doc:`Command Line Tools </command-line-tools>`.

- .. include:: /includes/fact-backup-restore-considerations.rst

{+Cloud-Backup+}s
-----------------

*Available in M10+ {+Clusters+}.*

|service| uses the native snapshot capabilities of your cloud provider
to support full-copy snapshots and localized snapshot storage.

|service| supports
:ref:`{+Cloud-Backup+}s <backup-cloud-provider>` on:

- :ref:`Microsoft Azure <microsoft-azure>`
- :ref:`Amazon Web Services (AWS) <amazon-aws>`
- :ref:`Google GCP <google-gcp>`

To learn more, see :ref:`backup-cloud-provider`.

To learn how to restore cluster from a {+Cloud-Backup+}, see
:ref:`restoration-cloud-provider-snapshot`.

M2 / M5 Snapshots
-----------------

Backups are automatically enabled for ``M2`` and ``M5`` {+shared-clusters+}
and can't be disabled. |service| takes
:ref:`daily snapshots <m2-m5-snapshots>` of your ``M2`` and ``M5``
clusters which you can restore to clusters tiers ``M2`` or greater.

To learn more about ``M2`` / ``M5`` daily snapshots, see
:ref:`m2-m5-snapshots`.

To learn how to restore a cluster from an ``M2`` / ``M5`` snapshot,
see :ref:`m2-m5-restore-snapshot`.

{+Serverless-Instance+} Snapshots
---------------------------------

|service| uses the native snapshot capabilities of your cloud provider
to support full-copy snapshots and localized snapshot storage.

Backups are automatically enabled for {+serverless-instances+}. 
You can't disable {+serverless-instance+} backups.

|service| offers the following backup options for
{+serverless-instances+}:

.. include:: /includes/list-table-serverless-backup-options.rst
   
You can restore {+serverless-instance+} snapshots to other 
{+serverless-instances+} and {+dedicated-clusters+}.

To learn more, see:

- :ref:`config-serverless-backup`
- :ref:`serverless-snapshots`
- :ref:`serverless-restore-snapshot`

{+Old-Backup+}s
---------------

*Available in M10+ {+Clusters+}.*

.. include:: /includes/admonitions/deprecated-continuous-backup.rst

|service| uses incremental snapshots to continuously back up your data.
:ref:`Continuous backup snapshots <legacy-backup>` are typically
just a few seconds behind the operational system.

|service| ensures {+pit-restore+} of replica sets and consistent,
cluster-wide snapshots of sharded clusters.

For each |service| project with {+old-backup+}s enabled, |service|
stores the {+old-backup+} snapshots in the backup data center
location where {+old-backup+}s were *first* enabled for a cluster in
the project.

Continuous snapshots support restoring from the full snapshot
or from a {+PIT-Restore+} between snapshots. You can also
:doc:`query a continuous snapshot </backup/legacy-backup/backup-query>`.

With |service| {+old-backup+}, the total number of collections
across all databases in a |service| cluster can't be equal to or
exceed ``100,000``.

To learn more about {+Old-Backup+}s, see :ref:`legacy-backup`.

To learn how to restore cluster from a {+Old-Backup+}, see
:ref:`restore-continuous-backup`.

.. toctree::
   :titlesonly:

   /backup/cloud-backup/overview
   /backup/cloud-backup/cloud-backup-encryption
   /backup/cloud-backup/export
   /backup/cloud-backup/restore
   /backup/cloud-backup/import-archive
   /online-archive/manage-online-archive
   /backup/legacy-backup/overview
