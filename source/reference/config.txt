.. _mcli-config-command:

===============
mongocli config
===============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. _mcli-config-command-desc:

Description
-----------

The ``config`` command configures the {+mcli+} to access MongoDB services,
including |service-fullname|, |cloud|, and |mms-full|. The command groups
the settings for accessing the service, such as the public and private key,
into a named profile.

When you run the command, it prompts you for the following:

- ``Public API Key`` & ``Private API Key`` - The public and 
  private API keys for programmatic access are required for 
  accessing |service|, |cloud-short|, and |mms| using {+mcli+}. 
  For more information on generating these keys, see:

- ``Ops Manager Base URL`` - The command prompts you for the 
  |mms| base URL only if you are configuring a profile for 
  accessing |mms|. 

  - :atlas:`Configure Atlas API Access <configure-api-access>`
  - :cloudmgr:`Configure Cloud Manager Public API Access <tutorial/configure-public-api-access>`
  - :opsmgr:`Configure Ops Manager Public API Access </tutorial/configure-public-api-access>`

The public and private API keys that you enter are saved 
as a profile in the ``mongocli.toml`` file. This file is in the 
``$HOME/.config`` directory if ``$XDG_CONFIG_HOME`` environment 
variable is not set. If ``$XDG_CONFIG_HOME`` environment variable 
is set, the ``mongocli.toml`` file is in ``$XDG_CONFIG_HOME`` directory. 
You can use this profile for all future access of the service 
through the {+mcli+}. To learn more about configuring a 
profile, see :ref:`mcli-config-file`.

.. _mcli-config-command-syntax:

Syntax
------

.. code-block:: text
   :copyable: false

   mongocli config 
        [ --service cloud|cloud-manager|ops-manager ]
        [ --profile|-p <profile-name> ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-config-command-options:

Options
-------
.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10 

   * - Option 
     - Type
     - Description
     - Required?

   * - ``--profile``, ``-p``
     - string
     - Name for the profile where the access information is saved. 
       If this is omitted, the access information is saved as the 
       ``default`` profile.
     - no

   * - ``--service``
     - string
     - MongoDB service for which you are configuring {+mcli+} access. 
       Value can be:

       - ``cloud`` - for |service|
       - ``cloud-manager`` - for |cloud-short|
       - ``ops-manager`` - for |mms|

       If this is omitted, defaults to ``cloud`` for |service|.
     - no

.. _mcli-config-command-output:

Output 
~~~~~~

The command does not print any output to the terminal. To verify that 
the command was successful, you can look for the profile in the 
``mongocli.toml`` file. If the command returns errors, see 
:ref:`Troubleshooting <troubleshooting>` for recommended solutions.

.. _mcli-config-command-examples:

Examples
--------

The following examples use the ``mongocli config`` command to:

1. Create a profile for accessing a service.

2. Save the access information for the service under that profile. 

.. tabs::

   .. tab:: Atlas
      :tabid: atlas

      The following commands show different ways to create a profile for 
      accessing |service|.

      **Example 1:** The following command creates a custom profile 
      named ``egAtlasProfile`` for accessing |service|.

      .. code-block:: text
         :copyable: false
   
         mongocli config --service cloud --profilename egAtlasProfile
         Public API Key: abcdefgh
         Private API Key: [? for help] ************************************

      **Example 2:** The following command saves the access keys for |service| 
      in the ``default`` profile.

      .. code-block:: text
         :copyable: false
   
         mongocli config
         Public API Key: abcdefgh
         Private API Key: [? for help] ************************************

   .. tab:: Cloud Manager
      :tabid: cloud-manager

      The following command creates a custom profile 
      named ``egCMprofile`` for accessing |cloud-short|.

      .. code-block:: text
         :copyable: false
   
         mongocli config --service cloud-manager --profilename egCMprofile
         Public API Key: abcdefgh
         Private API Key: [? for help] ************************************

   .. tab:: Ops Manager 
      :tabid: ops-manager

      The following command creates a custom profile 
      named ``egOMprofile`` for accessing |mms|. 

      .. code-block:: text
         :copyable: false
   
         mongocli config --service ops-manager --profilename egOMprofile
         Ops Manager Base URL: http://om-svc.mongodb.svc.cluster.local:8080
         Public API Key: abcdefgh
         Private API Key: [? for help] ************************************
