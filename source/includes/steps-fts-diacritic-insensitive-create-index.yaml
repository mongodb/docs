ref: fts-diacritic-insensitive-tutorial-step1
level: 4
stepnum: 1
inherit:
  file: steps-source-project-nav.yaml
  ref: project-nav-search
---
ref: fts-diacritic-insensitive-tutorial-step2
level: 4
stepnum: 2
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-fts-index
---
ref: fts-diacritic-insensitive-tutorial-step3
level: 4
stepnum: 3
title: "Select the |fts| :guilabel:`JSON editor` for the :guilabel:`Configuration
Method` and click :guilabel:`Next`."
---
ref: fts-diacritic-insensitive-tutorial-step4
level: 4
stepnum: 4
title: "Enter the :guilabel:`Index Name`, and set the :guilabel:`Database and Collection`." 
content: |

  a. In the :guilabel:`Index Name` field, enter ``diacritic-insensitive-tutorial``.

     .. include:: /includes/default-fts-index-name.rst 

  #. In the :guilabel:`Database and Collection` section, find the 
     ``sample_mflix`` database, and select the ``movies`` collection.
---
ref: fts-diacritic-insensitive-tutorial-step5
level: 4
stepnum: 5
title: "Specify an index definition."
content: |

  This index definition for the ``genres`` and ``title`` fields
  specifies a custom analyzer, ``diacriticFolder``, using the following: 

  - :ref:`keyword-tokenizer-ref` tokenizer that tokenizes the entire
    input as a single token.
  - :ref:`icufolding-tf-ref` token filter that applies character
    foldings such as accent removal and case folding.

  The index definition specifies a string type for the ``genres``
  and ``title`` fields. It also applies the custom analyzer named
  ``diacriticFolder`` on the ``title`` field.

  Use the |fts| :guilabel:`Visual Editor` or |fts| :guilabel:`JSON Editor` in the
  |service| user interface to create the index.

  .. tabs:: 

     .. tab:: Visual Editor 
        :tabid: vib

        a. Click :guilabel:`Next`.
        #. Click :guilabel:`Refine Your Index`.
        #. In the :guilabel:`Custom Analyzers` section, click
           :guilabel:`Add Custom Analyzer`.
        #. Select the :guilabel:`Create Your Own` radio button and click
           :guilabel:`Next`. 
        #. Type ``diacriticFolder`` in the :guilabel:`Analyzer Name`
           field.
        #. Expand :guilabel:`Tokenizer` if it's collapsed and select
           ``keyword`` from the dropdown.
        #. Expand :guilabel:`Token Filters` and click
           :icon-fa5:`plus-circle` :guilabel:`Add token filter`.
        #. Select ``icuFolding`` from the dropdown and click
           :guilabel:`Add token filter` to add the token filter to your
           custom analyzer.
        #. Click :guilabel:`Add` to add the custom analyzer to your
           index.
        #. In the :guilabel:`Field Mappings` section, click
           :guilabel:`Add Field Mapping` to apply the custom analyzer on the
           ``title`` field. 
        #. Select ``title`` from the :guilabel:`Field Name` dropdown and
           **String** from the :guilabel:`Data Type` dropdown.
        #. In the properties section for the data type, select
           ``diacriticFolder`` from the :guilabel:`Index Analyzer` and
           :guilabel:`Search Analyzer` dropdowns. 
        #. Click :guilabel:`Add`.
        #. Click :guilabel:`Add Field Mapping` again to index the
           ``genres`` field.
        #. Select ``genres`` from the :guilabel:`Field Name` dropdown and
           **String** from the :guilabel:`Data Type` dropdown.
        #. Click :guilabel:`Add`, then :guilabel:`Save Changes`.

     .. tab:: JSON Editor 
        :tabid: jsonib
  
        a. Replace the default definition with the following:

        .. code-block:: json
           :linenos:
     
           {
             "mappings": {
               "fields": {
                 "genres": {
                   "type": "string"
                 },
                 "title": {
                   "analyzer": "diacriticFolder",
                   "type": "string"
                 }
               }
             },
             "analyzers": [{
               "charFilters": [],
               "name": "diacriticFolder",
               "tokenizer": {
                 "type": "keyword"
               },
               "tokenFilters": [{
                 "type": "icuFolding"
               }]
             }]
           }

        b. Click :guilabel:`Next`.

---
ref: fts-diacritic-insensitive-tutorial-step6
level: 4
stepnum: 6
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-search-index
---
ref: fts-diacritic-insensitive-tutorial-step7
level: 4
stepnum: 7
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: close-in-progress
---
ref: fts-diacritic-insensitive-tutorial-step8
level: 4
stepnum: 8
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: wait-for-index
---

...
