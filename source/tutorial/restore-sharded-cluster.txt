=========================
Restore a Sharded Cluster
=========================

.. default-domain:: mongodb

Overview
--------

You can restore a :term:`sharded cluster` onto new or existing hardware
from the artifacts captured by a :doc:`snapshot
</tutorial/backup-sharded-cluster-with-filesystem-snapshots>` or
:doc:`database dump
</tutorial/backup-sharded-cluster-with-database-dumps>`.

Consideration
-------------

For an overview of backup in MongoDB, see :doc:`/core/backups`.

Procedures
----------

Select the procedure appropriate to the backed-up data:

- :ref:`restore-sharded-cluster-from-snapshot`

- :ref:`restore-sharded-cluster-from-database-dump`

.. _restore-sharded-cluster-from-snapshot:

Restore Sharded Cluster from a Snapshot
+++++++++++++++++++++++++++++++++++++++

The sequence to restore from a snapshot is to:

- stop all MongoDB processes,

- distribute the restore files to their new locations,

- start the :program:`mongod` instances,

- configure each shard's replica set, and

- configure and start the cluster.

To restore a sharded cluster from a snapshot:

.. include:: /includes/steps/restore-sharded-cluster-from-snapshot.rst

.. _restore-sharded-cluster-from-database-dump:

Restore Sharded Cluster from a Database Dump
++++++++++++++++++++++++++++++++++++++++++++

The sequence to restore from database dump is to:

- start the :program:`mongod` instances,

- and restore the database dumps.

To restore a sharded cluster from a database dump:

.. include:: /includes/steps/restore-sharded-cluster-from-database-dump.rst
