.. _mcli-atlas-whitelist-create-command:

===============================
mongocli atlas whitelist create
===============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``whitelist create`` command creates a whitelist for the 
specified |service| project. The whitelist can contain one or more 
trusted IP addresses or entries in Classless Inter-Domain Routing (CIDR) 
notation. You can create one whitelist per project.

.. note:: 

   The command does not overwrite existing entries in the 
   whitelist. Instead, it adds the new entries to the list of 
   entries.

You can also create a whitelist using the |service| 
:atlas:`UI Connection IP Address 
<https://docs.atlas.mongodb.com/tutorial/whitelist-connection-ip-address/>` 
or :atlas:`API 
<https://docs.atlas.mongodb.com/reference/api/whitelist-add-one/?searchProperty=current&query=awsSecurityGroup>`.

.. _whitelist-create-command-syntax:

Syntax 
------

.. code-block:: text
   :copyable: false

   mongocli atlas whitelist create <whitelist-entry>
        --comment "<description-of-value>"
        [ --profile|-p <name-of-profile> ]
        --projectId <id-of-project>
        [ --type cidrBlock|ipAddress ]

.. include:: /includes/fact-command-line-help.rst

.. _whitelist-create-command-options:

Options 
-------

.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option 
     - Type 
     - Description 
     - Required?

   * - ``--comment``
     - string
     - Description of the whitelist entry. Use double quotes 
       to enclose the description if there are one or more spaces 
       in the description.
     - no 

   * - ``--profile``, ``-p``
     - string 
     - Name of the profile to use for accessing the |service| 
       project. If omitted, uses the ``default`` profile.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project for which to create the 
       whitelist.
     - yes

   * - ``--type``
     - string
     - Type of whitelist entry. Valid values are:

       - ``cidrBlock`` - for a whitelist entry in Classless Inter-Domain 
         Routing (CIDR) notation
       - ``ipAddress`` - for an IP address entry. You can connect to a 
         cluster from only the trusted IP addresses in the whitelist.

       If omitted, defaults to ``ipAddress``.

     - no

   * - ``<whitelist-entry>``
     - string
     - Entry for the whitelist. Value can be: 

       - An IP address
       - A CIDR block
     - yes

.. _whitelist-create-command-output:

Output 
------

.. include:: /includes/command-output-intro.rst

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - Field 
     - Description 

   * - ``comment``
     - Description of the whitelist entry.

   * - ``groupId``
     - Unique identifier of the project. 

       .. note:

          Groups and projects are synonymous terms. Your {GROUP-ID} 
          is the same as your project ID.

   * - ``cidrBlock``
     - Whitelist entry in Classless Inter-Domain Routing (CIDR) 
       notation.

   * - ``ipAddress``
     - Whitelisted IP address.

.. _whitelist-create-command-examples:

Examples 
--------

The following examples use the ``mongocli atlas whitelist create`` command 
to create a whitelist with an IP address and a whitelist entry 
in CIDR notation. 

Example 1
~~~~~~~~~

The following sample command creates a whitelist entry for an 
IP address using the saved profile, ``egAtlasProfile``.

.. code-block:: text
   :copyable: false

   ~ mongocli atlas whitelist create 192.0.2.15 --type ipAddress --projectId 5e2211c17a3e5a48f5497de3 --profile egAtlasProfile --comment "IP address for app server 2"

The previous command prints the following fields to the terminal. To 
learn more about these fields, see :ref:`Output 
<whitelist-create-command-output>`.

.. code-block:: json
   :copyable: false

   [
	  {
		"comment": "IP address for app server 2",
		"groupId": "5e2211c17a3e5a48f5497de3",
		"cidrBlock": "192.0.2.15/32",
		"ipAddress": "192.0.2.15"
	  },
	  {
		"comment": "IP address for app server 1",
		"groupId": "5e2211c17a3e5a48f5497de3",
		"cidrBlock": "10.201.30.114/32",
		"ipAddress": "10.201.30.114"
	  }
   ]

Example 2
~~~~~~~~~

The following command creates a whitelist entry in CIDR notation using 
the ``default`` profile. 

.. code-block:: text
   :copyable: false

   ~ mongocli atlas whitelist create 73.231.201.205/24 --type cidrBlock --projectId 5e2211c17a3e5a48f5497de3 --comment "CIDR block for servers C - F"

The previous command prints the following 
fields to the terminal. To learn more about these fields, 
see :ref:`Output <whitelist-create-command-output>`.

.. code-block:: json
   :copyable: false

   [
	  {
		"comment": "CIDR block for servers C - F",
		"groupId": "5e2211c17a3e5a48f5497de3",
		"cidrBlock": "73.231.201.205/24",
		"ipAddress": "73.231.201.205"
	  },
      {
		"comment": "IP address for app server 2",
		"groupId": "5e2211c17a3e5a48f5497de3",
		"cidrBlock": "192.0.2.15/32",
		"ipAddress": "192.0.2.15"
	  },
	  {
		"comment": "IP address for app server 1",
		"groupId": "5e2211c17a3e5a48f5497de3",
		"cidrBlock": "10.201.30.114/32",
		"ipAddress": "10.201.30.114"
	  }
   ]
