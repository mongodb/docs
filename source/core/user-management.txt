===============================
User and Environment Management
===============================

.. default-domain:: mongodb

.. index:: users

.. only:: saas

   This page helps you manage users that have access to your MMS groups, and
   also enables you to create and manage groups.

.. only:: hosted

   This page helps you manage users that have access to your |mms| groups, create
   and manage groups, and assign roles to users to provide controlled access to
   the MMS application.

   There is no planned upgrade path from existing MMS user authentication to
   using LDAP. You will need to recreate users, groups, and roles manually with
   your LDAP service, as described in the :doc:`/tutorial/configure-for-ldap-authentication` document.

User Management
---------------

.. only:: saas

   .. include:: /includes/mms-console-saas-users.rst

.. only:: hosted

   .. include:: /includes/mms-console-hosted-users.rst

.. index:: users; groups


Working with Multiple Environments
----------------------------------

If you have multiple MongoDB systems in distinct environments and
cannot monitor all systems with a single agent, you will need to add a
new group. Having a second group makes it possible to run two agents.

You may also use a second group and agent to monitor a different set
of MongoDB instances in the same environment if you want to segregate
the hosts within the MMS console. A user can only view data from the
hosts monitored in a single group at once.

After adding a second group, the MMS interface will have a drop down list
that will allow you to change groups. Selecting a new group will
refresh the current page with the data available from the servers in
this group.

Create Group
~~~~~~~~~~~~

.. include:: /includes/steps/add-group.rst

Remove Group
~~~~~~~~~~~~

.. include:: /includes/fact-remove-group.rst 
.. _assigning-roles-to-users:

Assigning Roles to Users
------------------------

.. only:: saas

   MMS can assign roles to individual users to limit actions users can perform,
   as well as data users see in the application.

.. only:: hosted

   MMS or an LDAP server can assign roles to individual users to limit actions
   users can perform, as well as data users see in the application. With LDAP
   integration, follow the steps to setup
   :doc:`/tutorial/configure-for-ldap-authentication` then create LDAP groups
   for each available MMS role.

   Users must have User Admin or Global User Admin roles assigned to them to
   assign roles to users. A person with the User Admin role can assign roles to
   users in their group. A person with the Global User Admin role can assign
   roles to any user in any group. You cannot assign roles for yourself.

.. only:: saas

   Upon successful login, the first user completes a welcome form to create the
   initial MMS group. This form includes assigning roles.

.. only:: hosted

   Upon successful login, the first user completes a welcome form to create the
   initial MMS group. This form includes assigning roles. For LDAP
   authentication, the welcome form includes the ability to assign LDAP groups
   to the MMS group-level and global roles.

See :doc:`/reference/user-roles` for roles available for a group.

.. index:: users; roles

Assign a Role with MMS
~~~~~~~~~~~~~~~~~~~~~~

To assignroles with |mms|, go to the :guilabel:`Users` page, click the
:guilabel:`Users` tab, and click the pencil icon to the far right of the name
of the user record to edit. Click the checkboxes to assign roles.

.. only:: hosted

   Assign Roles with LDAP
   ~~~~~~~~~~~~~~~~~~~~~~

   First, create groups on your LDAP server for each of the available MMS
   group-level and global roles.

   To assign LDAP groups to MMS roles, click the Admin link at the top right of
   any MMS page, then click the Groups tab on the Admin page. Click the pencil
   icon at the far right of a group name. Edit the Roles interface by adding
   the appropriate LDAP group name to its corresponding MMS group name.

   Because MMS does not update role assignments stored in your LDAP server,
   assign roles by assigning users to groups in your LDAP server.

   Configure global roles in ``conf-mms.properties`` file.

   See :doc:`/tutorial/configure-for-ldap-authentication` for more details
   about LDAP integration with MMS.
