=======
Billing
=======

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol


.. important::

   |service| does not accept prepaid cards as a method of payment.

|service| charges by the hour for your MongoDB clusters. |service| tabulates
costs daily and displays your current monthly costs in the upper right corner.
To view line-item charges, click |service| :guilabel:`Settings`, then
:guilabel:`Billing/Subscriptions`, and then the :guilabel:`Usage Details` link.

As you create or modify a cluster, you can compare the costs of different
options before applying them. |service| displays the costs, except for data
transfer, in a :guilabel:`Cluster Overview` box.

.. note::

   The :guilabel:`Cluster Overview` box does not display :ref:`data transfer
   costs <data-transfer-costs>`.

.. _region-costs:

Cloud Service Provider and Region
---------------------------------

|service| supports :ref:`Amazon AWS <amazon-aws>` and the :ref:`Google Cloud
Platform <google-gcp>` as cloud service providers for backing a |service|
cluster. The choice of provider and region for the |service| group affects the
cost of running a |service| cluster.

.. _instance-size-costs:

Instance Size
-------------

|service| provides different instance sizes. Each instance size has a default
RAM capacity, storage capacity, and maximum storage speed. The cost of the
instance's per-hour charge includes these default values. |service| uses the
selected instance size when deploying all the data-bearing [#data-bearing]_
servers in your cluster.

Depending on the choice of cloud service provider, |service| provides
customization options for :ref:`instance storage capacity <storage-capacity>`
and the :ref:`speed <instance-storage-speed>` of that storage. If you add
capacity or speed, you incur additional costs on top of the base cost. The
:guilabel:`Cluster Overview` box shows your overall charges.

.. _storage-capacity:
.. _instance-storage-capacity:

Storage Capacity
~~~~~~~~~~~~~~~~

|service| charges for storage capacity differently depending on whether you
use the instance default or specify a custom storage capacity. If you use the
default, storage is included in the instance's per-hour cost. If you
customize, |service| charges for the entire amount of storage, not the
difference from the default size.

For example, if the instance default is 80 GB and if you increase storage to
100 GB, the change in cost is the charge for 100 GB. If you then increase
storage to 120 GB, the change in cost is the charge for 20 GB.

.. note::

   Increasing storage capacity can change the max IOPS available
   with each :guilabel:`Custom Storage Speed`.

.. _storage-speed:
.. _instance-storage-speed:

Custom Storage Speed
~~~~~~~~~~~~~~~~~~~~

|service| measures storage speed as maximum Input/Output Operations Per Second
(IOPS). Each |service| :ref:`instance type <instance-size-costs>` offers a
default storage speed that is included in the instance's per-hour cost. The
choice of cloud service provider and instance size affects the available
storage speed customization options, as well as the cost of selecting a custom
storage speed.

:abbr:`AWS (Amazon Web Services)`
  For most instance types, you can increase storage speed from
  :guilabel:`Standard` to :guilabel:`Fast` or :guilabel:`Fastest`, which
  affects costs. Selecting a custom speed changes both :abbr:`IOPS
  (Input/Output Operations per Second)` and the type of storage used. The
  storage type changes from a general-purpose SSD to a provisioned-:abbr:`IOPS
  (Input/Output Operations per Second)` SSD. For more information on storage
  types, see
  `Amazon EBS Volume Types 
  <http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSVolumeTypes.html>`_.

:abbr:`GCP (Google Cloud Platform)`
  All instances use SSD persistent disks with fixed maximum :abbr:`IOPS
  (Input/Output Operations per Second)` based on the instance storage
  capacity. The maximum :abbr:`IOPS (Input/Output Operations per Second)`
  increases as storage capacity increases. The cost of the increased maximum
  :abbr:`IOPS (Input/Output Operations per Second)` is included in the cost of
  the increased storage capacity. For more information on the :abbr:`GCP
  (Google Cloud Platform)` persistent disks, see `Persistent Disks
  <https://cloud.google.com/compute/docs/disks/#pdspecs>`_.

.. _data-transfer-costs:

Data Transfer
-------------

|service| data transfer costs depend on the cloud service provider backing

|service| tabulates data transfer costs daily.

:abbr:`AWS (Amazon Web Services)`
  |service| charges for data transfer between the |service| server and another
  server. Data transfer charges include traffic between cluster nodes,
  including an outbound transfer from the source node and an inbound
  transfer to the destination node within the same AWS region. Charges for
  data transfer increase as follows, from lowest to highest:
  
  - Data transfer between the originating MongoDB |service| server and a
    server in the same AWS region.
  
  - Data transfer between the originating MongoDB |service| server and a
    server in a different AWS region.
  
  - Data transfer between the originating MongoDB |service| server and a
    server not in an AWS region.
  
:abbr:`GCP (Google Cloud Platform)`
  |service| charges for outgoing data transfers from an |service| server to
  another server. Inbound data transfers to an |service| server are free. 
  Data transfer charges for a |service| cluster are as follows, 
  from lowest to highest:
  
  - Outgoing data transfer between the originating MongoDB |service| node and:
    
    - a server that is in the same region but not in the same zone, or
    
    - a server where both the originating MongoDB |service| node and the
      destination server are in different regions in the United States of
      America.

  - Outgoing data transfer between the originating MongoDB |service| node and:
  
    - a server in a different continent, or 
    
    - a server in the same continent (excluding USA) but a different region, or
    
    - a server or machine not in a :abbr:`GCP (Google Cloud Platform)` data
      center.
  
.. _server-number-costs:

Number of Servers
-----------------

|service| charges the instance cost and data storage cost for each
data-bearing server [#data-bearing]_ in your cluster. For a replica set, the
number of data-bearing servers equals the replication factor. For a sharded
cluster, the number of data-bearing servers equals the replication factor
multiplied by the number of shards.

If you enable sharding, |service| will also run three :ref:`config servers
<sharding-config-server>` in addition to your data-bearing servers. Your
selections for instance size and data storage do not affect the costs of the
config servers. Config servers are charged at a separate rate. Their cost is
reflected in the cost of the cluster.

Backup
------

For each replica set in a cluster, |service| charges US$2.50 / GB / month to
store backup data. The first 1GB of backup data is free.

|service| discounts the cost of backup data storage if the frequency of
snapshots is reduced. To modify the backup schedule for a cluster, see
:ref:`modify-backup-schedule`.

.. note::

   Backup data consists of your logical data and indexes on that data.

.. example::

   For a three-member replica set with 30GB of data, |service| charges
   US$72.50 each month.

   ``(30GB - 1GB) × US$2.50 = US$72.50``

For sharded clusters, |service| sums the cost of backup data  for each
shard replica set *and* the config server replica set.

.. example::

   A sharded cluster with 3 shards contains 90GB of data, with each shard
   containing 30GB of data each. The config server replica set
   contains 5GB of data.

   For this sharded cluster, |service| charges US$227.50 per month.

   ``((30GB - 1GB) × US$2.50) × 3) + ((5GB - 1GB) × US$2.50) = US$227.50``

Billing Information
-------------------

Each |service| group has its own account, plan, and billing method. To access
billing information, click :guilabel:`Settings`, then
:guilabel:`Billing/Subscriptions`.

.. note::

   :guilabel:`Billing/Subscriptions` allow you to set an optional
   :guilabel:`Invoice Address` that is separate from the :guilabel:`Payment
   Method` billing address.

   If you set an Invoice Address, you can optionally use this address for the
   Payment Method by selecting :guilabel:`same as Invoice Address` when
   entering the Payment Method.

View an Estimate of Monthly Charges
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Click :guilabel:`Settings`, then :guilabel:`Billing/Subscriptions`, and then
:guilabel:`Understanding Your Bill`. Scroll to :guilabel:`Monthly Estimates`.

Retry a Failed Payment
~~~~~~~~~~~~~~~~~~~~~~

If you receive notification of a failed payment, click :guilabel:`Settings`,
then :guilabel:`Billing/Subscriptions`, and check that your :guilabel:`Payment
Method` is correct.

To retry the payment, click :guilabel:`Settings`, then :guilabel:`Payment
History`. On the line for the failed payment, click :guilabel:`Retry`.

.. include:: /includes/footnote-databearing.rst
