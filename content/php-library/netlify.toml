[build]
publish = "dist"
base = "content/php-library"

[build.environment]
REPO_NAME = "docs-php-library"
SECRETS_SCAN_ENABLED = "false"
MUT_COMMANDS_ENABLED = "false"

[context.production.environment]
ENV = "dotcomprd"

[context.preprd.environment]
ENV = "dotcomstg"

[context.deploy-preview.environment]
ENV = "prd"

[context.branch-deploy.environment]
ENV = "prd"

[context.preview-server.environment]
ENV = "prd"

[context.dev.environment]
ENV = "stg"


### EOL REDIRECTS
### ALIAS REDIRECTS
### PAGE-SPECIFIC REDIRECTS (divided into subsections by version, if applicable)
### WILDCARD REDIRECTS
### CATCH ALLS
##redirects any pages not at any of the active versions to current (makes eol's technically unecessary)

### OFFLINE REDIRECTS 
[[redirects]]
from = "/docs/php-library/v1.17/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.16/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.15/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.14/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.13/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.12/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.11/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.10/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.9/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.8/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.7/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.6/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.5/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.4/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.3/*"
to = "/docs/php-library/current/:splat"

[[redirects]]
from = "/docs/php-library/v1.2/*"
to = "/docs/php-library/current/:splat"


### PAGE-SPECIFIC REDIRECTS

[[redirects]]
from = "/docs/php-library/v2.x/reference/method/MongoDBMapReduceResult-getCounts/"
to = "/docs/php-library/v2.x/reference/class/MongoDBCollection/"

[[redirects]]
from = "/docs/php-library/v2.x/reference/method/MongoDBModelIndexInfo-isGeoHaystack/"
to = "/docs/php-library/v2.x/reference/class/MongoDBModelIndexInfo/"


### ALIAS REDIRECTS
[[redirects]]
from = "/docs/php-library/master/*"
to = "/docs/php-library/upcoming/:splat"

[[redirects]]
from = "/docs/php-library/v2.x/*"
to = "/docs/php-library/current/:splat"
status = 302


### WILDCARDS

[[redirects]]
from = "/docs/php-library/:version/tutorial/collation/"
to = "/docs/php-library/:version/"
force = true

[[redirects]]
from = "/docs/php-library/:version/tutorial/commands/"
to = "/docs/php-library/:version/run-command/"
force = true

[[redirects]]
from = "/docs/php-library/:version/tutorial/encryption/"
to = "/docs/php-library/:version/security/in-use-encryption/"
force = true

[[redirects]]
from = "/docs/php-library/:version/tutorial/server-selection/"
to = "/docs/php-library/:version/monitoring-logging/monitoring/"
force = true

[[redirects]]
from = "/docs/php-library/:version/tutorial/client-side-encryption/"
to = "/docs/php-library/:version/security/in-use-encryption/"
force = true

[[redirects]]
from = "/docs/php-library/:version/aggregation/atlas-search/"
to = "/docs/php-library/:version/atlas-search/"

[[redirects]]
from = "/docs/php-library/:version/aggregation/vector-search/"
to = "/docs/php-library/:version/vector-search/"

[[redirects]]
from = "/docs/php-library/:version/aws-lambda/"
to = "/docs/php-library/:version/connect/aws-lambda/"

[[redirects]]
from = "/docs/php-library/:version/builders/"
to = "/docs/php-library/:version/crud/builders/"

[[redirects]]
from = "/docs/php-library/:version/compatibility/"
to = "/docs/drivers/compatibility/?driver-language=php&php-driver-framework=php-driver"

[[redirects]]
from = "/docs/php-library/:version/references/compatibility/"
to = "/docs/drivers/compatibility/?driver-language=php&php-driver-framework=php-driver"

[[redirects]]
from = "/docs/php-library/:version/connect/stable-api/"
to = "/docs/php-library/:version/connect/connection-options/stable-api/"

[[redirects]]
from = "/docs/php-library/:version/connect/tls/"
to = "/docs/php-library/:version/security/tls/"

[[redirects]]
from = "/docs/php-library/:version/data-formats/codecs/"
to = "/docs/php-library/:version/data-formats/custom-types/codecs/"

[[redirects]]
from = "/docs/php-library/:version/databases-collections/time-series/"
to = "/docs/php-library/:version/data-formats/time-series/"

[[redirects]]
from = "/docs/php-library/:version/faq/"
to = "/docs/php-library/:version/"

[[redirects]]
from = "/docs/php-library/:version/get-started/connect-to-mongodb/"
to = "/docs/php-library/:version/get-started/"

[[redirects]]
from = "/docs/php-library/:version/monitoring/"
to = "/docs/php-library/:version/monitoring-logging/"

[[redirects]]
from = "/docs/php-library/:version/monitoring/cluster-monitoring/"
to = "/docs/php-library/:version/monitoring-logging/monitoring/"

[[redirects]]
from = "/docs/php-library/:version/read-write-pref/"
to = "/docs/php-library/:version/crud/read-write-pref/"

[[redirects]]
from = "/docs/php-library/:version/read/"
to = "/docs/php-library/:version/crud/"

[[redirects]]
from = "/docs/php-library/:version/read/change-streams/"
to = "/docs/php-library/:version/monitoring-logging/change-streams/"

[[redirects]]
from = "/docs/php-library/:version/read/count/"
to = "/docs/php-library/:version/crud/query/count/"

[[redirects]]
from = "/docs/php-library/:version/read/cursor/"
to = "/docs/php-library/:version/crud/query/cursor/"

[[redirects]]
from = "/docs/php-library/:version/read/distinct/"
to = "/docs/php-library/:version/crud/query/distinct/"

[[redirects]]
from = "/docs/php-library/:version/read/project/"
to = "/docs/php-library/:version/crud/query/project/"

[[redirects]]
from = "/docs/php-library/:version/read/retrieve/"
to = "/docs/php-library/:version/crud/query/retrieve/"

[[redirects]]
from = "/docs/php-library/:version/read/specify-a-query/"
to = "/docs/php-library/:version/crud/query/specify-a-query/"

[[redirects]]
from = "/docs/php-library/:version/read/specify-documents-to-return/"
to = "/docs/php-library/:version/crud/query/specify-documents-to-return/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/aws-lambda/"
to = "/docs/php-library/:version/aws-lambda/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/codecs/"
to = "/docs/php-library/:version/data-formats/codecs/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/connecting/"
to = "/docs/php-library/:version/connect/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/crud/"
to = "/docs/php-library/:version/crud/insert/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/custom-types/"
to = "/docs/php-library/:version/data-formats/custom-types/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/decimal128/"
to = "/docs/php-library/:version/data-formats/decimal128/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/example-data/"
to = "/docs/php-library/:version/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/gridfs/"
to = "/docs/php-library/:version/crud/gridfs/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/indexes/"
to = "/docs/php-library/:version/indexes/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/install-php-library/"
to = "/docs/php-library/:version/get-started/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/modeling-bson-data/"
to = "/docs/php-library/:version/data-formats/modeling-bson-data/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/stable-api/"
to = "/docs/php-library/:version/connect/connection-options/stable-api/"

[[redirects]]
from = "/docs/php-library/:version/tutorial/tailable-cursor/"
to = "/docs/php-library/:version/read/cursor/"

[[redirects]]
from = "/docs/php-library/:version/upgrade/"
to = "/docs/php-library/:version/references/upgrade/"

[[redirects]]
from = "/docs/php-library/:version/whats-new/"
to = "/docs/php-library/:version/references/release-notes/"

[[redirects]]
from = "/docs/php-library/:version/write/"
to = "/docs/php-library/:version/crud/"

[[redirects]]
from = "/docs/php-library/:version/write/bulk-write/"
to = "/docs/php-library/:version/crud/bulk-write/"

[[redirects]]
from = "/docs/php-library/:version/write/delete/"
to = "/docs/php-library/:version/crud/delete/"

[[redirects]]
from = "/docs/php-library/:version/write/gridfs/"
to = "/docs/php-library/:version/crud/gridfs/"

[[redirects]]
from = "/docs/php-library/:version/write/insert/"
to = "/docs/php-library/:version/crud/insert/"

[[redirects]]
from = "/docs/php-library/:version/write/replace/"
to = "/docs/php-library/:version/crud/replace/"

[[redirects]]
from = "/docs/php-library/:version/write/transaction/"
to = "/docs/php-library/:version/crud/transaction/"

[[redirects]]
from = "/docs/php-library/:version/write/update/"
to = "/docs/php-library/:version/crud/update/"

[[redirects]]
from = "/docs/php-library/:version/crud/"
to = "/docs/php-library/:version/crud/insert/"

[[redirects]]
from = "/docs/php-library/:version/crud/query/"
to = "/docs/php-library/:version/crud/query/retrieve/"

[[redirects]]
from = "/docs/php-library/:version/data-formats/"
to = "/docs/php-library/:version/data-formats/custom-types/"

[[redirects]]
from = "/docs/php-library/:version/monitoring-logging/"
to = "/docs/php-library/:version/monitoring-logging/monitoring/"

[[redirects]]
from = "/docs/php-library/:version/references/"
to = "/docs/php-library/:version/references/release-notes/"

[[redirects]]
from = "/docs/php-library/:version/reference/"
to = "/docs/php-library/:version/reference/bson/"

[[redirects]]
from = "/docs/php-library/:version/reference/enumeration-classes/"
to = "/docs/php-library/:version/reference/class/MongoDBBulkWriteCommandResult/"

[[redirects]]
from = "/docs/php-library/:version/reference/method/MongoDBMapReduceResult-getIterator/"
to = "/docs/php-library/:version/reference/class/MongoDBBulkWriteCommandResult/"

[[redirects]]
from = "/docs/php-library/:version/stable-api/"
to = "/docs/php-library/:version/connect/connection-options/stable-api/"

#Online versions: dict_keys(['upcoming', 'current', 'v1.x'])
### CATCH ALLS (Redirects any /docs/php-library/ page that would've 404ed to the version's landing page)
[[redirects]]
from = "/docs/php-library/upcoming/*"
to = "/docs/php-library/intermediary/upcoming/:splat"
status = 302

[[redirects]]
from = "/docs/php-library/intermediary/upcoming/*"
to = "/docs/php-library/upcoming"
status = 302


[[redirects]]
from = "/docs/php-library/v1.x/*"
to = "/docs/php-library/intermediary/v1.x/:splat"
status = 302

[[redirects]]
from = "/docs/php-library/intermediary/v1.x/*"
to = "/docs/php-library/v1.x"
status = 302

[[redirects]]
from = "/docs/php-library/current/*"
to = "/docs/php-library/current/404/"
status = 404

### CATCH ALLS (add slug to paths without slug)
[[redirects]]
from = "/docs/php-library/upcoming/*"
to = "/docs/php-library/upcoming/:splat"
status = 200

[[redirects]]
from = "/docs/php-library/current/*"
to = "/docs/php-library/current/:splat"
status = 200

[[redirects]]
from = "/docs/php-library/v1.x/*"
to = "/docs/php-library/v1.x/:splat"
status = 200

[[redirects]]
from = "/docs/php-library/*"
to = "/docs/php-library/current/:splat"
