============================================
Create a {+Cloud-Backup+} Restore Job
============================================

.. include:: /includes/styles/corrections.rst

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/fact-projects-groups-synonyms.rst

.. important::

   If you specify ``"deliveryType" : "automated"`` or
   ``"deliveryType" : "pointInTime"`` in your request body to create an
   automated restore job, |service| **removes all existing data** on
   the target cluster prior to the restore.

.. include:: /includes/api-requirements.rst

.. include:: /includes/fact-api-whitelist-required.rst


Syntax
------

.. include:: /includes/api-base-url.rst

.. code-block:: http

   POST /groups/{PROJECT-ID}/clusters/{CLUSTER-NAME}/backup/restoreJobs/

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 14 11 55
   :header-rows: 1
   :stub-columns: 1

   * - Path Parameter
     - Type
     - Necessity
     - Description

   * - PROJECT-ID
     - string
     - Required
     - Unique identifier of the :ref:`project <group-id>` for the
       |service| cluster whose snapshot you want to restore.

   * - SOURCE-CLUSTER-NAME
     - string
     - Required
     - Name of the |service| cluster whose snapshot you want to
       restore.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/api/no-query-single-parameters.rst

The request body, response body, and examples depend on the type of
restore:

.. tabs::

   .. tab:: Automated
      :tabid: automated

   .. tab:: {+PIT-Restore+}
      :tabid: pit

   .. tab:: Downloaded
      :tabid: downloaded

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. tabs::
   :hidden:

   .. tab:: Automated
      :tabid: automated

      .. include:: /includes/api/list-tables/cloud-backup-restore/requests/automated.rst

   .. tab:: {+PIT-Restore+}
      :tabid: pit

      .. include:: /includes/api/list-tables/cloud-backup-restore/requests/pit.rst

   .. tab:: Downloaded
      :tabid: downloaded

      .. include:: /includes/api/list-tables/cloud-backup-restore/requests/download.rst

Response
--------

.. tabs::
   :hidden:

   .. tab:: Automated
      :tabid: automated

      .. include:: /includes/api/list-tables/cloud-backup-restore/responses/automated.rst

   .. tab:: {+PIT-Restore+}
      :tabid: pit

      .. include:: /includes/api/list-tables/cloud-backup-restore/responses/pit.rst

   .. tab:: Downloaded
      :tabid: downloaded

      .. include:: /includes/api/list-tables/cloud-backup-restore/responses/download.rst

Example Request
---------------

.. tabs::
   :hidden:

   .. tab:: Automated
      :tabid: automated

      .. literalinclude:: /includes/api/requests/cloud-backup-restores/automated-restore.sh
         :language: json
         :linenos:
         :emphasize-lines: 5-10

   .. tab:: {+PIT-Restore+}
      :tabid: pit

      .. literalinclude:: /includes/api/requests/cloud-backup-restores/pit-restore.sh
         :language: json
         :linenos:
         :emphasize-lines: 5-10

   .. tab:: Downloaded
      :tabid: downloaded

      .. literalinclude:: /includes/api/requests/cloud-backup-restores/download-restore.sh
         :language: json
         :linenos:
         :emphasize-lines: 5-8

Example Response
----------------

.. tabs::
   :hidden:

   .. tab:: Automated
      :tabid: automated

      .. literalinclude:: /includes/api/responses/cloud-backup-restores/automated-restore.json
         :language: json
         :linenos:
         :emphasize-lines: 3, 25-27

   .. tab:: {+PIT-Restore+}
      :tabid: pit

      .. literalinclude:: /includes/api/responses/cloud-backup-restores/pit-restore.json
         :language: json
         :linenos:
         :emphasize-lines: 3, 25-28

   .. tab:: Downloaded
      :tabid: downloaded

      .. literalinclude:: /includes/api/responses/cloud-backup-restores/download-restore.json
         :language: json
         :linenos:
         :emphasize-lines: 3, 32

