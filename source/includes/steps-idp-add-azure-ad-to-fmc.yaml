---
stepnum: 1
ref: configure-azure-idp-go-to-fmc
inherit:
  file: steps-manage-domain-mapping.yaml
  ref: manage-idp-domain-mapping-fmc

---
stepnum: 2
ref: configure-azure-idp-add-idp
title: "Add |idp-provider| to |mms| as an Identity Provider."
level: 4
content: |

  a. Click :guilabel:`Add Identity Providers`

  #. If you do not have any Identity Providers configured yet, click
     :guilabel:`Setup Identity Provider`. Otherwise, On the
     :guilabel:`Identity Providers` screen, click
     :guilabel:`Add Identity Provider`.

  #. Enter or select the following |saml| Protocol Settings. All fields
     are required:

     .. list-table::
         :header-rows: 1
         :widths: 20 40

         * - Field
           - Description

         * - :guilabel:`Configuration Name`
           - Enter a descriptive name, such as ``Azure AD``.

         * - :guilabel:`IdP Issuer URI`
           - Paste the :guilabel:`Azure AD Identifier` you copied from
             |azure| earlier in the tutorial.

         * - :guilabel:`IdP Single Sign-On URL`
           - Paste the :guilabel:`Login URL` you copied from |azure|
             earlier in the tutorial.

         * - :guilabel:`IdP Signature Certificate`
           - Upload the ``Base64``-encoded |saml| signing certificate 
             you downloaded from |azure| earlier in the tutorial.

             You can either:

             - Upload the certificate from your computer, or
   
             - Paste the contents of the certificate into a text box.

         * - :guilabel:`Request Binding`
           - Select :guilabel:`HTTP POST`.

         * - :guilabel:`Response Signature Algorithm`
           - Select :guilabel:`SHA-256`.

  #. Click :guilabel:`Next`.
---
stepnum: 3
ref: configure-azure-idp-download-metadata
title: "Download the metadata file with details that recognize MongoDB as a Service Provider."
level: 4
content: |

  a. Click :guilabel:`Download metadata`. You upload this file to 
     |idp-provider| in the next step.
  b. Click :guilabel:`Finish`.

---
stepnum: 4
ref: configure-azure-idp-upload-metadata
title: "Upload the metadata file to |azure| to finish configuring |idp-provider| as an |idp|."
level: 4
content: |

  To upload the file, see the screenshot in step 3 of
  :azure:`Enable single sign-on for an app </active-directory/manage-apps/add-application-portal-setup-sso#enable-single-sign-on-for-an-app>`
  in the |azure| documentation. Click :guilabel:`Upload metadata file`
  on the SSO configuration page, as shown in the screenshot in the
  linked |azure| documentation.

  .. include:: /includes/optional-idp-relay-state-step.rst
  
...
