.. _provision-migration-host:

==========================
Provision a Migration Host
==========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol
   
To live migrate your  MongoDB deployment managed in |mms| to
|service-short|, provision a server for the migration host.

Overview
--------

The migration host is a server on which you install a dedicated {+mdbagent+}.
This {+mdbagent+} automates Live Migration operations. It requires that
you set its configuration option ``agentFeatureCloudMigrationEnabled`` to ``true``.

You use the migration host to manage the Live Migration process of your
deployment from |mms| to |service-short|. You can't use the migration host
for any other purposes.

After you provision the migration host, its server appears under the
:guilabel:`Servers` tab. A {+mdbagent+} on the migration host runs a
one-time migration of data from |mms| to |service-short| and reports the
Live Migration status back to |mms|.

To learn about starting a Live Migration from |mms|, see
:ref:`Migrate a Deployment to Atlas <migrate-to-atlas>` and review the
:ref:`workflow for Live Migration to Atlas <lm-workflow>`.

Considerations
--------------

If you plan to migrate more than one deployment at a time, create a
dedicated migration host for each of the deployments that you want
to migrate to |service-short|.

.. include:: /includes/fact-live-migration-host-performance.rst

.. _live-migration-host-supported-platforms:

Prerequisites
-------------

The migration host must use a 64-bit chip architecture and one of the
following supported platforms:

- Amazon Linux 2 (linux-x86_64-enterprise-amazon2)
- ARM64 Ubuntu 16.04
- ARM64 Ubuntu 18.04
- ARM64 Ubuntu 20.04
- Debian 10
- Debian 8.1
- Debian 9.2
- PPC64LE RHEL 7.1
- PPC64LE RHEL 8.1
- PPC64LE Ubuntu 16.04
- PPC64LE Ubuntu 18.04
- RHEL 6.2
- RHEL 7.0
- RHEL 8.0
- s390x RHEL 6.7
- s390x RHEL 7.2
- s390x SLES 12
- s390x Ubuntu 16.04
- s390x Ubuntu 18.04
- SLES 12
- SLES 15
- Ubuntu 18.04
- Ubuntu 20.04

.. note::
   The configuration of a migration host for Live Migration is not
   supported on Windows or macOS. You can still live migrate your data
   from a Windows-based deployment to |service-short| if you
   provision your migration host on one of the platforms it supports. 
   You can't live migrate your data from a macOS-based deployment to 
   |service-short|.

Procedure
---------

.. include:: /includes/steps/install-agent-live-migration.rst

Next Steps
----------

Once you have provisioned the migration host, you can switch to
|service-short| and follow the steps in the wizard to
:atlas:`start the Live Migration process </migration-from-com>`.
