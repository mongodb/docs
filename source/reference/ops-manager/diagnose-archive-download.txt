.. _mcli-om-diagnose-archive-download-cmd:

==============================================
mongocli ops-manager diagnose-archive download
==============================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``diagnose-archive download`` command downloads a diagnostic 
archive for the specified |onprem| project to a ``.tar.gz`` file. 
You can also download diagnostic archives through the |mms|
:opsmgr:`API </reference/api/diagnostics/get-project-diagnostic-archive/>`.

.. _om-diagnose-archive-download-syntax:

Syntax
------

.. code-block:: text

   mongocli ops-manager|om diagnose-archive download|get
        [ --limit <max-number-of-entries> ]
        [ --minutes <number-of-minutes-ago> ]
        [ --out <file-destination> ]
        [ --output|-o <output-format> ]
        [ --profile|-P <profile-name> ]
        [ --projectId <id-of-project> ]

.. _om-diagnose-archive-download-options:

Options 
-------

.. list-table:: 
   :header-rows: 1 
   :widths: 35 10 50 5

   * - Option 
     - Type 
     - Description 
     - Required?

   * - ``--limit``
     - integer
     - Maximum number of entries for the diagnostic archive.
     - no

   * - ``--minutes``
     - integer
     - Time range of the diagnostic archive, beginning at the 
       specified number of minutes in the past and ending at the 
       present time.

       .. example::

          To retrieve a diagnostic archive with data for the last 10 
          minutes, specify ``--minutes 10``.
     - no

   * - ``--out``, ``-o``
     - string
     - Output filename or path to filename. If omitted, the diagnostic 
       archive is downloaded to your current directory as 
       ``diagnose-archive.tar.gz``.
     - no

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are saved. If omitted, uses the {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project containing the diagnostic 
       archive you want to download. If omitted, uses the project ID in 
       the profile or the :ref:`environment variable <mcli-env-var>`.

       .. include:: /includes/admonitions/note-get-project-id.rst
     - no

.. _om-diagnose-archive-download-output:

Output
------

The command downloads the diagnostic archive of the specified |mms| 
project to:

- The current directory as a file named ``diagnose-archive.tar.gz``, or 

- A directory and filename you specify with the ``--out`` option.

If the command returns an error,
see :ref:`Troubleshooting <mcli-troubleshooting>` for recommended solutions.

Examples
--------

The following example uses the 
``mongocli ops-manager diagnose-archive download`` command to download 
the diagnostic archive for |a-mms| project. The command uses the 
{+default-profile+}, which stores the project ID and the |svc-api-key|\s.

.. code-block:: json

   mongocli ops-manager diagnose-archive download

The previous command downloads the log file ``diagnose-archive.tar.gz`` 
to the current directory.
