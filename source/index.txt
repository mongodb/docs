.. _atlas-data-lake:

=====================
|service| |data-lake|
=====================

.. default-domain:: mongodb

.. include:: /includes/fact-data-lake-beta.rst

.. meta::
   :keywords: |data-lake|

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. _atlas-data-lake-about:

About |service| |data-lake|
---------------------------

Using |service| |data-lake| to ingest your S3 data into |service| clusters 
allows you to quickly query data stored in your |aws| |s3| buckets using the 
:binary:`~bin.mongo` shell, :atlas:`MongoDB Compass </compass-connection>`, and any MongoDB driver.

When you create a |data-lake|, you will grant |service| read only access to 
|s3| buckets in your |aws| account and create a data configuration file that 
maps data from your |s3| buckets to your MongoDB databases and collections.

|service| supports using any M10+ cluster, including Global Clusters, to 
connect to |data-lakes| in the same project. 

.. note::

   If you update your custom |aws| role |arn|, you must update the |aws|
   trust policy associated with the role. See the :guilabel:`Configure a New Data Lake` modal for instructions.

A database user must have one of the following roles to query an |service| 
|data-lake|:

- :authrole:`readWriteAnyDatabase`

- :authrole:`readAnyDatabase`

- A :atlas:`custom role </security-add-mongodb-roles/>` with the  
  :manual:`find </reference/privilege-actions/>` privilege
  
To view, create, or modify any existing 
|data-lakes| in an |service| project, click :guilabel:`Data Lake` on 
the left hand navigation.

.. _atlas-data-lake-prereqs:

Prerequisites
-------------

Verify that you meet the following prerequisites before you create a |data-lake|:

* One or more |aws| |s3| buckets in the same |aws| account.

* An |aws| CLI configured to access your |aws| account. Alternatively, you must have access to the |aws| Management Console
  with permission to create `IAM roles <https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user.html>`_.

  .. note:

   To prevent excessive charges on your bill, create your |service|
   |data-lake| in the same |aws| region as your |s3| data source.

.. _atlas-data-lake-billing:

Billing
-------

|service| |data-lake| incurs costs for the amount of data scanned and
returned by the service.

Total Data Scanned
~~~~~~~~~~~~~~~~~~

|service| charges for the total number of bytes that |data-lake| scans
from your |aws| S3 buckets, rounded up to the nearest megabyte.
|service| charges **$5.00 per TB** of scanned data, with a minimum of
**10 MB** or **$0.00005 per query**.

You can use partitioning strategies and compression in |aws| S3 to
reduce the amount of data scanned.

Total Data Returned
~~~~~~~~~~~~~~~~~~~

|service| charges for the total number of bytes returned by
|data-lake|. This total is the sum of the following data transfers:

- The number of bytes transferred between |data-lake| service nodes
- The number of bytes transferred from |data-lake| to the client

Returned data is billed as outlined in the :guilabel:`Data Transfer
Fees` section of the |service-pricing|_. The cost of data transfer
depends on the Cloud Service Provider charges for same-region,
region-to-region, or region-to-internet data transfer.

.. class:: hidden

   .. toctree::
      :titlesonly:

      /tutorial/getting-started
      /configuration
      /administration
      /reference
      /supported-unsupported
      /release-notes/data-lake
