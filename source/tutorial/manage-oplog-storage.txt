====================
Manage Oplog Storage
====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

When you use :term:`Blockstores <Backup Blockstore Database>` to store your
backups, you can separate where you store your backup data from where you
store the :term:`oplog` entries in your backups.

Throughout the lifecycle of a backup, the :term:`Backup Agent` tails the
:term:`oplog` of each :term:`replica set` and sends new oplog entries to
|onprem|. The oplog entries are sent in compressed bundles of approximately 10
MB in size called :term:`oplog slices <oplog slice>`. These oplog slices are
stored in one or more MongoDB databases called 
:term:`Oplog Stores <Oplog Store Database>`.

This tutorial covers creating additional Oplog Stores to store oplog entries.
Like any MongoDB instance, Oplog Stores can exist on any host running MongoDB 
that the |onprem| application can access.

Prerequisites
-------------

Before creating any Oplog Stores:

- Ensure a storage volume with sufficient capacity to store the oplog MongoDB
  database is attached to the |onprem| or MongoDB server.

- :doc:`Deploy the dedicated MongoDB instance(s) </tutorial/prepare-backing-mongodb-instances>` 
  to host the oplog stores.

- Ensure the server running the |onprem| Backup Daemon has enough disk
  capacity to store the :term:`head` database.

- If you plan on enforcing authentication for the oplog store database,
  :manual:`configure your database for SCRAM-SHA-1 authentication </core/security-scram-sha-1>`. 
  Oplog store databases only support SCRAM-SHA-1 authentication.

.. _add-oplogstore:

Add a Oplog Store
-----------------

.. include:: /includes/steps/admin-add-oplogstore.rst

Edit an Existing Oplog Store
----------------------------

Once created, oplog stores are listed directly on the :guilabel:`Oplog Storage` 
page in a table. Each row contains the settings for each oplog store.

.. include:: /includes/steps/admin-edit-oplogstore.rst

.. _delete-oplogstore:

Delete a Oplog Store
--------------------

.. include:: /includes/steps/admin-delete-oplogstore.rst
