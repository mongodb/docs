.. _om-snapshots:

=========
Snapshots
=========

.. meta::
   :description: View snapshot details and metadata in the Ops Manager Admin interface, including transfer speed, duration, and file counts.

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

This page displays detailed information about backup snapshots, including
snapshot history and performance metadata. Use the snapshot details to
monitor backup performance, analyze transfer speeds, and troubleshoot
completion issues.

.. note::

   Snapshot metadata features are available in |mms| 8.0+, 7.0.2,
   and 6.0.23 or later versions.

View Snapshot Details
---------------------

The Snapshots page displays a table of recent snapshots with basic information
including snapshot timestamps and completion status.

To view detailed snapshot metadata, click the :guilabel:`json` button next
to any snapshot entry. The system displays comprehensive metadata about the
snapshot operation in JSON format, including transfer speed, duration metrics,
file counts, and storage size information.

.. _om-snapshot-metadata:

Snapshot Metadata Fields
-------------------------

When you click the :guilabel:`json` button for a snapshot, |mms|
displays detailed metadata in JSON format. The following table describes
the metadata fields available in the Admin interface:

.. list-table::
   :header-rows: 1
   :widths: 20 15 65

   * - Field
     - Type
     - Description

   * - ``numFiles``
     - number
     - Total number of files included in the snapshot.

   * - ``rsId``
     - string
     - Replica set identifier for the snapshot source.

   * - ``snapshotId``
     - string
     - Unique identifier for the snapshot.

   * - ``sourceMongodHostName``
     - string
     - Hostname and port of the source MongoDB instance from which the
       snapshot was taken (e.g., ``mongodb-host:27017``).

   * - ``startTimeTs``
     - object
     - BSON timestamp object when the snapshot process started. Contains
       ``time`` (Unix timestamp in seconds) and ``inc`` (increment counter)
       fields.

   * - ``state``
     - string
     - Current state of the snapshot. Common values include ``COMPLETE``,
       ``IN_PROGRESS``, and ``FAILED``.

   * - ``storageSize``
     - number
     - Total storage size of the snapshot in bytes.

   * - ``timestamp``
     - object
     - BSON timestamp object representing the oplog timestamp when the
       snapshot was taken. Contains ``time`` (Unix timestamp in seconds)
       and ``inc`` (increment counter) fields.

   * - ``totalDuration``
     - number
     - Total time taken to complete the snapshot in seconds.

   * - ``transferSpeed``
     - number
     - Average transfer speed during snapshot creation in megabytes per
       second.

   * - ``latestUpdateTs``
     - object
     - BSON timestamp object containing the latest update time. Contains
       ``time`` (Unix timestamp in seconds) and ``inc`` (increment counter)
       fields.

   * - ``descriptionCreatedAtTs``
     - object
     - BSON timestamp object when the snapshot description was created.
       Contains ``time`` (Unix timestamp in seconds) and ``inc`` (increment
       counter) fields.

   * - ``dataTransferStartedAtTs``
     - object
     - BSON timestamp object when data transfer began. Contains ``time``
       (Unix timestamp in seconds) and ``inc`` (increment counter) fields.

   * - ``endTimeTs``
     - object
     - BSON timestamp object when the snapshot process ended. Contains
       ``time`` (Unix timestamp in seconds) and ``inc`` (increment counter)
       fields.

   * - ``error``
     - string
     - Error message if the snapshot operation failed or encountered issues.

   * - ``incrementalBackup``
     - boolean
     - Indicates whether this snapshot uses incremental backup
       technology.

   * - ``fileSize``
     - number
     - Total size of files in the snapshot in bytes.

   * - ``dataSize``
     - number
     - Total size of data in the snapshot in bytes.

   * - ``indexSize``
     - number
     - Total size of indexes in the snapshot in bytes.

   * - ``compressedSize``
     - number
     - Total compressed size of the snapshot in bytes.

   * - ``fileListUploadDuration``
     - number
     - Time taken to upload the file list in seconds.

   * - ``finalizeFileListDuration``
     - number
     - Time taken to finalize the file list in seconds.

   * - ``dataBlockUploadDuration``
     - number
     - Time taken to upload data blocks in seconds.

   * - ``numBlocks``
     - number
     - Total number of blocks in the snapshot (incremental backups only).

   * - ``numNewBlocks``
     - number
     - Number of new blocks in the snapshot (incremental backups only).

Example JSON Output
~~~~~~~~~~~~~~~~~~~

The following example shows typical snapshot metadata JSON output:

.. code-block:: json

   {
     "numFiles": 65,
     "rsId": "rs0",
     "snapshotId": "507f1f77bcf86cd799439011",
     "sourceMongodHostName": "mongodb-host:27017",
     "startTimeTs": {
       "time": 1640995200,
       "inc": 1
     },
     "state": "COMPLETE",
     "storageSize": 2748416,
     "timestamp": {
       "time": 1640995260,
       "inc": 1
     },
     "totalDuration": 64,
     "transferSpeed": 1.03645833333333,
     "latestUpdateTs": {
       "time": 1640995264,
       "inc": 1
     },
     "endTimeTs": {
       "time": 1640995264,
       "inc": 1
     },
     "incrementalBackup": false,
     "fileSize": 2748416,
     "dataSize": 2500000,
     "indexSize": 248416,
     "compressedSize": 1800000,
     "fileListUploadDuration": 5,
     "finalizeFileListDuration": 3,
     "dataBlockUploadDuration": 56
   }

.. note::

   Snapshot metadata fields are available in |mms| 8.0+, 7.0.2, and 6.0.23.


