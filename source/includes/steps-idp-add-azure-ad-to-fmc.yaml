---
stepnum: 1
ref: configure-azure-idp-go-to-fmc
inherit:
  file: steps-manage-domain-mapping.yaml
  ref: manage-idp-domain-mapping-fmc

---
stepnum: 2
ref: configure-azure-idp-add-idp
title: "Add |idp-provider| to |mms| as an Identity Provider."
level: 4
content: |

  a. Click :guilabel:`Add Identity Providers`

  #. If you do not have any Identity Providers configured yet, click
     :guilabel:`Setup Identity Provider`. Otherwise, On the
     :guilabel:`Identity Providers` screen, click
     :guilabel:`Add Identity Provider`.

  #. Enter or select the following |saml| Protocol Settings. All fields
     are required:

     .. list-table::
         :header-rows: 1
         :widths: 20 40

         * - Field
           - Description

         * - :guilabel:`Configuration Name`
           - Enter a descriptive name, such as ``Azure AD``.

         * - :guilabel:`Login URL`
           - Enter a URL to serve as the |mms| login page. Give this 
             URL to your users to have them bypass the main |mms| 
             login page where they enter their username. This URL 
             redirects users to the :guilabel:`IdP Single Sign-On URL`.

             .. note::

                The :guilabel:`Login URL` must be unique across MongoDB
                cloud services.

         * - :guilabel:`IdP Issuer URI`
           - Paste the :guilabel:`Azure AD Identifier` you copied from
             |azure| earlier in the tutorial.

         * - :guilabel:`IdP Single Sign-On URL`
           - Paste the :guilabel:`Login URL` you copied from |azure|
             earlier in the tutorial.

         * - :guilabel:`IdP Signature Certificate`
           - Upload the ``Base64``-encoded |saml| signing certificate you
             downloaded from |azure| earlier in the tutorial.

         * - :guilabel:`Request Binding`
           - Select :guilabel:`HTTP POST`.

         * - :guilabel:`Response Signature Algorithm`
           - Select :guilabel:`SHA-256`.

         * - :guilabel:`Apply to Organizations`
           - Select organizations to connect to this |idp|. When users
             authenticate through |idp-provider| for the first time, 
             |mms| grants them membership in the selected 
             organizations. :ref:`Manage organization mapping
             <azure-ad-idp-map-org>` to choose what
             :ref:`role <organization-roles>` these users have within the
             selected organizations.

  #. Click :guilabel:`Next`.
---
stepnum: 3
ref: configure-azure-idp-download-metadata
title: "Download the metadata file with details that recognize MongoDB as a Service Provider."
level: 4
content: |

  a. Click :guilabel:`Download metadata`. You upload this file to 
     |idp-provider| in the next step.
  b. Click :guilabel:`Finish`.

---
stepnum: 3
ref: configure-azure-idp-upload-metadata
title: "Upload the metadata file to |azure| to finish configuring |idp-provider| as an |idp|."
level: 4
content: |

  To upload the file, see the :azure:`Azure documentation 
  </active-directory/manage-apps/configure-single-sign-on-non-gallery-applications#step-1-edit-the-basic-saml-configuration>`.
---
stepnum: 4
ref: configure-azure-idp-test
title: "Validate your single sign-on configuration."
level: 4
content: |

  To confirm your configuration, see the :azure:`Azure documentation 
  </active-directory/manage-apps/configure-single-sign-on-non-gallery-applications#step-5-validate-single-sign-on>`. 
...
