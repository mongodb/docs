ref: cluster-option-clusterProviderRegionOnly
content: |

  For clusters with :guilabel:`Instance Size` of ``M10`` or greater, you can
  specify additional regions to distribute your cluster across for high
  availability or local reads.
       
  .. admonition:: AWS Only
     :class: note
      
     If this is the first ``M10+`` dedicated paid cluster for the selected
     region or regions *and* you plan on creating one or more :abbr:`VPC
     peering connections`, please review the documentation on :doc:`VPC
     Peering Connections </security-vpc-peering>` before continuing.
     
  To deploy a cross-region cluster, click :guilabel:`Enable cross-region
  configuration options`. Cross-region clusters deploy with each node using
  the same configuration options as specified during cluster configuration.
  
  .. note::
    
     Having a large number of regions or having nodes spread across
     long distances may lead to long election times or replication lag.
  
  .. important::
  
     .. include:: /includes/fact-cross-region-limits.rst
  
  The following options are available when configuring cross-region clusters,
  and are only available for clusters using an :guilabel:`Instance Size` of
  ``M10`` or greater:
       
  :guilabel:`Deploy across multiple regions`
     Toggle this field to ``Yes`` to enable distributing your cluster across
     multiple regions in the specified cloud provider, increasing availability
     of a cluster during a partial or total region outage. By default
     |service| displays a :guilabel:`Preferred Region`, which replaces the
     :guilabel:`Region` dropdown. The :guilabel:`Preferred Region` is the
     region |service| places your primary node on deployment.
     
     Click :guilabel:`Add Region` to add a new row for region selection and
     select the region from the dropdown. Specify the desired number of
     :guilabel:`Nodes` for the region.
     
     Each node in the region can participate in :term:`elections <election>`,
     and can become the :term:`primary` as long as the majority of nodes in
     the replica set are available. The total number of electable nodes across
     all regions, excluding read-only regions, must be 3, 5, or 7.
     
     You can also use this option to increase the replication factor of
     single-region clusters by modifying the number of :guilabel:`Nodes` for
     your :guilabel:`Preferred Region` only. You do not have to add additional
     regions to modify the replication factor of your :guilabel:`Preferred
     Region`.
     
     To remove a region, click the :guilabel:`X` next to that region. You
     cannot remove the :guilabel:`Preferred Region`.  
       
     |service| provides checks for whether your selected cross-regional
     configuration provides availability during partial or whole regional
     outages.
       
  :guilabel:`Deploy read-only replicas`
     Toggle this field to ``Yes`` to enable creating regions for deploying
     read-only nodes for facilitating local secondary reads.
     
     Click :guilabel:`Add Read-Only Region` to add a new row for region
     selection and select the region from the dropdown. Specify the desired
     number of :guilabel:`Nodes` for the region.
     
     Each node in the region cannot participate in :term:`elections
     <election>`, and cannot become the :term:`primary`. Read-only regions do
     not provide high availability.
     
     To remove a read-only region, click the :guilabel:`X` next to that region.
       
  Regions marked as :guilabel:`Recommended` provide higher availability
  compared to other regions. For more information, see:
       
  - :ref:`AWS Recommended Regions <amazon-aws-availability-zones>`.
       
  - :ref:`GCP Recommended Regions <google-gcp-availability-zones>`.
       
  - :ref:`Azure Recommended Regions <microsoft-azure-availability-zones>`
  
  .. include:: /includes/extracts/fact-no-node-restriction-base.rst
  
---
ref: cluster-option-clusterProviderRegion
content: |

  The cloud provider and region, or physical location, of your MongoDB
  cluster. The choice of cloud provider and region affects the configuration
  options for the available instance sizes, network latency for clients
  accessing your cluster, and the :doc:`cost of running the cluster
  </billing>`.
  
  .. include:: /includes/extracts/cluster-option-clusterProviderRegionOnly.rst

---
ref: cluster-option-clusterInstance
content: |

  The memory, storage, and IOPS specification for each data-bearing server
  [#data-bearing]_ for your |service| cluster.

  .. include:: /includes/fact-instance-size-groupings.rst

  .. include:: /includes/enable-sharding-requirements.rst

  Each instance size comes with a default set of resources. Depending on the
  selected cloud service provider and instance size, |service| can provide the
  following configuration options:

  - :guilabel:`Custom Storage Capacity`: The size of the server root volume.
    Changes to storage capacity affects :ref:`cost <instance-size-costs>`.

  - :guilabel:`Custom Storage Speed`: The input/output operations per second
    (IOPS) the system can perform. Changes to storage speed affects :ref:`cost
    <instance-size-costs>`.

  - :guilabel:`Use encrypted storage volumes`: Encrypts root volume for data at
    rest inside the volume and all data moving between the volume and the
    instance.

    As of July 11th, 2017, new |service| clusters are encrypted by default.

  For more information on the default resources and available configuration
  options for each cloud service provider, see:

  - :ref:`AWS Configuration Options <amazon-aws-configuration-options>`
  - :ref:`GCP Configuration Options <google-gcp-configuration-options>`
  - :ref:`Azure Configuration Options
    <microsoft-azure-configuration-options>`.

  .. seealso:: :ref:`connection-limits`

---
ref: cluster-option-clusterReplication
content: |

  The replication factor of your cluster is the number of :term:`replica set`
  nodes in the cluster. Each node keeps a copy of your database, providing
  high availability and data redundancy. If your deployment is a sharded
  cluster, each shard is a replica set, and the replication factor determines
  the number of nodes in each shard replica set.
  
  This option is only available for clusters using an :guilabel:`Instance Size`
  of ``M10`` or greater.

  To modify this value, under :guilabel:`Region` select
  :guilabel:`Enable cross-region configuration options`. Modify the number
  of :guilabel:`Nodes` for your :guilabel:`Primary Region`. You must
  select either 3, 5, or 7 nodes.

  Each node runs on a separate instance. For details on how the number of
  server instances affects cost, see :ref:`server-number-costs`.

  For more information on replica sets, see :manual:`Replication
  </replication>` in the MongoDB manual.

---
ref: cluster-option-clusterSharding
content: |

  Toggle :guilabel:`Do you want a sharded cluster?` to ``Yes`` to deploy
  your cluster as a :term:`Sharded Cluster <sharded cluster>`.

  :term:`Sharded clusters <sharded cluster>` support horizontal scaling and
  consists of shards, :ref:`config servers <sharding-config-server>` and
  :term:`mongos<mongos>` routers .

  .. include:: /includes/enable-sharding-requirements.rst

  .. include:: /includes/list-sharded-cluster-components.rst

  .. include:: /includes/fact-aws-instance.rst

  For details on how the number of server instances affect cost, see
  :ref:`server-number-costs`.

  For more information on sharded clusters, see :manual:`Sharding </sharding>`
  in the MongoDB manual.

---
ref: cluster-option-clusterShardingNum
content: |

  This field is visible only if the deployment is a sharded cluster.
  
  You can set the number of shards to deploy with the sharded cluster. 
  You cannot have fewer than two shards.

---
ref: cluster-option-clusterBackup
content: |

  Toggle :guilabel:`Do you want to enable backup?` to ``Yes`` to enable
  backups for the cluster. You cannot enable backups for clusters using
  an :guilabel:`Instance Size` smaller than ``M10``.

  If enabled, |service| takes snapshots of your databases at regular intervals
  and retains them according to your project's :ref:`retention policy
  <retention-policy>`.

---
ref: cluster-option-clusterSecurity
content: |

  These fields appear only if no MongoDB user exists for your |service|
  project, such as if you are creating the first cluster in the project and
  have not yet set up MongoDB users. Fill them in to create a MongoDB admin
  user with the specified username and password.

  **When creating a new admin user, be sure to save the credentials.**

  The admin user has the :atlasrole:`Atlas admin` role for the |service|
  project. This includes read and write access to any cluster in the project.

  To have |service| generate the password for the admin user, click
  :guilabel:`Autogenerate Secure Password`. If you choose to have |service|
  generate the password, |service| displays it only once.

...