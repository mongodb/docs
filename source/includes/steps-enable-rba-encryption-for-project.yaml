stepnum: 1
level: 4
ref: nav-rbac-for-encryption
inherit:
  file: steps-source-project-nav.yaml
  ref: project-nav-advanced-page
---
stepnum: 2
level: 4
ref: toggle-rbac-for-encryption
inherit:
  file: steps-enable-encryption-for-project.yaml
  ref: toggle-encryption-on
---
title: "Click the :guilabel:`Authorize a new IAM role` link to authorize 
       an |aws| IAM role to |service| to access your |aws| KMS keys for 
       encryption at rest."
stepnum: 3
level: 4
ref: authorize-role-for-rba-for-encryption
content: | 
  To create a new |aws| IAM role for accessing your |aws| KMS keys for 
  encryption at rest, follow the :ref:`Create New Role with the 
  AWS CLI <set-up-unified-aws-access>` procedure. If you have an existing 
  |aws| IAM role that you want to authorize, follow the :ref:`Add 
  Trust Relationships to an Existing Role <set-up-unified-aws-access>` 
  procedure.
---
title: "Add an access policy to your |aws| IAM role via the |aws| console 
       or CLI. See `Managing IAM policies <https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_manage.html>`__ for more information."
stepnum: 4
level: 4
ref: assign-policy-for-encryption
content: | 
  The access policy for encryption at rest looks similar to the following: 

  .. code-block:: json 

     {
       "Version": "2012-10-17",
       "Statement": [
         {
           "Effect": "Allow",
           "Action": [
             "kms:Decrypt",
             "kms:Encrypt",
             "kms:DescribeKey"
           ],
           "Resource": [
             "arn:aws:kms:us-east-1:123456789012:key/12x345y6-7z89-0a12-3456-xyz123456789"
           ]
         }
       ]
     }
---
title: "Repeat steps 1 and 2 to assign the role you authorized in step 3 
       to your project for accessing your encryption key."
stepnum: 5
level: 4
ref: enable-rba-for-encryption
---
title: "Specify the following for accessing your encryption key and click 
       :guilabel:`Save`."
stepnum: 6
level: 4
ref: enable-rbac-for-encryption
content: | 

  a. Select the role to assign from the :guilabel:`AWS IAM role` dropdown 
     list.
  
  #. Specify your encryption key in the :guilabel:`Customer Master Key ID` 
     field.

  #. Select the |aws| region for your encryption key.
...