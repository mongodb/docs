---
program: _shared
name: apiVersion
type: string
directive: setting
optional: false
description: |
  *Required.* Version of the |k8s-mdbrsc| schema.

---
program: _shared
name: kind
type: string
directive: setting
optional: false
description: |
  *Required.* Kind of |k8s-mdbrsc| to create. Set this to ``MongoDB``

---
program: _shared
name: metadata.name
type: string
directive: setting
optional: false
description: |
  *Required.* Name of the |k8s-mdbrsc| you are creating.

---
program: _shared
name: metadata.namespace
type: string
directive: setting
optional: false
description: |
  *Required.* |k8s| |k8s-ns| where this |k8s-mdbrsc| and other
  |k8s-objs| are created.

---
program: _shared
name: spec.type
type: string
directive: setting
optional: false
description: |
  *Required.* Type of |k8s-mdbrsc| to create. Accepted values
  are:

  - ``Standalone``
  - ``ReplicaSet``
  - ``ShardedCluster``

---
program: _shared
name: spec.version
type: number
directive: setting
optional: false
description: |
  *Required.* Version of MongoDB that is installed on this
  |k8s-mdbrsc|.

  .. note::

     If you update this value, you may want to set
     :setting:`spec.featureCompatibilityVersion` and apply the changes
     using the ``--dry-run`` option. To learn about ``--dry-run``, see
     the ``kubectl``
     `apply <https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#apply>`__
     command.

---
program: _shared
name: spec.featureCompatibilityVersion
type: number
directive: setting
optional: true
description: |

  *Optional.* Limits changes to data that occur with an upgrade to a
  new major version. This allows downgrades to earlier versions. To
  learn more, see :dbcommand:`setFeatureCompatibilityVersion`.

---
program: _shared
name: spec.service
type: string
directive: setting
optional: true
default: <resource_name>+"-svc" and <resource_name>+"-svc-external"
description: |
  Name of |k8s| service to be created or used for a
  |k8s-statefulset|. If the service with this name already exists, the
  |k8s-op-full| does not delete or recreate it. This setting lets
  users to create their custom services and lets the Operator reuse
  them.

---
program: _shared
name: spec.clusterName
type: string
directive: setting
optional: true
default: cluster.local
description: |
  When |k8s| creates a |k8s-statefulset|, the
  |k8s| assigns each |k8s-pod| a |fqdn|. To update |com|, the
  |k8s-op-short| calculates the |fqdn| for each |k8s-pod|
  using a provided clusterName. |k8s| does not provide an |api| to
  query these hostnames.

---
program: _shared
name: spec.project
type: string
directive: setting
optional: false
description: |
  *Required.* Name of the |k8s-configmap| with the |com| connection 
  configuration.

  .. admonition:: Value must match namespace and name of ConfigMap
     :class: note

     This value *must* match the value you provided for 
     :setting:`metadata.name` in your |com| 
     :ref:`project ConfigMap <create-k8s-project>`.

     If this |k8s-mdbrsc| is in a different |k8s-ns| than the
     :ref:`project ConfigMap <create-k8s-project>`, you should
     set this value to the namespace *and* name of the
     ConfigMap in this format:
     ``<namespace>/<name>``

  .. include:: /includes/k8s/fact-k8s-operator-manages-configmap.rst

---
program: _shared
name: spec.credentials
type: string
directive: setting
optional: false
description: |

  *Required.* Name of the |k8s| |k8s-secret| you :ref:`created
  <create-k8s-secret>` as |mms| |api| authentication credentials for
  the |k8s-op-short| to communicate with |com|.

  .. admonition:: Value must use namespace and name of Secret
     :class: note

     This value *must* match the value you provided for
     :setting:`namespace` and `name` for your |mms| |k8s| :ref:`Secret
     <create-k8s-credentials>`.

     If this |k8s-obj| is in a different |k8s-ns| than the Secret, you
     should set this value to the namespace *and* name of the Secret in
     this format: ``<namespace>/<name>``

  .. include:: /includes/k8s/fact-k8s-operator-manages-secret.rst

---
program: _shared
name: spec.persistent
type: boolean
directive: setting
optional: true
default: true
description: |
  .. include:: /includes/k8s/k8s-persistent-volumes.rst

---
program: _shared
name: spec.podSpec.cpu
type: string
directive: setting
optional: true
description: |
  Minimum CPU capacity that must be available on a |k8s|
  |k8s-node| to host this {{component}} |k8s-mdbrsc|.
replacement:
  component: :term:`standalone deployment`

---
program: _shared
name: spec.podSpec.memory
type: string
directive: setting
optional: false
description: |
  *Required.* Minimum memory capacity that must be available on a
  |k8s| |k8s-node| to host this |k8s-mdbrsc| on |k8s|. This value is
  expressed as an integer followed by a unit of memory in
  |jedec| notation.

  .. example::

     If this |k8s-mdbrsc| requires 4 gigabytes of memory, set
     this value to ``4G``.

  This value maps both to
  :k8sdocs:`"limits" and "requests" </reference/generated/kubernetes-api/v1.10/#resourcerequirements-v1-core>`
  for memory for the pod created.

  .. important::

     If this value is not set, the WiredTiger cache cannot be
     calculated correctly. This impacts cluster performance.

---
program: _shared
name: spec.podSpec.storage
type: string
directive: setting
optional: true
default: 16G
description: |
  Minimum storage capacity that must be available on a |k8s|
  |k8s-node| to host this {{component}} on |k8s|. This value is
  expressed as an integer followed by a unit of storage in |jedec|
  notation.

  .. example::

     If this |k8s-mdbrsc| requires 60 gigabytes of storage space, set
     this value to ``60G``.
replacement:
  component: :term:`standalone deployment`

---
program: _shared
name: spec.podSpec.storageClass
type: string
directive: setting
optional: true
description: |
  *Deprecated.* Type of storage needed for this {{component}}. The user
  may create this storage type as a |k8s-sc| object before using it in
  this |k8s-obj| specification.
replacement:
  component: :term:`standalone deployment`

---
program: _shared
name: spec.podSpec.podAffinity
type: sequence
directive: setting
optional: true
description: |
  |k8s| |k8s-rule| to determine if multiple
  |k8s-mdbrsc| |k8s-pods| must be co-located with other |k8s-pods|.

  .. seealso::

     The |k8s| documentation for use cases on
     `affinity and anti-affinity <https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#more-practical-use-cases>`__

---
program: _shared
name: spec.podSpec.podAntiAffinityTopologyKey
type: string
directive: setting
default: kubernetes.io/hostname
optional: true
description: |

  This sets a |k8s-rule| to spread |k8s-mdbrsc| |k8s-pods|
  to different locations. A location can be a single node, rack, or
  region. This key defines which node
  `label <https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/>`__
  is used to `determine equal location <https://kubernetes.io/docs/concepts/configuration/assign-pod-node/>`__
  for nodes. By default, |k8s-op-short| tries to spread pods across
  different hosts.

---
program: _shared
name: spec.podSpec.nodeAffinity
type: collection
directive: setting
optional: true
description: |
  |k8s| |k8s-rule| to place {{component}} |k8s-pods| on a
  specific range of |k8s-nodes|.

  .. example::

     A user can isolate "dev" and "testing" environments to ensure 
     |k8s-pods| go to |k8s-nodes| with appropriate labels.

---
program: _shared
name: spec.podSpec.persistence.single
type: collection
directive: setting
optional: true
description: |

  Has |k8s-op-short| create one |k8s-pvc| and mount all
  three directories for data, journal, and logs to the same |k8s-pv|.

  .. note::

     - You must set the values in this collection if
       :setting:`spec.persistent` ``: true``.
     - You may set this collection or the ``persistence.multiple``
       collections but not both.

  .. list-table::
     :widths: 20 20 60
     :header-rows: 1

     * - Scalar
       - Data Type
       - Description

     * - ``labelSelector``
       - string
       - `Tag
         <https://kubernetes.io/docs/concepts/storage/persistent-volumes/#selector>`__
         used to bind mounted volumes to directories.

     * - ``storage``
       - string
       - Minimum size of |k8s-pv| that should be mounted. This value is
         expressed as an integer followed by a unit of storage in
         |jedec| notation.

         Default value is {{defaultStorage}}.

         .. example::

            If this |k8s-mdbrsc| requires 60 gigabytes of storage
            space, set this value to ``60G``.

     * - ``storageClass``
       - string
       - Type of storage specified in a |k8s-pvc|. You may create
         this storage type as a |k8s-sc| object before using it in this
         |k8s-obj| specification.


         .. note:: 

            .. include:: /includes/fact-reclaimpolicy-to-retain.rst

replacement:
  component: :term:`standalone deployment`
  defaultStorage: 16G

---
program: _shared
name: spec.podSpec.persistence.multiple.item
type: collection
directive: setting
optional: true
description: |
  Has |k8s-op-short| create a |k8s-pvc| and mount a
  directory for {{storedItem}} to its own |k8s-pv|.

  .. note::

     - You must set the values in this collection if
       :setting:`spec.persistent` ``: true``.
     - You may set this collection or the ``persistence.single``
       collection but not both.

  .. list-table::
     :widths: 20 20 60
     :header-rows: 1

     * - Scalar
       - Data Type
       - Description

     * - ``labelSelector``
       - string
       - `Tag
         <https://kubernetes.io/docs/concepts/storage/persistent-volumes/#selector>`__
         used to bind mounted volumes to directories.

     * - ``storage``
       - string
       - Minimum storage capacity that must be available on a |k8s|
         |k8s-node| to host this {{component}} on |k8s|. This value is
         expressed as an integer followed by a unit of storage in
         |jedec| notation.

         Default value is {{defaultStorage}}.

         .. example::

            If this |k8s-mdbrsc| requires 60 gigabytes of storage
            space, set this value to ``60G``.

     * - ``storageClass``
       - string
       - Type of storage needed for this {{component}}. You may create
         this storage type as a |k8s-sc| object before using it in this
         |k8s-obj| specification.

         .. note:: 

            .. include:: /includes/fact-reclaimpolicy-to-retain.rst

replacement:
  component: :term:`standalone deployment`
  storedItem: data
  defaultStorage: 16G

---
program: _shared
name: spec.logLevel
type: string
directive: setting
optional: true
default: INFO
description: |

  Configures the level of Automation Agent logging inside the
  |k8s-pod|. Accepted values include:

  - ``DEBUG``
  - ``INFO``
  - ``WARN``
  - ``ERROR``
  - ``FATAL``
---
program: _shared
name: spec.security.tls.enabled
type: boolean
directive: setting
optional: true
default: "``false``"
description: |
  Encrypts communications using TLS certificates between:

  - MongoDB hosts in a replica set or sharded cluster configuration
  - Clients (|mongo| shell, drivers, |compass|, and others)
    and the MongoDB deployment

  By default, :setting:`net.ssl.mode` is set to ``requireSSL``. To change the
  |tls| mode used for client and database connections, see
  :setting:`spec.additionalMongodConfig.net.ssl.mode`.
---
program: _shared
name: spec.additionalMongodConfig.net.ssl.mode
type: string
directive: setting
optional: true
default: "``requireSSL``"
description: |
  Specifies which :setting:`sslMode` is used for network connections.
  The following are valid options:

  .. include:: /includes/list-table-requiressl-modes.rst
---
program: _shared
name: spec.security.clusterAuthenticationMode
type: string
directive: setting
optional: true
description: |

  Set to ``x509`` to enable
  :ref:`X.509 internal cluster authentication <x509-internal-authentication>`.
  Requires |tls| on the resource by setting
  :setting:`spec.security.tls.enabled` to ``true``.

  .. important::

     Once internal cluster authentication is enabled, it can not be
     disabled.
...
