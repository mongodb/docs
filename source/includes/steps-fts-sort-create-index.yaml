stepnum: 1
level: 4
ref: nav-to-fts-sort
inherit:
  file: steps-source-project-nav.yaml
  ref: project-nav-search
---
stepnum: 2
level: 4
ref: click-create-fts-index-sort
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-fts-index
---
stepnum: 3
level: 4
ref: select-a-config-method-sort
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: select-a-configuration-method
---
stepnum: 4
level: 4
ref: name-index-sort
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: name-index
---
stepnum: 5
level: 4
ref: enter-index-definition-sort
title: "Specify an index definition."
content: |
  Use the :guilabel:`Visual Editor` or the :guilabel:`JSON Editor` 
  in the |service| user interface to create an index definition that:

  - Indexes the ``released``, ``title``, and ``year`` fields as date, string, and number field types respectively.
  - Analyzes the title field using the ``lucene.keyword`` analyzer and
    :ref:`autocomplete <autocomplete-ref>` operator.
  - Stores the ``title`` field on ``mongot``.

  .. tabs::
      
     .. tab:: Visual Editor
        :tabid: visual-editor

        a. Click :guilabel:`Refine Your Index`.
        #. Change :guilabel:`Dynamic Mapping` to :guilabel:`Off`.
        #. Under :guilabel:`Field Mappings`, click :guilabel:`Add Field`.
        #. Add the following fields in the :guilabel:`Field Mappings` section:
              
           .. list-table:: 
              :header-rows: 1
   
              * - Field Name 
                - Dynamic Mapping 
                - Store Original Value
                - Data Type Configuration 

              * - ``title``
                - Change :guilabel:`Enable Dynamic Mapping` to 
                  :guilabel:`Off`.
                - Change :guilabel:`Store Original Value` to 
                  :guilabel:`On`.
                - Click :guilabel:`Add Data Type`, and select 
                  :guilabel:`String`. Change the :guilabel:`Index Analyzer` to
                  ``lucene.keyword``.
                  
                  Click :guilabel:`Add Data Type`, and select 
                  :guilabel:`Autocomplete`. Change the :guilabel:`Max
                  Grams` and :guilabel:`Min Grams` to
                  ``5``, and :guilabel:`Fold Diacritics` to ``false``.
                  Keep :guilabel:`Tokenization` as ``edgeGram``.

              * - ``year``
                - Change :guilabel:`Enable Dynamic Mapping` to 
                  :guilabel:`Off`.
                - Keep :guilabel:`Store Original Value` as
                  :guilabel:`Off`.
                - Click :guilabel:`Add Data Type`, and select 
                  :guilabel:`Number`.

              * - ``released``
                - Change :guilabel:`Enable Dynamic Mapping` to 
                  :guilabel:`Off`.
                - Keep :guilabel:`Store Original Value` as
                  :guilabel:`Off`.
                - Click :guilabel:`Add Data Type`, and select 
                  :guilabel:`Date`.

        #. Click :guilabel:`Save Changes`.

     .. tab:: JSON Editor
        :tabid: json-editor

        a. Replace the default definition with the following:

           .. code-block:: json
              :linenos:

              {
                "mappings": {
                  "dynamic": false,
                  "fields": {
                    "released": {
                      "type": "date"
                    },
                    "title": [
                      {
                        "foldDiacritics": false,
                        "maxGrams": 5,
                        "minGrams": 5,
                        "tokenization": "edgeGram",
                        "type": "autocomplete"
                      },
                      {
                        "analyzer": "lucene.keyword",
                        "searchAnalyzer": "lucene.keyword",
                        "type": "string"
                      }
                    ],
                    "year": {
                      "type": "number"
                    }
                  }
                },
                "storedSource": {
                  "include": [
                    "title"
                  ]
                }
              }

        #. step:: Click :guilabel:`Next`.
---
ref: click-create-index-fts-sort
level: 4
stepnum: 6
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-search-index
---
ref: close-in-progress-fts-sort
level: 4
stepnum: 7
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: close-in-progress
---
ref: wait-for-index-fts-sort
level: 4
stepnum: 8
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: wait-for-index
---
