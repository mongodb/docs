title: Import the public key used by the package management system.
stepnum: 1
ref: import-key
content: |

   From a terminal, issue the following command to import the
   MongoDB public GPG Key from `<https://www.mongodb.org/static/pgp/server-{+pgp-version+}.asc>`_:

   .. code-block:: sh

      wget -qO - https://www.mongodb.org/static/pgp/server-{+pgp-version+}.asc | sudo apt-key add -

   The operation should respond with an ``OK``.

---
title: Create a list file for MongoDB.
stepnum: 2
ref: sources-list
content: |

   Create the list file
   ``/etc/apt/sources.list.d/mongodb-org-{+version+}.list`` for your
   version of Ubuntu.
   Click on the appropriate tab for your version of Ubuntu.
   If you are unsure of what Ubuntu version the host is running,
   open a terminal or shell on the host and execute ``lsb_release -dc``. 

   .. tabs::

      tabs:
         - id: bionic
           name: Ubuntu 18.04 (Bionic)
           content: |

              Create the ``/etc/apt/sources.list.d/mongodb-org-{+version+}.list``
              file for Ubuntu 18.04 (Bionic):
             
              .. code-block:: sh
             
                 echo "deb [ arch=amd64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/{+version+} multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-{+version+}.list

         - id: xenial
           name: Ubuntu 16.04 (Xenial)
           content: |

              Create the ``/etc/apt/sources.list.d/mongodb-org-{+version+}.list``
              file for Ubuntu 16.04 (Xenial):
             
              .. code-block:: sh
             
                 echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/{+version+} multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-{+version+}.list

         - id: trusty
           name: Ubuntu 14.04 (Trusty)
           content: |

              Create the
              ``/etc/apt/sources.list.d/mongodb-org-{+version+}.list``
              file for Ubuntu 14.04 (Trusty):

              .. code-block:: sh

                 echo "deb [ arch=amd64 ] https://repo.mongodb.org/apt/ubuntu trusty/mongodb-org/{+version+} multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-{+version+}.list


---
title: Reload local package database.
stepnum: 3
ref: reload
action:
  pre: |
    Issue the following command to reload the local package database:
  language: sh
  copyable: true
  code: |
    sudo apt-get update
---
title: Install the MongoDB packages.
stepnum: 4
ref: install
# pre: |
#   You can install either the latest stable version of MongoDB or a
#   specific version of MongoDB.
action:
  - heading:
      text: Install the latest stable version of MongoDB.
      character: "'"
    pre: "Issue the following command:"
    language: sh
    copyable: true
    code: |
      sudo apt-get install -y mongodb-org
  - heading:
      text: Install a specific release of MongoDB.
      character: "'"
    pre: |
      .. include:: /includes/release/pin-version-intro.rst
      .. include:: /includes/release/pin-repo-to-version-deb.rst
      .. include:: /includes/release/pin-version-outro-org.rst
  - heading:
      text: Pin a specific version of MongoDB.
      character: "'"
    pre: |
      Although you can specify any available version of MongoDB,
      ``apt-get`` will upgrade the packages when a newer version
      becomes available. To prevent unintended upgrades, pin the
      package. To pin the version of MongoDB at the currently
      installed version, issue the following command sequence:
    language: sh
    code: |
      echo "mongodb-org hold" | sudo dpkg --set-selections
      echo "mongodb-org-server hold" | sudo dpkg --set-selections
      echo "mongodb-org-shell hold" | sudo dpkg --set-selections
      echo "mongodb-org-mongos hold" | sudo dpkg --set-selections
      echo "mongodb-org-tools hold" | sudo dpkg --set-selections
...
