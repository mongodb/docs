.. _avs-edit-index:

=================================
Edit an {+avs+} Index
=================================

.. default-domain:: mongodb

.. meta:: 
   :keywords: atlas vector search, edit an atlas vector search index, modify an atlas vector search index, change an atlas vector search index definition, edit my atlas vector search index, modify my atlas vector search index, change my atlas vector search index definition, edit an atlas vector search index in the atlas ui
   :description: Learn how to modify your Atlas Vector Search index definition through the Atlas UI.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can change the :ref:`index definition <avs-types-vector-search>`
of an existing {+avs+} index from the {+atlas-ui+} and
{+atlas-admin-api+}. You can't rename an index or change the
index type. If you need to change an index name or type, you must
create a new index and delete the old one.

Required Access 
---------------

You must have the :authrole:`Project Search Index Editor` or higher role to
edit an {+avs+} index.

Supported Clients 
-----------------

You can edit an {+avs+} index using the following: 

- {+atlas-ui+}
- {+atlas-admin-api+} :oas-atlas-op:`Update One Atlas Search Index
  <updateAtlasSearchIndex>` endpoint
- {+atlas-cli+} v1.14.3 :atlascli:`atlas clusters search indexes update
  </command/atlas-clusters-search-indexes-update/>` command on both the
  :atlascli:`cloud deployment </atlas-cli-local-cloud/>` and
  :atlascli:`local deployment </atlas-cli-deploy-local>`
- {+mongosh+} v2.1.2 or later
  :method:`db.collection.updateSearchIndex()` method

Procedure
---------

.. tabs:: 

   .. tab:: Atlas UI 
      :tabid: ui 

      .. include:: /includes/steps-avs-edit-index-atlas-ui.txt

   .. tab:: Atlas Administration API 
      :tabid: api 

      To edit an {+avs+} index for a collection using the
      {+atlas-admin-api+}, send a ``PATCH`` request to the |fts|
      ``indexes`` endpoint with either the unique ID or name of the
      index to edit. To learn more about the syntax and parameters for
      the endpoint, see
      :oas-atlas-op:`Update One By Name </updateAtlasSearchIndexByName>` and
      :oas-atlas-op:`Update One By ID </updateAtlasSearchIndex>`.

   .. tab:: Atlas CLI 
      :tabid: atlascli 

      To edit an {+avs+} index for a collection using {+atlas-cli+},
      run the following command: 

      .. code-block:: shell 
         :copyable: true
      
         atlas clusters search indexes update [indexName] [options]
      
      To learn more about the command syntax and parameters, see the
      {+atlas-cli+} documentation for :atlascli:`atlas clusters search
      indexes update </command/atlas-clusters-search-indexes-update/>`
      command. 

   .. tab:: mongosh 
      :tabid: mongosh 

      To edit an {+avs+} index for a collection using {+mongosh+}, do
      the following:
      
      1. :ref:`Connect <connect-mongo-shell>` to the |service|
         {+cluster+} using {+mongosh+}.   
      #. Switch to the database that contains the collection.
      #. Run the :method:`db.collection.updateSearchIndex()` method. 

         The :method:`db.collection.updateSearchIndex()` method has the
         following syntax: 

         .. code-block:: shell 
            :copyable: true 
            :linenos: 

            db.movies.updateSearchIndex(
              "<index-name>",
              "vectorSearch", //index type
              {
                fields: [
                  {
                    type: "vector",
                    numDimensions: <number-of-dimensions>,
                    path: "<field-to-index>",
                    similarity: "euclidean | cosine | dotProduct"
                  },
                  {
                    "type": "filter",
                    "path": "<field-to-index>"
                  },
                  ...
                ]
              }
            );
