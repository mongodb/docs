ref: alert-overview
edition: onprem
content: |
   When you create a :doc:`group </tutorial/manage-alert-configurations>`
   or :doc:`global </tutorial/manage-global-alerts>` alert configuration,
   specify the targets and alert conditions described here.
---
ref: alert-overview
edition: cloud
content: |
   When you create an :doc:`alert configuration
   </tutorial/manage-alert-configurations>`, specify the targets and alert
   conditions described here.
---
ref: alert-conf-call-failure
edition: onprem
content: |

  .. alert:: Backup Agent has too many conf call failures

     Available only as a :doc:`global alert </tutorial/manage-global-alerts>`.

     Sends an alert when the cluster topology as known by monitoring does
     not match the backup configuration from conf calls made by the
     Backup Agent. |onprem| sends the alert after the number of attempts
     specified in the :setting:`maximumFailedConfCalls
     <mms.alerts.BackupAgentConfCallFailure.maximumFailedConfCalls>`
     setting.
---
ref: alert-conf-call-failure
edition: cloud
content: ""
---
ref: alert-global-alerts
edition: onprem
content: |

   .. alert:: Bind Error

      Available only as a :doc:`global alert </tutorial/manage-global-alerts>`.

      Sends an alert if a backup job fails to bind to a Backup Daemon. A
      job might fail to bind if, for example:

      - No :term:`primary` is found for the backed-up replica set. At
        the time the binding occurred, the Monitoring Agent did not
        detect a primary. Ensure that the replica set is healthy.

      - Not enough space is available on any Backup Daemon.

      In both cases, resolve the issue and then :doc:`restart the initial
      sync of the backup </tutorial/enable-backup>`.

      As an alternative, you can manually bind jobs to daemons through the
      :guilabel:`Admin` interface. See :ref:`jobs-page` for more
      information.

   .. alert:: Backup has reached a high number of retries

      Available only as a :doc:`global alert </tutorial/manage-global-alerts>`.

      Sends an alert if the same task fails repeatedly. This could happen,
      for example, during maintenance. :ref:`Check the corresponding job
      log <jobs-page>` for an error message explaining the problem.
      Contact MongoDB Support if you need help interpreting the error
      message.

   .. alert:: Backup is in an unexpected state

      Available only as a :doc:`global alert </tutorial/manage-global-alerts>`.

      Sends an alert when something unexpected happened and the
      Backup state for the replica set is ``broken``. You must
      resync the backed-up replica set, as described in the 
      :doc:`/tutorial/resync-backup` procedure.

      In case of a :alert:`Backup is in an unexpected state` alert,
      :ref:`check the corresponding job log <jobs-page>` for an
      error message explaining the problem. Contact MongoDB Support if you
      need help interpreting the error message.

   .. alert:: Late Snapshot

      Available only as a :doc:`global alert </tutorial/manage-global-alerts>`.

      Sends an alert if a snapshot has failed to complete before the next
      snapshot is scheduled to begin. :ref:`Check the job log <jobs-page>`
      in the |mms| Admin interface for any obvious errors.

   .. alert:: Bad Clustershot Count is

      Sends an alert if |mms| fails a consecutive number of times to
      successfully take a cluster snapshot. |mms| sends notification when the
      number exceeds the number specified in the alert
      configuration.

      The alert text should contain the reason for the problem. Common
      problems include the following:

      - There was no reachable :manual:`mongos </reference/program/mongos>`.
        To resolve this issue, ensure that there is at least one
        :program:`mongos` showing on the |mms| :guilabel:`Deployment` page.

      - The :manual:`balancer </core/sharding-balancing>` could not be
        stopped. To resolve this issue, check the log files for the first
        :manual:`config server </core/sharded-cluster-config-servers>` to
        determine why the balancer will not stop.

      - Could not insert a token in one or more :manual:`shards
        </core/sharded-cluster-shards>`. To resolve this issue, ensure
        connectivity between the Backup Agent and all shards.

   .. alert:: Sync Slice Has Not Progressed in

      Available only as a :doc:`global alert </tutorial/manage-global-alerts>`.

      Sends an alert when an :term:`initial sync` has
      started but then subsequently stalled. A number of issues can cause
      this, including:

      - processes that are down (agents, ingest, backing databases)
      - network issues
      - incorrect authentication credentials

   .. alert:: Job is busy for

      Available only as a :doc:`global alert </tutorial/manage-global-alerts>`.

      Sends an alert when a backup job has taken longer than the time
      specified. This could occur if you have an overloaded Backup Daemon
      or blockstore. :ref:`Check the corresponding job log <jobs-page>`
      for error messages. Contact MongoDB Support if you need help
      interpreting the error message.

---
ref: alert-global-alerts
edition: cloud
content: |

   .. alert:: Bad Clustershot Count is

      Sends an alert if |mms| fails a consecutive number of times to
      successfully take a cluster snapshot. |mms| sends notification when the
      number exceeds the number specified in the alert
      configuration.

      The alert text should contain the reason for the problem. Common
      problems include the following:

      - There was no reachable :manual:`mongos </reference/program/mongos>`.
        To resolve this issue, ensure that there is at least one
        :program:`mongos` showing on the |mms| :guilabel:`Deployment` page.

      - The :manual:`balancer </core/sharding-balancing>` could not be
        stopped. To resolve this issue, check the log files for the first
        :manual:`config server </core/sharded-cluster-config-servers>` to
        determine why the balancer will not stop.

      - Could not insert a token in one or more :manual:`shards
        </core/sharded-cluster-shards>`. To resolve this issue, ensure
        connectivity between the Backup Agent and all shards.
...
