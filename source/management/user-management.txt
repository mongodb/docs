===============================
User and Environment Management
===============================

.. index:: users


.. only:: saas

   This page helps you manage users that have access to your MMS groups, and
   also enables you to create and manage groups.

.. only:: hosted

   This page helps you manage users that have access to your |mms| groups, create
   and manage groups, and assign roles to users to provide controlled access to
   the MMS application.

User Management
---------------

.. only:: saas

   .. include:: /includes/mms-console-saas-users.rst

.. only:: hosted

   .. include:: /includes/mms-console-hosted-users.rst

.. index:: users; groups


Working with Multiple Environments
----------------------------------

If you have multiple MongoDB systems in distinct environments and
cannot monitor all systems with a single agent, you will need to add a
new group. Having a second group makes it possible to run two agents.

You may also use a second group and agent to monitor a different set
of MongoDB instances in the same environment if you want to segregate
the hosts within the MMS console. A user can only view data from the
hosts monitored in a single group at once.

After adding a second group, the MMS interface will have a drop down list
that will allow you to change groups. Selecting a new group will
refresh the current page with the data available from the servers in
this group.

Create Group
~~~~~~~~~~~~

.. include:: /includes/fact-add-group.rst

Rename Group
~~~~~~~~~~~~

.. include:: /includes/fact-rename-group.rst

Remove Group
~~~~~~~~~~~~

You can remove users from a group at any time from the
:guilabel:`Users` tab, by clicking on the :guilabel:`garbage can` icon.

.. include:: /includes/fact-remove-group.rst

.. _assigning-roles-to-users:

Assigning Roles to Users
------------------------
   
.. only:: saas

   MMS can assign roles to individual users to limit actions users can perform,
   as well as data users see in the application.

.. only:: hosted

   MMS or an LDAP server can assign roles to individual users to limit actions
   users can perform, as well as data users see in the application. With LDAP
   integration, follow the steps to setup 
   :doc:`</management/tutorial/authenticate-with-ldap>` then create LDAP groups
   for each available MMS role.

Users must have User Admin or Global User Admin roles assigned to them to
assign roles to users. A person with the User Admin role can assign roles to
users in their group. A person with the Global User Admin role can assign roles
to any user in any group. You cannot assign roles for yourself.

.. only:: saas

   Upon successful login, the first user completes a welcome form to create the
   initial MMS group. This form includes assigning roles.

.. only:: hosted

   Upon successful login, the first user completes a welcome form to create the
   initial MMS group. This form includes assigning roles. For LDAP
   authentication, the welcome form includes the ability to assign LDAP groups
   to the MMS group-level and global roles.

Available Roles
~~~~~~~~~~~~~~~

.. only:: hosted

   If you use LDAP authentication for MMS, you must create LDAP groups for each
   available role described below then assign users to LDAP groups. There is no
   round trip synchronization between your LDAP server and MMS.

You can assign roles and privileges for a group or all groups within MMS.
Available roles within a group include:

- Read Only

- User Admin

- Monitoring Admin

- Backup Admin

- Owner

For all groups within MMS, available roles include:

- Global Read Only

- Global User Admin

- Global Monitoring Admin

- Global Backup Admin

- Global Owner.

Each role provides privileges to access a combination of Core, Backup, and
Monitoring functionality.

The Read Only user role is a good option for users who require visibility into
your MongoDB deployments, but who do not need access to edit group settings or
modify your MMS configuration, group settings, or modifying your MMS
configuration.

Roles for a Specific Group
``````````````````````````

The **Read Only** role has these privileges for a specific group:

- Core: Can view groups and users and their roles.

- Backup: Can view state of backups and a list of snapshots.

- Monitoring: View hosts, charts, and similar.

The **User Admin** role has these privileges for a specific group:

- Core: Can view groups; modify group data; view users and their roles;
  invite/add users; manage group users and settings; view/update billing
  information; register/enable new functionality.

- Backup: View state of backups and a list of snapshots.

- Monitoring: View hosts, charts, and similar.

The **Monitoring Admin** role has these privileges for a specific group:

- Core: View group.

- Backup: Can view state of backups and a list of snapshots.

- Monitoring: View hosts, charts, and similar; add, delete, edit host; edit
  settings; manage alerts; modify monitoring settings; download monitoring agent.

The **Backup Admin** role has these privileges for a specific group:

- Core: View group.

- Backup: View state of backup and a list of snapshots; start, stop, and
  terminate backups; request restores; view/edit blacklist; view/edit host
  passwords; maintain backup settings, for example, snapshot schedule; generate
  SSH keys; modify backup settings; download backup agent.

- Monitoring: View hosts, charts, and similar.

The **Owner role** for a group has these privileges for a specific group:

- Core: Can manage agent keys; can view groups; modify group data; view users
  and their roles; invite/add users; manage group users and settings;
  view/update billing information; register/enable new functionality.

- Backup: View state of backup and a list of snapshots; start, stop, and
  terminate backups; request restores; view/edit blacklist; view/edit host
  passwords; maintain backup settings, for example, snapshot schedule; generate
  SSH keys; modify backup settings; download backup agent.

- Monitoring: View hosts, charts, and similar; add, delete, edit host; edit
  settings; manage alerts; modify monitoring settings; download monitoring agent.

Roles for All Groups
````````````````````

The **Global Read Only** role has these privileges for all groups:

- Core: View system stats, for example, number of users and pageviews; use
  global user search.

- No Backup privileges.

The **Global User Admin** role has these privileges for all groups:

- Core: View system stats, for example, number of users and pageviews; use
  global user search.

- No Backup privileges.

The **Global Monitoring Admin** role has these privileges for all groups:

- Core: View system stats, for example, number of users and pageviews.

- No Backup privileges.

The **Global Backup Admin** role has these privileges for all groups:

- Core: View system stats, for example, number of users and pageviews.

- Backup: Configure daemons, blockstores; bind, break jobs.

The **Global Owner** role for an MMS account has these privileges for all groups:

- Core: View system stats, for example, number of users and pageviews; use
  global user search.

- Backup: Configure daemons, blockstores; bind, break jobs.

Assign a Role with MMS
~~~~~~~~~~~~~~~~~~~~~~

To assignroles with |mms|, go to the :guilabel:`Users` page, click the
:guilabel:`Users` tab, and click the pencil icon to the far right of the name
of the user record to edit. Click the checkboxes to assign roles.

.. only:: hosted

   .. include:: /includes/mms-console-hosted-users-role-ldap.rst


.. index:: users; roles
