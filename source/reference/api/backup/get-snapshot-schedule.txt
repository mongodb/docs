=========================
Get the Snapshot Schedule
=========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/fact-groups-projects-synonyms.rst

.. include:: /includes/api/base-api-uri.rst

Resource
--------

.. code-block:: http

   GET /groups/GROUP-ID/backupConfigs/CLUSTER-ID/snapshotSchedule

Request Parameters
------------------

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :widths: 10 10 80
   :header-rows: 1
   :stub-columns: 1

   * - Parameter
     - Type
     - Description

   * - GROUP-ID
     - string
     - *(Required.)* The unique identifier for the group that holds the cluster with
       the snapshot schedule you want to get.

   * - CLUSTER-ID
     - string
     - *(Required.)* The unique indentifier of the cluster whose snapshot schedule
       you want to get.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/api/no-query-single-parameters.rst

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/api/no-body-parameters.rst

Response
--------

.. only:: onprem

   .. list-table::
      :widths: 10 10 80
      :header-rows: 1
      :stub-columns: 1

      * - Name
        - Type
        - Description
      * - groupId
        - string
        - Unique identifier of the group that owns the backup configuration.
      * - clusterId
        - string
        - Unique identifier of the cluster to which this backup configuration applies.
      * - snapshotIntervalHours
        - number
        - Number of hours between snapshots. Supported values are ``6``, ``8``, ``12``, and ``24``.
      * - snapshotRetentionDays
        - number
        - Number of days to keep recent snapshots. Supported values are ``1`` - ``5``.
      * - clusterCheckpointIntervalMin
        - number
        - Number of minutes between successive cluster checkpoints. This only
          applies to sharded clusters. This number determines the granularity of
          point-in-time restores for sharded clusters. Supported values are ``15``, ``30``, and ``60``.
      * - dailySnapshotRetentionDays
        - number
        - Number of days to retain daily snapshots. Supported values are ``1`` - ``365``.
      * - weeklySnapshotRetentionWeeks
        - number
        - Number of weeks to retain weekly snapshots. Supported values are ``1`` - ``52``.
      * - monthlySnapshotRetentionMonths
        - number
        - Number of months to retain monthly snapshots. Supported values are ``1`` - ``36``.
      * - pointInTimeWindowHours
        - number
        - Number of hours in the past for which a point-in-time snapshot
          can be created.
      * - referenceHourOfDay
        - number
        - Hour of the day to schedule snapshots using a 24 hour clock. 
          Default value is ``0`` (midnight), and supported values are ``0`` - ``23``.
      * - referenceMinuteOfHour
        - number
        - Minute of the hour to schedule snapshots. Default value is ``0``
          and supported values are ``0`` - ``59``.
      * - referenceTimeZoneOffset
        - string
        - The `ISO-8601 timezone offset <https://en.wikipedia.org/w/index.php?title=ISO_8601&oldid=770632564#Time_offsets_from_UTC>`_
          where the |onprem| host resides. To avoid problems with daylight
          saving time, use UTC. The default is ``+0000``, which is equivalent
          to UTC. ``Z`` is also a supported value and equivalent to UTC. 
      * - links
        - object array
        - .. include:: /includes/api/links-explanation.rst

.. only:: cloud

   .. list-table::
      :widths: 10 10 80
      :header-rows: 1
      :stub-columns: 1

      * - Name
        - Type
        - Description
      * - groupId
        - string
        - Unique identifier of the group that owns the backup configuration.
      * - clusterId
        - string
        - Unique identifier of the cluster to which this backup configuration applies.
      * - snapshotIntervalHours
        - number
        - Number of hours between snapshots. Supported values are ``6``, ``8``, ``12``, and ``24``.
      * - snapshotRetentionDays
        - number
        - Number of days to keep recent snapshots. Supported values are ``1`` - ``5``.
      * - clusterCheckpointIntervalMin
        - number
        - Number of minutes between successive cluster checkpoints. This only
          applies to sharded clusters. This number determines the granularity of
          point-in-time restores for sharded clusters. Supported values are ``15``, ``30``, and ``60``.
      * - dailySnapshotRetentionDays
        - number
        - Number of days to retain daily snapshots. Supported values are ``1`` - ``365``.
      * - weeklySnapshotRetentionWeeks
        - number
        - Number of weeks to retain weekly snapshots. Supported values are ``1`` - ``52``.
      * - monthlySnapshotRetentionMonths
        - number
        - Number of months to retain monthly snapshots. Supported values are ``1`` - ``36``.
      * - pointInTimeWindowHours
        - number
        - Number of hours in the past for which a point-in-time snapshot
          can be created. You cannot change this value for a snapshot.
      * - links
        - object array
        - .. include:: /includes/api/links-explanation.rst

Example Request
---------------

.. only:: cloud

   .. code-block:: sh

      curl --user "{username}:{apiKey}" --digest \
       --header "Accept: application/json" \
       --include \
       --request GET "https://cloud.mongodb.com/api/public/v1.0/groups/{GROUP-ID}/backupConfigs/{CLUSTER-ID}/snapshotSchedule"

.. only:: onprem

   .. code-block:: sh

      curl --user "{username}:{apiKey}" --digest \
       --header "Accept: application/json" \
       --include \
       --request GET "https://{opsManagerHost}:{port}/api/public/v1.0/groups/{GROUP-ID}/backupConfigs/{CLUSTER-ID}/snapshotSchedule"

Example Response
~~~~~~~~~~~~~~~~

Response Header
~~~~~~~~~~~~~~~

.. include:: /includes/api/api-headers/401.rst

.. include:: /includes/api/api-headers/200.rst

Response Body
~~~~~~~~~~~~~

.. code-block:: json

   {
     "clusterId" : "{CLUSTER-ID}",
     "dailySnapshotRetentionDays" : 7,
     "groupId" : "{GROUP-ID}",
     "links" : [],
     "monthlySnapshotRetentionMonths" : 13,
     "pointInTimeWindowHours": 24,
     "snapshotIntervalHours" : 6,
     "snapshotRetentionDays" : 2,
     "weeklySnapshotRetentionWeeks" : 4
   }

