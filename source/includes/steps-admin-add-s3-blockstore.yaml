stepnum: 1
source:
  file: steps-source-admin-navigation.yaml
  ref:  admin-backup-snapshot
---
title: "Click :guilabel:`Create New S3 Blockstore`."
stepnum: 2
level: 4
ref: create-new-s3-blockstore
---
title: "Provide the S3 blockstore details."
stepnum: 3
level: 4
ref: provide-new-s3-blockstore-details
content: |

   .. list-table::
      :widths: 30 70
      :header-rows: 1

      * - Field
        - Contents

      * - :guilabel:`Name`
        - Type the name for the S3 blockstore.
        
      * - :guilabel:`S3 Bucket Name`
        - Type the name of your S3 bucket you created in AWS.

          .. important:: 
             The :guilabel:`S3 Bucket Name` cannot be changed after you create
             the S3 blockstore.
        
      * - :guilabel:`AWS Access Key`
        - Type your AWS Access Key ID.
        
      * - :guilabel:`AWS Secret Key`
        - Type your AWS Secret Access Key.
        
      * - :guilabel:`Datastore Type`
        - Select :guilabel:`Standalone`, :guilabel:`Replica Set` or :guilabel:`Sharded Cluster`.

      * - :guilabel:`MongoDB Host List` 
          (:term:`Replica Set` and :term:`Sharded Cluster` only) 

        - Type a comma-separated list of :program:`mongod` instances (for a
          Replica Set) or :program:`mongos` instances (for a Sharded Cluster)
          that run the S3 blockstore metadata database.

          These instances should be written in the ``<hostname:port>`` format.

          .. note::
             For replica sets, you can enter a :ref:`seed list <replica-set-option>`, 
             but you should try to include all :program:`mongod` instances in
             the replica set.

          .. example::
             ``host1.example.com:27017,
             host2.example.com:27017,
             host2.example.com:27018``

      * - :guilabel:`MongoDB Hostname` 
          (Standalone only)
        - Type the hostname of the MongoDB instance.
        
      * - :guilabel:`MongoDB Port` 
          (Standalone only)
        - Type the port number of the MongoDB instance.
        
      * - :guilabel:`Username` (optional) 
        - If the S3 blockstore metadata database uses Username and Password
          (SCRAM-SHA-1) authentication, type the name of the user authorized
          to access the S3 blockstore metadata database.

          To enable Username and Password (SCRAM-SHA-1) authentication on your
          S3 blockstore metadata database,
          see :manual:`how to configure your database for SCRAM-SHA-1 authentication 
          </core/security-scram-sha-1>` in the MongoDB manual.
        
      * - :guilabel:`Password` (optional) 
        - If the database uses Username and Password (SCRAM-SHA-1)
          authentication, type the password associated with the username that
          can access the S3 blockstore metadata database.
        
      * - :guilabel:`Connection Options` (optional) 
        - Type any additional :manual:`configuration file options 
          </reference/configuration-options>` for the MongoDB instance. 
          This field supports unescaped values only.

          For proper syntax, see :manual:`Connection String URI
          Format </reference/connection-string>` in the MongoDB manual.
        
      * - :guilabel:`Encrypted Credentials` (optional)
        - Select if the Username and Password for the database were encrypted
          using the ``credentialstool``. For details on the
          ``credentialstool``, see :ref:`encrypt-mongodb-user-credentials`.
        
      * - :guilabel:`Use TLS/SSL` (optional)
        - Select if the S3 blockstore database only accepts connection
          encrypted using TLS.

          To enable TLS on the S3 blockstore metadata database, see 
          :manual:`Configure mongod and mongos for TLS/SSL </tutorial/configure-ssl>`.
        
      * - :guilabel:`New Assignment Enabled` (optional)
        - Select if you want to assign backup jobs to this S3 blockstore
          immediately after it has been created. This checkbox is selected by
          default. If you clear this checkbox, the S3 blockstore is created
          but no newly started backups can be assigned to it.

---
title: "Click :guilabel:`Create`."
stepnum: 4
level: 4
ref: create-blockstore 
...