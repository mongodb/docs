ref: go-clusters-view-cluster
level: 4
stepnum: 1
source:
  file: steps-connect-to-cluster-master.yaml
  ref: go-clusters-view

---
ref: go-clusters-review-secure
level: 4
stepnum: 2
source:
  file: steps-connect-to-cluster-master.yaml
  ref: go-clusters-secure
replacement:
  connChoice: the |mongo| shell
---
ref: go-clusters-review-ip-access-list-connection
level: 4
stepnum: 3
source:
  file: steps-connect-to-cluster-master.yaml
  ref: go-clusters-ip-access-list-connection

---
ref: create-mongodb-user-cluster
level: 4
stepnum: 4
source:
  file: steps-connect-to-cluster-master.yaml
  ref: create-mongodb-user

---
title: "Connect to your |service| cluster with the ``mongo`` shell."
level: 5
ref: download-install-shell
content: |

   Select :guilabel:`Connect with the Mongo Shell`.

   The next screen offers you options to proceed based on whether or
   not you already have the |mongo| shell
   installed on your system.

   .. tabs::

      tabs:

        - id: download_shell
          name: I do not have the Mongo Shell installed

          content: |

            Select your OS from the dropdown menu.

            .. tabs::

               tabs:

                 - id: windows
                   name: Windows
                   content: |

                     1. Download using one of the following options:

                        - Click :guilabel:`Download Mongo Shell` to
                          begin the download.

                        - Click :guilabel:`Copy download URL` to copy a
                          download |url| to your clipboard, then either:

                          -  Use ``curl`` to fetch the installer file 
                             from the |url|, or

                          -  Paste the |url| in a browser window.

                        .. include:: /includes/facts/download-center-link.rst

                     #. Double-click the ``.msi`` file in Windows
                        Explorer and proceed through the installation
                        wizard.

                     #. Add the ``bin`` directory to your command path.

                        a. Click :icon-fa5-brands:`windows` and select
                           :guilabel:`Control Panel`.

                        #. Click :guilabel:`System and Security`, then
                           :guilabel:`System`, then
                           :guilabel:`Advanced System Settings`.

                        #. Click :guilabel:`Environment Variables`.

                        #. Select :guilabel:`Path` and click
                           :guilabel:`Edit`.

                        #. Add the ``bin`` directory where the
                           installer placed your MongoDB executables
                           and click :guilabel:`OK`.
                          
                        #. *Step 3* of the |service| modal displays a
                           copyable connection string. This string
                           includes the name of the MongoDB user that can
                           authenticate with the cluster. Copy this
                           string. To connect as a different MongoDB user,
                           change the
                           :manual:`--username </reference/program/mongo/#cmdoption-mongo-username>` option.
                        
                        #. Paste the |mongo| command and connection string
                           into your application.

                 - id: macos
                   name: macOS
                   content: |

                     1. Use the Homebrew command provided.

                     #. Copy the Homebrew command from the |service| UI
                        window and run it in a terminal.

                     #. *Step 3* of the |service| modal displays a
                        copyable connection string. This string
                        includes the name of the MongoDB user that can
                        authenticate with the cluster. Copy this
                        string. To connect as a different MongoDB user,
                        change the
                        :manual:`--username </reference/program/mongo/#cmdoption-mongo-username>` option.

                     #. Paste the |mongo| command and connection string
                        into a terminal. Run the command. The shell
                        prompts you for the
                        :manual:`password </reference/program/mongo/#cmdoption-mongo-password>`.

                 - id: linux
                   name: Linux
                   content: |

                     1. Download using one of the following options:

                        - Click :guilabel:`Download Mongo Shell` to
                          begin the download.

                        - Click :guilabel:`Copy download URL` to copy a
                          download |url| to your clipboard, then either:

                          -  Use ``curl`` to fetch the installer file 
                             from the |url|, or

                          -  Paste the |url| in a browser window.

                        .. include:: /includes/facts/download-center-link.rst

                     #. Run the following command in a terminal to
                        extract the |mongo| shell:

                        .. code-block:: sh

                           tar -xzf ./<filename>.tgz

                     #. Add the ``bin`` directory to your ``PATH``
                        environment variable.

                        .. code-block:: sh

                           export PATH=/<extraction-directory>/bin:$PATH

                        .. note::

                           If you run this command, it persists for the
                           current shell session. To update the
                           variable across shell sessions and reboots,
                           edit the ``PATH`` environment variable in
                           ``~/.profile``.

                     #. *Step 3* of the |service| modal displays a
                        copyable connection string. This string
                        includes the name of the MongoDB user that can
                        authenticate with the cluster. Copy this
                        string. To connect as a different MongoDB user,
                        change the
                        :manual:`--username </reference/program/mongo/#cmdoption-mongo-username>` option.

                     #. Paste the |mongo| command and connection string
                        into a terminal. Run the command. The shell
                        prompts you for the
                        :manual:`password </reference/program/mongo/#cmdoption-mongo-password>`.

        - id: connect_from_shell
          name: I have the Mongo Shell installed

          content: |

            1. Select your shell version from the dropdown menu.
               We recommend that you upgrade to the latest version
               of the shell. To check the installed version of the
               |mongo| shell, run:

               .. code-block:: sh

                  mongo --version

               
            #. *Step 2* of the |service| modal displays a copyable
               connection string that includes the name of the
               MongoDB user that can authenticate with the cluster. Copy
               this string. To connect as a different MongoDB user,
               change the :manual:`--username </reference/program/mongo/#cmdoption-mongo-username>`
               option.

            #. Paste the |mongo| command and connection string into a
               terminal. Run the command. The shell prompts you for the
               :manual:`password </reference/program/mongo/#cmdoption-mongo-password>`.

               The shell prompts you for the :manual:`password </reference/program/mongo/#cmdoption-mongo-password>`.


...
