title: Locate the :binary:`~bin.mongo` shell.
ref: mongo-shell
level: 4
stepnum: 1
content: |

  The :binary:`~bin.mongo` shell is packaged with the MongoDB Server
  Community and Enterprise distributions, and is also available for users
  of Atlas as a client-only download.

  MongoDB binaries are located in a directory that starts with
  ``mongodb-``. Within a ``bin`` directory, you should see a file named
  ``mongo``, which is the shell executable.

  If you do not have :binary:`~bin.mongo` shell installed, follow the
  install directions for your environment.

  .. include:: /includes/download-shell-tabs.rst

---

title: Connect to your MongoDB instance
ref: connect
level: 4
stepnum: 2
content: |

  .. include:: /includes/mongo-shell-platform-connect-np.rst

---
title: Switch to the ``admin`` database.
ref: administrator
level: 4
stepnum: 3
content: |

  .. code-block:: sh
     
     use admin

---
title: Create a :authrole:`root` user with the :method:`db.createUser()` method.
ref: create_user
level: 4
stepnum: 4
content: |

  .. code-block:: sh
     
     db.createUser(
       {
         user: "superuser",
         pwd: "changeMeToAStrongPassword",
         roles: [ "root" ]
       }
     )

  Users with the :authrole:`root` role have full privileges on all
  resources. You can therefore use your new ``superuser`` user to query
  your database, add indexes, create additional users, administer your deployment, etc.
---
title: Verify that you have successfully added your user. 
ref: check_users
level: 4
stepnum: 5
content: |

  Run ``show users`` to see if your user was created:

  .. code-block:: javascript

     show users

  You should see output similar to the following:

  .. code-block:: sh

     {
        "_id" : "admin.superuser",
        "userId" : UUID("7c2aee5c-6af5-4e25-ae0f-4422c6a8a03c"),
        "user" : "superuser",
        "db" : "admin",
        "roles" : [
                {
                  "role" : "root",
                  "db" : "admin"
                }
        ],
        "mechanisms" : [
                "SCRAM-SHA-1",
                "SCRAM-SHA-256"
        ]
      }

---
title: Shut down your MongoDB instance.
ref: shutdown_server
level: 4
stepnum: 6
action:
  - pre: |
      From the ``mongo`` shell, shut down your :binary:`~bin.mongod`
      instance.
    language: sh
    code: |
      db.shutdownServer()
    post: |
      You should see a message that resembles 
      ``server should be down...``.
  - pre: |
      Type ``exit`` to exit the ``mongo`` shell.
    language: sh
    code: |
      exit
---
title: Restart your MongoDB instance with access control.    
ref: restart_with_auth
level: 4
stepnum: 7
content: |

  .. include:: /includes/start-server-auth.rst

...
