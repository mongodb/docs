========================================================
Query, Update, and Projection Operators Quick Reference
========================================================

.. default-domain:: mongodb

This document contains a list of all :term:`operators <operator>`
used with MongoDB in version |version|. See :doc:`/crud` for a higher
level overview of the operations that use these operators, and
:doc:`operator` for a more condensed index of these operators.

.. contents:: Operators
   :backlinks: none
   :local:

.. index:: query selectors
.. _query-selectors:

Query Selectors
---------------

.. index:: query selectors; comparison
.. _query-selectors-comparison:

Comparison
~~~~~~~~~~

.. include:: /includes/note-ref-equality.rst

- :operator:`$all`
- :operator:`$gt`
- :operator:`$gte`
- :operator:`$in`
- :operator:`$lt`
- :operator:`$lte`
- :operator:`$ne`
- :operator:`$nin`

.. todo:: move the following note into a querying page, and link in
   every above included query operator page.

You may combine comparison operators to specify ranges:

.. code-block:: javascript

   db.collection.find( { field: { $gt: value1, $lt: value2 } } );

This statement returns all documents with ``field`` between
``value1`` and ``value2``.

.. note::

   If the field contains an array and the query has multiple
   conditional operators, the field as a whole will match if either a
   single array element meets the conditions or a combination of array
   elements meet the conditions.

.. example:: Query a field that contains an array.

   A collection ``students`` contains the following documents where the
   ``score`` field contains an array of values:

   .. code-block:: javascript

      { "_id" : 1, "score" : [ -1, 3 ] }
      { "_id" : 2, "score" : [ 1, 5 ] }
      { "_id" : 3, "score" : [ 5, 5 ] }

   Then, the following query:

   .. code-block:: javascript

      db.students.find( { score: { $gt: 0, $lt: 2 } } )

   Will match the following documents:

   .. code-block:: javascript

      { "_id" : 1, "score" : [ -1, 3 ] }
      { "_id" : 2, "score" : [ 1, 5 ] }

   - In the document with ``_id`` equal to ``1``, the ``score: [ -1, 3
     ]`` as a whole meets the specified conditions since the element
     ``-1`` meets the ``$lt: 2`` condition and the element ``3`` meets
     the ``$gt: 0`` condition.

   - In the document with ``_id`` equal to ``2``, the ``score: [ 1, 5
     ]`` as a whole meets the specified conditions since the element
     ``1`` meets both the ``$lt: 2`` condition and the ``$gt: 0``
     condition.

.. index:: query selectors; logical
.. _query-selectors-logical:

Logical
~~~~~~~

- :operator:`$and`
- :operator:`$nor`
- :operator:`$not`
- :operator:`$or`

.. index:: query selectors; element
.. _query-selectors-element:

Element
~~~~~~~

- :operator:`$exists`
- :operator:`$mod`
- :operator:`$type`

.. index:: query selectors; javascript
.. _query-selectors-javascript:

JavaScript
~~~~~~~~~~

- :operator:`$regex`
- :operator:`$where`

.. index:: query selectors; geospatial
.. _query-selectors-geospatial:
.. _geospatial-query-operators:
.. _geolocation-operators:

Geospatial
~~~~~~~~~~

Operators:

- :operator:`$geoWithin`
- :operator:`$geoIntersects`
- :operator:`$near`
- :operator:`$nearSphere`

Parameters:

- :operator:`$geometry`
- :operator:`$maxDistance`
- :operator:`$center`
- :operator:`$centerSphere`
- :operator:`$box`
- :operator:`$polygon`
- :operator:`$uniqueDocs`

.. index:: query selectors; array
.. _query-selectors-array:

Array
~~~~~

- :operator:`$elemMatch`
- :operator:`$size`

.. index:: operators; update
.. index:: update operators
.. _update-operators:

Update
------

.. include-in-update-crud-page-start

Fields
~~~~~~

- :operator:`$inc`
- :operator:`$rename`
- :operator:`$set`
- :operator:`$setOnInsert`
- :operator:`$unset`

Array
~~~~~

- :operator:`$`
- :operator:`$addToSet`
- :operator:`$pop`
- :operator:`$pullAll`
- :operator:`$pull`
- :operator:`$pushAll`
- :operator:`$push`

  - :operator:`$each` modifier

  - :operator:`$slice` modifier

  - :operator:`$sort` modifier

Bitwise
~~~~~~~

- :operator:`$bit`

Isolation
~~~~~~~~~

- :operator:`$isolated`

.. include-in-update-crud-page-stop

.. index:: projection operators
.. _projection-operators:

Projection
----------

- :projection:`$`
- :projection:`$elemMatch`
- :projection:`$slice`
