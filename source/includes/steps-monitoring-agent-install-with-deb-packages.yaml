title: "Login to |mms|."
stepnum: 1
ref: login
---
title: "Begin or Manage a Deployment"
stepnum: 2
ref: begin-deployment
content: |

  a. Click :guilabel:`Build New` or :guilabel:`Manage Existing` to begin
     the deployment wizard. When you reach the :guilabel:`Install an {+aagent+} on each server` page, all hosts are listed.

  b. Click on the :guilabel:`Install Agent` menu of the first MongoDB
     host.

  c. Select :guilabel:`Ubuntu<version> - DEB`.
---
title: "Download the latest version of the Monitoring Agent package."
stepnum: 3
edition:
  - cloud
ref: download-saas
pre: |
  On a system shell, issue a ``curl`` command to download the ``deb``
  for the agent that works on your platform:
action:
  - heading: "For Ubuntu 15.04+ or 16.04+ on x64 architecture:"
    language: sh
    copyable: true
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_amd64.ubuntu1604.deb
  - heading: "For Ubuntu 16.X on PowerPC architecture:"
    language: sh
    copyable: true
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_ppc64e1.ubuntu1604.deb
  - heading: "For Ubuntu 14.04+ on x64 architecture:"
    language: sh
    copyable: true
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_amd64.deb
---
title: "Download the latest version of the Monitoring Agent package."
stepnum: 3
edition: onprem
ref: download-hosted
pre: |
  On a system shell, issue a ``curl`` command to download the ``deb``
  for the agent that works on your platform:

  .. note::
     Replace ``<OpsManagerHost:Port>`` with the hostname and port
     of your |onprem| installation.
action:
  - heading: "For Ubuntu 15.04+ or 16.04+ on x64 architecture:"
    language: sh
    copyable: true
    code: |
      curl -OL https://<OpsManagerHost:Port>/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_amd64.ubuntu1604.deb
  - heading: "For Ubuntu 16.X on PowerPC architecture:"
    language: sh
    copyable: true
    code: |
      curl -OL https://<OpsManagerHost:Port>/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_ppc64e1.ubuntu1604.deb
  - heading: "For Ubuntu 14.04+ on x64 architecture:"
    language: sh
    copyable: true
    code: |
      curl -OL https://<OpsManagerHost:Port>/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_amd64.deb
---
title: "Install the Monitoring Agent package."
stepnum: 4
ref: install
pre: |
  To install the agent that works on your platform, issue the
  appropriate command to install the package:
action:
  - heading: "For Ubuntu 15.04+ or 16.04+ on x64 architecture:"
    language: sh
    copyable: true
    code: |
      sudo dpkg -i mongodb-mms-monitoring-agent_latest_amd64.ubuntu1604.deb
  - heading: "For Ubuntu 16.X on PowerPC architecture:"
    language: sh
    copyable: true
    code: |
      sudo dpkg -i mongodb-mms-monitoring-agent_latest_ppc64e1.ubuntu1604.deb
  - heading: "For Ubuntu 14.04+ on x64 architecture:"
    language: sh
    copyable: true
    code: |
      sudo dpkg -i mongodb-mms-monitoring-agent_latest_amd64.deb
---
title: "Generate an agent API key or retrieve an existing agent API key for your |mms| project." 
stepnum: 5
ref: retrieve-monitoring-mms-api-key
pre: |
      a. Click :guilabel:`+ Generate Key`.

      .. include:: /includes/extracts/agent-api-key-generate-note.rst

      b. Enter your password and click :guilabel:`Verify`.
  
      c. Click :guilabel:`+ Generate Key` again.

      .. include:: /includes/extracts/agent-api-key-admonition.rst
---
title: "Edit the ``monitoring-agent.config`` file to include  your Project ID and agent API key."
stepnum: 6
ref: configure-monitoring-mms-api-key
content: |
  Edit the ``/etc/mongodb-mms/monitoring-agent.config`` file.

  For :msetting:`mmsGroupId`, enter your Project ID.

  For :msetting:`mmsApiKey`, enter the project's :term:`agent API key`.
---
stepnum: 7
source:
  file: steps-source-install-agent.yaml
  ref: proxy
replacement:
  agentname: "Monitoring"
  httpProxy: ":msetting:`httpProxy`"
  configfile: "/etc/mongodb-mms/monitoring-agent.config"
---
title: "Start the Monitoring Agent."
stepnum: 8
ref: start-monitoring
pre: |
  Issue the following command:
action:
  - heading: "For Ubuntu 15.X or later:"
    language: sh
    copyable: true
    code: |
       sudo systemctl start mongodb-mms-monitoring-agent.service
  - heading: "For Ubuntu 14.04+:"
    language: sh
    copyable: true
    code: |
      sudo start mongodb-mms-monitoring-agent
...
