.. _adf-drop-collection-views-cmd:

========
``drop``
========

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

The ``drop`` command removes the specified collection or view from the 
{+fdi+} storage configuration. Use the wildcard ``"*"`` to remove 
all collections generated by the :ref:`wildcard collection function 
<adf-advanced-path-generate-collection>` (that is, 
``collectionName()``), including the wildcard collection rule itself. 
You cannot individually remove collections generated by the wildcard 
collection function.

.. _adf-drop-collection-views-cmd-syntax:

Syntax 
------

.. tabs:: 

   .. tab:: Collection 
      :tabid: coll

      .. code-block:: json 

         db.runCommand({ "drop" : "<collection-name|*>" })

   .. tab:: Views 
      :tabid: views

      .. code-block:: json 

         db.runCommand({ "drop" : "<view-name>" })

.. _adf-drop-collection-views-cmd-params:

Parameters 
----------

.. tabs:: 
  
   .. tab:: Collection 
      :tabid: coll

      .. list-table::
         :header-rows: 1
         :widths: 15 10 65 10 

         * - Parameter 
           - Type 
           - Description 
           - Required?

         * - ``<collection-name>``
           - string 
           - The name of the collection to drop or the wildcard ``"*"`` . You 
             can specify the wildcard ``"*"`` to drop:

             - All collections generated by the wildcard collection 
               function ``collectionName()`` 
             - The wildcard collection rule 

           - yes

   .. tab:: Views 
      :tabid: views

      .. list-table::
         :header-rows: 1
         :widths: 15 10 65 10 

         * - Parameter 
           - Type 
           - Description 
           - Required?

         * - ``<view-name>``
           - string 
           - The name of the view to drop.
           - yes

.. _adf-drop-collection-views-cmd-output:

Output 
------

.. tabs:: 

   .. tab:: Collection 
      :tabid: coll

      The command prints the following output if it succeeds. You can 
      verify the results by running the ``show collections`` command. 
      If the command fails, see 
      :ref:`adf-drop-collection-views-cmd-errors` for recommended 
      solutions.

      .. code-block:: sh 

         { "ok" : 1, "ns" : "<database>.<collection>", "nIndexesWas" : 0 }

      where: 

      - ``ns`` reflects the collection namespace, which includes the 
        database name, the dot (``.``) separator, and the collection 
        name. For example: ``<database>.<collection>``.
      - ``nIndexesWas`` reflects the number of indexes, the value of 
        which is  always ``0`` on {+df+}.

   .. tab:: Views 
      :tabid: views 

      The command prints the following output if it succeeds. You can 
      verify the results by running the ``storageGetConfig`` command. 
      If the command fails, see 
      :ref:`adf-drop-collection-views-cmd-errors` for recommended 
      solutions.

      .. code-block:: sh 

         { "ok" : 1, "ns" : "<database>.<view>", "nIndexesWas" : 0 }

      where: 

      - ``ns`` reflects the view namespace, which includes the database 
        name, the dot (``.``) separator, and the view name. For 
        example: ``<database>.<view>``.
      - ``nIndexesWas`` reflects the number of indexes, the value of 
        which is always ``0`` on {+df+}.

.. _adf-drop-collection-views-cmd-egs:

Examples 
--------

Drop Collections Examples 
~~~~~~~~~~~~~~~~~~~~~~~~~

The following examples use the ``drop`` command to remove sample 
collections that were mapped to the sample dataset, 
`airbnb <https://atlas-data-federation.s3.amazonaws.com/json/sample_airbnb/listingsAndReviews.json>`__ 
and 
`weather <https://atlas-data-federation.s3.amazonaws.com/json/sample_weatherdata/data.json>`__, 
in the |aws| |s3| store. 

Basic Example 
#############

The following example uses the ``drop`` command to remove a sample 
collection named ``airbnb`` in a database named ``sample`` in the 
storage configuration. 

.. code-block:: json 

   use sample
   db.runCommand({ "drop" : "airbnb"})

The previous command prints the following output: 

.. code-block:: json 
   :copyable: false

   { "ok" : 1, "ns" : "sample.airbnb", "nIndexesWas" : 0 }

Wildcard Example 
################

The following example uses the ``drop`` command to remove the wildcard  
collection function (``collectionName()``) and all collections created 
by the wildcard collection function in a database named ``sample`` in 
the storage configuration. 

.. code-block:: json 

   use sample 
   db.runCommand ({ "drop" : "*" }) 

The previous command prints the following output: 

.. code-block:: json 
   :copyable: false

   { "ok" : 1, "ns" : "sample.*", "nIndexesWas" : 0 }

Drop Views Example
~~~~~~~~~~~~~~~~~~

The following command removes a :ref:`view named "listings" 
<adf-collections-views-create-cmd-egs>` on the `airbnb 
<https://atlas-data-federation.s3.amazonaws.com/json/sample_airbnb/listingsAndReviews.json>`__ 
collection in the ``sample`` database:

.. code-block:: sh 

   use sample
   db.runCommand({ "drop" : "listings" })

The previous command returns the following output: 

.. example::

   .. code-block:: json 
      :copyable: false 

      { "ok" : 1, "ns" : "sample.listings", "nIndexesWas" : 0 }

.. _adf-drop-collection-views-cmd-errors:

Troubleshoot Errors 
-------------------

If the command fails, it returns one of the following errors.

**Reason:**  Namespace (database, collection, or view) does not exist.

.. code-block:: json 
   :copyable: false 

   {
      ok: 0,
      errmsg: "ns not found",
      code: 26,
      codeName: "NamespaceNotFound"
   }

**Solution:** Ensure that the namespace specified in the command is 
valid and exists in the storage configuration. If necessary, use the 
``getStorageConfig`` command to retrieve the list of valid databases, 
collections, and views in the storage configuration.

**Reason:** Attempting to remove a collection created by the wildcard 
collection function (``collectionName()``).

.. code-block:: json 
   :copyable: false 

   {
      ok: 0,
      errmsg: "cannot drop a collection created from a wildcard",
      code: 26,
      codeName: "NamespaceNotFound"
   }

**Solution:** Ensure that the collection you are dropping is not an 
individual collection dynamically generated by the wildcard collection 
function (``collectionName()``). {+df+} does not support 
dropping individual collections generated by the wildcard collection 
function. 
