level: 4
stepnum: 1
ref: sql-odbc-install
title: "Install the ODBC driver."
content: | 

  To install the ODBC driver, run the installation file that you downloaded
  to open the Atlas SQL ODBC Setup Wizard. Follow the steps in the Setup Wizard.

---
level: 4
stepnum: 2
ref: sql-odbc-configure
title: "Configure a System DSN."
content: |

  To configure your |odbc| connection:

  1. Open your ODBC Data Source Administrator.

     .. note::

        If you use a 64-bit processor, be sure to open the 64-bit
        ODBC Data Source Administrator.

  #. Navigate to the **System DSN** tab.

  #. Add a new **System DSN**.

  #. When prompted to select a driver for your data source,
     select the :guilabel:`MongoDB Atlas SQL ODBC Driver`.

  #. Enter your connection information. You must enter:

     .. include:: /includes/fact-connection-info-atlas-sql.rst

     .. list-table::
        :widths: 20 80
        :header-rows: 1

        * - Field
          - Description

        * - DSN
          - A name for your new DSN.

        * - Username
          - A database username to use to connect to your database.

        * - Password
          - The database user's password.

        * - MongoDB URI
          - Your MongoDB deployment URI.

        * - Database
          - The name of the database to which to connect.
          
        * - Enable maximum
          - Checkbox to enforce maximum string length of 4000
            characters. You must enable this option to work with BI
            tools like Microsoft SQL Server Management Studio that
            can't support variable length string data with unknown
            maximum length. 

  #. Once you enter the required connection information, 
     you can test your connection with 
     your ODBC Data Source Administrator.

---
level: 4
stepnum: 3
ref: sql-odbc-configure-logging
title: "Configure logging for the |odbc| driver."
content: |
  Enable SQL trace logging within the |odbc| driver either by setting it
  in the connection string or by adding a key value pair to the Windows 
  System registry. You can configure the |odbc| driver log level by
  adding a key-value pair to the Windows System registry, either
  directly or by using a ``.ini`` file. To learn more, see the `Windows
  documentation on configuring the system registry
  <https://learn.microsoft.com/en-us/windows/win32/sysinfo/registry>`__.
  
  If you set in both the driver and the connection
  string, the connection string setting takes precedence. You can
  specify the desired log level. Logs are hierarchical, which means
  {+asql+} logs all messages at or above the level you set. You can
  configure one of the following log levels:  

  - ``error`` - to log only error messages 
  - ``warn`` - to log all warnings 
  - ``info`` - to log messages of info, errors, and warnings :icon-fa5:`cog`
  - ``debug`` - to log all messages of error and info :icon-fa5:`star`
  - ``trace`` - to log all trace messages
  - ``off`` - to disable logging

  :icon-fa5:`cog` ``info`` excludes debug and trace messages.
  :icon-fa5:`star` ``debug`` messages don't appear in the logs.

  The default log level is ``info``. You can change the log level by
  appending the key ``loglevel`` and value to your ODBC connection string. 

  .. example:: 

     The following changes the log level to ``debug``:  

     .. code-block:: 

        loglevel=debug

     The following changes the log level to ``error``: 

     .. code-block:: 

        loglevel=error

  By default, {+asql+} writes logs to a file named ``mongo_odbc.log``
  that it creates in the ``logs`` folder. {+asql+} writes logs to the
  file in the following path:

  .. code-block:: 

      C:\Users<user>\Documents\MongoDB\Atlas SQL ODBC<version>\logs\mongo_odbc.log
      
  {+asql+} automatically rotates the logs when the file size reaches
  ``.5MB``. The log files are named ``mongo_odbc.log.x`` where the ``x``
  denotes the number of rotation. {+asql+} only keeps up to 10 log
  files. When there are 10 log files, {+asql+} automatically rotates and
  shuffles such that ``mongo_odbc.log.1`` becomes ``mongo_odbc.log.2``
  and so on. 

...
