.. meta::
   :keywords: atlas ui, atlas api

.. _m2-m5-snapshots:

==========================
{+Shared-Cluster+} Backups
==========================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

|service| takes daily snapshots of ``M2`` and ``M5`` 
{+shared-clusters+}. |service| takes these snapshots automatically 
starting 24 hours after you create your {+cluster+}.

|service| always takes ``M2`` and ``M5`` snapshots from a
:term:`secondary` node to minimize performance impact.

|service| retains the last 8 daily snapshots, which you can
:ref:`download or restore to an Atlas {+cluster+} 
<restore-from-snapshot>`.

Required Access
~~~~~~~~~~~~~~~

To manage backups for a {+cluster+}, you must have 
:authrole:`Project Owner` access to the project.
Users with :authrole:`Organization Owner` access must add themselves 
as a ``Project Owner`` to the project before they can manage backups.

Limitations
~~~~~~~~~~~

.. include:: /includes/fact-backup-shared-tier-limitations.rst

Backup Snapshot Storage Locations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following table indicates where |service| stores ``M2`` and ``M5`` 
{+cluster+} snapshots:

.. list-table::
   :header-rows: 1

   * - {+Cluster+} Location
     - Snapshot Storage Location

   * - Australia
     - Australia

   * - Germany
     - Germany

   * - Hong Kong
     - Australia

   * - India, Singapore, Taiwan
     - Asia

   * - USA
     - USA

   * - All other {+cluster+} locations
     - Ireland

View ``M2``/``M5`` Backup Snapshots
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The {+atlas-cli+} does not support ``M2/M5`` backup snapshots.

.. tabs::

   .. tab:: {+atlas-ui+}
      :tabid: atlasui

      .. include:: /includes/view-snapshots-cluster-ui.rst

   .. tab:: {+atlas-admin-api+}
      :tabid: atlasapi

      The {+atlas-admin-api+} provides endpoints for retrieving one or all
      snapshots from a given ``M2`` or ``M5`` cluster:
      
      - :oas-atlas-tag:`Return One Snapshot for One M2 or M5 Cluster </Shared-Tier-Snapshots/operation/getSharedClusterBackup>`
      - :oas-atlas-tag:`Return All Snapshots for One M2 or M5 Cluster </Shared-Tier-Snapshots/operation/listSharedClusterBackups>`

Additionally, |service| displays existing ``M2`` or ``M5`` snapshots 
in the :guilabel:`All Daily Snapshots` table. From this table, you can
:ref:`restore <restore-from-snapshot>` or
:ref:`download <restore-from-local-file>` your 
existing snapshots.
