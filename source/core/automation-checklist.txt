========================
MMS Automation Checklist
========================

.. default-domain:: mongodb

.. include:: /includes/admonition-automation-is-beta.rst

MMS Automation allows you to deploy, configure, and manage MongoDB
deployments with the MMS UI.  MMS Automation relies on an Automation
Agent, which must be installed on every server in the deployment.  The
Automation Agents periodically poll the MMS service to determine the
current goal, and continually report their status to MMS.

There are two ways to install the Automation Agent on your servers.
First, you can simply install the Automation Agent on all
existing hardware.  Second, you can use MMS Provisioning to
automatically create Amazon Web Services (AWS) EC2 instances that have
the Automation Agent pre-installed.

Using Own Hardware
------------------

- If you deploy Automation manually, ensure that you have one
  automation agent on every server.

- If you deploy the agent manually, you must create MongoDB's
  :setting:`dbpath` and the directory for the MongoDB binaries and
  ensure that the user that the agent runs owns these directories.

  If you install using the ``rpm`` or ``deb`` packages, the automation
  agent runs as the :program:`mongod`. If you install using the ``tar.gz``
  you can run the agent as any user.

Using MMS Provisioning (Amazon Web Services)
--------------------------------------------

- When you deploy with MMS Provisioning, you must choose an AWS
  Security Group. Please ensure that the Security Group that you
  choose allows inbound traffic on all MongoDB ports within the
  Security Group, and SSH access from all IPs.

- Ensure that you provide MMS with the correct AWS security
  credentials (i.e. the Access Key ID and Secret Access Key.)

- You must have at least one security group configured before
  deploying. If you are deploying into a VPC the VPC must exist before
  provisioning.

- If you attempt to provision larger instances, be aware that Amazon
  often has a limited number of these instances in any given region
  which may prevent provisioning. If you reach this limit MMS will
  provide an error message in the :guilabel:`Provision Machines
  Table` in the :guilabel:`Provisioning` tab.

- AWS accounts have restrictions that limit the number of
  instances you can deploy. if you reach this limit, you must contact
  AWS support to raise this limit. If you reach this limit MMS will
  provide an error message in the :guilabel:`Provision Machines
  Table` in the :guilabel:`Provisioning` tab.

All Deployments
---------------

Networking
~~~~~~~~~~

All hosts must be able to allow communication between MongoDB
ports. The default is 27017, but you can configure alternate port
ranges in the MMS interface.

Cluster Configuration
~~~~~~~~~~~~~~~~~~~~~

After completing the cluster configuration, always ensure that the
cluster deployment plan satisfies the needs of your
deployment. Always double check hostnames and ports before
confirming the cluster deployment.

Sizing
~~~~~~

- Ensure that you provision machines with enough space to run MongoDB
  and support the requirements of your data set. .

- Ensure that you provision sufficient machines to run your
  deployment. Each :program:`mongod` should run on its own host.
