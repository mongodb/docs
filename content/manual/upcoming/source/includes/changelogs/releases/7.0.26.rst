.. _7.0.26-changelog:

7.0.26 Changelog
----------------

Query
~~~~~

- :issue:`SERVER-98461` findAndModify where query does not have shard
  key does not return WCE on failure
- :issue:`SERVER-103519` Ensure update and bulkWrite commands return WCE
  in sharded cluster case

Storage
~~~~~~~


WiredTiger
``````````

- :issue:`WT-9575` Pages with updates newer to the oldest txn id are not
  queued for eviction

Build and Packaging
~~~~~~~~~~~~~~~~~~~

:issue:`SERVER-112367` [v7.0] Fix spurious multiversion change stream
test failure

Internals
~~~~~~~~~

- :issue:`SERVER-76547` Create command on a time-series collection is
  not idempotent
- :issue:`SERVER-77172` "abortExpiredTransactions" thread can get stuck
  if it fails to checkout a session
- :issue:`SERVER-82071` Prevent users from specifying a lower max than
  min bound in merge chunks command
- :issue:`SERVER-82180` Capped inserts on the primary can have a
  different natural ordering from secondaries
- :issue:`SERVER-82243` Fix data race in lookupARecords
- :issue:`SERVER-84081` FLE2 write error hides write concern error
- :issue:`SERVER-86299` Test and fix FLE2 writeConcernError reporting in
  sharded writes
- :issue:`SERVER-86591` Enhance InitialSync Error Handling for Transient
  Network Issues
- :issue:`SERVER-86727` Consider changing
  MigrationDestinationManager::cloneCollectionIndexesAndOptions to not
  take DB MODE_X lock
- :issue:`SERVER-87194` Force merge chunk command to only accept
  non-empty ranges
- :issue:`SERVER-89039` Support a command that returns after an index
  build has started
- :issue:`SERVER-90495` Support start or resume from deleted recordId on
  natural order scan
- :issue:`SERVER-92236` Chunk migrations should use short lived
  cancellation sources
- :issue:`SERVER-92275` Improve test to check that list collections is
  consistent with the durable catalog
- :issue:`SERVER-93153` Emit startIndexBuild change event
- :issue:`SERVER-93400` timeseries_insert_mixed_schema_bucket.js needs
  to guard against collmod timing
- :issue:`SERVER-93672` Fix concat error in multiversionconstants.py
- :issue:`SERVER-94327` Add unittest for killAllExpiredTransactions
- :issue:`SERVER-94618` Replace optional chaining syntax in
  create_indexes_return_on_start.js
- :issue:`SERVER-95423` Count insertion failures in SASL SCRAM cache
- :issue:`SERVER-95919` Asserts that all the aggregation stages have
  auth tests
- :issue:`SERVER-96839` Pass writeConcern from UMCs into UMCTransaction
- :issue:`SERVER-97201` Add a metric in FTDC for replication coordinator
  mutex wait time
- :issue:`SERVER-97641` Remove LdapHealthObserver unit test's dependency
  on ldaptest.10gen.cc
- :issue:`SERVER-98729` Fix shutdown race condition in
  repl_monitor_refresh.js
- :issue:`SERVER-99868` Improve debuggability of
  batch_write_exec/batch_write_op
- :issue:`SERVER-99915` FLE2 findAndModify should also return WCE from
  transaction API result
- :issue:`SERVER-100528` Investigate all commands that accept write
  concern for WCE handling
- :issue:`SERVER-100936` Mongos must return WCE as a top-level error for
  create collection
- :issue:`SERVER-100937` Mongos must return WCE on dropIndexes
- :issue:`SERVER-100938` Mongos must return WCE on createIndexes
- :issue:`SERVER-100939` Mongos should return WCE on no-op
  setFeatureCompatibilityVersion
- :issue:`SERVER-100942` setDefaultRWConcernDefault must return WCE
- :issue:`SERVER-100943` abortTransaction must wait for write concern
  and return WCEs on failure
- :issue:`SERVER-101178` Apply important upstream ICU fixes to our
  vendored copy
- :issue:`SERVER-101386` Test all commands that accept write concern
  against timeseries collections
- :issue:`SERVER-101387` Test all commands that accept write concern
  against FLE collections
- :issue:`SERVER-102266` 7.0 -- Coverity analysis defect 169977: Data
  race condition
- :issue:`SERVER-102428` Logical initial sync allocates double
  maxIndexBuildMemoryUsageMegabytes
- :issue:`SERVER-102477` Revert change preventing tuning
  taskExecutorPoolSize on 7.0+
- :issue:`SERVER-102571` Check against WriteConcernError category when
  processing QE transactions
- :issue:`SERVER-102670` [v8.1] Incorrect ordered time-series insert
  error handling
- :issue:`SERVER-102983` Logical initial sync reports compounding index
  build memory use
- :issue:`SERVER-103664` Ensure Operations Are Quiesced Before Stopping
  Secondaries in
  mongos_writes_wait_for_write_concern_sharded_addl_crud_ops.js
- :issue:`SERVER-103742` opWriteConcernCounters can illegally embed a
  NUL bytes into ServerStatus
- :issue:`SERVER-103960` Impose a proper check on the field path to
  ensure the number of parts not exceeding 255
- :issue:`SERVER-104220` Router must take into account drop collection
  write concern error
- :issue:`SERVER-104543` Don't fail stacktrace collection if we're
  unable to resolve a symbol
- :issue:`SERVER-104839` Add a new log line that contains both metadata
  and authentication info
- :issue:`SERVER-105041` [v8.0] Pin the MSVC version on released
  branches
- :issue:`SERVER-105263` Resmoke blocks completion of passing tests on
  symbolization of failing tests from other jobs
- :issue:`SERVER-105424` Handle yield and restore in direct shard
  connection warnings
- :issue:`SERVER-105528` Fix FLE2 findAndModify write concern error
  reporting in mongod
- :issue:`SERVER-106162` [test-only] Reevaluate ignoring write concern
  errors in drop FSM state
- :issue:`SERVER-106354` Missing resource lock acquisition when applying
  batch of inserts to a capped collection
- :issue:`SERVER-106492` Include multiplanner metrics in FTDC
- :issue:`SERVER-106589` Provision more memory for index builds during
  initial sync
- :issue:`SERVER-106875` Really deregister all collections when closing
  CollectionCatalog
- :issue:`SERVER-106965` [v8.0] create shared scons cache directory
- :issue:`SERVER-106988` [v8.0] Fix ninja + icecream generation
- :issue:`SERVER-107361` Rollover determination in the bucket catalog
  can fail to check mixed schema for large measurements
- :issue:`SERVER-107429` [v7.0] Prepare SPM-4070 7.0 branch for release
- :issue:`SERVER-107852` Server SBOM rebuild to master/v8.x/v7.0
- :issue:`SERVER-107924` Make RateLimitIsValidAfterQueueing test
  resilient to slow machines
- :issue:`SERVER-108366` Prepared Transactions with apiVersion
- :issue:`SERVER-108800` Use retryable session for config writes in
  check_metadata_consistency.js
- :issue:`SERVER-109435` Improve error collection for
  mongod_proxy_protocol.js
- :issue:`SERVER-109493` Disable "uncaught exception in noexcept"
  Coverity check
- :issue:`SERVER-110119` Coverity analysis defect 176642: Using a moved
  object
- :issue:`SERVER-110124` Coverity analysis defect 176627: Using a moved
  object
- :issue:`SERVER-110130` Coverity analysis defect 176613: Using a moved
  object
- :issue:`SERVER-110132` Coverity analysis defect 176604: Using a moved
  object
- :issue:`SERVER-110133` Coverity analysis defect 176603: Using a moved
  object
- :issue:`SERVER-110141` Coverity analysis defect 176586: Using a moved
  object
- :issue:`SERVER-110146` Coverity analysis defect 176577: Using a moved
  object
- :issue:`SERVER-110161` Correct $_startAt behavior to stop skipping
  documents
- :issue:`SERVER-110252` Add delays in
  audit_remote_local_intermediate.js
- :issue:`SERVER-110425` Develop and add an Evergreen task to upload
  SBOM to Kondukto using SilkBomb for master, v7.0, v8.0, v8.1, v8.2
- :issue:`SERVER-110618` Coverity 7.0 QI Batch Fixes
- :issue:`SERVER-110675` python dep is breaking 7.0 builds
- :issue:`SERVER-110890` Coverity analysis defect 175049: Logically dead
  code
- :issue:`SERVER-111135` Retry configureFailPoint in rollback_test.js
- :issue:`SERVER-111427` Load SASL before locking code pages
- :issue:`SERVER-111460` Pin code pages for mongos
- :issue:`SERVER-112035` Downgrade proxy protocol disconnected to INFO
- :issue:`SERVER-112375` [v7.0] Tag timeseries_create.js with
  requires_fcv_70
- :issue:`SERVER-112467` Track and report the number of pending proxy
  connections

