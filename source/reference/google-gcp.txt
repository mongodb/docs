.. _google-gcp:

=====================
Google Cloud Platform
=====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Synopsis
--------

|service| supports deploying clusters onto Google Cloud Platform (GCP). This
page provides reference material related to |service| cluster deployments on
:abbr:`GCP (Google Cloud Platform)`.

|service| supports all :abbr:`GCP (Google Cloud Platform)` regions other than
those in China and US GovCloud:

.. list-table::
   :header-rows: 1
   :widths: 50 50
   
   * - GCP Region
     - Location
     
   * - ``us-west1``
     - Oregon (Western US)
     
   * - ``us-central1``
     - Iowa (Central US)
     
   * - ``us-east1``
     - South Carolina (Eastern US)
     
   * - ``europe-west1``
     - Belgium (Western Europe)
     
   * - ``asia-east1``
     - Taiwan (Eastern Asia-Pacific)
     
   * - ``asia-northeast1``
     - Tokyo (Japan)
     
   * - ``asia-southeast1``
     - Singapore (Southeastern Asia-Pacific

.. _google-gcp-configuration-options:

Cluster Configuration Options
-----------------------------

Each |service| instance size comes with a default set of resources. For
clusters deployed onto :abbr:`GCP (Google Cloud Platform)`, the configuration
options are as follows:

Custom Storage Size 
   The size of the server root volume. |service| clusters deployed onto
   :abbr:`GCP (Google Cloud Platform)` use SSD persistant 
   storage [#google-disk-docs]_.
   
   For ``M10`` instances, the maximum custom storage size is 3TB.
   
   For ``M20+`` instances, the maximum custom storage size is 16TB.
   
Custom Storage Speed
   The input/output operations per second (IOPS) [#google-disk-docs]_ the 
   system can perform. This value is fixed at 30 
   :abbr:`IOPS (Input/Output Operations per Second)` per GB.
   
   For example, the ``M30`` instance size has a default storage size of 
   40GB per instance and a max storage speed of 1200 max 
   :abbr:`IOPS (Input/Output Operations per Second)`. Increasing the storage
   size to 100GB per instance increases the max storage speed to 
   ``( 30 IOPS / GB * 100 GB)`` or 3000 
   :abbr:`IOPS (Input/Output Operations per Second)`.

Encrypted Storage Volumes
   :abbr:`GCP (Google Cloud Platform)` storage volumes are 
   `always encrypted <https://cloud.google.com/security/encryption-at-rest/>`_.

.. _google-gcp-availability-zones:

GCP Zones
---------

A given :abbr:`GCP (Google Cloud Platform)` region includes a set number of
independent zones. For regions that have at least three zones (3Z), |service|
deploys clusters across three zones. For regions that only have two zones
(2Z), |service| deploys clusters across two zones.

The |service| :doc:`Add New Cluster </create-new-cluster>` form marks regions
that support :abbr:`3Z (Three Zone)` clusters as :guilabel:`Recommended`, as
they provide higher availability.

.. include:: /includes/extracts/fact-no-node-restriction-gcp.rst

For general information on :abbr:`GCP (Google Cloud Platform)` regions
and zones, see the Google documentation on `regions and zones
<https://cloud.google.com/compute/docs/regions-zones/regions-zones>`_

Regions with at Least Three Zones
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If the selected :abbr:`GCP (Google Cloud Platform)` region has at least three
zones, |service| clusters are split across three zones. For example, a three
node replica set cluster would have one node deployed onto each zone.

.. include:: /images/google-gcp-3az.rst

:abbr:`3Z (Three Zone)` clusters have higher availability
compared to :abbr:`2Z (Two Zone)` clusters. However, not all
regions support :abbr:`3Z (Three Zone)` clusters.

Regions with Only Two Zones
~~~~~~~~~~~~~~~~~~~~~~~~~~~

If the selected :abbr:`GCP (Google Cloud Platform)` region has two zones,
|service| clusters are split across the two zones. For example, a three node
replica set cluster would have two nodes deployed to one zone and the
remaining node deployed to the other zone.

.. include:: /images/google-gcp-2az.rst

:abbr:`2Z (Two Zone)` clusters have a higher chance of loss of
availability in the event of the loss of an zone than :abbr:`3Z
(Three Zone)` clusters. However, where latency or location are a
priority, a region that supports :abbr:`2Z (Two Zone)` clusters
may be preferred.

.. [#google-disk-docs]

   For detailed documentation on Google storage options, see 
   https://cloud.google.com/compute/docs/disks/
