.. _create-new-cluster:

================
Create a Cluster
================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

|service|-managed MongoDB deployments, or "clusters", can be either a
:term:`replica set` or a :term:`sharded cluster`. All |service|
clusters run using the
:ref:`WiredTiger storage engine <storage-wiredtiger>`.
This tutorial covers creating and configuring a new |service| cluster.

To learn how to modify an existing |service| cluster, see
:doc:`scale-cluster`.

.. include:: /includes/extracts/fact-vpc-per-project.rst

.. _create-cluster-open-dialog:

A. Open the :guilabel:`Create New Cluster` Dialog
-------------------------------------------------

.. container:: admonition

   .. note::

      Before creating a cluster, check that you have the correct
      organization and project selected. Click the :guilabel:`Context`
      drop down in the top left corner to select a specific organization
      or project. For more information on creating and managing
      organizations and projects, see
      :doc:`/tutorial/manage-organizations` and
      :doc:`/tutorial/manage-projects`.

      .. include:: /includes/fact-cluster-project-limit.rst

   Go to the :guilabel:`Clusters` view and click the :guilabel:`Add New
   Cluster` or :guilabel:`Build a New Cluster` button to display the
   :guilabel:`Create New Cluster` dialog. As you build your cluster,
   |service| displays the associated costs at the bottom of the screen.
   You can hover over the displayed cost for additional estimates.

.. _create-cluster-cloud-provider-region:

B. Configure the Cluster :guilabel:`Cloud Provider & Region`
------------------------------------------------------------

.. container:: admonition

   Select your preferred cloud provider and region. The choice of cloud
   provider and region affects the configuration options for the
   available instance sizes, network latency for clients accessing your
   cluster, the geographic location of the nodes in your cluster,
   and the :doc:`cost of running the cluster </billing>`.

   |service| supports deploying ``M0`` Free Tier and
   ``M2/M5`` shared-tier clusters on all cloud providers but only a
   subset of each cloud provider's regions. Regions marked as
   :guilabel:`Free Tier Available` support deploying ``M0`` Free Tier
   clusters. For a list of regions that support ``M2/M5`` clusters, see:

   - :ref:`Amazon Web Services (AWS) <amazon-aws>`
   - :ref:`Google Cloud Platform (GCP) <google-gcp>`
   - :ref:`Microsoft Azure <microsoft-azure>`

   Regions marked as |star| are
   :guilabel:`Recommended` regions that provide higher availability
   compared to other regions. For more information, see:

   - :ref:`AWS Recommended Regions <amazon-aws-availability-zones>`.
   - :ref:`GCP Recommended Regions <google-gcp-availability-zones>`.
   - :ref:`Azure Recommended Regions <microsoft-azure-availability-zones>`.

   .. include:: /includes/extracts/fact-no-node-restriction-base.rst

   From the :guilabel:`Cloud Provider & Region` section, you can also
   :ref:`create-cluster-multi-region`.

.. |star| unicode:: U+2605

.. _create-cluster-multi-region:

Select Multi-Region, Workload Isolation, and Replication Options
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-clusterProviderRegionOnly.rst

.. _create-cluster-instance:

C. Select the :guilabel:`Cluster Tier`
--------------------------------------

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-clusterInstance.rst

   From the :guilabel:`Cluster Tier` section, you can also
   :ref:`create-cluster-storage`.

.. _create-cluster-storage:

:guilabel:`Customize Your Storage`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-customizeStorage.rst

.. _create-cluster-additional-settings:

D. Select any :guilabel:`Additional Settings`
---------------------------------------------

.. container:: admonition

   From the :guilabel:`Additional Settings` section, you can

   - :ref:`create-cluster-version`
   - :ref:`create-cluster-backups`
   - :ref:`create-cluster-sharding`
   - :ref:`create-cluster-shardNum`
   - :ref:`create-cluster-enable-bi`
   - :ref:`create-cluster-enable-encryption`
   - :ref:`create-cluster-more-configuration-options`

.. _create-cluster-version:

Select the MongoDB Version of the Cluster
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   Select the new MongoDB version from the :guilabel:`Select a version`
   dropdown. |service| always deploys the cluster with the latest stable
   release of the specified version.

   .. include:: /includes/extracts/fact-mongodb-version-create-cluster.rst

.. _create-cluster-backups:

Enable Backup for the Cluster
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-clusterBackup.rst

.. _create-cluster-sharding:

Deploy a Sharded Cluster
~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-clusterSharding.rst

.. _create-cluster-shardNum:

Configure the Number of Shards
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-clusterShardingNum.rst

.. _create-cluster-enable-bi:

Enable |bic|
~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-bi.rst

.. _create-cluster-enable-encryption:

Enable Encryption at Rest
~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-encryption-at-rest.rst

.. _create-cluster-more-configuration-options:

Configure Additional Configuration Options
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-more-configuration-options.rst

.. _create-cluster-name:

E. Enter the :guilabel:`Cluster Name`
-------------------------------------

.. container:: admonition

   This is the cluster name as it appears in |service|. You cannot change the
   cluster name once |service| deploys the cluster.

.. _create-cluster-payment:

F. Enter your Payment Information and Deploy your Cluster
---------------------------------------------------------

.. container:: admonition

   Click :guilabel:`Create Cluster` below the form to enter payment
   information. |service| does not prompt you for payment information
   if you have already provided payment information for the
   :ref:`organization <organizations>` within which you are deploying
   the cluster. For |service| ``M0`` Free Tier clusters, |service|
   does not require payment information to deploy the cluster.

   See :ref:`billing-overview` for more information on |service|
   billing and payments.

.. _create-cluster-security:

G. (Optional) Create a MongoDB Administrative User
--------------------------------------------------

.. container:: admonition

   .. include:: /includes/extracts/cluster-option-clusterSecurity.rst

.. _create-cluster-connect:

H. Connect to your cluster
--------------------------

.. container:: admonition

   Once |service| deploys your cluster, click :guilabel:`Connect` on
   the cluster to open the :guilabel:`Connect` dialog. To learn how to
   connect to your cluster, see :doc:`connect-to-cluster`.

   .. admonition:: Open Ports 27015 to 27017 to Access |service| Databases
      :class: important

      .. include:: /includes/fact-open-network-ports.rst

.. seealso:: :doc:`/tutorial/view-all-clusters`

.. include:: /includes/footnote-databearing.rst

.. class:: hidden

   .. toctree::
      :titlesonly:

      /pause-terminate-cluster.txt
