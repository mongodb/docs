==========================================
Database Commands Used by Monitoring Agent
==========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: twocols

The Monitoring Agent uses a set of MongoDB diagnostic, administrative, and
other :manual:`database commands </reference/command>` to report on the status
of your MongoDB deployment.

Host Process Types
------------------

The agent monitors these process types:

- ``mongod`` processes
- ``mongos`` processes

Database Commands Used by the Monitoring Agent
----------------------------------------------

The agent uses these :manual:`database commands </reference/command>` to
monitor your MongoDB deployment:

- :dbcommand:`_isSelf`
- :dbcommand:`buildInfo`

- :dbcommand:`collStats` on the following :manual:`local database
  </reference/local-database>` collections, which support replication
  operations:

  - :data:`local.oplog.rs` collection
  - :data:`local.oplog.$main` collection. Only for :manual:`master-slave
    replication </core/master-slave>`.

- :dbcommand:`find` on the following :manual:`config database </reference/config-database>`
  collections, which support sharding operations:

  - :data:`config.chunks` collection
  - :data:`config.collections` collection
  - :data:`config.databases` collection
  - :data:`config.lockpings` collection
  - :data:`config.mongos` collection
  - :data:`config.settings` collection
  - :data:`config.shards` collection

- :dbcommand:`connPoolStats`
- :dbcommand:`dbStats`
- :dbcommand:`getCmdLineOpts`

- :dbcommand:`getLog` issued with:

  - A value of ``global``. Only if you have enabled :doc:`log collection
    </tutorial/view-logs>`.

  - A value of ``startupWarnings``.

- :dbcommand:`getParameter` issued with a value of ``*``
- :dbcommand:`getShardVersion`
- :dbcommand:`hostInfo`
- :dbcommand:`isMaster`
- :dbcommand:`listDatabases`
- :dbcommand:`netstat`

- :manual:`findOne </reference/method/db.collection.findOne>` on the
  :data:`local.oplog.rs` collection. Only for MongoDB v2.6 and earlier.

- :dbcommand:`find` on the following :manual:`local database </reference/local-database>`
  collections, which support replication operations:

  - :data:`local.system.replset` collection
  - :data:`local.sources` collection. Only for :manual:`master-slave
    replication </core/master-slave>`.

- :dbcommand:`ping`

- :dbcommand:`profile`. Only if :doc:`database profiling
  </tutorial/profile-database>` is enabled. Database profiling is disabled by
  default.

- :dbcommand:`find` on the :data:`system.profile <<database>.system.profile>`
  collection. Only if :doc:`database profiling </tutorial/profile-database>`
  is enabled. Database profiling is disabled by default.

- :dbcommand:`replSetGetStatus`
- :dbcommand:`serverStatus`
