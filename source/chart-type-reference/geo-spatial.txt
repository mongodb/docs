:noprevnext:

.. _geo-spatial:
.. _geo-spatial-charts:

=================
Geospatial Charts
=================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Geospatial data defines specific geographical
locations, either in the form of latitude and longitude
coordinates or text fields with names of geographical areas,
such as countries or states. Geospatial charts combine
geospatial data with other forms of data to create map-based
charts. MongoDB collections can store geospatial data as
:manual:`GeoJSON objects </geospatial-queries/#geospatial-geojson>`
or as :manual:`legacy coordinate pairs
</geospatial-queries/#geospatial-legacy>`.

Geospatial charts can visualize geospatial data in a variety
of chart formats, including :ref:`choropleth
<choropleth-description>`, :ref:`scatter <scatter-description>`,
and :ref:`heatmap <heatmap-description>`.

.. seealso::

   - :ref:`Geopoint encoding channel type <geopoint-channel>`
   - :ref:`Geospatial chart customization <geospatial-customization>`

.. _choropleth-description:

Choropleth
----------

:ref:`Choropleth charts <choropleth-ref>` use predefined :ref:`shapes
<choropleth-shape-scheme>` for geographical areas, e.g. the countries
of the world, or the states of the United States. They are useful for
comparing aggregated values across defined geographical areas.

.. figure:: /images/charts/geo-type-choropleth.png
   :figwidth: 700px
   :alt: Choropleth chart example

.. _scatter-description:

Scatter
-------

:ref:`Scatter charts <scatter-ref>` use customizable data markers to
indicate data points on a map.

.. figure:: /images/charts/geo-type-scatter.png
   :figwidth: 700px
   :alt: Scatter chart example

.. _heatmap-description:

Heatmap
-------

:ref:`Heatmap charts <geospatial-heatmap-type>` use gradations of color
intensity to compare concentrations of data points on a map.

.. figure:: /images/charts/geo-type-heatmap.png
   :figwidth: 700px
   :alt: Heatmap chart example

Customization Options
---------------------

You can customize geospatial charts in several ways, including custom color
palettes, viewport options, data marker size and opacity, and heatmap radius.

.. figure:: /images/charts/geospatial-customization-tab.png
   :figwidth: 242px
   :alt: Geospatial customization tab

Custom Color Palette
~~~~~~~~~~~~~~~~~~~~

The color palette specifies the range of colors that corresponds to
relative aggregated values in your map. 

:ref:`Geospatial Scatter <scatter-ref>` charts use a discrete color
picker, and :ref:`Geospatial Heatmap <geospatial-heatmap-type>` and
:ref:`Choropleth <choropleth-ref>` charts use a gradient color picker,
but the mechanism to enable customization is the same. To enable
palette customization, toggle the :guilabel:`Custom Color Palette`
switch in the :guilabel:`General` section.

For more information, see :ref:`Color Palette Customization
<color-palette-customization>`.

Automatically Set Viewport
~~~~~~~~~~~~~~~~~~~~~~~~~~

By default, geospatial charts show a map which includes all the data
point markers in your specified collection. You can pan and zoom to
change the map view, but if you close the chart and re-open it the map
reverts to its default state. This behavior is controlled by the
:guilabel:`Automatically Set Viewport` option.

When you toggle the :guilabel:`Automatically Set Viewport` switch to
``Off``, the area and zoom level at which the map is saved becomes the
new default view.

.. note::

   You can pan and zoom the map area in a chart on a dashboard, but
   these changes do not affect the default map view.

Opacity
~~~~~~~

The :guilabel:`Opacity` level of a map modifies the degree to which
the chart's map data shows through the data point markers. This
setting is available on all geospatial charts.

On :ref:`Geospatial Heatmap <geospatial-heatmap-type>` and
:ref:`Choropleth <choropleth-ref>` charts, the :guilabel:`Opacity`
level defaults to 100%. On :ref:`Geospatial Scatter <scatter-ref>`
charts, it defaults to 20%.

Radius
~~~~~~

.. include:: /includes/radius-description.rst

Stroke Thickness
~~~~~~~~~~~~~~~~

:ref:`Scatter <scatter-ref>` charts provide the customization option
to set the :guilabel:`Stroke Thickness`, measured in pixels, of the 
map's data point markers. This setting defaults to ``2``.

.. toctree::
   :titlesonly:

   /chart-type-reference/choropleth.txt
   /chart-type-reference/geospatial-scatter.txt
   /chart-type-reference/geospatial-heatmap
