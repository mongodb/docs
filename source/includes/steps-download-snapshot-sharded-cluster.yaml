stepnum: 1
level: 4
source:
  file: steps-source-backup-tab.yaml
  ref: select-backup-tab-overview-page
---
stepnum: 2
level: 4
source:
  file: steps-source-prepare-restore-snapshot.yaml
  ref: click-deployment-select-restore
---
title: Select the restore point.
stepnum: 3
level: 4
source:
  file: steps-source-prepare-restore-snapshot.yaml
  ref: select-restore-point
ref: select-restore-point
content: |
  Choose the point from which you want to restore your backup. 

  .. list-table::
     :widths: 20 40 40
     :header-rows: 1

     * - Restore Type

       - Description

       - Action

     * - :guilabel:`Snapshot`

       - Allows you to choose one :term:`stored snapshot <snapshot>`.

       - Select an existing snapshot to restore.

     * - :guilabel:`Point In Time`

       - Creates a custom snapshot that includes all operations up to
         but not including the selected time.

         .. example::

            If you select ``12:00``, the last operation in the restore is
            ``11:59:59`` or earlier.

       - Select a :guilabel:`Date` and :guilabel:`Time`.

  Click :guilabel:`Next`.

---
title: Select whether to have |mms| restore the snapshot.
stepnum: 4
level: 4
ref: select-auto-restore
content: |

  .. list-table::
     :widths: 20 80

     * - :guilabel:`Yes`

       - |mms| restores the snapshot for you. If you select this
         option, |mms| prompts to choose the destination group. You can
         select an existing cluster or create a new one.

         .. include:: /includes/fact-restore-different-group-requirements.rst

         Follow the prompts in the wizard.

         .. important::
            You can skip the remainder of this page.

     * - :guilabel:`No, I'll do it myself`

       - |mms| provides you with the restore files for you to perform the
         restore manually.

---
stepnum: 5
level: 4
source:
  file: steps-source-download-restore-snapshot.yaml
  ref: select-restore-destination
---
title: "Retrieve the snapshot."
stepnum: 6
level: 4
ref: retrieve
content: |

  If you selected :guilabel:`Pull Via Secure HTTP`:
    |mms| creates links to the snapshot. By default, these links are available
    for an hour and can be used just once. To download the snapshot:

    a. Click :guilabel:`Backup`, then the :guilabel:`Restore History` tab.

    b. When the restore job completes, a :guilabel:`download` link appears
       for each :term:`shard` and for one of the :term:`config servers
       <config server>`. 

    c. Click each link to download the restore archives.

    d. For the config server, copy its config restore archive to each of
       its :term:`replica set` members.

    e. For each shard, copy its restore archive to each of its
       replica set members.

    f. Extract the shard restore archive to the shard's working database
       path.

  If you selected :guilabel:`Push Via Secure Copy`:
    |mms| copies the files to the server directory you specified. After
    the files transfer, you should:

    a. Verify that the files are complete, see :ref:`how to validate
       a secure copy restore <backup-faq-scp-validation>`.

    b. Copy the config server restore archive or files to each member of
       its :term:`replica set`.

    c. Copy each shard restore archive or files to each member of the
       shard's replica set.

    d. If the restored files were received as an archive, extract the
       archive to the shard's working database path.

...
