=======================
Install |backup| Server
=======================

.. default-domain:: mongodb

Procedure
---------

The following instructions must be executed as root.

1. Install a MongoDB server (or replica set) for the MMS databases.

Detailed instructions on getting started with a MongoDB installation
can be found at http://www.mongodb.org/downloads

2. Install a MongoDB server (or replica set) for the Backup databases.

3. Install a MongoDB server (or replica set) for the Blockstore database.

4. Install the MMS software.

The software consists of two packages:

1. The front-end package: ``mongodb-mms-brs-X.X-X_X.x86_64.rpm`` or
   ``mongodb-mms-brs-X.X.X.x86_64.deb``

2. The back-end package:
   ``mongodb-backup-daemon-X.X-X_X.x86_64.rpm`` or
   mongodb-backup-daemon-X.X.X.x86_64.deb.

To install the front-end package on RHEL, CentOS, Amazon Linux, or
SLES run: ::

   rpm -ivh mongodb-mms-brs-X.X-X_X.x86_64.rpm

To install the front-end package on Ubuntu run: ::

   dpkg -i mongodb-mms-brs-X.X.X.x86_64.deb

The software will be installed to ``/opt/mongodb/mms``. Open the
application configuration file at
``/opt/mongodb/mms/conf/conf-mms.properties`` and fill in all of the
required configuration. All of the MongoDB connections default to
localhost. If you are not running the MMS and Backup databases on this
server change these values to the correct host.

The backup database configuration setting (called ``backupdb``) should
point to the Backup database, setup in step 2. All other database
connections in the front-end config file are for the MMS database and
should point to the MMS database from step.

To start the front-end package run: ::

   service mongodb-mms start

If everything worked the following should be displayed: ::

   Start MMS server
      Instance 0 starting...                                  [  OK  ]
   Start Backup HTTP Server
      Instance 0 starting...                                  [  OK  ]
   Start Backup Alert Process                                 [  OK  ]

You should now be able to view MMS by going to the configured central URL in a web
browser. The default port of MMS is 8080.

If you run into any problems, the log files canbe found at
``/opt/mongodb/mms/logs``.

To install the back-end package on RHEL, CentOS, Amazon Linux, or SLES
run: ::

   rpm -ivh mongodb-backup-daemon-X.X-X_X.x86_64.rpm

To install the back-end backup on Ubuntu run: ::

   dpkg -i mongodb-backup-daemon-X.X.X.x86_64.deb

The software will be installed to /opt/mongodb/backup-daemon. Open the
application configuration file at
``/opt/mongodb/backup-daemon/conf/conf-daemon.properties`` and fill in
all of the required configuration.

Same as the front-end package the MMS settings should point to the
database setup in step 1, the Backup setting to the database in step
2, and the Blockstore setting to the database setup in step 3.

To start the back-end package run: ::

   service mongodb-backup-daemon start

If everything worked the following will be displayed: ::

   Start Backup Daemon                                        [  OK  ]

If you run into any problems, the log files can be found at
``/opt/mongodb/backup-daemon/logs``.
