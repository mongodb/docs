===========================================
Enable Authentication on a MongoDB Instance
===========================================

.. default-domain:: mongodb

Overview
--------

Enabling authentication on a MongoDB instance restricts access to the
instance by requiring that users identify themselves when connecting.

Part of enabling authentication is the creation of a user administrator
who can grant access to the instance. The first user you create
on the instance must be the user administrator.

You can create the user administrator either before enabling
authentication or after. This section includes both procedures. Your
choice affects initial access to the instance. If you create the
administrator before enabling authentication, MongoDB disables the
:ref:`localhost exception <localhost-exception>`, which provides
non-authenticated access via the localhost.

If you choose to enable authentication before creating the user
administrator, the :ref:`localhost exception <localhost-exception>`
provides the only access to the instance. To access the instance, connect
from a client running on the same system as the instance and then create
the administrator. The localhost exception applies only until you create
the first user.

On a standalone instance, you enable authentication using the
:setting:`auth` setting. On an instance in a :term:`replica set` or
:term:`sharded cluster`, you use the :setting:`keyFile` setting, which
both enables authentication and specifies the path to the key file that
stores authentication information.

Procedures
----------

Create Administrator and then Enable Authentication
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/create-admin-then-enable-authentication.rst

Enable Authentication and then Create Administrator
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/enable-authentication.rst
