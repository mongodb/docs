# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2011-2015
# This file is distributed under the same license as the mongodb-manual package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: mongodb-manual 3.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2015-03-30 14:28-0400\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:3
# 2b4bbcbc22da497f9522120e6ff8b150
msgid "Enforce Unique Keys for Sharded Collections"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:8
# b5fbcec0794d40bab8ff72a636d8ea31
msgid "Overview"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:10
# baecf4e7f53744968a15234dc2ef5e25
msgid "The :method:`unique <db.collection.createIndex()>` constraint on indexes ensures that only one document can have a value for a field in a :term:`collection`. For :ref:`sharded collections these unique indexes cannot enforce uniqueness <limit-sharding-unique-indexes>` because insert and indexing operations are local to each shard."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:16
# 34e7fbdca02844db8b1b8bbd8cc4b18c
msgid "MongoDB does not support creating new unique indexes in sharded collections and will not allow you to shard collections with unique indexes on fields other than the ``_id`` field."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:20
# 09a20e35a6fd43b5bfa974cee84ff444
msgid "If you need to ensure that a field is always unique in a sharded collection, there are three options:"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:23
# 932af761930d45d1aab42c1b7fad58af
msgid "Enforce uniqueness of the :ref:`shard key <sharding-shard-key>`."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:25
# edc808746a1442dc9105b071245b18b0
msgid "MongoDB *can* enforce uniqueness for the :term:`shard key`. For compound shard keys, MongoDB will enforce uniqueness on the *entire* key combination, and not for a specific component of the shard key."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:30
# 2e5929456cfa4e9b9c77d8a2ad7e6b76
msgid "You cannot specify a unique constraint on a :ref:`hashed index <index-type-hashed>`."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:33
# 2ac40cec93f44008b0887b5a4f632d43
msgid "Use a secondary collection to enforce uniqueness."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:35
# 96572c52c4214625b159f040edbe619e
msgid "Create a minimal collection that only contains the unique field and a reference to a document in the main collection. If you always insert into a secondary collection *before* inserting to the main collection, MongoDB will produce an error if you attempt to use a duplicate key."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:41
# ce40454c4375427f8927bcc0002333eb
msgid "If you have a small data set, you may not need to shard this collection and you can create multiple unique indexes. Otherwise you can shard on a single unique key."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:45
# 4be2be4707bd45a1b58cc6169230f5f4
msgid "Use guaranteed unique identifiers."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:47
# 7419d95aea3e4ccf9d67ca8770810eed
msgid "Universally unique identifiers (i.e. UUID) like the ``ObjectId`` are guaranteed to be unique."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:51
# 6b7d5c5a337740c3a817fc55b3b7e1e0
msgid "Procedures"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:54
# b2ec9d14179b4091b4d3ad105907f166
msgid "Unique Constraints on the Shard Key"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:59
#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:111
# feadb3535bd346d4a1454e7a36db5d32
# 1a1e2455a5af4aba9df1f8a3aa46c429
msgid "Process"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:61
# 7d0c85ecf8d54c279b28fec4acdea939
msgid "To shard a collection using the ``unique`` constraint, specify the :dbcommand:`shardCollection` command in the following form:"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:68
# 21db93455b794a768b173e033f6ef3b6
msgid "Remember that the ``_id`` field index is always unique. By default, MongoDB inserts an ``ObjectId`` into the ``_id`` field. However, you can manually insert your own value into the ``_id`` field and use this as the shard key. To use the ``_id`` field as the shard key, use the following operation:"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:79
# 930aaca34abe4bda9d91850fa6a040b3
msgid "Limitations"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:81
# b04ebc7969b344888fcfbe5a8d616243
msgid "You can only enforce uniqueness on one single field in the collection using this method."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:84
# 93d77c8cbf0f4e21935a3d4cd9e99153
msgid "If you use a compound shard key, you can only enforce uniqueness on the *combination* of component keys in the shard key."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:88
# 234ab0bc02d548c1adf4c352ed02887d
msgid "In most cases, the best shard keys are compound keys that include elements that permit :ref:`write scaling <sharding-shard-key-write-scaling>` and :ref:`query isolation <sharding-shard-key-query-isolation>`, as well as :ref:`high cardinality <sharding-shard-key-cardinality>`. These ideal shard keys are not often the same keys that require uniqueness and enforcing unique values in these collections requires a different approach."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:97
# 663e4f6a824b4d15b9cccb24d0b68146
msgid "Unique Constraints on Arbitrary Fields"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:99
# bbd5e0f887c94db5b9408ef6e3bd5214
msgid "If you cannot use a unique field as the shard key or if you need to enforce uniqueness over multiple fields, you must create another :term:`collection` to act as a \"proxy collection\". This collection must contain both a reference to the original document (i.e. its ``ObjectId``) and the unique key."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:105
# be9fd7e607a1496ab0737a8c472bd4c9
msgid "If you must shard this \"proxy\" collection, then shard on the unique key using the :ref:`above procedure <sharding-pattern-unique-procedure-shard-key>`; otherwise, you can simply create multiple unique indexes on the collection."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:113
# 97cc0d105cf343a6b3f374a89d9a71a4
msgid "Consider the following for the \"proxy collection:\""
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:122
# d7574903defb402a8920348b48e15950
msgid "The ``_id`` field holds the ``ObjectId`` of the :term:`document` it reflects, and the ``email`` field is the field on which you want to ensure uniqueness."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:126
# 67dd3f57abae487c8789ca938ea888a3
msgid "To shard this collection, use the following operation using the ``email`` field as the :term:`shard key`:"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:135
# 4483e87c44e74fbd8db037fab7717e46
msgid "If you do not need to shard the proxy collection, use the following command to create a unique index on the ``email`` field:"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:142
# efeba176e78d4d68b23b42cb4c56dda2
msgid "You may create multiple unique indexes on this collection if you do not plan to shard the ``proxy`` collection."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:145
# 24d404d663fd44e4b62e0303628207d2
msgid "To insert documents, use the following procedure in the :ref:`JavaScript shell <mongo>`:"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:168
# 13339711721e42d0be483f9d00ad6e1a
msgid "You must insert a document into the ``proxy`` collection first. If this operation succeeds, the ``email`` field is unique, and you may continue by inserting the actual document into the ``information`` collection."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:0
# f3559491e4b644a1a981381b387d1c28
msgid "See"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:177
# 153fa1c0b2414c76a9dbdb4ee8e68ee1
msgid "Considerations"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:179
# 02436440f4d440d284ef0c0d0639eb19
msgid "Your application must catch errors when inserting documents into the \"proxy\" collection and must enforce consistency between the two collections."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:183
# b60f53c0af6649c19cb25aa3cda79374
msgid "If the proxy collection requires sharding, you must shard on the single field on which you want to enforce uniqueness."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:186
# 1abe221612df4b3ca0aa4cf5db1f72d5
msgid "To enforce uniqueness on more than one field using sharded proxy collections, you must have *one* proxy collection for *every* field for which to enforce uniqueness. If you create multiple unique indexes on a single proxy collection, you will *not* be able to shard proxy collections."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:193
# a97b0c782ff94e7c8bf71740d7ef82ee
msgid "Use Guaranteed Unique Identifier"
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:195
# ab0d7af966374542b2c47c1776822c6b
msgid "The best way to ensure a field has unique values is to generate universally unique identifiers (UUID,) such as MongoDB's '``ObjectId`` values."
msgstr ""

#: ../source/tutorial/enforce-unique-keys-for-sharded-collections.txt:199
# 8401e68776134fc2aeb61015409017bd
msgid "This approach is particularly useful for the``_id`` field, which *must* be unique: for collections where you are *not* sharding by the ``_id`` field the application is responsible for ensuring that the ``_id`` field is unique."
msgstr ""

