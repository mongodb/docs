title: "Download the latest version of the Automation Agent archive."
stepnum: 1
ref: download-automation-agent-rpm
pre: |
  On a system shell, issue a command that resembles the
  following. Replace ``amd64`` with your platform, as needed:
action:
  language: sh
  code: |
    curl -OL https://cloud.mongodb.com/download/agent/automation/mongodb-mms-automation-agent-manager-latest.x86_64.rpm
edition:
  - cloud
  - classic
---
title: "Download the latest version of the Automation Agent archive."
stepnum: 1
ref: download-automation-agent-rpm
pre: |
  On a system shell, issue a command that resembles the
  following. Replace ``amd64`` with your platform, as needed:
action:
  language: sh
  code: |
    curl -OL <OpsManagerCentralURL>/download/agent/automation/mongodb-mms-automation-agent-manager-latest.x86_64.rpm
edition:
  - onprem
---
title: "Install the Automation Agent Package"
stepnum: 2
ref: extract
action:
  language: sh
  code: |
    sudo rpm -U mongodb-mms-automation-agent-manager-latest.x86_64.rpm
---
title: "Edit the ``automation-agent.config`` file."
stepnum: 3
ref: configure-automation-group-api
action:
  - pre: |
     Edit the ``automation-agent.config`` file.
    language: sh
    code: |
      sudo vi /etc/mongodb-mms/automation-agent.config
  - pre: |
      For ``mmsGroupId``, enter your GroupID as the value. For
      ``mmsApiKey``, enter your API key.
    language: none
    code: |
       mmsGroupId=<Group ID>
       mmsApiKey=<API Key>
  - pre: |
      For SUSE 11+ deployments only, configure the
      ``sslTrustedMMSServerCertificate`` setting. All other users should
      omit this step.
    language: none
    code: |
       sslTrustedMMSServerCertificate=/etc/ssl/certs/UTN_USERFirst_Hardware_Root_CA.pem
---
title: "Prepare the data directory."
stepnum: 4
ref: prepare-data-dir
# Do NOT use program tag on ``mongod`` user below
pre: |
  The data directory stores MongoDB data and must be owned by the
  ```mongod``` user. For an existing MongoDB deployment, ensure the
  directory has the ``mongod`` user as owner. If no MongoDB
  deployment exists, create the directory and set the owner.
action:
  pre: |
    The following commands create a data directory and set the
    owner as the ``mongod`` user:
  language: sh
  code: |
    sudo mkdir /data 
    sudo chown mongod:mongod /data
---
title: "Start the Automation Agent."
stepnum: 5
ref: start-automation-agent
action:
  pre: |
    Issue the following command:
  language: sh
  code: |
    sudo service mongodb-mms-automation-agent start
...
