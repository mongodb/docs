=============================
Add Deployments to Automation
=============================

.. default-domain:: mongodb

Overview
--------

|mms| can automate operations for your monitored MongoDB deployments.
Adding your deployments to Automation lets you reconfigure, stop, and
restart deployments through the |mms| interface.

Adding existing deployments involves two steps. First, install the
Automation Agent on each server hosting a monitored MongoDB instance.
Second, add the MongoDB deployments to Automation, through the |mms|
interface.

Consideration
-------------

Automation supports most but not all available MongoDB options. Automation
supports the options describe in
:doc:`/reference/cluster-configuration-process-options`.

Prerequisites
-------------

|mms| must be currently monitoring the MongoDB deployments that you will
add to Automation. The Monitoring Agent must be running, and the
deployments must appear in the |mms| :guilabel:`Deployment` tab.

Procedures
----------

Install the Automation Agent on Each Server
+++++++++++++++++++++++++++++++++++++++++++

Install the Automation Agent on each server that hosts a monitored MongoDB
instance. Ensure that the Automation Agent has adequate permissions to
stop and restart the existing Monitoring Agent so that it can update the
Monitoring Agent when new versions are released.

On each server, you must download the agent, create the necessary
directories, and configure the agent's ``local.config`` file with the
Group ID and API key.

To install an Automation Agent:

.. include:: /includes/steps/automation-agent-install-for-existing-deployment.rst

For additional information on installing the agent, see
:doc:`/tutorial/nav/install-automation-agent`.

Add Each Server to |mms| Automation
+++++++++++++++++++++++++++++++++++

.. include:: /includes/steps/add-monitored-deployment-to-automation.rst
