.. facet::
   :name: programming_language
   :values: csharp, go, java, javascript/typescript, kotlin, python, shell

.. _autocomplete-tutorial:

==================================
How to Use Autocomplete with |fts|
==================================

.. default-domain:: mongodb

.. meta::
   :keywords: search as you go, predict words, incomplete string search, partial string search, edgeGram tokenization, code example, node.js, compass, java sync, atlas ui
   :description: In this tutorial, learn how use the autocomplete operator to search for a word or phrase that contains a sequence of characters from an incomplete input string.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial describes how to create an |fts| index and run
autocomplete queries to return results for partial words. This is
useful to retrieve results with increasing accuracy as more characters
are entered in your application's search field. You can use the |fts|
:ref:`autocomplete-ref` operator to query field values that you index as
the |fts| :ref:`autocomplete <bson-data-types-autocomplete>` type.

Specifically, this tutorial demonstrates the following:

- How to set up an |fts| index with the :ref:`autocomplete
  <bson-data-types-autocomplete>` type for the ``sample_mflix.movies``
  collection.  

- How to run |fts| queries against the indexed fields in the
  ``sample_mflix.movies`` collection for a partial words.  

Before you begin, ensure that your |service| {+cluster+} meets the
requirements described in the :ref:`Prerequisites
<fts-tutorials-prereqs>`. 

.. include:: /includes/atlas-roles/create-search-index.rst

Define an Index with Autocomplete
---------------------------------

.. include:: /includes/fts/facts/fact-autocomplete-field-type.rst

In this section, you create an |fts| index that indexes the ``title`` and 
``plot`` fields for autocompletion. The index definition performs the
following actions:  

- Creates indexable terms between ``2`` and ``15``
  characters long, starting from the left side of each word (``tokenization: edgeGram``). 
- Ignores diacritic marks such as accents or symbols in the index and
  query to return results with and without diacritic marks
  (``foldDiacritics: true``).  

.. |search-type| replace:: :guilabel:`Atlas Search`
.. |index-name| replace:: ``autocomplete-tutorial``
.. |database-name| replace:: ``sample_mflix`` database
.. |collection-name| replace:: ``movies`` collection

.. include:: /includes/fts/autocomplete/procedures/steps-fts-autocomplete-tutorial-create-index.rst
   
Run an Autocomplete Query
-------------------------

----------

.. |arrow| unicode:: U+27A4

|arrow| Use the **Select your language** drop-down menu to set the 
language of the example on this page.

----------

.. tabs-selector:: drivers

.. include:: /includes/fts/facts/fact-autocomplete-operator.rst

.. tabs-drivers::

   .. tab::
      :tabid: atlas-ui 

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst
            
            .. include:: /includes/fts/autocomplete/procedures/steps-fts-autocomplete-tutorial-run-query-atlas-ui.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst

         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps-fts-autocomplete-multi-field-tutorial-run-query-atlas-ui.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst

   .. tab::
      :tabid: shell 

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst
            
            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-tutorial-run-query-shell.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst

         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-multi-field-tutorial-run-query-shell.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst 

   .. tab::
      :tabid: compass

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-tutorial-run-query-compass.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst

         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-multi-field-tutorial-run-query-compass.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst

   .. tab:: 
      :tabid: csharp

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-tutorial-run-query-cs.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst

         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-multi-field-tutorial-run-query-cs.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst

   .. tab:: 
      :tabid: go

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-tutorial-run-query-go.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst

         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-multi-field-tutorial-run-query-go.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst

   .. tab:: 
      :tabid: java-sync 

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-tutorial-run-query-java.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst
         
         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-multi-field-tutorial-run-query-java.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst

   .. tab:: 
      :tabid: kotlin-coroutine

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-tutorial-run-query-kotlin.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst
         
         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-multi-field-tutorial-run-query-kotlin.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst

   .. tab::
      :tabid: nodejs

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-tutorial-run-query-nodejs.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst
      
         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-multi-field-tutorial-run-query-nodejs.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst

   .. tab::
      :tabid: python

      .. tabs::

         .. tab:: Basic Example
            :tabid: basic 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-tutorial-run-query-python.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-basic-example-result.rst
      
         .. tab:: Advanced Example
            :tabid: advanced 
      
            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-desc.rst

            .. include:: /includes/fts/autocomplete/procedures/steps/fts-autocomplete-multi-field-tutorial-run-query-python.rst

            .. include:: /includes/fts/extracts/fts-autocomplete-advanced-example-result.rst

.. 
   This is an internal comment. I'm hiding the following section per DOCSP-34864, 
   which requests we remove the outdated video until the team can record a new one.

   Continue Learning  
   -----------------

   Follow along with this video tutorial walk-through that demonstrates 
   how to use the |fts| :ref:`autocomplete-ref` operator and JavaScript to 
   build a frontend form element that suggests data to the user.

   *Duration: 30 minutes*

   .. video:: https://youtu.be/3IDlOI0D8-8
