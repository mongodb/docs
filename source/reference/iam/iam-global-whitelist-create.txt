.. _mcli-iam-global-whitelist-create:

===================================
mongocli iam globalWhitelist create
===================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``iam globalWhitelist create`` command creates one global whitelist entry 
for an |onprem| instance. The entry represents a |cidr| block from 
which |onprem| accepts incoming API requests. You can also create a whitelist 
entry using the |onprem| :opsmgr:`UI 
</admin/general/global-whitelist-page/index.html#add-a-whitelist-entry>` 
or :opsmgr:`API </reference/api/api-keys/global/create-one-global-whitelist/>`.

You must have credentials with the :opsmgr:`Global Owner 
</reference/user-roles/#Global-Owner>` role to create a global whitelist entry. 

.. _mcli-iam-global-whitelist-create-syntax:

Syntax 
------

.. code-block:: sh 

   mongocli iam globalWhitelist|ipwhitelist create
         --cidr <cidr-entry> 
         --desc <description-of-entry> 
        [ --output|-o <output-format> ]
        [ --profile|-P <profile-name> ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-iam-global-whitelist-create-options:

Options 
-------

.. list-table:: 
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option
     - Type 
     - Description 
     - Required? 

   * - ``--cidr``
     - string
     - Whitelist entry in |ipv4| or |ipv6| |cidr| notation to add 
       to the |onprem| instance. 
     - yes

   * - ``--desc``
     - string
     - Description of the global whitelist entry. Description must be 
       between 1 and 250 characters in length.
     - yes

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--profile``, ``-P`` 
     - string 
     - Name of the profile where your credentials are saved. If omitted, 
       uses the {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
       
       You must have credentials with the :opsmgr:`Global Owner 
       </reference/user-roles/#Global-Owner>` role to create a global 
       whitelist entry. 

     - no

.. _mcli-iam-global-whitelist-create-output:

Output
------

If the command succeeds, it prints the following output to the terminal 
in the default format. If the command returns errors, see 
:ref:`Troubleshooting <troubleshooting>` for recommended solutions.

.. code-block:: sh
   :copyable: false

   Global whitelist entry '<whitelist-id>' created.
 
The default output is a subset of the fields returned by this command. 
For the complete list of |json| fields returned by the command, see the 
:opsmgr:`API reference 
</reference/api/api-keys/global/create-one-global-whitelist/#response>`.

.. _mcli-iam-global-whitelist-create-examples:

Examples
--------

.. tabs::

   .. tab:: Default Output
      :tabid: default-output

      The following command creates a whitelist entry for an |onprem| 
      instance using the {+default-profile+}, which contains credentials 
      for accessing the instance. The output is returned in the default 
      format.

      .. code-block:: sh

         mongocli iam globalWhitelists create --cidr 192.168.0.1/32 --desc "My Global IP"

      The previous command creates the whitelist entry and 
      prints the following to the terminal.

      .. code-block:: json
         :copyable: false

         Global whitelist entry '5f5bacd457aef32b04ed00e4' created.

   .. tab:: JSON Output
      :tabid: json-output

      The following command creates a whitelist entry for an |onprem| 
      instance using the ``myOM`` profile, which contains credentials for 
      accessing the |onprem| instance. The output is returned in |json|
      format.

      .. code-block:: sh

         mongocli iam globalWhitelists create --cidr 192.168.0.1/32 --desc "My Global IP" --profile myOM --output json

      The previous command creates the whitelist entry and 
      prints the following to the terminal in |json| format.

      .. code-block:: json
         :copyable: false

         {
           "id": "5f5bb07e57aef32b04ed0770",
           "cidrBlock": "192.168.0.1/32",
           "created": "2020-09-11T17:14:38Z",
           "description": "My Global IP",
           "type": "GLOBAL_ROLE",
           "updated": "2020-09-11T17:14:38Z"
         }
