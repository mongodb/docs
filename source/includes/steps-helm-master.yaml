---
title: "Change to the directory in which you cloned the repository."
level: 4
ref: helm-master-cd
---
title: "{{method}}"
level: 4
ref: helm-master-install
replacement:
  k8sonline: |

    Invoke the following ``helm`` and ``kubectl`` commands:

    .. code-block:: sh

        helm template helm_chart \
             --values helm_chart/values.yaml > operator.yaml
        kubectl apply -f operator.yaml

    .. include:: /includes/install/helm-install-k8s-options.rst

    .. note::

        You can also pass these values as options when you apply the
        Helm Chart:

        .. code-block:: sh

          helm template \
               --set namespace=<testNamespace> \
          helm_chart \
               --values helm_chart/values.yaml > operator.yaml
          kubectl apply -f operator.yaml

  k8soffline: |

    Invoke the following ``helm`` and ``kubectl`` commands:

    .. code-block:: sh

       helm template \
            --set registry.pullPolicy=IfNotPresent \
       helm_chart \
            --values helm_chart/values.yaml > operator.yaml
       kubectl apply -f operator.yaml

    .. include:: /includes/install/helm-install-k8s-options.rst

    .. note::

       You can also pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm template \
               --set registry.pullPolicy=IfNotPresent \
               --set namespace=<testNamespace> \
          helm_chart \
               --values helm_chart/values.yaml > operator.yaml
          kubectl apply -f operator.yaml

  osonline: |

    Invoke the following ``helm`` and ``oc`` commands:

    .. code-block:: sh

       helm template helm_chart \
            --values helm_chart/values-openshift.yaml > operator.yaml
       oc apply -f operator.yaml

    If you run |oc| 3.11 or earlier, add the ``--set subresourceEnabled=false``:

    .. code-block:: sh

        helm template helm_chart \
             --values helm_chart/values.yaml \
             --set subresourceEnabled=false > operator.yaml
        kubectl apply -f operator.yaml

    .. include:: /includes/install/helm-install-os-options.rst

    .. note::

       You can also pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm template \
               --set registry.imagePullSecrets=<openshift-pull-secret> \
          helm_chart \
               --values helm_chart/values-openshift.yaml > operator.yaml
          oc apply -f operator.yaml

  osoffline: |

    .. code-block:: sh

       helm template \
            --set registry.pullPolicy=IfNotPresent \
            --set registry.imagePullSecrets=<openshift-pull-secret> \
       helm_chart \
            --values helm_chart/values-openshift.yaml > operator.yaml
       oc apply -f operator.yaml

    .. include:: /includes/install/helm-install-os-options.rst

    .. note::

       You can also pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm template \
               --set registry.pullPolicy=IfNotPresent \
               --set registry.imagePullSecrets=<openshift-pull-secret> \
               --set namespace=<testNamespace> \
          helm_chart \
               --values helm_chart/values-openshift.yaml > operator.yaml
          oc apply -f operator.yaml

  k8sonlineupgrade: |

    .. code-block:: sh

        helm template helm_chart \
             --values helm_chart/values.yaml > operator.yaml
        kubectl apply -f operator.yaml

    .. include:: /includes/install/helm-install-k8s-options.rst

    .. note::

        You can also pass these values as options when you apply the
        Helm Chart:

        .. code-block:: sh

          helm template \
               --set namespace=<testNamespace> \
          helm_chart \
               --values helm_chart/values.yaml > operator.yaml
          kubectl apply -f operator.yaml

  osonlineupgrade: |

    .. code-block:: sh

       helm template helm_chart \
             --values helm_chart/values-openshift.yaml > operator.yaml
       oc apply -f operator.yaml

    .. include:: /includes/install/helm-install-os-options.rst

    .. note::

       You can also pass these values as options when you apply the
       Helm Chart:

       .. code-block:: sh

          helm template \
               --set registry.imagePullSecrets=<openshift-pull-secret> \
          helm_chart \
               --values helm_chart/values-openshift.yaml > operator.yaml
          oc apply -f operator.yaml

---
title: "Connect to the internet."
level: 4
ref: helm-master-connect-internet
---
title: "Disconnect from the internet."
level: 4
ref: helm-master-disconnect-internet
---
title: "Add your Openshift Pull Secret to the Openshift Values file"
level: 4
ref: helm-master-openshift-pull-secret
content: |

  Add the name of your ``<openshift-pull-secret>`` to the
  ``registry.imagePullSecrets`` setting in the
  ``helm_chart/values-openshift.yaml`` file:

  .. code-block:: sh
     :emphasize-lines: 3

     registry:
     # The pull secret must be specified
       imagePullSecrets: <openshift-pull-secret>

---
title: "Export the |k8s-op-short| images as ``.tar`` archive files:"
level: 4
ref: helm-master-archive-files
replacement:
  versions: |
    .. include:: /includes/install/replace-op-and-om-versions.rst

  quayarchive: |

    .. code-block:: sh

       docker save quay.io/mongodb/mongodb-enterprise-operator:<op-version> -o mongodb-enterprise-operator.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-database:<db-version> -o mongodb-enterprise-database.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-ops-manager:<om-version> -o mongodb-enterprise-ops-manager.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-appdb:latest -o mongodb-enterprise-appdb.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-ops-manager-init:latest -o mongodb-enterprise-ops-manager-init.tar; \
       docker save quay.io/mongodb/mongodb-enterprise-init-appdb:latest -o mongodb-enterprise-init-appdb.tar

  rharchive: |

    .. code-block:: sh

       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-operator:<op-version> -o mongodb-enterprise-operator.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-database:<db-version> -o mongodb-enterprise-database.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-ops-manager:<om-version> -o mongodb-enterprise-ops-manager.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-appdb:latest -o mongodb-enterprise-appdb.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-ops-manager-init:latest -o mongodb-enterprise-ops-manager-init.tar; \
       docker save registry.connect.redhat.com/mongodb/mongodb-enterprise-init-appdb:latest -o mongodb-enterprise-init-appdb.tar

---
title: "Copy these ``.tar`` files to the host running the
             |k8s| ``docker`` daemon."
level: 4
ref: helm-master-copy-tar
---
title: "Import the ``.tar`` files into ``docker``."
level: 4
ref: helm-master-import-tar
replacement:
  versions: |
    .. include:: /includes/install/replace-op-and-om-versions.rst
  quayimport: |

    .. code-block:: sh

       docker load -i mongodb-enterprise-operator.tar; \
       docker load -i mongodb-enterprise-database.tar; \
       docker load -i mongodb-enterprise-ops-manager.tar; \
       docker load -i mongodb-enterprise-appdb.tar; \
       docker load -i mongodb-enterprise-ops-manager-init.tar
       docker load -i mongodb-enterprise-init-appdb.tar

  rhimport: |

    .. code-block:: sh

       docker load -i mongodb-enterprise-operator.tar; \
       docker load -i mongodb-enterprise-database.tar; \
       docker load -i mongodb-enterprise-ops-manager.tar; \
       docker load -i mongodb-enterprise-appdb.tar; \
       docker load -i mongodb-enterprise-ops-manager-init.tar
       docker load -i mongodb-enterprise-init-appdb.tar

---
title: "Use ``docker`` to request the files."
level: 4
ref: helm-master-docker-request
replacement:
  quaypull: |

    .. code-block:: sh

      docker pull quay.io/mongodb/mongodb-enterprise-operator:<op-version>; \
      docker pull quay.io/mongodb/mongodb-enterprise-database:<db-version>; \
      docker pull quay.io/mongodb/mongodb-enterprise-ops-manager:<om-version>; \
      docker pull quay.io/mongodb/mongodb-enterprise-appdb:latest; \
      docker pull quay.io/mongodb/mongodb-enterprise-ops-manager-init:latest; \
      docker pull quay.io/mongodb/mongodb-enterprise-init-appdb:latest

  rhpull: |

    .. code-block:: sh

      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-operator:<op-version>; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-database:<db-version>; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-ops-manager:<om-version>; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-appdb:latest; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-ops-manager-init:latest; \
      docker pull registry.connect.redhat.com/mongodb/mongodb-enterprise-init-appdb:latest

  versions: |

    .. include:: /includes/install/replace-op-and-om-versions.rst
...


