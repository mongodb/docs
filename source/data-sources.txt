:noprevnext:

============
Data Sources
============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Data Sources in |charts| reference a :ref:`collection <collections>`
or :ref:`view <3.4-reference-views>` in your MongoDB
deployment. When building a chart, you will need to specify the data
source the chart uses.

To view, add, or remove data sources, click the :guilabel:`Data Sources`
item on the top navigation bar.

Add a Data Source
-----------------

1. Navigate to the :guilabel:`Data Sources` view by clicking on the
   :guilabel:`Data Sources` item on the top navigation bar.

#. Click the :guilabel:`New Data Source` button.

#. Enter the :manual:`Connection String URI </reference/connection-string>`
   of the MongoDB deployment you wish to connect to.

   .. note::
      |charts| requires MongoDB deployments to be running version 3.4 or later.

      If your MongoDB deployment is running with
      :manual:`authentication </tutorial/enable-authentication>`
      enabled, include a database user's credentials in the connection
      string URI. Anonymous, SCRAM, and LDAP authentication mechanisms
      are supported. The database user must have read permission on the
      collections selected in the following step.

#. Select the collections you wish to create data sources from.
   |charts-short| creates a separate data source for each selected
   collection.

#. Set the permissions for the data source, then click
   :guilabel:`Publish Data Source`.

Remove a Data Source
--------------------

To remove a data source, click the red trash can icon on the right-hand
side of the data source, then click :guilabel:`Delete Data Source` to
confirm deletion.

.. important::

   Any charts using the deleted data source will need to be
   reconfigured using a different data source or deleted.

Data Sources View
-----------------

The :guilabel:`Data Sources` view displays existing data sources that
the authenticated user has permission to view. The data sources are
displayed in a tabular format with the following columns:

.. figure:: /images/charts/data-sources-view.png
   :alt: Diagram of the "Data Sources" view
   :figwidth: 750px

.. list-table::
   :header-rows: 1
   :widths: 38 72

   * - Column
     - Description

   * - :guilabel:`Deployment`
     - The MongoDB deployment containing the source database and
       collection. Identified by the hostname and port of the first host
       in the :manual:`Connection String URI </reference/connection-string>`.

   * - :guilabel:`Database`
     - The database containing the source collection or view.

   * - :guilabel:`Collection`
     - The collection or view from where |charts-short| retrieves data.

   * - :guilabel:`Alias`
     - Optional. The display name of the data source used by the
       Chart Builder. Providing an :guilabel:`Alias` may result in a
       shorter and more identifiable name when selecting a data source
       in the chart builder.

       You can modify the :guilabel:`Alias` at any time
       after creation by hovering over the row's :guilabel:`Alias`
       field, then clicking either :guilabel:`Add Alias`
       or the edit button (pencil icon).

   * - :guilabel:`Last modified`
     - The number of days since the data source was last modified.

   * - :guilabel:`Permissions`
     - Click the :guilabel:`Open Access` button to modify data source
       permissions.

.. note::
   You can sort data sources by any of the columns by clicking on the
   column header. You can also search across all columns using the
   search bar on the upper-right hand corner of the view.
