.. _data-transfer-costs:

=============
Data Transfer
=============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Sources of Data Transfer Costs
------------------------------

|service| data transfer costs depend on the cloud service provider
hosting your {+database-deployment+}. |service| tabulates data transfer 
costs daily.

{+Clusters+}
~~~~~~~~~~~~

Multi-region {+clusters+} might have higher
data transfer costs depending on the number and location of additional
regions, as well as the number of {+clusters+} deployed to each region.

.. note:: Exceptions to Data Transfer Cost

   |service| doesn't charge for data transfer for incoming or outgoing 
   data on ``M0``, ``M2``, or ``M5`` cluster tiers.

{+Serverless-Instances+}
~~~~~~~~~~~~~~~~~~~~~~~~

{+Serverless-instances+} incur costs for data transfer to and from the 
virtual machine responsible for backing up and restoring data.

.. tabs-cloud-providers::

   .. tab::
      :tabid: azure

      |service| charges for data transfer between your |service| node
      and another node. Data transfer charges increase, from lowest to
      highest, when you transfer data between your |service| node and
      another node:

      - Between Availability Zones. |service| on |azure| uses
        Availability Zones in new cluster deployments in regions that
        support them.

      - Using in-region VNet peering.

      - In a different region. Data transfer charges for an |service|
        cluster depend on the geographic location of the source node.

      - Using cross-region VNet peering.

   .. tab::
      :tabid: aws

      |service| charges for data transfer between the |service| node
      and another node. Data transfer charges increase, from lowest to
      highest, when you transfer data between your |service| node and
      another node:

      - In the same |aws| region.

      - In a different |aws| region.

      - Outside of any |aws| region, excluding incoming transfers to
        the |service| node.

   .. tab::
      :tabid: gcp

      |service| charges for data transfer between the |service| node
      and another node. Data transfer charges increase, from lowest to
      highest, when you transfer data between your |service| node and
      another node:

      - In the same region but in different zones.

      - In different regions in the United States of America.

      - On a different continent.

      - On the same continent (excluding USA) but a different region.

      - Outside of a |gcp| data center, excluding incoming transfers to
        the |service| node.

{+Cloud-Backup+} Snapshot Export
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/fact-snapshot-export-cost.rst

To learn more about cloud backup snapshot export, see 
:ref:`cloud-provider-snapshot-export`.

Live Migrate Your Data to |service|
-----------------------------------

MongoDB hosts and operates the free |service| Live Migration Service to
help users migrate existing MongoDB databases to |service-fullname|.
MongoDB doesn't charge for any incoming data transfers to an |service|
{+database-deployment+}.
:website:`Learn more </cloud/atlas/migrate?tck=docs_atlas>`
about migrating to |service|.

.. _reducing-data-transfer-costs:

How to Reduce Data Transfer Costs
---------------------------------

The vast majority of |service| customers spend less than 10% of their
budget on data transfer. If you are spending significantly more, some
of these optimizations may reduce your data transfer costs:

- Check all applications and processes that access your data for
  inefficiencies. Ensure that queries do not:

  - Re-read data that already exists on the client.

  - Re-write existing data to your {+database-deployment+}.

- Ensure that queries originate from the same cloud
  region and provider as your {+database-deployment+} whenever possible.

  When cross-region queries are necessary:

  - Ensure read queries
    :manual:`use the preference "nearest."</core/read-preference>`

  - Source write queries from your :guilabel:`Highest Priority Region`
    whenever possible. For more information on region priorities, see
    :ref:`Electable Nodes for High Availability
    <deploy-across-multiple-regions>`.

- Use the :manual:`Aggregation Framework </aggregation>` to preprocess
  your data before you transfer it. For example, you can project
  document fields using the :pipeline:`$project` aggregation stage to
  reduce the size of a document before you transfer it.

- Ensure that your client driver
  :manual:`uses wire protocol compression </reference/configuration-options#net.compression.compressors>`
  to communicate with MongoDB. |service| always compresses intra-cluster communication. To learn how to configure
  your driver, refer to your :driver:`Driver's Documentation </>`.

.. note::

   Queries from on-premises environments into |service|, across cloud
   providers, or between continents on the same cloud provider incur
   the greatest data transfer costs.
