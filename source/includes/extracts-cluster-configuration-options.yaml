ref: cluster-option-clusterProviderRegionOnly
content: |

  To deploy a cross-region cluster, toggle 
  :guilabel:`Configure clusters across multiple regions (M10 and up)`
  to :guilabel:`Yes`.
       
  .. admonition:: AWS Only
     :class: note
      
     If this is the first ``M10+`` dedicated paid cluster for the selected
     region or regions *and* you plan on creating one or more :abbr:`VPC
     peering connections`, please review the documentation on :doc:`VPC
     Peering Connections </security-vpc-peering>` before continuing.

  The following options are available when configuring cross-region 
  clusters:

  :guilabel:`Deploy across multiple regions`
     Click :guilabel:`Add a node` to add a new row for region selection 
     and select the region from the dropdown. Specify the desired 
     number of :guilabel:`Nodes` for the region.

     The first row lists the :guilabel:`Preferred Region`. |service|
     prioritizes nodes in the preferred region for primary elegibility.

     .. admonition:: Backup Data Center Location
        :class: note

        If this is the first cluster in the project *and* you 
        intend to enable 
        :ref:`continuous snapshot backups <create-cluster-backups>`,
        |service| selects the backup data center location for the 
        project based on the geographical location of the 
        cluster's :guilabel:`Preferred Region`. See 
        :doc:`Backup a Cluster </backup-cluster>` for more information.

     When selecting a :guilabel:`Region`, regions marked as 
     :guilabel:`Recommended` provide higher availability compared to 
     other regions. For more information, see: 

     - :ref:`AWS Recommended Regions <amazon-aws-availability-zones>`.          
     - :ref:`GCP Recommended Regions <google-gcp-availability-zones>`.          
     - :ref:`Azure Recommended Regions <microsoft-azure-availability-zones>`.
     
     Each node in the selected regions can participate in 
     :term:`elections <election>`, and can become the :term:`primary` 
     as long as the majority of nodes in the replica set are available. 
     The total number of electable nodes across all regions, excluding 
     read-only regions, must be 3, 5, or 7.
     
     You can also use this option to increase the replication factor of
     single-region clusters by modifying the number of :guilabel:`Nodes` for
     your :guilabel:`Preferred Region` only. You do not have to add additional
     regions to modify the replication factor of your :guilabel:`Preferred
     Region`.
     
     To remove a region, click the :guilabel:`X` next to that region. 
     You cannot remove the :guilabel:`Preferred Region`.  
     
     |service| provides checks for whether your selected cross-regional
     configuration provides availability during partial or whole regional
     outages.

  :guilabel:`Deploy read-only replicas`
     Click :guilabel:`Add a node` to deploy read-only nodes to the
     selected region.
     
     Each node in the region cannot participate in :term:`elections
     <election>`, and cannot become the :term:`primary`. Read-only regions do
     not provide high availability.
     
     To remove a read-only region, click the :guilabel:`X` next to that region.

  .. note::
    
     Having a large number of regions or having nodes spread across
     long distances may lead to long election times or replication lag.
  
  .. important::
  
     .. include:: /includes/fact-cross-region-limits.rst
  
---
ref: cluster-option-clusterProviderRegion
content: |

  The cloud provider and region, or physical location, of your MongoDB
  cluster. The choice of cloud provider and region affects the configuration
  options for the available instance sizes, network latency for clients
  accessing your cluster, and the :doc:`cost of running the cluster
  </billing>`.
  
  .. include:: /includes/extracts/cluster-option-clusterProviderRegionOnly.rst

---
ref: cluster-option-clusterInstance
content: |

  Select your preferred cluster instance size. The selected instance
  size dictates the  memory, storage, and IOPS specification for each
  data-bearing server [#data-bearing]_ in the cluster.
  
  |service| categorizes the instance sizes into tiers as follows:

  :guilabel:`Shared Clusters`
    Sandbox instances for getting started with MongoDB, such as the 
    ``M0`` Free Tier instance.

    These instances support replica set deployments in a shared 
    environment with access to a subset of |service| features and
    functionality.

  :guilabel:`Dedicated Development Clusters`
    Instances that support development environments and low-traffic
    applications.

    These instances support replica set deployments only, but otherwise
    provide full access to |service| features and functionality.

  :guilabel:`Dedicated Production Clusters`
    Instances that support production environments with high traffic
    applications and large datasets. 

    These instances support replica set and sharded cluster
    deployments with full access to |service| features and functionality.

    Some instances have variants, denoted by the |angle| character. 
    When you select these instances, |service| lists the variants 
    and tags each instance to distinguish their key characteristics.

    .. |angle| unicode:: U+276F

  .. include:: /includes/fact-free-tier-paid-tier.rst

---
ref: cluster-option-customizeStorage
content: |

  Each cluster tier comes with a default set of resources. 
  Select your preferred storage customizations under the
  :guilabel:`Customize Your Storage` heading.

  |service| can provide the following storage configuration options
  depending on the selected cloud provider and instance size.

  - :guilabel:`Storage Capacity`
    The size of the server root volume. To change this, either:

    - Move the slide bar until the text box displays your preferred
      disk size, *or*

    - Specify the exact disk size in the text box.

    Changes to storage capacity affects :ref:`cost <instance-size-costs>`.

  - :guilabel:`Storage Speed` 
    The input/output operations per second (IOPS) the system can 
    perform. Changes to storage speed affects 
    :ref:`cost <instance-size-costs>`.

  .. include:: /includes/fact-auto-expand-storage.rst

  For more information on the default resources and available configuration
  options for each cloud service provider, see:

  - :ref:`AWS Configuration Options <amazon-aws-configuration-options>`
  - :ref:`GCP Configuration Options <google-gcp-configuration-options>`
  - :ref:`Azure Configuration Options
    <microsoft-azure-configuration-options>`.

  .. seealso:: :ref:`connection-limits`

---
ref: cluster-option-clusterSharding
content: |

  To deploy your cluster as a :term:`sharded cluster <sharded cluster>`,
  toggle :guilabel:`Shard your cluster (M30 and up)` to ``Yes``.

  :term:`Sharded clusters <sharded cluster>` support horizontal scaling and
  consist of :manual:`shards </core/sharded-cluster-shards>`, 
  :ref:`config servers <sharding-config-server>` and
  :term:`mongos <mongos>` routers:

  .. include:: /includes/list-sharded-cluster-components.rst

  .. include:: /includes/fact-aws-instance.rst

  For details on how the number of server instances affect cost, see
  :ref:`server-number-costs`.

  For more information on sharded clusters, see :manual:`Sharding </sharding>`
  in the MongoDB manual.

---
ref: cluster-option-clusterShardingNum
content: |

  This field is visible only if the deployment is a sharded cluster.
  
  You can set the number of shards to deploy with the sharded cluster. 
  You cannot have fewer than two shards.

---
ref: cluster-option-clusterBackup
content: |

  .. include:: /includes/fact-backup-method-selection.rst

  To enable backups for the |service| cluster, toggle 
  :guilabel:`Turn on Backup (M10 and up)` to ``Yes``.
  If enabled, |service| takes snapshots of your databases at 
  regular intervals and retains them according to your project's 
  :ref:`retention policy <retention-policy>`.

  The backup option chosen for the first cluster in a project
  dictates the backup option for all other subsequent clusters in the
  project. See :doc:`/backup-cluster` for more information.

  |service| provides the following backup options:

  .. list-table::
     :widths: 30 70
     :header-rows: 1

     * - Backup Option
       - Description

     * - :doc:`/backup/continuous-backups` 
       
       - |service| takes incremental snapshots of data in your cluster
         and allows you to :doc:`restore </restore-cluster>` from stored
         snapshots or from a selected point in time within the last 24
         hours. You can also 
         :doc:`query a continuous backup snapshot </query-backup>`. 

         Each project has *one* backup data center location dictated by
         the *first* backup-enabled cluster created in that project. See
         :ref:`continuous-snapshot-storage-location` for more
         information.

     * - :doc:`/backup/cloud-provider-snapshots` (**Azure Only**)

       - |service| takes full copy snapshots of data in your cluster 
         and allows you to restore from those snapshots. 

         |service| cloud provider snapshots are stored in the same
         region as the corresponding cluster. For multi-region clusters,
         snapshots are stored in the cluster's preferred region. See
         :ref:`cloud-provider-snapshot-storage-location` for more
         information.
---
ref: cluster-option-bi
content: |

   To enable the |bic| for this cluster, toggle 
   :guilabel:`Enable Business Intelligence Connector (M10 and up)` 
   to :guilabel:`Yes`.

   If enabled, select the node type from which the |bic|
   should read. For high traffic production environments, the secondary
   node may be preferable to the primary node.

   .. include:: /includes/extracts/cluster-option-bi-cluster-requirements.rst

---
ref: cluster-option-clusterSecurity
content: |

  |service| only allows client connections to the cluster from
  entries in the project :ref:`IP whitelist <whitelist>`. Clients
  must also authenticate as a 
  :ref:`MongoDB database user <mongodb-users>` associated to the 
  project.

  If you have not configured the project IP whitelist or MongoDB users,
  follow the prompts in the |service| :guilabel:`Clusters` view
  to configure basic project security.

  When creating your first MongoDB database user, select the
  :authrole:`Atlas admin` role from the user configuration
  dialog to create an administrative user. See
  :ref:`atlas-user-privileges` for more information on 
  MongoDB user privileges.

  If you need to modify your existing project security settings,
  click the :guilabel:`Security` tab from the :guilabel:`Clusters` view.
  See :doc:`/setup-cluster-security` for complete documentation on
  |service| project security settings.

---
ref: cluster-option-bi-cluster-requirements
content: |

   The |bic| is only available for M10+ clusters.
 
...