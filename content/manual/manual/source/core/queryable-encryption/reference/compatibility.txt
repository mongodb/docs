.. facet::
   :name: programming_language
   :values: csharp, go, java, javascript/typescript, php, python, ruby, rust, scala

.. _qe-csfle-compatibility:

=============
Compatibility
=============

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

This page describes the MongoDB Server editions and driver versions compatible
with {+qe+} and {+csfle+} to help you determine whether your deployment
supports each in-use encryption feature.

.. |arrow| unicode:: U+27A4

|arrow| Use the **Select your language** drop-down menu to select your driver
and see its compatibility with {+qe+} and {+csfle+}.

.. _qe-compatibility-reference:
.. _qe-driver-compatibility:

{+qe+} Compatibility
------------------------------------

The following sections describe the compatibility requirements for using
{+qe+} with MongoDB Server and your selected driver.

MongoDB Compatibility
~~~~~~~~~~~~~~~~~~~~~

You can use {+qe+} on a MongoDB Server 7.0 or later replica set or sharded
cluster, but not a standalone instance. The following table shows which
MongoDB Server products support which {+qe+} mechanisms:

.. list-table::
   :header-rows: 1
   :widths: 25 15 30 30

   * - Product Name
     - Minimum Version
     - Supports {+qe+} with Automatic Encryption
     - Supports {+qe+} with {+manual-enc-title+}

   * - MongoDB Atlas [1]_
     - 7.0
     - Yes
     - Yes

   * - MongoDB Enterprise Advanced
     - 7.0
     - Yes
     - Yes

   * - MongoDB Community Edition
     - 7.0
     - No
     - Yes

.. [1] {+qe+} is compatible with MongoDB Atlas but not :atlas:`MongoDB Atlas Search </atlas-search>`.

Driver Compatibility
~~~~~~~~~~~~~~~~~~~~

.. tabs-selector:: drivers

.. tabs-drivers::

   .. tab::
      :tabid: c

      To use {+qe+} with the :driver:`C </c>` driver, install the following components:
      
      - Driver version 1.24.0 or later
      - :ref:`libmongocrypt <qe-reference-libmongocrypt>` version 1.8.0 or later

   .. tab::
      :tabid: cpp
      
      To use {+qe+} with the :driver:`C++ </cxx>` driver, install the following components:
      
      - Driver version 3.8.0 or later
      - :ref:`libmongocrypt <qe-reference-libmongocrypt>` version 1.8.0 or later

   .. tab::
      :tabid: csharp

      To use {+qe+} with the :driver:`.NET/C# </csharp>` driver, install driver version
      2.20.0 or later.

      .. include:: /includes/installation/libmongocrypt-csharp.txt

   .. tab::
      :tabid: go   

      To use {+qe+} with the :driver:`Go </go>` driver, install the following components:

      - Driver version 1.12 or later
      - :ref:`libmongocrypt <qe-reference-libmongocrypt>` version 1.8.0 or later

   .. tab::
      :tabid: java

      To use {+qe+} with the :driver:`Java Sync </java/sync>` or
      `Java Reactive Streams <https://www.mongodb.com/docs/languages/java/reactive-streams-driver/current/>`__
      driver, install the following components:

      - Driver version 4.10.0 or later
      - `mongodb-crypt <https://mvnrepository.com/artifact/org.mongodb/mongodb-crypt>`__ version 1.8.0 or later

   .. tab::
      :tabid: nodejs

      To use {+qe+} with the :driver:`Node.js </nodejs>` driver, install the following components:

      - Driver version 5.5.0 or later
      - `mongodb-client-encryption <https://www.npmjs.com/package/mongodb-client-encryption/>`__
        version 2.8.0 or later

       .. include:: /includes/installation/libmongocrypt-node.txt

   .. tab::
      :tabid: php

      To use {+qe+} with the :driver:`PHP</php>` driver, install driver version 1.16 or
      later.

   .. tab::
      :tabid: python

      To use {+qe+} with :driver:`PyMongo</python>`, install the following components:
      
      - Driver version 4.4 or later
      - `pymongocrypt <https://pypi.org/project/pymongocrypt/>`__ version 1.6 or later

   .. tab::
      :tabid: ruby

      To use {+qe+} with the :driver:`Ruby</ruby>` driver, install the following components:
      
      - Driver version 2.19 or later
      - `libmongocrypt-helper <https://rubygems.org/gems/libmongocrypt-helper/>`__ version
        1.8.0 or later

   .. tab:: 
      :tabid: rust

      To use {+qe+} with the :driver:`Rust</rust>` driver, install the following components:
      
      - Driver version 2.4.0 or later
      - :ref:`libmongocrypt <qe-reference-libmongocrypt>` version 1.8.0 or later

   .. tab:: 
      :tabid: scala

      To use {+qe+} with the :driver:`Scala</scala>` driver, install the following components:

      - Driver version 4.10.0 or later
      - `mongodb-crypt <https://mvnrepository.com/artifact/org.mongodb/mongodb-crypt>`__ version
        1.8.0 or later

.. important:: Automatic Encryption Support

   To use {+qe+} with automatic encryption, you must install a query
   analysis component. To learn more, see :ref:`qe-csfle-install-library`.

MongoDB Support Limitations
~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/queryable-encryption/qe-supportability.rst

.. _csfle-compatibility-reference:
.. _csfle-driver-compatibility:
.. _csfle-reference-compatibility-key-rotation:

{+csfle+} Compatibility
------------------------------------------------------------------------

The following sections describe the compatibility requirements for using
{+csfle+} ({+csfle-abbrev+}) with MongoDB Server and your selected driver.

MongoDB Compatibility
~~~~~~~~~~~~~~~~~~~~~

You can use {+csfle+} on a replica set or sharded cluster, but not
a standalone instance. The following table shows which MongoDB Server products
support which {+csfle+} mechanisms:

.. list-table::
   :header-rows: 1
   :widths: 25 15 30 30

   * - Product Name
     - Minimum Version
     - Supports {+csfle-abbrev+} with Automatic Encryption
     - Supports {+csfle-abbrev+} with {+manual-enc-title+}

   * - MongoDB Atlas
     - :atlas:`All supported MongoDB versions </reference/faq/database/#which-versions-of-mongodb-do-service-clusters-use->`
     - Yes
     - Yes

   * - MongoDB Enterprise Advanced
     - 4.2
     - Yes
     - Yes

   * - MongoDB Community Edition
     - 4.2
     - No
     - Yes

Driver Compatibility
~~~~~~~~~~~~~~~~~~~~

.. tabs-selector:: drivers

.. tabs-drivers::

   .. tab::
      :tabid: c

      To use {+csfle+} and the Key Rotation API with the :driver:`C </c>` driver, install
      driver version 1.17.5 or later.

   .. tab::
      :tabid: cpp
      
      To use {+csfle+} and the Key Rotation API with the :driver:`C++ </cxx>` driver,
      install driver version 3.6.0 or later.

   .. tab::
      :tabid: csharp

      To use {+csfle+} with the :driver:`.NET/C# </csharp>` driver, install driver version
      2.10.0 or later. To use the Key Rotation API, install driver version 2.17.1 or later.

      .. include:: /includes/installation/libmongocrypt-csharp.txt

   .. tab::
      :tabid: go   

      To use {+csfle+} with the :driver:`Go </go>` driver, install driver version 1.2 or
      later. To use the Key Rotation API, install :ref:`libmongocrypt <qe-reference-libmongocrypt>`
      version 1.5.2 or later.

   .. tab::
      :tabid: java

      To use {+csfle+} with the :driver:`Java Sync </java/sync>` or
      `Java Reactive Streams <https://www.mongodb.com/docs/languages/java/reactive-streams-driver/current/>`__
      driver, install driver version 3.10.0 or later. To use the Key Rotation API, install
     ``mongodb-crypt`` version {+mongodb-crypt-version+} or later.

   .. tab::
      :tabid: java-rs

      To use {+csfle+} with the `Java Reactive Streams <https://www.mongodb.com/docs/languages/java/reactive-streams-driver/current/>`__
      driver, install driver version 1.12.0 or later. To use the Key Rotation API, install
      ``mongodb-crypt`` version {+mongodb-crypt-version+} or later.

   .. tab::
      :tabid: nodejs

      To use {+csfle+} with the :driver:`Node.js </nodejs>` driver, install driver version
      3.4.0 or later. To use the Key Rotation API, install `mongodb-client-encryption
      <https://www.npmjs.com/package/mongodb-client-encryption/>`__ version 2.2.0 - 2.x.

       .. include:: /includes/installation/libmongocrypt-node.txt

   .. tab::
      :tabid: php

      To use {+csfle+} and the Key Rotation API with the :driver:`PHP</php>` driver, install
      driver version 1.6.0 or later.

   .. tab::
      :tabid: python

      To use {+csfle+} with :driver:`PyMongo</python>`, install driver version 3.10.0 or
      later. To use the Key Rotation API, install `pymongocrypt
      <https://pypi.org/project/pymongocrypt/>`__ version 1.3.1 or later.

   .. tab::
      :tabid: ruby

      To use {+csfle+} and the Key Rotation API with the :driver:`Ruby</ruby>` driver,
      install driver version 2.12.1 or later.

   .. tab:: 
      :tabid: rust

      To use {+csfle+} with the :driver:`Rust</rust>` driver, install driver version 2.4.0
      or later. To use the Key Rotation API, install :ref:`libmongocrypt
      <qe-reference-libmongocrypt>` version 1.8.0 or later.

   .. tab:: 
      :tabid: scala

      To use {+csfle+} and the Key Rotation API with the :driver:`Scala</scala>` driver,
      install driver version 2.7.0 or later.

To learn more about the Key Rotation API, see :ref:`Rotate and Rewrap Encryption Keys
<qe-fundamentals-manage-keys>`.

.. important:: Automatic Encryption Support

   To use {+csfle+} with automatic encryption, you must install a query
   analysis component. To learn more, see :ref:`csfle-reference-install-lib`.