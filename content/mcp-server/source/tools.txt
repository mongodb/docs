.. _mcp-server-tools:

========================
MongoDB MCP Server Tools
========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. meta::
   :keywords: MCP Server configuration, MCP, Model Context Protocol, AI, natural language, MCP Server, AI agents, Claude, Windsurf, Cursor, Visual Studio Code
   :description: Comprehensive guide to MongoDB MCP Server tools for Atlas management, local deployments, database operations, vector search, and AI-powered interactions.

.. facet::
   :name: genre
   :values: tutorial

The MongoDB MCP Server allows you to interact with MongoDB clusters
using natural language queries from AI clients that support MCP.
This page describes the MCP Server tools.

Overview
--------

The MongoDB MCP server provides the following tools categories:

- **Atlas tools**, which perform operations on Atlas system resources, like
  organizations, projects, clusters, database user accounts, and retrieving
  performance recommendations.
- **Local Atlas tools**, which allow you to list, connect to, create,
  and delete local Atlas deployments.
- **Database tools**, which perform operations such as inserting, updating,
  and deleting documents, and running queries and aggregation pipelines.

MCP Server Atlas Tools
----------------------

The Atlas tools are only available if you have set up Atlas API
credentials as shown in :ref:`mcp-server-configuration`.

The following table describes the Atlas tools:

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - MCP Server Atlas Tool Name
     - Description

   * - ``atlas-list-orgs``
     - Returns a list of Atlas organizations.

   * - ``atlas-list-projects``
     - Returns a list of Atlas projects.

   * - ``atlas-create-project``
     - Creates a new Atlas project.

   * - ``atlas-list-clusters``
     - Returns list of Atlas clusters.

   * - ``atlas-inspect-cluster``
     - Returns information about a specific Atlas cluster.

   * - ``atlas-create-free-cluster``
     - Creates a free Atlas cluster.

   * - ``atlas-connect-cluster``
     - Connects to an Atlas cluster using the configured service account.

       If you configured the MCP server without specifying a connection string, 
       this tool creates a temporary database user with a random password to establish
       the connection. For details, see :ref:`mcp-tools-considerations`.

   * - ``atlas-inspect-access-list`` 
     - Returns information about the :abbr:`IP (Internet Protocol)` and
       :abbr:`CIDR (Classless Inter-Domain Routing)` ranges that can
       access an Atlas cluster.

   * - ``atlas-create-access-list``
     - Configures the :abbr:`IP (Internet Protocol)` and :abbr:`CIDR
       (Classless Inter-Domain Routing)` access list for an Atlas
       cluster.

   * - ``atlas-list-db-users``
     - Returns a list of Atlas database users.

   * - ``atlas-create-db-user``
     - Creates an Atlas database user.

   * - ``atlas-list-alerts``
     - Returns a list of alerts for an Atlas project.

   * - ``atlas-get-performance-advisor``
     - Returns :ref:`Performance Advisor <performance-advisor>` recommendations 
       for an Atlas cluster. Supports operations for suggested indexes, drop index suggestions,
       slow query logs, and schema suggestions. Requires :authrole:`Project
       Read Only` access or higher.

       To learn more, see :ref:`mcp-pa-tool`.

MCP Server Local Atlas Tools
----------------------------

.. include:: /includes/local-atlas.rst

The following table describes the local Atlas tools:

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - MCP Server Local Atlas Tool Name
     - Description

   * - ``atlas-local-list-deployments``
     - Lists local Atlas deployments.

   * - ``atlas-local-create-deployment``
     - Creates a local Atlas deployment. To run this tool, you must
       disable :ref:`read only mode
       <mcp-server-configuration-read-only-mode>`.

   * - ``atlas-local-connect-deployment``
     - Connects to a local Atlas deployment.

   * - ``atlas-local-delete-deployment``
     - Deletes a local Atlas deployment. To run this tool, you must
       disable :ref:`read only mode
       <mcp-server-configuration-read-only-mode>`.

For examples that run the local Atlas tools, see
:ref:`mcp-server-examples-local-atlas-deployments`.

MCP Server Database Tools
-------------------------

The following table describes the database tools:

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - MCP Server Database Tool Name
     - Description

   * - ``connect``
     - Connects to a MongoDB cluster.

   * - ``find``
     - Runs a MongoDB database query.

   * - ``aggregate``
     - Runs a MongoDB aggregation pipeline.

   * - ``count``
     - Returns the number of documents in a collection.

   * - ``explain``
     - Returns statistics describing the execution of the winning plan chosen by
       the query optimizer for the evaluated method. 

   * - ``insert-many``
     - Adds documents to a collection. 
       
       If you specify a :ref:`Voyage AI API key
       <mcp-voyage-api-key>` in your MCP configuration, 
       the server can automatically generate vector embeddings from text
       and include them in the inserted documents.

   * - ``create-index``
     - Creates an index on a collection.
       This tool supports creating :ref:`vector search indexes <mcp-vector-search-tools>`.

   * - ``drop-index``
     - Removes a :ref:`vector search index <mcp-vector-search-tools>` from a collection.

   * - ``update-one``
     - Modifies a single document in a collection.

   * - ``update-many``
     - Modifies multiple documents in a collection.

   * - ``rename-collection``
     - Changes the name of a collection.

   * - ``create-collection``
     - Creates a new collection.

   * - ``delete-many``
     - Removes documents from a collection.

   * - ``drop-collection``
     - Deletes a collection from a database.

   * - ``drop-database``
     - Deletes a database.

   * - ``drop-index``
     - Drop an index for the provided database and collection.

   * - ``list-databases``
     - Returns a list of all databases available through the current
       connection.

   * - ``list-collections``
     - Returns a list of collections in a database.

   * - ``collection-indexes``
     - Returns information about collection indexes, 
       including :ref:`vector search indexes <mcp-vector-search-tools>`.

   * - ``collection-schema``
     - Returns collection :ref:`schema <schema-validation-overview>`
       information.

   * - ``collection-storage-size``
     - Returns collection size in megabytes.

   * - ``db-stats``
     - Returns database statistics.

   * - ``export``
     - Saves the results of a query or aggregation pipeline in JSON
       format to a file on the computer that runs the MCP Server.
       The results are also accessible through the ``exported-data``
       resource in the AI client application.

   * - ``mongodb-logs``
     - Returns the most recent logged ``mongod`` events. 

   * - ``switch-connection``
     - Switch to a different MongoDB connection. 

.. _mcp-tools-considerations:

Tool Details
------------

For additional information about specific MCP tools, 
see the following sections.

.. _mcp-vector-search-tools:

Vector Search Support
~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/note-vector-search-preview.rst

The MongoDB MCP Server supports :ref:`MongoDB Vector Search
<avs-overview>`. You can create and manage
vector search indexes, generate embeddings, and run semantic search queries through
natural language prompts. The following table summarizes key features.

.. list-table::
   :widths: 25 45 30
   :header-rows: 1

   * - Use Case
     - Example Prompts
     - Relevant Tools

   * - Manage indexes
     - | ``Create a vector search index on the sample_db database and products collection``
       |
       | ``Show me all vector search indexes on the products collection``
       |
       | ``Drop the vector search index named vector_index``
     - | ``create-index``
       | ``collection-indexes``
       | ``drop-index``

   * - Insert documents with automatic embeddings
     - | ``Insert these documents into the products collection and embed their descriptions``
     - | ``insert-many``

   * - Vector search queries
     - | ``Search for documents semantically similar to this description``
       |
       | ``Find me related products filtered by price range``
     - | ``aggregate``

Use the following resources to learn more:

- For detailed usage examples and sample outputs, see :ref:`mcp-server-vector-search-examples`.
- To configure the MCP Server for vector search, see :ref:`mcp-vector-search-options`.
- To learn more about vector search, see :ref:`avs-overview`.

Index Management
````````````````

The following tools allow you to manage 
:ref:`vector search indexes <avs-types-vector-search>`:

- ``collection-indexes``: Lists all indexes on a collection, including vector search
  indexes, and provides index status information.
- ``create-index``: Creates a new vector search index on a collection.
- ``drop-index``: Deletes a vector search index from a collection.

.. note::

   To update a vector search index, drop the existing index and create
   a new one.

Generate Embeddings Automatically
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The MongoDB MCP Server supports two independent mechanisms for
generating vector embeddings:

- **MCP Server embedding generation**: The MCP Server generates embeddings
  client-side using Voyage AI before sending documents to MongoDB. This
  requires a :ref:`Voyage AI API key <mcp-voyage-api-key>`.

- **MongoDB automated embedding**: MongoDB automatically generates embeddings
  server-side when documents are inserted or updated. To learn more, see
  :ref:`mcp-autoembed`.

These mechanisms work independently and can be used together or separately
depending on your use case.

MCP Server Embedding Generation
```````````````````````````````

If you configure the MCP Server with a :ref:`Voyage AI API key
<mcp-voyage-api-key>`, the server can automatically generate
embeddings in the following ways:

- **Generate embeddings for documents**: 
  Embeds text fields in documents when using the 
  ``insert-many`` tool.
- **Generates embeddings for queries**: Embeds the search query when 
  running vector search queries with the ``aggregate`` tool. 
  Specifically, the server generates embeddings for
  the ``queryVector`` parameter in :pipeline:`$vectorSearch` aggregation queries. 

The MCP Server supports the following Voyage AI embedding models:

- ``voyage-3-large``
- ``voyage-3.5``
- ``voyage-3.5-lite``
- ``voyage-code-3``

To learn more about Voyage AI models, see the `Voyage AI documentation
<https://docs.voyageai.com/docs/embeddings>`__.

.. note::

   By default, the MongoDB MCP Server validates that fields with vector search indexes
   contain valid vector embeddings to prevent breaking vector search indexes.
   To disable this behavior, set the ``disableEmbeddingsValidation`` option to ``true``.
   To learn more, see :ref:`mcp-vector-search-options`.

.. _mcp-autoembed:

MongoDB Automated Embedding
```````````````````````````

.. include:: /includes/note-autoembed-preview.rst

MongoDB can also automatically generate embeddings server-side when documents
are inserted or updated. This approach does not require a Voyage AI API
key in your MCP configuration because embedding generation happens
within MongoDB.

The MongoDB MCP Server supports managing vector search indexes with automated
embedding, which automatically generate embeddings for your documents. You can 
create, drop, and inspect vector search indexes with automated embedding through 
natural language prompts. The following table summarizes key features.

To learn more, see `Automated Embedding
<https://dochub.mongodb.org/core/auto-embedding-in-community>`__.

.. list-table::
   :widths: 25 25 50
   :header-rows: 1

   * - Use Case
     - Relevant Tools
     - Example Prompts

   * - Manage indexes
     - | ``create-index``
       |
       | ``collection-indexes``
       |
       | ``drop-index``
     - | "Create an auto embed vector search index on 'plot' field in 'mflix.movies' namespace using voyage-4-large model."

   * - Insert data with embeddings
     - | ``insert-many``
     - | "Insert these documents with the following fields and automatically generate embeddings..."

   * - Query with embeddings
     - | ``aggregate``
     - | "Run a vector search query on mflix.movies with the auto embed index on the 'plot' field."

Considerations
``````````````

The MongoDB MCP Server supports pre-filtering vector search queries. 
To learn more, see :ref:`vectorSearch-agg-pipeline-filter`.

The MCP server does not support the ``quantization`` field for 
vector search indexes.

.. _mcp-pa-tool:

Performance Advisor Tool
~~~~~~~~~~~~~~~~~~~~~~~~

The ``atlas-get-performance-advisor`` tool allows you to access
:ref:`Performance Advisor <performance-advisor>` recommendations
through natural language queries. This tool helps you identify performance
optimization opportunities by analyzing slow queries and suggesting improvements.

.. include:: /includes/note-slow-query-sample-limit.rst

.. note::

    This tool requires :authrole:`Project Read Only` access or higher and an M10+ cluster.
    It is available with the ``--readonly`` flag.

.. list-table::
   :widths: 25 45 30
   :header-rows: 1

   * - Use Case
     - Example Prompts
     - Performance Advisor Operation

   * - Analyze Slow Queries
     - | ``Show me my slow queries``
       |
       | ``What is slowing down my cluster?``
       |
       | ``Show me queries that are longer than 5 seconds``
       |
       | ``Show me slow writes in the website.users namespace``

     - :oas-bump-atlas-op:`slowQueryLogs <listgroupprocessperformanceadvisorslowquerylogs>`
  
   * - Index Suggestions
     - | ``Are there any indexes I should create to improve performance?``
       |
       | ``What indexes do you recommend I drop?``
     - :oas-bump-atlas-op:`suggestedIndexes <listgroupclusterperformanceadvisorsuggestedindexes>`
       :oas-bump-atlas-op:`dropIndexSuggestions <listgroupclusterperformanceadvisordropindexsuggestions>`
   * - Schema Advice
     - | ``Show schema recommendations for my cluster``
       |
       | ``Help me optimize my database schema``

     - :oas-bump-atlas-op:`schemaAdvice <listgroupclusterperformanceadvisorschemaadvice>`

For detailed usage examples and sample outputs, see :ref:`mcp-server-performance-examples`.

Connecting without Atlas Connection String
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you configure the MCP server without specifying a connection string
to an Atlas cluster, the ``atlas-connect-cluster`` tool
creates a temporary :ref:`database user <mongodb-users>` 
to establish connection to the cluster
by using the configured Atlas API service account credentials.

The temporary database user has the following characteristics:

- Randomly generated username and password.
- Automatically expires after 12 hours.
- Role assigned based on how you configured the MCP Server:

  - :atlasrole:`readAnyDatabase` if you enabled :ref:`read-only mode 
    <mcp-server-configuration-read-only-mode>`
    or disabled the ``create``, ``delete``, and ``update`` tool categories.
  - :atlasrole:`readWriteAnyDatabase` if the server has full permissions.

.. note:: 
  
   The MongoDB MCP Server stores user credentials in
   memory only and never returns or exposes the credentials in the LLM context.

Learn More
----------

To disable specific tools and restrict the MCP Server to read-only mode,
see :ref:`mcp-server-configuration`.

To see some MCP Server example natural language prompts, see
:ref:`mcp-server-examples`.
