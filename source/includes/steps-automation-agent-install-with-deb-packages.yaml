title: Download the latest version of the Automation Agent archive.
stepnum: 1
ref: download-automation-agent-deb
pre: |
  On a system shell, issue a command that resembles the
  following. Replace ``amd64`` with your platform, as needed:
action:
  language: sh
  code: |
    curl -OL https://cloud.mongodb.com/download/agent/automation/mongodb-mms-automation-agent-manager_latest_amd64.deb
edition:
  - cloud
---
title: Download the latest version of the Automation Agent archive.
stepnum: 1
ref: download-automation-agent-deb
pre: |
  On a system shell, issue a command that resembles the
  following. Replace ``amd64`` with your platform, as needed:
action:
  language: sh
  code: |
    curl -OL <OpsManagerCentralURL>/download/agent/automation/mongodb-mms-automation-agent-manager_latest_amd64.deb
edition:
  - onprem
---
title: "Install the Automation Agent Package."
stepnum: 2
ref: extract
action:
  language: sh
  code: |
    sudo dpkg -i mongodb-mms-automation-agent-manager_latest_amd64.deb
---
title: "Edit the ``automation-agent.config`` file."
stepnum: 3
ref: configure-automation-group-api-cloud
action:
  - pre: |
       Edit the ``automation-agent.config`` file.
    language: sh
    code: |
       sudo vi /etc/mongodb-mms/automation-agent.config
  - pre: |
      For ``mmsGroupId``, enter your GroupID as the value. For
      ``mmsApiKey``, enter the group's :term:`agent API key`.
    language: none
    code: |
       mmsGroupId=<Group ID>
       mmsApiKey=<agent API Key>
edition:
  - cloud
---
title: "Edit the ``automation-agent.config`` file."
stepnum: 3
ref: configure-automation-group-api-onprem
action:
  - pre: |
       Edit the ``automation-agent.config`` file.
    language: sh
    code: |
       sudo vi /etc/mongodb-mms/automation-agent.config
  - pre: |
      For ``mmsGroupId``, enter your GroupID as the value. For
      ``mmsApiKey``, enter the group's :term:`agent API key`.
    language: none
    code: |
       mmsGroupId=<Group ID>
       mmsApiKey=<agent API Key>
  - pre: |
      For ``mmsBaseUrl``, enter the URL of the |application|. Include the port number.
    language: none
    code: |
       mmsBaseUrl=<application URL>
edition:
  - onprem
---
stepnum: 4
source:
  file: steps-source-install-agent.yaml
  ref: proxy
replacement:
  agentname: "Automation"
  httpProxy: ":asetting:`httpProxy`"
  configfile: "/etc/mongodb-mms/automation-agent.config"
---
title: "Prepare the data directory."
stepnum: 5
ref: prepare-data-dir
pre: |
  The data directory stores MongoDB data.
  For an existing MongoDB deployment, ensure that the
  directory is owned by the ``mongodb`` user. If no MongoDB
  deployment exists, create the directory and set the owner.
action:
  pre: |
    The following commands create a data directory and set the
    owner as the ``mongodb`` user:
action:
  language: sh
  code: |
    sudo mkdir /data
    sudo chown mongodb:mongodb /data
---
title: "Start the Automation Agent."
stepnum: 6
ref: start-automation-agent
action:
action:
  - pre: |
      **For Ubuntu 15.X or later**, issue the following command:
    language: sh
    code: |
       sudo systemctl start mongodb-mms-automation-agent.service
  - pre: |
      **For Ubuntu 12.X, 14.X**, issue the following command:
    language: sh
    code: |
      sudo start mongodb-mms-automation-agent
...
