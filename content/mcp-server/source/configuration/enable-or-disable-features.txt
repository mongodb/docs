.. _mcp-server-configuration-enable-or-disable-features:

=============================================
Enable or Disable MongoDB MCP Server Features
=============================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. meta::
   :keywords: MCP Server configuration, MCP, Model Context Protocol, AI, natural language, MCP Server, AI agents
   :description: How to enable and disable MongoDB MCP Server features such as: read-only mode, telemetry, system use, database index checks, and other MCP-specific tools

.. facet::
   :name: genre
   :values: reference

The MongoDB MCP Server has various options that you can enable or
disable. For example: read-only mode, specific MCP tools, telemetry
about system use, and database index checks.

.. _mcp-server-configuration-read-only-mode:

Enabling MCP Server Read-Only Mode
----------------------------------

You can limit the MCP Server to perform only read operations using
read-only mode.

**Default is to allow cluster write operations. Typically, always enable
read-only mode.**

To enable read-only mode with a command line option, use:

.. code-block:: bash

   --readOnly

To enable read-only mode using an environment variable, set the
``MDB_MCP_READ_ONLY`` environment variable to ``true``:

.. code-block:: bash

   export MDB_MCP_READ_ONLY=true

When you enable read-only mode, a message is added to the MCP Server log
that indicates the tools that perform write operations are prevented
from running.

.. _mcp-server-configuration-disable-tools:

Disabling MCP Server Tools
--------------------------

To restrict access to Atlas and database operations, you can disable
specific MCP Server tools or categories of tools.

To disable tools, set the ``disabledTools`` MCP Server configuration
option, which is an array of strings. Each string can be a tool name or
tool category.

The following table shows the tool names that you can disable:

.. list-table::
   :header-rows: 1

   * - Tool Name
     - Description
     - Example Operations Disabled

   * - ``create``
     - Create resources
     - - Create cluster
       - Insert document

   * - ``update``
     - Update resources
     - - Update document
       - Rename collection

   * - ``delete``
     - Delete resources
     - - Delete document
       - Drop collection

   * - ``read``
     - Read resources
     - - Find
       - Aggregate
       - List clusters

   * - ``metadata``
     - Read metadata
     - - List databases
       - List collections
       - Read collection schema

The following table shows the tool categories that you can disable:

.. list-table::
   :header-rows: 1

   * - Tool Category
     - Description
     - Example Operations Disabled

   * - ``atlas``
     - Atlas tools
     - - List clusters
       - Create cluster

   * - ``mongodb``
     - Database tools
     - - Find
       - Aggregate

To disable tools with the ``disabledTools`` command line option, use
a space-separated list. For example:

.. code-block:: bash

   --disabledTools create update delete atlas

To disable tools with the ``MDB_MCP_DISABLED_TOOLS`` environment
variable, use a comma-separated string. For example:

.. code-block:: bash

   export MDB_MCP_DISABLED_TOOLS="create,update,delete,atlas"

.. _mcp-server-configuration-telemetry:

Disabling MCP Server Telemetry
------------------------------

To prevent the MCP Server from collecting data about usage, you can
disable telemetry.

To disable telemetry using an environment variable, set either of these:

.. code-block:: bash

   export MDB_MCP_TELEMETRY=disabled
   export DO_NOT_TRACK=1

To disable telemetry using a command line option, use:

.. code-block:: bash

   --telemetry disabled

.. _mcp-server-configuration-index-check:

Enabling Index Check
--------------------

To ensure query operations use an index, enable the index check option.
When enabled, the MCP Server rejects queries that perform a collection
scan to improve performance and ensure queries are optimized.

To enable the index check with a command line option, use:

.. code-block:: bash

   --indexCheck

To enable the index check with an environment variable, use:

.. code-block:: bash

   export MDB_MCP_INDEX_CHECK=true

If you enable the index check, the MCP Server logs an error message if a
query is rejected because it doesn't use an index.

.. _mcp-server-configuration-dry-run-mode:

Enabling MCP Server Dry-Run Mode
--------------------------------

.. include:: /includes/dry-run-option.rst

To enable dry-run mode with a command line option, use:

.. code-block:: bash

   --dryRun

To enable dry-run mode using an environment variable, set the
``MDB_MCP_DRY_RUN`` environment variable to ``true``:

.. code-block:: bash

   export MDB_MCP_DRY_RUN=true

The MCP Server returns the configuration and enabled tools in the
command line output.

Learn More
----------

- :ref:`mcp-server-configuration-options`
- :ref:`mcp-server-configuration-methods`
- :ref:`mcp-server-configuration-standalone-service`
- :ref:`mcp-server-configuration-export-data`
- :ref:`mcp-server-configuration-troubleshooting`
