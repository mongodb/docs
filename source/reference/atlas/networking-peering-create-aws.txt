.. _mcli-atlas-networking-peering-create-aws-cmd:

============================================
mongocli atlas networking peering aws create
============================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``networking peering create aws`` command creates a peering
connection between the |service| VPC and your AWS VPC for
a given |service| project.

The ``networking peering create aws`` command checks if a VPC exists for
your |service| project. If one exists, the {+mcli+} creates the peering
connection between that VPC and your VPC. If an |service| VPC does not
exist, the {+mcli+} creates one and creates a connection between it and
your VPC.

Syntax 
------

.. code-block:: text 

   mongocli atlas networking peering aws create
        --accountId <aws-account-id>
        [ --atlasCidrBlock <atlas-cidr-block> ]
        --region <atlas-vpc-region>
        --routeTableCidrBlock <vpc-cidr-block-or-subnet>
        --vpcId <aws-vpc-id>
        [ --output|-o <output-format> ]
        [ --profile|-P <profile-name> ]
        [ --projectId <project-ID> ]

.. include:: /includes/fact-command-line-help.rst

.. _atlas-networking-peering-create-aws-options:

Options 
-------

.. list-table::
   :widths: 20 10 60 10
   :header-rows: 1

   * - Option 
     - Type
     - Description
     - Required?

   * - ``--accountId``
     - string
     - AWS Account ID of the owner of the peer VPC.
     - yes

   * - ``--atlasCidrBlock``
     - string
     - CIDR block that |service| uses for your clusters. Required only
       if you do not already have an |service| VPC.

       .. include:: /includes/fact-vpc-cidr-block.rst
     - no

   * - ``--region``
     - string
     - AWS region in which the peer VPC resides. See the
       :atlas:`Atlas documentation </reference/amazon-aws/>` for a list
       of supported regions.
     - yes

   * - ``--routeTableCidrBlock``
     - string
     - Peer AWS VPC CIDR block or subnet.
     - yes

   * - ``--vpcId``
     - string
     - Unique identifier of the peer AWS VPC.
     - yes

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are saved. If omitted, uses the 
       {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--projectId``
     - string
     - .. include:: /includes/extracts/fact-basic-options-project-id.rst
     - no

.. _atlas-networking-peering-create-aws-output:

Output
------

If the command succeeds, it returns the following output in the default
format. If the command returns errors, see
:ref:`Troubleshooting <troubleshooting>` for recommended solutions.

.. code-block:: sh
   :copyable: false

   Network peering connection '<peering-connection-id>' created.

.. include:: /includes/fact-default-output.rst

- :atlas:`Atlas API </reference/api/vpc-create-peering-connection/#request-body-parameters>`

Example
-------

.. tabs::

   .. tab:: Default Output
      :tabid: default-output

      The following command creates a peering connection between the
      |service| VPC and your AWS VPC for a project using the
      {+default-profile+}, which contains credentials and the project
      ID. The output is returned in the default format. 

      .. code-block:: sh

         atlas networking peering create aws --accountId <aws-account-id> \ 
         --atlasCidrBlock 192.168.0.0/24 --region us-east-1  \
         --routeTableCidrBlock 10.0.0.0/24 --vpcId vpc-078ac381aa90e1e63

      The previous command prints the following to the terminal.

      .. code-block:: sh
         :copyable: false

         Network peering connection '5f60c5bd0948295c093565ba' created.

   .. tab:: JSON Output
      :tabid: json-output

      The following command creates a peering connection between the
      |service| VPC and your AWS VPC for a project using the
      {+default-profile+}, which contains credentials and the project
      ID. The output is returned in |json| format.

      .. code-block:: sh

         atlas networking peering create aws --accountId <aws-account-id> \ 
         --atlasCidrBlock 192.168.0.0/24 --region us-east-1  \
         --routeTableCidrBlock 10.0.0.0/24 --vpcId vpc-078ac381aa90e1e63 \
         --output json

      The previous command prints the following to the terminal in
      |json| format.

      .. code-block:: json
         :copyable: false

         {
            "awsAccountId": "<aws-account-id>",
            "containerId": "5f4eb2178c9ff67e809a3619",
            "id": "5f60c5bd0948295c093565ba",
            "routeTableCidrBlock": "10.0.0.0/24",
            "statusName": "INITIATING",
            "vpcId": "vpc-078ac381aa90e1e63"
         }
