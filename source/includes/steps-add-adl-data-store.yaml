---
level: 4
ref: deploy-adl-step1
source: 
  file: steps-adf-deploy-source.yaml
  ref: adf-log-in
---
level: 4
ref: deploy-adl-step2
source: 
  file: steps-adf-deploy-source.yaml
  ref: adf-left-nav
---
level: 4
ref: deploy-adl-step3
source: 
  file: steps-adf-deploy-source.yaml
  ref: configure-new-fdi
replacement:
  dfi-template: "Select :guilabel:`Manual Setup`."
---
level: 4
ref: deploy-adl-step4
source: 
  file: steps-adf-deploy-source.yaml
  ref: select-fdi-cp
replacement: 
  cloud-provider: "We recommend that you select the same cloud provider 
  as the cloud provider that is hosting your data. {+adl+} is currently
  only available in |aws| and you must use a {+fdi+} hosted in the same
  cloud as your {+dl+} dataset to query." 
---
level: 4
ref: deploy-adl-step5
source: 
  file: steps-adf-deploy-source.yaml
  ref: enter-fdi-name
---
level: 4
ref: deploy-adl-step6
source: 
  file: steps-adf-deploy-source.yaml
  ref: select-configure-method
---
title: "Specify your {+dl+} data store and configure virtual 
       databases and virtual collections that map to your data store."
level: 4
ref: config-adl-data-store
content: | 

  .. tabs:: 

     .. tab:: Visual Editor 
        :tabid: visual

        a. Click :guilabel:`Add Data Sources` in the 
           :guilabel:`Datasets` section to choose your data store.

        #. Click :guilabel:`Atlas Data Lake` to configure a {+fdi+} for
           data in {+adl+} pipelines.

           Corresponds to :datalakeconf-adl:`stores.[n].provider` 
           |json| configuration setting.

        #. (Optional) Click the :icon-fa4:`pencil` for the:

           - Database to edit the database name. Defaults to 
             ``VirtualDatabase[n]``. 

             Corresponds to :datalakeconf-adl:`databases.[n].name` 
             |json| configuration setting.
          
           - Collection to edit the collection name. Defaults to 
             ``VirtualCollection[n]``. 
       
             Corresponds to :datalakeconf-adl:`databases.[n].collections.[n].name` 
             |json| configuration setting.
     
           - View to edit the view name. 
            
           You can click: 
     
           - :guilabel:`Add Database` to add databases and 
             collections. 
           - :icon-fa4:`plus` associated with the database to 
             add collections to the database. 
           - :icon-fa4:`plus` associated with the collection to 
             add :manual:`views </core/views/>` on the 
             collection. To create a view, you must specify: 
       
             - The name of the view.
             - The :manual:`pipeline </core/aggregation-pipeline/#std-label-aggregation-pipeline>` 
               to apply to the view.

               .. note:: 

                  The view definition pipeline can't include the 
                  ``$out`` or the ``$merge`` stage. If the view 
                  definition includes nested pipeline stages such 
                  as ``$lookup`` or ``$facet``, this restriction 
                  applies to those nested pipelines as well.

               To learn more about views, see: 

               - :manual:`Views </core/views/>`
               - :manual:`db.createView </reference/method/db.createView/>`
               
             - :icon-fa4:`trash-o` associated with the database, 
               collection, or view to remove it.

        #. Drag and drop the :guilabel:`Data Lake Dataset` to map  
           with the collection.
             
           Corresponds to :datalakeconf-adl:`databases.[n].collections.[n].dataSources` 
           |json| configuration setting.

     .. tab:: JSON Editor 
        :tabid: json

        Your configuration for {+adl+} dataset data store should look 
        similar to the following:

        .. literalinclude:: /includes/data-federation/adl-config-format.json 
           :language: json
           :linenos:

        To learn more about these configuration settings, see
        :ref:`adf-configuration-file-adl`. 

        a. Define your dataset as a data store in your {+fdi+} 
           storage configuration.

           Edit the |json| configuration settings shown in the UI 
           for ``stores``. Your ``stores`` cofiguration setting 
           should resemble the following:

           .. literalinclude:: /includes/data-federation/adl-stores-config-format.json 
              :language: json
              :linenos:

        #. Define virtual databases, collections, and views for 
           your dataset in your {+fdi+} storage configuration.

           .. literalinclude:: /includes/data-federation/adl-databases-config-format.json 
              :language: json
              :linenos:

---
title: "Repeat steps in the Visual Editor or |json| Editor tab above to
       define additional {+dl+} datasets." 
optional: true
level: 4
ref: additional-adl-data-stores 
content: | 
  To add other data stores for federated queries, see: 

  - :ref:`Create AWS Data Store From the UI <deploy-s3>` or
    :ref:`Create Azure Data Store From the UI <deploy-azure>`  
  - :ref:`Create HTTP or HTTPS Data Store From the
    UI <deploy-http-datastore>`
  - :ref:`Create Atlas Data Store From the UI <deploy-atlas-datastore>`

---
ref: save-configuration-adl
stepnum: 9
inherit:
  file: steps-adf-deploy-source.yaml
  ref: save-configuration
...
