.. _mcli-iam-org-list:

=====================
mongocli iam org list
=====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``mongocli iam org list`` command lists organizations for the
specified |onprem|.

When you use a
:opsmgr:`Programmatic API Key </tutorial/configure-public-api-access/#programmatic-api-keys>`,
the command retrieves only the organization of the project whose |api|
key has the ``Project Owner`` role.

To list all organizations in your |onprem|, you must use a
:opsmgr:`Personal API Key </tutorial/configure-public-api-access/#personal-api-keys-deprecated>`.

You can also list organizations through the
:opsmgr:`API </reference/api/organizations/organization-get-all/>`.

.. _mcli-iam-org-list-syntax:

Syntax
------

.. code-block:: sh

   mongocli iam org list
        [ --profile|-P <profile-name> ]
        [ --limit <integer> ]
        [ --page <integer> ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-iam-org-list-options:

Options
-------

.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option
     - Type
     - Description
     - Required?

   * - ``-P`` | ``--profile``
     - string
     - Name of the profile that contains the access information. If
       omitted, uses the {+default-profile+}.
     - no

   * - ``--limit``
     - integer
     - Number of organizations to return from the result set.

       - If omitted, returns all organizations.
       - If this value exceeds the number of organizations,
         ``mongocli`` returns all organizations.
     - no

   * - ``--page``
     - integer
     - Starting chunk of organizations to return from the result set.
       The ``--limit`` flag sets the number of organizations per page.

       - If omitted, returns the first page.
       - If this value exceeds the number of pages, ``mongocli``
         returns the last page.
     - no

.. _mcli-iam-org-list-output:

Output
------

The command prints the following |json| document to the terminal if the
command succeeds. If the command returns errors, see
:ref:`Troubleshooting <troubleshooting>` for recommended solutions.

The |json| document includes an array of :guilabel:`result` objects, an
array of :guilabel:`link` objects and a count of the total number of
:guilabel:`result` objects retrieved.

.. list-table::
   :widths: 20 80
   :header-rows: 1

   * - Field
     - Description

   * - ``links``
     - Array includes one or more links to sub-resources
       and/or related resources. The relations between |url|\s are
       explained in the :rfc:`Web Linking Specification <5988>`.

   * - ``results``
     - Array includes one object for each item detailed in the
       `results Embedded Document`_ section.

   * - ``totalCount``
     - Integer count of the total number of items in the result set. It
       may be greater than the number of objects in the
       :guilabel:`results` array if the entire result set is paginated.

``results`` Embedded Document
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Each **result** is one organization.

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Name
     - Description

   * - ``id``
     - - Unique identifier for the organization.

   * - ``links``
     - One or more links to sub-resources and/or related resources. The
       relations between |url|\s are explained in the
       :rfc:`Web Linking Specification <5988>`.

   * - ``name``
     - Name of the organization.

.. _mcli-iam-org-list-example:

Examples
--------

List All Organizations using Default Profile
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following ``mongocli iam org list`` command lists the |onprem|
organizations using the {+default-profile+}. The profile contains a
:opsmgr:`Programmatic API Key
</tutorial/configure-public-api-access/#programmatic-api-keys>`. 

.. code-block:: sh

   mongocli iam org list

The command returns the following |json| document:

.. code-block:: json
   :copyable: false

   {
    "links": [
     {
      "rel": "self",
      "href": "http://example.com:8080/api/public/v1.0/orgs?pageNum=1\u0026itemsPerPage=100"
     }
    ],
    "results": [
     {
      "id": "abcdef3e1234de007b387a9f",
      "links": [
       {
        "rel": "self",
        "href": "http://example.com:8080/api/public/v1.0/orgs/abcdef3e1234de007b387a9f"
       }
      ],
      "name": "Org1"
     }
    ],
    "totalCount": 1
   }

List All Organizations using Defined Profile
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following ``mongocli iam org list`` command lists all the
organizations in an |onprem| deployment. The command uses the
``om-personalkey`` profile, which contains a
:opsmgr:`Personal API Key </tutorial/configure-public-api-access/#personal-api-keys-deprecated>`.

.. code-block:: sh

   mongocli iam org list -P om-personalkey

The command returns the following |json| document:

.. code-block:: json
   :copyable: false

   {
    "links": [
     {
      "rel": "self",
      "href": "http://www.example.com:8080/api/public/v1.0/orgs?pageNum=1\u0026itemsPerPage=100"
     }
    ],
    "results": [
     {
      "id": "5e332f3e1234de007b387a9f",
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/5e332f3e1234de007b387a9f"
       }
      ],
      "name": "Org1"
     },
     {
      "id": "5e38efd83b60f567896baf4d",
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/5e38efd83b60f567896baf4d"
       }
      ],
      "name": "Org2"
     }
    ],
    "totalCount": 2
   }

List the First 5 Organizations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following ``mongocli iam org list`` command lists the first five
organizations in an |onprem| deployment. The command uses the
``om-personalkey`` profile, which contains a
:opsmgr:`Personal API Key </tutorial/configure-public-api-access/#personal-api-keys-deprecated>`.

.. code-block:: sh

   mongocli iam org list -P om-personalkey --limit 5 --page 1

This command returns the following list in |json| format to
the terminal. To learn more about these fields, see
:ref:`Output <mcli-iam-org-list-output>`.

.. code-block:: json
   :copyable: false

   {
    "links": [
     {
      "rel": "self",
      "href": "http://www.example.com:8080/api/public/v1.0/orgs?pageNum=1\u0026itemsPerPage=5"
     }
    ],
    "results": [
     {
      "id": "5e332f3e1234de007b387a9f",
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/5e332f3e1234de007b387a9f"
       }
      ],
      "name": "Org1"
     },
     {
      "id": "5e38efd83b60f567896baf4d",
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/5e38efd83b60f567896baf4d"
       }
      ],
      "name": "Org2"
     },
     {
      "id": "27a91237ba9cb28a15ed3f51",
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/27a91237ba9cb28a15ed3f51"
       }
      ],
      "name": "Org3"
     },
     {
      "id": "959bd41f6c65d5a31077f78a",
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/959bd41f6c65d5a31077f78a"
       }
      ],
      "name": "Org4"
     },
     {
      "id": "f459b51a9a6e4eba907b47ad",
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/f459b51a9a6e4eba907b47ad"
       }
      ],
      "name": "Org5"
     }
    ],
    "totalCount": 64
   }
