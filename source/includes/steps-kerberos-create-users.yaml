title: Create or choose a Kerberos principal for the |monitoring| agent.
ref: create-choose-principal
---
title: Generate a keytab for the Kerberos principal and copy it to the system where the monitoring agent runs.
ref: generate-keytab
pre: |
  Ensure the user that will run the Monitoring agent is the same user that
  owns the keytab file.
---
title:  Create a MongoDB user for the new Kerberos principal.
ref: create-mongodb-user
pre: |
  See :doc:`/management/permissions` for more information about required
  authentication roles.
---
title:  Edit the agent's ``/etc/mongodb-mms/monitoring-agent.config`` file to inform the agent about the keytab and principal identifier.
ref: edit-agents-config-file
action:
  - pre: |
      Set the ``krb5Principal`` to the name of the Kerberos principal:
    language: ini
    code: |
      krb5Principal=<id>
  - pre: |
      For example:
    language: ini
    code: |
      krb5Principal=mmsagent/someserver.example.com@EXAMPLE.COM
  - pre: |
      Set the ``kerb5Keytab`` value to the complete absolute path of the
      keytab file:
    language: ini
    code: |
      krb5Keytab=None
  - pre: |
      For example:
    language: ini
    code: |
      krb5Keytab=/etc/mongodb-mms/mmsagent.keytab
...
