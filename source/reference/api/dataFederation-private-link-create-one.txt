.. _api-pvt-link-create-one:

========================
Add One Private Endpoint 
========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

You can add an |aws| :ref:`private endpoint <private-endpoint>` for the 
{+fdi+}\s in the project from the API. When you submit this request 
through the API: 

- If the endpoint ID already exists and there is no change to the 
  associated comment, {+adf+} makes no change to the endpoint ID list.
- If the endpoint ID already exists and there is a change to the 
  associated comment, {+adf+} updates the ``comment`` value only in 
  the endpoint ID list.
- If the endpoint ID doesn't exist, {+adf+} appends the new endpoint 
  to the list of endpoints in the endpoint ID list.

The following table shows the service names for the various endpoints 
in each region: 

.. include:: /includes/fact-adf-pvtlink-service-names.rst 

.. include:: /includes/api-requirements.rst

.. include:: /includes/fact-projects-groups-synonyms.rst

.. _api-pvt-link-create-one-permissions:

Permissions Required 
--------------------

You must have the ``GROUP_ATLAS_ADMIN`` (:authrole:`Project Owner`) 
role to create a private endpoint.

.. _api-pvt-link-create-one-resource:

Resources 
---------

.. include:: /includes/api-base-url.rst

.. _api-pvt-link-create-one-syntax:

Syntax
------

.. code-block:: none

   POST /groups/{GROUP-ID}/privateNetworkSettings/endpointIds

.. _api-pvt-link-create-one-params:

Request Parameters
------------------

.. _api-pvt-link-create-one-path-params:

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 15 10 75

   * - Path Element
     - Necessity
     - Description

   * - ``GROUP-ID``
     - Required
     - Unique 24-digit hexadecimal string that identifies the 
       project. 

.. _api-pvt-link-create-one-query-params:

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/no-query-parameters.rst

.. _api-pvt-link-create-one-body-params:

Request Body Parameters 
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table:: 
   :header-rows: 1
   :widths: 15 10 10 65

   * - Name
     - Type
     - Necessity
     - Description

   * - ``comment``
     - string
     - Optional
     - Human-readable string to associate with this private endpoint.

   * - ``endpointId``
     - string
     - Required
     - Unique 22-character alphanumeric string that identifies the 
       private endpoint. {+adf+} supports |aws| private endpoints using 
       the `{+aws-pl+} <https://aws.amazon.com/privatelink/>`__ 
       feature.

   * - ``provider``
     - string
     - Required
     - Human-readable label that identifies the cloud provider of this 
       endpoint. {+adf+} supports |aws| only. If empty, defaults to 
       |aws|.

   * - ``type``
     - string
     - Required
     - Human-readable label that identifies the type of resource to 
       associate with this private endpoint. Value must be 
       ``DATA_LAKE``. If empty, defaults to ``DATA_LAKE``.

.. _api-pvt-link-create-one-response:

Response Elements 
-----------------

``links`` Array
~~~~~~~~~~~~~~~

The ``links`` array includes one or more links to sub-resources or
related resources. The relations between URLs are explained in the `Web
Linking Specification <http://tools.ietf.org/html/rfc5988>`_.

.. list-table::
   :header-rows: 1

   * - Relation
     - Description
   * - ``self``
     - The URL endpoint for this resource.

``results`` Array 
~~~~~~~~~~~~~~~~~

Each element in the ``result`` array is one private endpoint.

.. include:: /includes/list-table-private-link-response.rst 

``totalCount`` Document
~~~~~~~~~~~~~~~~~~~~~~~

This value is the count of the total number of items in the result set.
``totalCount`` may be greater than the number of objects in the 
``results`` array if the entire result set is paginated.

.. _api-pvt-link-create-one-eg:

Examples 
--------

Request 
~~~~~~~

.. example:: 

   .. code-block:: shell 
    
      curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \
         --header "Accept: application/json" \
         --header "Content-Type: application/json" \
         --include \
         --request POST "https://cloud.mongodb.com/api/atlas/v1.0/groups/{GROUP-ID}/privateNetworkSettings/endpointIds?pretty=true" \
         --data '
         {
           "endpointId" : "vpce-jjg5e24qp93513h03",
           "type": "DATA_LAKE",
           "provider": "AWS",
           "comment" : "Private endpoint for Application Server A"
         }'

Response 
~~~~~~~~

.. example:: 

   .. code-block:: json
      :copyable: false 

      {
        "links" : [ {
          "href" : "https://cloud.mongodb.com/api/atlas/v1.0/groups/{GROUP-ID}/privateNetworkSettings/endpointIds?pretty=true&pageNum=1&itemsPerPage=100",
          "rel" : "self"
        } ],
        "results" : [ {
          "comment" : "Private endpoint for Application Server A",
          "endpointId" : "vpce-jjg5e24qp93513h03",
          "provider" : "AWS",
          "type" : "DATA_LAKE"
        } ],
        "totalCount" : 1
      }
