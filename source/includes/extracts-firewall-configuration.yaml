ref: firewall-configuration
content: |

  |mms| requires access on the following ports and
  |ipaddr| addresses.

  Required Outbound Access
  ------------------------

  The {+mdbagent+}s connect to |mms| on port ``443``. Whether you
  provision your hosts on a cloud service provider or on your own
  network, configure your network infrastructure to allow outbound
  connections on port ``443``.

  If you wish to restrict outbound access on port ``443`` to specific
  |ipaddr| addresses, you must add the following addresses and
  domains to your access list.

  |ipaddr| Addresses for ``GET`` and ``POST``
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  Add the following |ipaddr| addresses to your access list:

  .. code-block:: ini

     3.93.83.52
     3.94.56.171
     3.214.160.189
     18.210.185.2
     18.210.245.203
     18.232.30.107
     18.235.209.93
     34.192.82.120
     34.194.131.15
     34.194.251.66
     34.195.55.18
     34.195.194.204
     34.200.195.130
     34.203.104.26
     34.227.138.166
     34.230.213.36
     34.233.152.179
     34.233.179.140
     35.172.148.213
     35.172.245.18
     44.211.4.85
     44.216.169.184
     52.86.156.12
     54.147.76.65
     54.204.237.208

  This allows the {+mdbagent+}s to ``GET`` and ``POST`` to the
  following hosts:

  - ``api-agents.mongodb.com``
  - ``api-backup.mongodb.com``
  - ``api-backup.us-east-1.mongodb.com``
  - ``queryable-backup.us-east-1.mongodb.com``
  - ``restore-backup.us-east-1.mongodb.com``
  - ``real-time-api-agents.mongodb.com``

  Domain for Download of MongoDB Binaries
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  The {+mdbagent+}s require outbound access to the following
  domains, depending on your MongoDB edition, for downloading MongoDB
  binaries:

  .. list-table::
     :header-rows: 1
     :widths: 10,20,30,40

     * - MongoDB Edition
       - Access List Domain
       - |ipaddr| Ranges
       - Service Provider

     * - Community
       - ``fastdl.mongodb.org``
       - `IP ranges for CloudFront <http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/LocationsOfEdgeServers.html>`_.

         The |ipaddr| ranges for CloudFront change frequently.
       - Amazon CloudFront

     * - `Enterprise <http://www.mongodb.com/products/mongodb-enterprise>`_
       - ``downloads.mongodb.com``
       -
       -

     * - Custom Build of MongoDB
       - URL accessible to the {+mdbagent+}s
       -
       -

  .. note:

     The custom build's ``Git Version`` field must be set to the
     target binary's ``mongod --version``.

  Domain for {+mdbagent+} Downloads and Updates
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  If you restrict outbound access, you must grant your {+mdbagent+}s 
  access to the following domain to download and update the 
  {+mdbagent+}.

  .. list-table::
     :header-rows: 1
     :widths: 30,30,40

     * - Access List Domain
       - |ipaddr| Ranges
       - Service Provider

     * - ``s3.amazonaws.com``
       - `IP ranges for AWS <https://docs.aws.amazon.com/vpc/latest/userguide/aws-ip-ranges.html#aws-ip-download>`_.

         The |ipaddr| ranges for AWS change frequently.
       - |aws|

  Required Inbound Access
  -----------------------

  .. _alerts-webhook-ips:

  |ipaddr| Addresses for Alert Webhooks
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  You have the option to configure alerts to be delivered via webhook.
  This sends an |http| ``POST`` request to an endpoint for
  programmatic processing.

  If you want to successfully deliver a webhook to the specified
  endpoint, the endpoint must accept incoming |http| ``POST`` requests
  from the following |ipaddr| addresses:

  .. code-block:: ini

     3.92.113.229
     3.208.110.31
     3.211.96.35
     3.212.79.116
     3.214.203.147
     3.215.10.168
     3.215.143.88 
     18.214.178.145
     18.235.30.157
     18.235.48.235
     18.235.145.62
     34.193.91.42
     34.193.242.51
     34.196.151.229
     34.200.66.236
     34.235.52.68
     34.236.228.98
     34.237.40.31
     35.153.40.82
     35.169.184.216
     35.171.106.60
     35.174.179.65
     35.174.230.146
     35.175.93.3
     35.175.94.38
     35.175.95.59
     50.19.91.100
     52.71.233.234
     52.73.214.87
     52.87.98.128
     54.145.247.111
     54.163.55.77
     100.26.2.217
     107.20.0.247
     107.20.107.166

  .. _backup-scp-restores-inbound-access:

  Required Ports within Your Network
  ----------------------------------

  All MongoDB processes in a deployment must be accessible to all
  {+mdbagent+}s managing processes in that deployment. Therefore, all
  MongoDB ports must be open to every host within your network that
  serve a {+mdbagent+}.

  .. example::

     If you are running MongoDB processes on ``27000``, ``27017`` and
     ``27020``, then those three ports must be open from all hosts
     that are serving a {+mdbagent+}.

...
