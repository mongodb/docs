.. _run-geo-search-tutorial:

====================================
How to Run a Compound Geo JSON Query
====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial describes how to create an index on the 
``listingsAndReviews`` collection in the ``sample_airbnb`` database
and run a query that returns documents with the
``name``, ``address``, and ``property_type``
for each property within the specified polygon defined using ``coordinates``.

This tutorial takes you through the following steps: 

1. Set up an |fts| index on the ``address`` field in the 
   ``sample_airbnb.listingsAndReviews`` collection.
#. Run a query that returns 10 documents with the
   ``name``, ``address``, and ``property_type``
   of each property within the specified 
   geographic ``coordinates``.
   |fts| results reflect a preference for properties of type ``condominium``, 
   and each document in the result is assigned a relevance ``score``, 
   returned in order from highest to lowest.

Before you begin, ensure that your |service| cluster meets the 
requirements described in the :ref:`fts-tutorials-prereqs`.

Create the |fts| Index  
----------------------

In this section, you will create an |fts| index on the ``address`` field 
in the ``sample_airbnb.listingsAndReviews`` collection.

.. include:: /includes/steps/fts-tutorial-index-geo-query.rst

Run a Combined Geo, Number, and Text Fields Query 
-------------------------------------------------

----------

.. |arrow| unicode:: U+27A4

|arrow| Use the **Select your language** drop-down menu on this page to 
set the language of the examples in this section.

----------

.. tabs-selector:: drivers

In this section, you will run a query that returns 10 documents with the
``name``, ``address``, and ``property_type``
for each property within the specified 
geographic ``coordinates``.   
A field specifying each documents ``score`` is also returned, 
and results are ordered with a preference for
properties of type ``condominium``.

.. tabs-drivers::

   .. tab::
      :tabid: shell

      .. include:: /includes/steps/fts-tutorial-run-geo-query.rst

   .. tab::
      :tabid: python

      .. include:: /includes/steps/fts-tutorial-run-geo-query-python.rst


   .. tab::
      :tabid: nodejs

      .. include:: /includes/steps/fts-tutorial-run-geo-query-node.rst

   .. tab::
      :tabid: java-sync

      .. include:: /includes/steps/fts-tutorial-run-geo-query-java.rst


   .. tab::
      :tabid: compass

      .. include:: /includes/steps/fts-tutorial-run-geo-query-compass.rst

