stepnum: 1
source:
  file: steps-source-admin-navigation.yaml
  ref:  admin-backup-oplog
---
title: "Go to the row for the Oplog Store you want to edit."
stepnum: 2
level: 4
ref: select-oplogstore
---
title: "In the :guilabel:`MongoDB Connection` column, update any values that need to be changed in the following fields:"
stepnum: 3
level: 4
ref: edit-oplogstore
content: |

   .. list-table::
      :widths: 30 70
      :header-rows: 1

      * - Field

        - Contents

      * - :guilabel:`<hostname>:<port>`

        - Type in one or more hosts in the ``<hostname:port>`` format
          that comprise the Oplog Store database.

          .. important::

             If these hosts are changed, the Oplog Store database
             they host must have the same data as the original Oplog Store
             database. Changing the host to a new Oplog Store
             database results in data loss.

          - If the Oplog Store database is a Replica Set or Sharded Cluster,
            type a comma-separated list of :program:`mongod` instances (for a
            Replica Set) or :program:`mongos` instances (for a Sharded
            Cluster).

            .. example::

               ``host1.example.com:27017, host2.example.com:27017, host2.example.com:27018``

          - If the Oplog Store database is a standalone MongoDB
            instance, type the ``hostname:port`` of the instance.

      * - :guilabel:`MongoDB Auth Username`

        - If the Oplog Store database uses Username and Password
          (SCRAM-SHA-1) authentication, type the name of the user
          authorized to access the Oplog Store database.

          Oplog Store databases only support Username and Password
          (SCRAM-SHA-1) authentication.

          To enable Username and Password (SCRAM-SHA-1) authentication
          on your Oplog Store database, see :manual:`how to configure
          your database for SCRAM-SHA-1 authentication 
          </core/security-scram-sha-1>` in the MongoDB manual.

      * - :guilabel:`MongoDB Auth Password`

        - If the database uses Username and Password (SCRAM-SHA-1)
          authentication, type the password associated with the
          username that can access the Oplog Store database.

      * - :guilabel:`Encrypted Credentials`

        - Select if the Username and Password for the database were
          encrypted using the :ref:`credentialstool <encrypt-mongodb-user-credentials>`.

      * - :guilabel:`Use TLS/SSL`

        - Select if the Oplog Store database only accepts connection
          encrypted using :abbr:`TLS (Transport Layer Security)`.

          To enable TLS on the Oplog Store database, see 
          :manual:`Configure mongod and mongos for TLS/SSL </tutorial/configure-ssl>`.

      * - :guilabel:`Connection Options`

        - Type any additional :manual:`configuration file options </reference/configuration-options>`
          for the MongoDB instance. This field supports unescaped values only.

      * - :guilabel:`Assignment Labels`

        - Type a comma-separated list of labels to assign the
          Oplog Stores to specific groups.

      * - :guilabel:`Write Concern`

        - Select your preferred :manual:`Write Concern</core/write-concern/>`:

          .. list-table::
             :widths: 30 70
             :stub-columns: 1
 
             * - Default
               - The write is not acknowledged.
             * - Journaled
               - A primary or standalone database acknowledged the write and
                 wrote that write to their on-disk :term:`journals <journal>`.
             * - Acknowledged
               - A primary or standalone acknowledged the write.
             * - Replica Acknowledged
               - More than one of the replica set members acknowledged the write.
             * - Majority
               - A majority of the replica set members acknowledged the write.
---
title: "Select the checkbox in the :guilabel:`Assignment Enabled` column."
stepnum: 4
level: 4
ref: assign-oplogstores
content: |

  Select if you want to enable this Oplog Store after creating it. This is
  selected by default so the Oplog Store can be assigned backup jobs. If you
  clear this checkbox, the Oplog Store is created but you cannot assign
  backups to this Oplog Store.

---
title: "Click :guilabel:`Save`."
stepnum: 5
level: 4
ref: save-oplogstore-changes
--- 
title: "If you change any connection string values, restart all the |onprem| instances including those running Backup Daemons."
stepnum: 6 
level: 4
ref: restart-oplogstore-after-edits
content: |

   .. warning::

      Modifying the connection string values for an existing blockstore
      requires you to restart all |onprem| components, including those only
      running the Backup Daemon to apply those changes. Connection parameters
      include:

      - :guilabel:`<hostname>:<port>`, 
      - :guilabel:`MongoDB Auth Username`, 
      - :guilabel:`MongoDB Auth Password`, 
      - :guilabel:`Encrypted Credentials`, 
      - :guilabel:`Use TLS/SSL`, and
      - :guilabel:`Connection Options`.

      If you change to another Oplog Store host, the data on the existing
      Oplog Store is not copied automatically to the other Oplog Store.

   .. seealso::
   
      For more details on the MongoDB connection string uri, see
      :manual:`Connection String URI Format </reference/connection-string>`
      in the MongoDB Manual.




...