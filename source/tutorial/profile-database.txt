.. index:: database profiling
.. _db-profiling-section:

=================
Profile Databases
=================

.. default-domain:: mongodb

|monitoring| can collect data from MongoDB's :manual:`profiler
</reference/database-profiler>` to provide statistics about performance
and database operations.

Before enabling profiling, be aware of these issues:

- Profile data can include sensitive information, including the content of
  database queries. Ensure that exposing this data to |monitoring| is consistent
  with your information security practices.

- The profiler can consume resources which may adversely affect MongoDB
  performance. Consider the implications before enabling profiling.

To allow |monitoring| to collect profile data for a specific host:

.. include:: /includes/steps/profiling-enable.rst

.. note::

   The Monitoring Agent attempts to minimize its effect on the
   monitored systems. If resource intensive operations, like polling
   profile data, begins to impact the performance of the database,
   |monitoring| will throttle the frequency that it collects data. See
   :ref:`db-stats-warning` for more information about the agent's
   throttling process.

   When enabled, |monitoring| samples profiling data from monitored
   instances: the agent only sends the most recent 20 entries from last
   minute.

With profiling enabled, all configuration changes made in MMS can
take up to 2 minutes to propagate to the agent and another minute before
profiling data appears in the MMS interface.

When profiling is on, the :guilabel:`Profile Data` tab on a host's
:doc:`statistics page </reference/host-statistics>` displays the profile levels used
to collect data. For more information on profile levels, see
:manual:`/tutorial/manage-the-database-profiler`.

If you have profiling data and wish to delete it from MMS,
use the button on the bottom of the :guilabel:`Profile Data` tab for
deleting profile data. When you click on this button, MMS
raises a confirmation dialogue. When you confirm, |monitoring| will
begin removing stored profile data from this server's record.

.. note::

   If |monitoring| is storing a large amount of profile data for your
   instance, the removal process will not be instantaneous.
