.. _move-cluster:

========================================
Move a {+Cluster+} to a Different Region
========================================

.. meta::
   :description: Learn how to move a cluster to a different region in Atlas, considering factors like cluster tier, node configuration, and billing implications.

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/fact-atlas-free-tier-only-limits.rst

Considerations
--------------

Support by {+Cluster+} Tier
~~~~~~~~~~~~~~~~~~~~~~~~~~~

|service| supports changing a cluster's region and cloud provider:

- Anytime on a {+Flex-cluster+} as long as the new region is :ref:`supported for {+Flex-cluster+}s <flex-limits-config>`.
- Anytime on an ``M10+`` cluster.

Preferred and Electable Nodes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Each node in the preferred and electable regions can:

- Participate in :manual:`replica set elections
  </core/replica-set-elections>`

- Become the :term:`primary` if the majority of replica set nodes
  are available.

Electable nodes in the {+cluster+} must total 3, 5, or 7.

Migration, Downtime and Performance Impact
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Depending on the amount of data to migrate, migrations can take a
significant amount of time. To maximize availability for a replica set,
|service| migrates one member at a time, starting with the secondary
members first and then the primary.

Migration can affect performance if your primary is already reaching
operational capacity: each newly migrated replica set member must
perform an :term:`initial sync` from the primary, adding to the
operational load. Migrations can also affect performance if
:manual:`read preferences </core/read-preference>` are set to read from
secondaries: the replica set is down one secondary during the migration.

VPC/VNet Peering (AWS and Azure)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you move a {+cluster+} out of a region that has a
:ref:`VPC/VNet peering <vpc-peering>` connection, the moved 
cluster can no longer use that peering connection to communicate with 
servers in the peered network. Any other {+clusters+} with nodes 
remaining in the original region can continue to use the peering 
connection.

You can create multiple peering connections for each region, including
a new peering connection with the region that you moved a
{+cluster+} to.

.. note::

   {+Cluster+} nodes removed from a region can't inherit access rules 
   from security groups (AWS) or allowed CIDR blocks configured for the 
   peering connection. You must :ref:`configure IP Access List entries <add-to-access-list>` to allow the moved {+cluster+} to communicate with servers
   residing in the peered network. {+Cluster+} nodes remaining in the
   region are unaffected.

Billing 
~~~~~~~

If you change your {+cluster+}'s :ref:`highest priority region 
<deploy-across-multiple-regions>` or if MongoDB migrates oplog data to 
a different region, you will be billed for storage in both the old and 
new regions for the days following the region change. You must disable 
{+pit-restore+} and reenable it to prevent billing in both the regions.

.. note:: 

   If you disable {+pit-restore+}, |service| will delete the 
   {+pit-restore+} history.


Move a Single-Region {+Cluster+}
--------------------------------

Use the following procedure to move nodes to a single-region 
{+cluster+}.

.. include:: /includes/steps-move-single-region-cluster.rst

Move a Multi-Region {+Cluster+}
-------------------------------

Use the following procedure to move nodes to one or more regions in an
``M10`` or larger multi-region {+cluster+}:

.. include:: /includes/steps-move-multi-region-cluster.rst
