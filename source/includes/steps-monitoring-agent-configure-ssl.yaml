title: Configure the agent with the trusted CA certificate used to sign certificates of MongoDB instances.
stepnum: 1
ref: certificate
content: |
  In the agent's install directory, edit the ``monitoring-agent.config``
  file and set the ``sslTrustedServerCertificates`` field to the path of a
  file containing one or more certificates in PEM format.

  By default, the agent connects to MongoDB instances using a trusted
  certificate. For testing purposes, you can set the
  ``sslRequireValidServerCertificates`` setting to ``False`` to bypass
  this check. This configuration is NOT recommended for production use as
  it makes the connection insecure.

  For reference information on both settings, see :ref:`ssl-settings-monitoring`.
---
title: Activate SSL for the agent's connection to the MongoDB instance.
stepnum: 2
ref: activate
content: |
  In |mms|, select the :guilabel:`Monitoring` tab and then select
  :guilabel:`Deployment`. On the line listing the host, click the gear
  icon and select :guilabel:`Edit Host`. Select the :guilabel:`SSL` tab,
  and then turn on SSL.

  **Optionally**, you can enable SSL support globally through the agent's
  configuration file. If you do, you **cannot** override the setting on a
  per-host basis. To enable SSL support globally, edit the
  ``monitoring-agent.config`` file in your agent's installation directory
  to set the ``useSslForAllConnections`` value to ``True``. Restart the
  agent. There might be five minute delay before |monitoring| receives
  data from the agent.
...
