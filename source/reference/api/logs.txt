====
Logs
====

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Retrieves a compressed (``.gz``) log file that contains a range of log
messages for a particular host in an |service| cluster.

.. important::

   You must be an Owner of the group that the cluster belongs to in
   order to retrieve the log.

.. include:: /includes/api-base-url.rst

Syntax
------

.. code-block:: none

   GET /api/atlas/v1.0/groups/{GROUP-ID}/clusters/{HOSTNAME}/logs/mongodb.gz

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1

   * - Parameter
     - Required/Optional
     - Description

   * - ``GROUP-ID``
     - Required
     - Group identifier.

   * - ``HOSTNAME``
     - Required

     - Name of the host.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1

   * - Field
     - Required/Optional
     - Description

   * - ``startDate``

     - Optional.

     - Timestamp that specifies starting point for the range of log
       messages to retrieve.

       Default is 24 hours prior to the current timestamp.

   * - ``endDate``

     - Optional.

     - Timestamp that specifies the end point for the range of log
       messages to retrieve. Default is current timestamp.

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

This endpoint does not use HTTP request body parameters.

Response Elements
-----------------

The response includes the following elements:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Field
     - Description

   * - ``appName``
     - MongoDB Cloud

   * - ``build``
     -  The SHA that corresponds to the GitHub commit for the |service|.

   * - ``links``

     - Array of links to related API resources. For more information on
       links, see :ref:`api-linking`.

   * - ``throttling``

     - The field is obsolete and has the value ``false``.

Example
-------

Example Request
~~~~~~~~~~~~~~~

.. code-block:: sh

   curl -X GET -u "username:apiKey" --digest -o downloadedLog.gz \
   "https://cloud.mongodb.com/api/atlas/v1.0/groups/99999962187d9d67ca76b85f8/clusters/mycluster-shard-00-00-mptda.mongodb.net/logs/mongodb.gz?startDate=1500249600&endDate=1500422400"


Example Response
~~~~~~~~~~~~~~~~

The request should download the log file and save to
:file:`downloadedLog.gz`.

