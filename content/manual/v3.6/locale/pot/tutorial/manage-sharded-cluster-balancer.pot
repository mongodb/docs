# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2008-2019
# This file is distributed under the same license as the mongodb-manual package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: mongodb-manual 3.6\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2019-03-19 11:30-0400\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:6
msgid "Manage Sharded Cluster Balancer"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:18
msgid "The balancer process has moved from the :binary:`~bin.mongos` instances to the primary member of the config server replica set."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:21
msgid "This page describes common administrative procedures related to balancing. For an introduction to balancing, see :ref:`sharding-balancing`. For lower level information on balancing, see :ref:`sharding-balancing-internals`."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:28
#: ../source/tutorial/manage-sharded-cluster-balancer.txt:65
msgid "Use the version of the :binary:`~bin.mongo` shell that corresponds to the version of the sharded cluster. For example, do not use a 3.2 or earlier version of :binary:`~bin.mongo` shell against the 3.4 sharded cluster."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:34
msgid "Check the Balancer State"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:36
msgid ":method:`sh.getBalancerState()` checks if the balancer is enabled (i.e. that the balancer is permitted to run). :method:`sh.getBalancerState()` does not check if the balancer is actively balancing chunks."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:40
msgid "To see if the balancer is enabled in your :term:`sharded cluster`, issue the following command, which returns a boolean:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:47
msgid "You can also see if the balancer is enabled using :method:`sh.status()`. The :data:`~sh.status.balancer.currently-enabled` field indicates whether the balancer is enabled, while the :data:`~sh.status.balancer.currently-running` field indicates if the balancer is currently running."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:58
msgid "Check if Balancer is Running"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:60
msgid "To see if the balancer process is active in your :term:`cluster <sharded cluster>`:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:70
#: ../source/tutorial/manage-sharded-cluster-balancer.txt:136
#: ../source/tutorial/manage-sharded-cluster-balancer.txt:185
msgid "Connect to any :binary:`~bin.mongos` in the cluster using the :binary:`~bin.mongo` shell."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:73
msgid "Use the following operation to determine if the balancer is running:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:82
msgid "Configure Default Chunk Size"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:84
msgid "The default chunk size for a sharded cluster is 64 megabytes. In most situations, the default size is appropriate for splitting and migrating chunks. For information on how chunk size affects deployments, see details, see :ref:`sharding-chunk-size`."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:89
msgid "Changing the default chunk size affects chunks that are processes during migrations and auto-splits but does not retroactively affect all chunks."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:92
msgid "To configure default chunk size, see :doc:`modify-chunk-size-in-sharded-cluster`."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:100
msgid "Schedule the Balancing Window"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:102
msgid "In some situations, particularly when your data set grows slowly and a migration can impact performance, it is useful to ensure that the balancer is active only at certain times. The following procedure specifies the ``activeWindow``, which is the timeframe during which the :term:`balancer` will be able to migrate chunks:"
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:8
msgid "Connect to :binary:`~bin.mongos` using the :binary:`~bin.mongo` shell."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:10
#: ../source/includes/steps/schedule-balancer-window.rst:22
msgid "You can connect to any :binary:`~bin.mongos` in the cluster."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:20
msgid "Step 1: Connect to :binary:`~bin.mongos` using the :binary:`~bin.mongo` shell."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:32
msgid "Switch to the :ref:`config-database`."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:34
#: ../source/includes/steps/schedule-balancer-window.rst:51
msgid "Issue the following command to switch to the config database."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:49
msgid "Step 2: Switch to the :ref:`config-database`."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:66
msgid "Ensure that the balancer is not ``stopped``."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:68
#: ../source/includes/steps/schedule-balancer-window.rst:92
msgid "The balancer will not activate in the ``stopped`` state. To ensure that the  balancer is not ``stopped``, use :method:`sh.setBalancerState()`, as in the following:"
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:79
#: ../source/includes/steps/schedule-balancer-window.rst:103
msgid "The balancer will not start if you are outside of the ``activeWindow`` timeframe."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:90
msgid "Step 3: Ensure that the balancer is not ``stopped``."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:114
msgid "Modify the balancer's window."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:116
#: ../source/includes/steps/schedule-balancer-window.rst:163
msgid "Set the ``activeWindow`` using :method:`~db.collection.update()`, as in the following:"
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:129
#: ../source/includes/steps/schedule-balancer-window.rst:176
msgid "Replace ``<start-time>`` and ``<end-time>`` with time values using two digit hour and minute values (i.e. ``HH:MM``) that specify the beginning and end boundaries of the balancing window."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:133
#: ../source/includes/steps/schedule-balancer-window.rst:180
msgid "For ``HH`` values, use hour values ranging from ``00`` - ``23``."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:134
#: ../source/includes/steps/schedule-balancer-window.rst:181
msgid "For ``MM`` value, use minute values ranging from ``00`` - ``59``."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:137
#: ../source/includes/steps/schedule-balancer-window.rst:184
msgid "MongoDB evaluates the start and stop times relative to the time zone of the member which is serving as a primary in the config server replica set."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:143
#: ../source/includes/steps/schedule-balancer-window.rst:190
msgid "The balancer window must be sufficient to *complete* the migration of all data inserted during the day."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:146
#: ../source/includes/steps/schedule-balancer-window.rst:193
msgid "As data insert rates can change based on activity and usage patterns, it is important to ensure that the balancing window you select will be sufficient to support the needs of your deployment."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:150
#: ../source/includes/steps/schedule-balancer-window.rst:197
msgid "Do not use the :method:`sh.startBalancer()` method when you have set an ``activeWindow``."
msgstr ""

#: ../source/includes/steps/schedule-balancer-window.rst:161
msgid "Step 4: Modify the balancer's window."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:114
msgid "Remove a Balancing Window Schedule"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:116
msgid "If you have :ref:`set the balancing window <sharding-schedule-balancing-window>` and wish to remove the schedule so that the balancer is always running, use :update:`$unset` to clear the ``activeWindow``, as in the following:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:130
msgid "Disable the Balancer"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:132
msgid "By default, the balancer may run at any time and only moves chunks as needed. To disable the balancer for a short period of time and prevent all migration, use the following procedure:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:139
msgid "Issue the following operation to disable the balancer:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:145
msgid "If a migration is in progress, the system will complete the in-progress migration before stopping."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:148
msgid "To verify that the balancer will not start, issue the following command, which returns ``false`` if the balancer is disabled:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:155
msgid "Optionally, to verify no migrations are in progress after disabling, issue the following operation in the :binary:`~bin.mongo` shell:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:168
msgid "To disable the balancer from a driver, use the :command:`balancerStop` command against the ``admin`` database, as in the following:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:180
msgid "Enable the Balancer"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:182
msgid "Use this procedure if you have disabled the balancer and are ready to re-enable it:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:188
msgid "Issue one of the following operations to enable the balancer:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:190
msgid "From the :binary:`~bin.mongo` shell, issue:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:198
msgid "To enable the balancer from a driver, use the :command:`balancerStart` command against the ``admin`` database, as in the following:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:206
msgid "Disable Balancing During Backups"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:208
msgid "If MongoDB migrates a :term:`chunk` during a :doc:`backup </core/backups>`, you can end with an inconsistent snapshot of your :term:`sharded cluster`. Never run a backup while the balancer is active. To ensure that the balancer is inactive during your backup operation:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:214
msgid "Set the :ref:`balancing window <sharding-schedule-balancing-window>` so that the balancer is inactive during the backup. Ensure that the backup can complete while you have the balancer disabled."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:218
msgid ":ref:`manually disable the balancer <sharding-balancing-disable-temporarily>` for the duration of the backup procedure."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:221
msgid "If you turn the balancer off while it is in the middle of a balancing round, the shut down is not instantaneous. The balancer completes the chunk move in-progress and then ceases all further balancing rounds."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:225
msgid "Before starting a backup operation, confirm that the balancer is not active. You can use the following command to determine if the balancer is active:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:233
msgid "When the backup procedure is complete you can reactivate the balancer process."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:237
msgid "Disable Balancing on a Collection"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:239
msgid "You can disable balancing for a specific collection with the :method:`sh.disableBalancing()` method. You may want to disable the balancer for a specific collection to support maintenance operations or atypical workloads, for example, during data ingestions or data exports."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:244
msgid "When you disable balancing on a collection, MongoDB will not interrupt in progress migrations."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:247
msgid "To disable balancing on a collection, connect to a :binary:`~bin.mongos` with the :binary:`~bin.mongo` shell and call the :method:`sh.disableBalancing()` method."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:251
#: ../source/tutorial/manage-sharded-cluster-balancer.txt:275
msgid "For example:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:257
msgid "The :method:`sh.disableBalancing()` method accepts as its parameter the full :term:`namespace` of the collection."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:261
msgid "Enable Balancing on a Collection"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:263
msgid "You can enable balancing for a specific collection with the :method:`sh.enableBalancing()` method."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:266
msgid "When you enable balancing for a collection, MongoDB will not *immediately* begin balancing data. However, if the data in your sharded collection is not balanced, MongoDB will be able to begin distributing the data more evenly."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:271
msgid "To enable balancing on a collection, connect to a :binary:`~bin.mongos` with the :binary:`~bin.mongo` shell and call the :method:`sh.enableBalancing()` method."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:281
msgid "The :method:`sh.enableBalancing()` method accepts as its parameter the full :term:`namespace` of the collection."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:285
msgid "Confirm Balancing is Enabled or Disabled"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:287
msgid "To confirm whether balancing for a collection is enabled or disabled, query the ``collections`` collection in the ``config`` database for the collection :term:`namespace` and check the ``noBalance`` field. For example:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:296
msgid "This operation will return a null error, ``true``, ``false``, or no output:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:298
msgid "A null error indicates the collection namespace is incorrect."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:300
msgid "If the result is ``true``, balancing is disabled."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:302
msgid "If the result is ``false``, balancing is enabled currently but has been disabled in the past for the collection. Balancing of this collection will begin the next time the balancer runs."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:306
msgid "If the operation returns no output, balancing is enabled currently and has never been disabled in the past for this collection. Balancing of this collection will begin the next time the balancer runs."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:310
msgid "You can also see if the balancer is enabled using :method:`sh.status()`. The :data:`~sh.status.balancer.currently-enabled` field indicates if the balancer is enabled."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:320
msgid "Change Replication Behavior for Chunk Migration"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:325
msgid "Secondary Throttle"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:327
msgid "During chunk migration, the ``_secondaryThrottle`` value determines when the migration proceeds with next document in the chunk."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:330
msgid "In the :data:`config.settings` collection:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:333
msgid "If the ``_secondaryThrottle`` setting for the balancer is set to a write concern, each document move during chunk migration must receive the requested acknowledgement before proceeding with the next document."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:338
msgid "If the ``_secondaryThrottle`` setting for the balancer is set to ``true``, each document move during chunk migration must receive acknowledgement from at least one secondary before the migration proceeds with the next document in the chunk. This is equivalent to a write concern of :writeconcern:`{ w: 2 } <\\<number\\>>`."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:344
msgid "If the ``_secondaryThrottle`` setting is unset, the migration process does not wait for replication to a secondary and instead continues with the next document."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:348
msgid "Default behavior for :ref:`WiredTiger <storage-wiredtiger>` starting in MongoDB 3.4."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:351
msgid "To change the ``_secondaryThrottle`` setting, connect to a :binary:`~bin.mongos` instance and directly update the ``_secondaryThrottle`` value in the :data:`~config.settings` collection of the :ref:`config database <config-database>`. For example, from a :binary:`~bin.mongo` shell connected to a :binary:`~bin.mongos`, issue the following command:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:367
msgid "The effects of changing the ``_secondaryThrottle`` setting may not be immediate. To ensure an immediate effect, stop and restart the balancer to enable the selected value of ``_secondaryThrottle``."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:371
msgid "For more information on the replication behavior during various steps of chunk migration, see :ref:`chunk-migration-replication`."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:374
msgid "For the :dbcommand:`moveChunk` command, you can use the command's ``_secondaryThrottle`` and ``writeConcern`` options to specify the behavior during the command. For details, see :dbcommand:`moveChunk` command."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:382
msgid "Wait for Delete"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:384
msgid "The ``_waitForDelete`` setting of the balancer and the :dbcommand:`moveChunk` command affects how the balancer migrates multiple chunks from a shard. By default, the balancer does not wait for the on-going migration's delete phase to complete before starting the next chunk migration. To have the delete phase **block** the start of the next chunk migration, you can set the ``_waitForDelete`` to true."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:392
msgid "For details on chunk migration, see :ref:`sharding-chunk-migration`. For details on the chunk migration queuing behavior, see :ref:`chunk-migration-queuing`."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:396
msgid "The ``_waitForDelete`` is generally for internal testing purposes. To change the balancer's ``_waitForDelete`` value:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:399
#: ../source/tutorial/manage-sharded-cluster-balancer.txt:416
msgid "Connect to a :binary:`~bin.mongos` instance."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:401
msgid "Update the ``_waitForDelete`` value in the :data:`~config.settings` collection of the :ref:`config database <config-database>`. For example:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:414
msgid "Once set to ``true``, to revert to the default behavior:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:418
msgid "Update or unset the ``_waitForDelete`` field in the :data:`~config.settings` collection of the :ref:`config database <config-database>`:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:433
msgid "Change the Maximum Storage Size for a Given Shard"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:435
msgid "By default shards have no constraints in storage size. However, you can set a maximum storage size for a given shard in the sharded cluster. When selecting potential destination shards, the balancer ignores shards where a migration would exceed the configured maximum storage size."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:440
msgid "The :data:`~config.shards` collection in the :ref:`config database<config-database>` stores configuration data related to shards."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:448
msgid "To limit the storage size for a given shard, use the :method:`db.collection.updateOne()` method with the :update:`$set` operator to create the ``maxSize`` field and assign it an ``integer`` value. The ``maxSize`` field represents the maximum storage size for the shard in ``megabytes``."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:454
msgid "The following operation sets a maximum size on a shard of ``1024 megabytes``:"
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:461
msgid "This value includes the mapped size of *all* data files on the shard, including the ``local`` and ``admin`` databases."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:464
msgid "By default, ``maxSize`` is not specified, allowing shards to consume the total amount of available space on their machines if necessary."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:467
msgid "You can also set ``maxSize`` when adding a shard."
msgstr ""

#: ../source/tutorial/manage-sharded-cluster-balancer.txt:469
msgid "To set ``maxSize`` when adding a shard, set the :dbcommand:`addShard` command's ``maxSize`` parameter to the maximum size in ``megabytes``. The following command run in the :binary:`~bin.mongo` shell adds a shard with a maximum size of 125 megabytes:"
msgstr ""

