ref: fts-facet-tutorial-step1
level: 4
stepnum: 1
inherit:
  file: steps-source-project-nav.yaml
  ref: project-nav-search
---
ref: fts-facet-tutorial-step2
level: 4
stepnum: 2
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-fts-index
---
ref: fts-facet-tutorial-step3
level: 4
stepnum: 3
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: select-a-configuration-method
---
stepnum: 4
ref: fts-facet-tutorial-step4
title: "Enter the :guilabel:`Index Name`, and set the :guilabel:`Database and Collection`." 
content: |

  a. In the :guilabel:`Index Name` field, enter ``facet-tutorial``.

     .. include:: /includes/default-fts-index-name.rst 

  #. In the :guilabel:`Database and Collection` section, find the 
     ``sample_mflix`` database, and select the ``movies`` collection.
---
ref: fts-facet-tutorial-step5
level: 4
stepnum: 5
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: enter-index-definition
content: |
  The following index definition uses ``lucene.standard`` as the 
  default analyzer for both indexing and querying the fields and 
  specifies the following for the fields to index:
    
  .. list-table:: 
     :header-rows: 1
     :widths: 30 70

     * - Field Name
       - Data Type

     * - ``genres`` 
       - :ref:`bson-data-types-string-facet`
    
     * - ``year`` 
       - :ref:`bson-data-types-number-facet` 
    
     * - ``released`` 
       - :ref:`bson-data-types-date`

  You can use the |fts| :guilabel:`Visual Editor` or the |fts| :guilabel:`JSON 
  Editor` in the |service| user interface to create the index.

  .. tabs:: 
  
     .. tab:: Visual Editor
        :tabid: vib
  
        a. Click :guilabel:`Next`.
        #. Click :guilabel:`Refine Your Index`.
        #. In the :guilabel:`Index Configuration` section, toggle to
           disable :guilabel:`Dynamic Mapping`.
        #. Click :guilabel:`Add Field` in the :guilabel:`Field Mappings`
           section and add the following fields by clicking
           :guilabel:`Add` after configuring the settings for each
           field in the :guilabel:`Add Field Mapping` window.
              
           .. list-table:: 
              :header-rows: 1
              :widths: 20 80
   
              * - Field Name 
                - Data Type Configuration 

              * - ``genres``
                - Click the :guilabel:`Data Type` dropdown and select 
                  :guilabel:`StringFacet`.

              * - ``year``
                - Click the :guilabel:`Data Type` dropdown and select 
                  :guilabel:`NumberFacet`. Use the default settings for 
                  the ``NumberFacet`` properties.

              * - ``released``
                - Click the :guilabel:`Data Type` dropdown and select 
                  :guilabel:`Date`.

        #. Click :guilabel:`Save Changes`.

     .. tab:: JSON Editor
        :tabid: jsonib
  
        a. Replace the default definition with the following:

           .. code-block:: json 

              {
                "mappings": {
                  "dynamic": false,
                  "fields": {
                    "genres": {
                      "type": "stringFacet"
                    },
                    "year": {
                      "type": "numberFacet"
                    },
                    "released": {
                      "type": "date"
                    }
                  }
                }
              }

        #. Click :guilabel:`Next`.

---
ref: fts-facet-tutorial-step10
level: 4
stepnum: 6
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-search-index
---
ref: fts-facet-tutorial-step11
level: 4
stepnum: 7
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: close-in-progress
---
ref: fts-facet-tutorial-step12
level: 4
stepnum: 8
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: wait-for-index
---

