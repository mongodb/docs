==============================================
Configure Backup Agent for LDAP Authentication
==============================================

.. default-domain:: mongodb

.. include:: /includes/extracts/intro-configure-backup-agent-ldap.rst

.. include:: /includes/extracts/note-manage-agent-auth-with-automation-ldap.rst

Considerations
--------------

You must configure LDAP authentication separately for each agent.
See: :doc:`/tutorial/configure-monitoring-agent-for-ldap` for
configuration instructions for the Monitoring Agent.

You can configure LDAP authentication when activating backup or by
editing the an existing host's configuration.
:doc:`/tutorial/enable-ldap-authentication-for-group` for instructions.

.. include:: /includes/fact-auth-backup-requirements.rst

Procedures
----------

Create User in MongoDB
~~~~~~~~~~~~~~~~~~~~~~

To back up MongoDB 2.6+ instances that are using LDAP authentication,
add a user that possess the required roles to the ``$external`` database
in MongoDB. The ``$external`` database allows :program:`mongod` to
consult an external source, such as an LDAP server, to authenticate.

.. include:: /includes/extracts/add-users-dollarExternal-shell-backup-ldap.rst

Host Settings
~~~~~~~~~~~~~

.. include:: /includes/fact-access-control-host-settings.rst
