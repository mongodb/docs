.. _ref-atlas-oplog:

============
Oplog Access
============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/serverless-preview-dont-use.rst

The :term:`oplog` (operations log) is a special :manual:`capped collection
</reference/glossary/#term-capped-collection>` that keeps a rolling record
of all operations that modify the data stored in your databases.

Add a User with Oplog Access
----------------------------

To access the oplog, a database user must have read access on
the ``local`` database. To create a user with read access on ``local``:

1. In the :guilabel:`Security` section of the left navigation, click
   :guilabel:`Database Access`.

#. Click the :guilabel:`Database Users` tab.

#. Click :icon-fa5:`plus` :guilabel:`Add New Database User` and enter a 
   user name such as ``oploguser``.

#. Click :guilabel:`Add Default Privileges` and select the ``read``
   role and the ``local`` database. This restricts the user to read
   operations on the ``local`` database.

#. Enter a password and click :guilabel:`Add User`.

Access the Oplog
----------------

1. :doc:`Connect to your cluster </mongo-shell-connection>` with the
   {+mongosh+}, using the credentials of the new database user with
   access to the ``local`` database.

#. Switch to the ``local`` database.

   .. code-block:: none

      > use local

#. The oplog collection is named ``oplog.rs``. Database write operations
   are recorded in date order, with a :manual:`timestamp </reference/bson-types/#timestamps>`
   field and a wall clock field.

   The timestamp field contains an integer with `seconds since epoch
   <https://en.wikipedia.org/wiki/Unix_time>`__.

.. note::

   - To increase the size of an oplog for a cluster, see
     :ref:`Set Oplog Size <scale-cluster-more-configuration-options>`.

   - You cannot use the MongoDB command
     :doc:`replSetResizeOplog </reference/unsupported-commands-paid-tier-clusters/>`
     to resize the oplog.
