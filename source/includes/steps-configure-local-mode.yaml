title: "Set |onprem| to :guilabel:`Local Mode`."
stepnum: 1
ref: edit-config-file
content: |
  a. Click :guilabel:`Admin` in the upper right corner to open system administration.

  b. Click the :guilabel:`General` tab.

  c. Click :guilabel:`Ops Manager Config`.

  d. Click the :guilabel:`Miscellaneous` button at the top of the page.

  e. Select ``Local`` as the :setting:`Version Manifest Source` setting.

  f. Note the directory specified in :setting:`Versions Directory`. This is the directory on your
     |onprem| servers that stores the MongoDB binaries.

---
title: "Populate all |onprem| servers with the necessary MongoDB binaries and archives."
stepnum: 2
ref: populate-with-binaries
content: |
  On all your |onprem| servers, including those with enabled Backup Daemons:

  a. Download the MongoDB binaries for the appropriate platforms and
     versions from MongoDB, Inc. Binaries are stored as compressed 
     archives (``.tgz``).

     .. note::
        See :ref:`local-mode-determine-versions` to review which
        versions are necessary.

  b. Copy all of the archived binaries to the versions directory.

  c. Navigate to the versions directory.

  d. Extract all of the archived binaries.

     .. note:: 
        Automation uses the archived binaries, but Backup uses the
        extracted binaries. Both must be available.

---
title: Grant the ``mongodb-mms`` user read permissions to the versions directory.
stepnum: 3
ref: mongodb-mms-as-owner
content: |

  The ``mongodb-mms`` user needs the read permissions to the versions
  directory.

  .. example::

     On a Linux platform, you should issue the ``chown`` command to change
     ownership for **all** files in the directory to ``mongodb-mms``:

     .. code-block:: sh

        sudo chown -R mongodb-mms:mongodb-mms <path-to-the-versions-directory>

     Set the permissions to:

     * ``read`` and ``write`` for the owner
     * ``read`` for the group 
     * ``none`` for all

     This enables |mms| can correctly read and extract the archived binaries.

     .. code-block:: sh

        sudo chmod -R 640 <path-to-the-versions-directory>

     The resulting listing of the versions directory should look like this:

     .. code-block:: sh

        -rw-r----- 1 mongodb-mms mongodb-mms 116513825 Apr 27 15:06 mongodb-linux-x86_64-2.6.9.tgz
        -rw-r----- 1 mongodb-mms mongodb-mms  51163601 May 22 10:05 mongodb-linux-x86_64-amazon-3.0.3.tgz
        -rw-r----- 1 mongodb-mms mongodb-mms  50972165 May 22 10:06 mongodb-linux-x86_64-suse11-3.0.3.tgz
        -rw-r----- 1 mongodb-mms mongodb-mms  95800685 Apr 27 15:05 mongodb-linux-x86_64-enterprise-amzn64-2.6.9.tgz
        -rw-r----- 1 mongodb-mms mongodb-mms  50594134 Apr 27 15:04 mongodb-linux-x86_64-enterprise-amzn64-3.0.2.tgz
        -rw-r----- 1 mongodb-mms mongodb-mms  50438645 Apr 27 15:04 mongodb-linux-x86_64-enterprise-suse11-3.0.2.tgz

---
title: "Download the version manifest for |onprem|."
stepnum: 4
ref: download-version-manifest
content: |

   a. From a computer that can access the Internet and the |onprem| servers,
      download the version manifest from
      `<https://opsmanager.mongodb.com/static/version_manifest/2.0.json>`_.

   b. Open the manifest JSON file.

   c. Select all of the contents and copy them to the clipboard.

---
title: "Paste the contents the version manifest into the |onprem| application on each |onprem| server."
stepnum: 5
ref: enter-version-manifest
content: |

  a. In |onprem|, click :guilabel:`Admin` in the upper right corner to open
     system administration.

  b. Click the :guilabel:`General` tab.

  c. Click :guilabel:`Version Manifest`.

  d. Click the :guilabel:`Update the MongoDB Version Manifest` button.

  e. Paste the version manifest.

---
title: "For each group, specify which versions are available for download by Automation Agents."
stepnum: 6
ref: select-versions
content: |

  a. In |onprem|, click :guilabel:`Ops Manager` in the upper left to exit
     system administration.

  b. Click the :guilabel:`Group` link at the top of the page and select the desired group.

  c. Click :guilabel:`Deployment`, then the :guilabel:`More` drop-down list, then :guilabel:`Version Manager`.

  d. Select the checkboxes for the versions of MongoDB that you have made
     available on the |application| server.

---
title: "Review and approve your changes."
stepnum: 7
ref: confirm-deployment
content: |

  |mms| displays your proposed changes.

  a. If you are satisfied, click :guilabel:`Confirm & Deploy`.
  b. Otherwise, click :guilabel:`Cancel` and you can make
     additional changes.

...
