=========================
Two-Factor Authentication
=========================

.. default-domain:: mongodb

Overview
--------

.. only:: classic or cloud

   MMS requires two-factor authentication to help users control access to
   their MMS accounts. To log into MMS, a user must provide their password
   (i.e. "something you know"), as well as a second time-sensitive
   verification code, delivered during authentication (i.e. "something you
   have"). By requiring both factors, MMS can grant authentication
   requests with a higher degree of confidence.

.. only:: onprem

   When enabled, MMS requires two-factor authentication to help users
   control access to
   their MMS accounts. To log into MMS, a user must provide their password
   (i.e. "something you know"), as well as a second time-sensitive
   verification code, delivered during authentication (i.e. "something you
   have"). By requiring both factors, MMS can grant authentication
   requests with a higher degree of confidence.

MMS users receive verification codes through text messages (SMS),
automated voice calls or an application that implements the
`Time-based One-time Password Algorithm (TOTP)
<http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm>`_,
such as the Google Authenticator application. Users can configure
two-factor authentication mechanisms when signing up for MMS or in
the :guilabel:`Settings` tab of MMS.

Authentication with Text or Voice Messages
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Users can receive verification codes through text or voice by providing
phone numbers when setting up their MMS profiles. When a user needs a
code, MMS sends the code using text (SMS) or through an automated phone
call that reads out the code.

Certain network providers and countries may impose delays on SMS messages.
Users who experience delays should consider Google Authenticator for
verification codes.

.. include:: /includes/fact-two-factor-auth-India-limit.rst

Authentication with Applications
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Authentication using  Google Authenticator
``````````````````````````````````````````

Google Authenticator is a smartphone application that uses `TOTP
<http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm>`_ to
generate verification codes. When a user needs a code, the application
generates a time-based code based on a private key that was shared between
MMS and the user's Google Authenticator application during the initial pairing
process.

The Google Authenticator application **does not** require a Google
account and does not connect a user's MMS account to Google in any
way. The has both `iOS
<https://itunes.apple.com/us/app/google-authenticator/id388497605>`_ and
`Android
<https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2>`_
versions, and the user does not need to associate the application with a Google account. MMS
two-factor authentication using Google Authenticator is not in any way
integrated with Googleâ€™s own account authentication mechanisms, and MMS
does **not** provide two-factor authentication codes to Google.

Authentication using Another Implementation of TOTP
```````````````````````````````````````````````````

There are implementations of the Time-based One-time Password Algorithm
(TOTP) other than Google Authenticator. For example, the
`Authenticator <http://www.windowsphone.com/en-us/store/app/authenticator/021dd79f-0598-e011-986b-78e7d1fa76f8>`_
application for Windows Phones.

Ensure that whichever devices runs the TOTP application has it's own
set of robust authentication requirements.

For other implementations of TOTP, consider the `list of TOTP
implementations`_ on Wikipedia.

.. _`list of TOTP implementations`: http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm#Client_implementations

Two-Factor Authentication on a Shared Account
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A global team that shares the same MMS account can use Google
Authenticator and use the same seed code for all team members. To generate
a common seed code that all team members can use, select the
:guilabel:`Can't scan the barcode?` link when :ref:`Configuring
Two-Factor Authentication with Google Authenticator
<two-factor-google-authenticator>`.

Procedures
----------

.. only:: onprem

   To enable or disable two-factor authentication for the entire |mms|
   environment, see :doc:`/tutorial/manage-two-factor-authentication`.

Configure Two-Factor Authentication with Text or Voice
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/two-factor-auth-configure-text-voice.rst

.. _two-factor-google-authenticator:

Configure Two-Factor Authentication with Google Authenticator
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/two-factor-auth-configure-authenticator.rst

Generate New Recovery Codes
~~~~~~~~~~~~~~~~~~~~~~~~~~~

As a backup, you can generate recovery codes to use in place of a sent
code when you do not have access to a phone or your Google Authenticator
application. Each recovery code is single-use, and you should save these
codes in a secure place. When you generate new recovery codes, you
invalidate previously generated ones.

.. include:: /includes/steps/two-factor-generate-recovery-codes.rst
