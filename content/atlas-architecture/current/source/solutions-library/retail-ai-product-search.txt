.. _arch-center-is-ai-product-search:

===============================================
AI-Powered Retail: Personalization and Accuracy
===============================================

.. facet::
   :name: genre
   :values: tutorial

.. meta:: 
   :keywords: Atlas, code example
   :description: Discover how MongoDB and Databricks revolutionize e-commerce search with AI, offering personalized, efficient shopping experiences. 
   
.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Deliver personalized, accurate search experiences using machine learning and Vector Search.

**Use cases:** `Generative AI <https://www.mongodb.com/library/use-cases/artificial-intelligence>`__

**Industries:** `Retail <https://www.mongodb.com/solutions/industries/retail>`__

**Products:** `MongoDB Atlas <https://www.mongodb.com/products/platform/atlas-database>`__, 
`MongoDB Atlas Search <https://www.mongodb.com/atlas/search>`__, 
`MongoDB Atlas Vector Search <https://www.mongodb.com/products/platform/atlas-vector-search>`__, 
:ref:`MongoDB Change Streams <changeStreams>`, 
`MongoDB Connector for Spark <https://www.mongodb.com/docs/spark-connector/current/>`__

**Partners:** `Databricks <http://www.databricks.com>`__

Solution Overview
-----------------

This solution integrates MongoDB's flexible data model with Databricks' 
advanced analytics to create AI-augmented search capabilities for online
retail platforms, offering a more intuitive and efficient shopping experience.

By using AI, machine learning, and MongoDB Atlas Vector Search, you can personalize
your customers' shopping experience and suggest products that align with
their preferences and search history. This enhances customer satisfaction and
drives sales.

In this solution, MongoDB Atlas offers a scalable database environment that
efficiently manages large and diverse e-commerce datasets. MongoDB
Atlas Vector Search processes complex search queries to ensure that customers
find what they're looking for, even with partial search terms. Finally, 
Databricks offers powerful machine learning and real-time analytics capabilities,
which enhances Vector Search's accuracy. You can apply this framework to other
industries such as financial services, healthcare, and insurance.

Reference Architectures
-----------------------

The following two diagrams display the solution architecture. The first
diagram shows the overall solution architecture, and the second shows the
Vector Search portion of the solution in more detail. These architectures
work together in this solution.

.. figure:: /includes/images/industry-solutions/retail-ai-product-search-arch1.svg
   :alt: RAG Querying Flow Overall Architecture

   Figure 1. Architecture of an AI-enhanced search engine with
   different MongoDB Atlas components, Databricks notebooks, and
   data workflows.

.. figure:: /includes/images/industry-solutions/retail-ai-product-search-arch2.svg
   :alt: RAG Querying Flow Atlas Vector Search

   Figure 2. Architecture of a vector search solution showcasing how the
   data flows through the different integrated components of MongoDB
   Atlas and Databricks 

Data Model Approach
-------------------

When working with this solution, developers should use the 
:ref:`Polymorphic Pattern <polymorphic-schema-pattern>` when storing 
their data. This pattern allows for efficient queries even when 
documents within a collection share a similar, but not identical, 
structure.

In this solution, each product document has common fields such as ``_id``, ``price``,
or ``brandName``. They can also have different fields that are specific to the
product category, such as ``color1``, ``ageGroup``, or ``season``. Because
of MongoDB's flexible document data model, you can design your schema to support
both uniformity and customization when representing different product types within
the same collection.

The following code block provides an example of a document that represents a
product item:

.. code-block:: json
   :linenos:
   :copyable: true 

   {
      "_id": {
         "$oid": "64934d5a4fb07ede3b0dc0d3"
      },
      "colour1": "NA",
      "ageGroup": "Adults-Women",
      "link": "http://assets.myntassets.com/v1/images/style/properties/41b9db06cab6a17fef365787e7b885ba_images.jpg",
      "brandName": "Baggit",
      "fashionType": "Fashion",
      "price": {
         "$numberDouble": "375.0"
      },
      "atp": {
         "$numberInt": "1"
      },
      "title": "Baggit Women Chotu Taj White Belt",
      "gender": "Women",
      "mfg_brand_name": "Baggit",
      "subCategory": "Belts",
      "masterCategory": "Accessories",
      "score": {
         "$numberDouble": "0.0"
      },
      "season": "Summer",
      "articleType": "Belts",
      "baseColour": "White",
      "id": "33464",
      "discountedPrice": {
         "$numberDouble": "324.0"
      },
      "productDisplayName": "Baggit Women Chotu Taj White Belt",
      "count": {
         "$numberInt": "10"
      },
      "pred_price": {
         "$numberDouble": "0.8616750344336797"
      },
      "price_elasticity": {
         "$numberDouble": "0.0"
      },
      "discount": {
         "$numberDouble": "14.0"
      }
   }


Build the Solution
------------------

.. procedure::
   :style: normal
   
   .. step:: Get started with Atlas Vector Search

      Visit the :ref:`Atlas Vector Search Quick Start guide <vector-search-quick-start>`
      and create your first index in minutes.

   .. step:: Set up your data for Vector Search

      To learn how to prepare your data, index vector embeddings, and 
      run vector search queries, read these pages:

      - `Improving Vector Search Querying Abilities 
        <https://www.mongodb.com/developer/products/mongodb/doc-modeling-vector-search/>`__
      - :ref:`fts-data-types-knn-vector`
      - :ref:`return-vector-search-results`

   .. step:: Deploy your application

      To deploy your application locally, follow the ``README`` instructions
      in `this GitHub repository <https://github.com/mongodb-industry-solutions/retail-pricing-search-personaliztion/tree/main?tab=readme-ov-file#prerequisites>`__.

   .. step:: Create Databricks jobs and workflows

      To learn how to create Databricks jobs and workflows with
      JSON, see `this Databricks documentation <https://docs.databricks.com/api/workspace/jobs/create>`__.

   .. step:: Use Databricks notebooks for analyis
   
      See `this GitHub folder <https://github.com/mongodb-industry-solutions/retail-pricing-search-personaliztion/tree/main/notebooks>`__
      for notebooks.

Key Learnings
-------------

- **Transform raw data:** You can use triggers and functions to push raw data from 
  MongoDB Atlas into Databricks. You can also leverage the
  MongoDB Connector for Spark to shape your data for different 
  machine learning algorithms.

- **Process real-time data:** You can process real-time data to get actionable
  insights, such as product scoring, product promotions, and recommendation
  engines.

- **Use a flexible schema:** You can use MongoDB's flexible document model
  to apply the polymorphic pattern. This allows you to store documents with
  shared and unique fields within the same collection.

Authors
-------

- Francesco Baldissera, MongoDB
- Ashwin Gangadhar, MongoDB
- Vittal Pai, MongoDB

Learn More
----------

- :ref:`arch-center-is-Gen-AI-powered-video-summarization-solution`
- :ref:`arch-center-is-streamline-global-gaming-management`
- :ref:`arch-center-is-text-to-audio`
