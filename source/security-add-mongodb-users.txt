.. _mongodb-users:

=================
Add MongoDB Users
=================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Create MongoDB users to provide clients access to the clusters in your
project. A MongoDB user's access is determined by the roles assigned to
the user. When you create a MongoDB user, the user is added to all
clusters in your |service| project.

To create a new MongoDB user, from the :guilabel:`Clusters` view,
select the :guilabel:`Security` tab, then click :guilabel:`Users`, then
:guilabel:`Add New User`.

MongoDB users are separate from |service| users. MongoDB users have
access to MongoDB databases, while |service| users access to the
|service| application itself. You can configure MongoDB users to be
temporary, meaning |service| will delete the user at a specified date.

The available |service|
:ref:`database user privileges <atlas-user-privileges>` support
a subset of MongoDB commands. See :ref:`paid-tier-command-limitations`
for more information.

.. include:: /includes/fact-database-user-limits.rst

.. important::

   |service| rolls back any user modifications not made through the UI or
   :doc:`API </reference/api/database-users>`. You must use the |service| UI
   or API to add, modify, or delete MongoDB users on |service| clusters.

.. _add-mongodb-users:

Add MongoDB Users
-----------------

.. include:: /includes/steps/add-users.rst

Modify MongoDB Users
--------------------

To modify existing users for an |service| project, from the :guilabel:`Clusters`
view:

#. Select the :guilabel:`Security` tab.

#. Click :guilabel:`Users`.

#. Click :guilabel:`Edit` for the user you want to modify. You can modify the
   username, the roles assigned to the user, or the user's password.

#. Click :guilabel:`Update User` to save the changes.

You can also modify existing users through the |service| API. See
:doc:`/reference/api/database-users-create-a-user`.

Delete MongoDB Users
--------------------

To delete existing users for an |service| project, from the :guilabel:`Clusters`
view:

#. Select the :guilabel:`Security` tab.

#. Click :guilabel:`Users`.

#. Click :guilabel:`Delete` for the user you want to delete.

#. Click :guilabel:`Delete` again to confirm.

You can also delete existing users through the |service| API. See
:doc:`/reference/api/database-users-delete-a-user`.

.. _atlas-user-privileges:

MongoDB Database User Privileges
--------------------------------

The following table describes the |service| Database User Privileges
and the MongoDB :manual:`Built-in Roles </core/security-built-in-roles>`
or :manual:`privilege actions </reference/privilege-actions>` they
represent.

.. admonition:: Protected MongoDB Database Namespaces
   :class: note

   The following databases are read-only for *all* users, including
   those with the :authrole:`readWriteAnyDatabase` role.

   - ``admin``
   - ``local``
   - ``config``

.. list-table::
   :header-rows: 1

   * - User Privilege
     - MongoDB Roles or Privileges

   * - .. atlasrole:: Atlas admin
     -
       - :authrole:`readWriteAnyDatabase`
       - :authrole:`readAnyDatabase`
       - :authrole:`enableSharding`
       - :authrole:`dbAdminAnyDatabase`
       - :authrole:`clusterMonitor`
       - :authaction:`moveChunk`
       - :authaction:`splitChunk`
       - :authaction:`flushRouterConfig`

   * - .. atlasrole:: Read and write to any database
     -
       - :authrole:`readWriteAnyDatabase`

   * - .. atlasrole:: Only read any database
     -
       - :authrole:`readAnyDatabase`

See :ref:`paid-tier-command-limitations`
for more information on common commands not supported by the
current |service| user privileges.
