====================
Back up a Deployment
====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

You can choose to back up all databases and collections on the deployment or specific ones.

.. important::

   .. include:: /includes/fact-backup-standalone-restriction.rst

Prerequisites
-------------

- For a Replica Set:

  - |mms| must be monitoring the deployment.

  - It must run MongoDB version 2.2.0 or later.

  - It must have an active :term:`primary` node.
  
  - The ``mongod`` processes must be started with the ``--configsvr``
    option.

- For a Sharded Cluster:

  - |mms| must be monitoring the deployment and also be monitoring at
    least one :program:`mongos` in the cluster.

  - It must run MongoDB version 2.4.3 or later.

  - All :term:`config servers <config server>` must be running.

  - The balancing round must be able to complete in less than one hour.

  - The ``mongod`` processes must be started with the ``--configsvr``
    option.

- .. include:: /includes/extracts/backup-prereq-mongodb-compatibility.rst

- Decide how to back up the data and what data to back up. See the
  :doc:`/core/backup-preparations`.

Procedure
---------

.. include:: /includes/steps/enable-backup.rst
