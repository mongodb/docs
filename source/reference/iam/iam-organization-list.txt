.. _mcli-iam-organization-list:

==============================
mongocli iam organization list
==============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``mongocli iam organization list`` command lists organizations in
your |onprem| instance.

To list all organizations in your |onprem|, your profile must use a
:opsmgr:`Global API key pair
</reference/api/global-api-keys/index.html#global-programmatic-api-keys>`
or a :opsmgr:`Personal API key
</tutorial/configure-public-api-access/#personal-api-keys-deprecated>`.

When you use a
:opsmgr:`Programmatic API Key </tutorial/configure-public-api-access/#programmatic-api-keys>`,
the command retrieves only the organization of the project whose |api|
key has the ``Project Owner`` role.

You can also list organizations through the
:opsmgr:`API </reference/api/organizations/organization-get-all/>`.

.. _mcli-iam-organization-list-syntax:

Syntax 
------

.. code-block:: text 

   mongocli iam organization|organizations|org|orgs list|ls
        [ --includeDeleted ]
        [ --limit <number-of-orgs> ]
        [ --name <org-name> ]
        [ --output|-o <output-format> ]
        [ --page <number-of-pages> ]
        [ --profile|-P <profile-name> ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-iam-organization-list-options:

Options 
-------

.. list-table:: 
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option
     - Type 
     - Description 
     - Required? 

   * - ``--includeDeleted``
     - 
     - Flag that indicates whether {+mcli+} returns deleted
       organizations.

       .. important::

          This flag:

          - is applicable for |onprem| organizations only. {+mcli+}
            never returns deleted |service| or |cloud-short|
            organizations.
          - requires you to have an |onprem| :opsmgr:`global role
            </reference/user-roles/#global-roles>`.

       If omitted, {+mcli+} doesn't return deleted organizations.
     - no

   * - ``--limit``
     - integer
     - Number of organizations to return per page. 
     
       - If this value exceeds the number of organizations, 
         ``mongocli`` returns all organizations. Maximum value is
         ``500``.
       - If omitted, defaults to ``100``.

       For example usage, see :ref:`mcli-organization-list-examples-pagination`.
     - no

   * - ``--name``
     - string
     - Filter that {+mcli+} uses to limit results based on the specified
       organization name. Performs a case-insensitive search for
       organizations that exactly match the specified ``name``.

       .. example::

           If you specify a ``--name`` option of org1, {+mcli+} returns
           organizations named ``org1`` and ``Org1``, but would not
           return an organization named ``org123``.
     - no

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--page``
     - integer
     - Page number (1-based) to return from the 
       result set. 
       
       - The ``--limit`` flag sets the number of
         organizations per page.
       - If omitted, returns the first page.
       
       For example usage, see :ref:`mcli-organization-list-examples-pagination`.
     - no

   * - ``--profile``, ``-P`` 
     - string 
     - Name of the profile where your credentials are saved.

       If omitted, uses the {+default-profile+}. To learn more about 
       creating a profile, see :ref:`mcli-configure`.

     - no

.. _mcli-iam-organization-list-output:

Output
------

The command prints following fields in the specified format to the 
terminal if the command succeeds. If the command returns errors, 
see :ref:`Troubleshooting <mcli-troubleshooting>` for recommended 
solutions.

The |json| document includes an array of :guilabel:`result` objects, an
array of :guilabel:`link` objects and a count of the total number of
:guilabel:`result` objects retrieved.

.. list-table::
   :widths: 20 80
   :header-rows: 1

   * - Field
     - Description

   * - ``links``
     - Array includes one or more links to sub-resources
       and/or related resources. The relations between |url|\s are
       explained in the :rfc:`Web Linking Specification <5988>`.

   * - ``results``
     - Array includes one object for each item detailed in the
       `results Embedded Document`_ section.

   * - ``totalCount``
     - Integer count of the total number of items in the result set. It
       may be greater than the number of objects in the
       :guilabel:`results` array if the entire result set is paginated.

``results`` Embedded Document
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Each **result** is one organization.

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Name
     - Description

   * - ``id``
     - Unique identifier for the organization.

   * - ``links``
     - One or more links to sub-resources and/or related resources. The
       relations between |url|\s are explained in the
       :rfc:`Web Linking Specification <5988>`.

   * - ``name``
     - Name of the organization.

.. _mcli-iam-organization-list-examples:

Examples
--------

List All Organizations using Default Profile
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following ``mongocli iam org list`` command lists the |onprem|
organizations using the {+default-profile+}. The profile contains a
:opsmgr:`Programmatic API Key
</tutorial/configure-public-api-access/#programmatic-api-keys>`. 

.. code-block:: sh

   mongocli iam org list --output json

The command returns the following |json| document:

.. code-block:: json
   :copyable: false

   {
    "links": [
     {
      "rel": "self",
      "href": "http://example.com:8080/api/public/v1.0/orgs?pageNum=1\u0026itemsPerPage=100"
     }
    ],
    "results": [
     {
      "id": "abcdef3e1234de007b387a9f",
      "isDeleted": false,
      "links": [
       {
        "rel": "self",
        "href": "http://example.com:8080/api/public/v1.0/orgs/abcdef3e1234de007b387a9f"
       }
      ],
      "name": "Org1"
     }
    ],
    "totalCount": 1
   }

List All Organizations using Defined Profile
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following ``mongocli iam org list`` command lists all the
organizations in an |onprem| deployment. The command uses the
``om-personalkey`` profile, which contains a
:opsmgr:`Personal API Key </tutorial/configure-public-api-access/#personal-api-keys-deprecated>`.

.. code-block:: sh

   mongocli iam org list --output json -P om-personalkey

The command returns the following |json| document:

.. code-block:: json
   :copyable: false

   {
    "links": [
     {
      "rel": "self",
      "href": "http://www.example.com:8080/api/public/v1.0/orgs?pageNum=1\u0026itemsPerPage=100"
     }
    ],
    "results": [
     {
      "id": "5e332f3e1234de007b387a9f",
      "isDeleted": false,
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/5e332f3e1234de007b387a9f"
       }
      ],
      "name": "Org1"
     },
     {
      "id": "5e38efd83b60f567896baf4d",
      "isDeleted": false,
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/5e38efd83b60f567896baf4d"
       }
      ],
      "name": "Org2"
     }
    ],
    "totalCount": 2
   }

.. _mcli-organization-list-examples-pagination:

List the Sixth through Tenth Organizations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following ``mongocli iam org list`` command lists the sixth through
tenth organizations in an |onprem| deployment that has 20 organizations.
The command uses the ``om-personalkey`` profile, which contains a
:opsmgr:`Personal API Key
</tutorial/configure-public-api-access/#personal-api-keys-deprecated>`.

.. code-block:: sh

   mongocli iam org list -P om-personalkey --limit 5 --page 2 --output json

This command returns the following list in the specified format to
the terminal. To learn more about these fields, see
:ref:`Output <mcli-iam-organization-list-output>`.

.. code-block:: json
   :copyable: false

   {
    "links": [
     {
      "rel": "self",
      "href": "http://www.example.com:8080/api/public/v1.0/orgs?pageNum=1\u0026itemsPerPage=5"
     }
    ],
    "results": [
     {
      "id": "5e332f3e1234de007b387a9f",
      "isDeleted": false,
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/5e332f3e1234de007b387a9f"
       }
      ],
      "name": "Org6"
     },
     {
      "id": "5e38efd83b60f567896baf4d",
      "isDeleted": false,
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/5e38efd83b60f567896baf4d"
       }
      ],
      "name": "Org7"
     },
     {
      "id": "27a91237ba9cb28a15ed3f51",
      "isDeleted": false,
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/27a91237ba9cb28a15ed3f51"
       }
      ],
      "name": "Org8"
     },
     {
      "id": "959bd41f6c65d5a31077f78a",
      "isDeleted": false,
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/959bd41f6c65d5a31077f78a"
       }
      ],
      "name": "Org9"
     },
     {
      "id": "f459b51a9a6e4eba907b47ad",
      "isDeleted": false,
      "links": [
       {
        "rel": "self",
        "href": "http://www.example.com:8080/api/public/v1.0/orgs/f459b51a9a6e4eba907b47ad"
       }
      ],
      "name": "Org10"
     }
    ],
    "totalCount": 20
   }
