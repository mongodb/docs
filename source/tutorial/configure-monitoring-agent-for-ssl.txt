==================================
Configure Monitoring Agent for SSL
==================================

.. default-domain:: mongodb

Overview
--------

|mms| supports SSL for encrypting the following connections made by
Monitoring Agents:

- Connections between the Monitoring Agents and MongoDB instances.

- Connections between the Monitoring Agents and |mms|.

Prerequisite
------------

To configure the agent to use SSL, you must have a trusted CA
certificate that signed the MongoDB instance's certificate.

Procedures
----------

Connections between Agents and MongoDB Instances
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To use SSL for the Monitoring Agent's connection to a MongoDB host, specify
the host's SSL settings when :doc:`adding the host
</tutorial/add-hosts-to-monitoring>` or by :doc:`editing the host's settings
</tutorial/edit-host-ssl-use>`.

Then configure the agent to use SSL:

.. include:: /includes/steps/monitoring-agent-configure-ssl.rst

.. note::

   For additional information on SSL settings, including client
   certificate support, see :ref:`monitoring-agent-ssl-settings`.

Connections between Agents and |mms|
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. only:: classic or cloud

   The Monitoring Agents always use SSL when connecting to |mms|.

.. only:: onprem

   To ensure that the Monitoring Agents use SSL when connecting to |mms|,
   use an HTTPS proxy in front of |mms|. For the settings the Monitoring
   Agent uses to connect to |mms|, see :manual:`Configure mongod and
   mongos for SSL </tutorial/configure-ssl>`.

   Starting with |mms| 1.4, the Monitoring Agent validates the SSL
   certificate of the |mms| by default.

   If you are not using a certificate signed by a trusted 3rd party,
   you must configure the Monitoring Agent to trust |mms|.

   To specify a self-signed certificate for |mms| that the
   Monitoring Agent should trust:

   .. include:: /includes/steps/on-prem-monitoring-agent-configure-trust.rst
