title: "Define your AWS S3 data store."
level: 4
ref: define-s3-json-data-store
content: | 
  Edit the |json| configuration settings shown in the UI for 
  ``stores``. Your ``stores`` cofiguration setting should resemble the 
  following:

  .. literalinclude:: /includes/data-federation/s3-stores-config-format.json
     :language: json

  To learn more about these configuration settings, see 
  :ref:`adf-aws-stores-reference`.
--- 
title: "Define your {+fdi+} virtual databases, collections, and views."
level: 4
ref: define-s3-json-db-coll
content: | 
  Edit the |json| configuration settings shown in the UI for 
  ``databases``. Your ``databases`` cofiguration setting should 
  resemble the following:

  .. literalinclude:: /includes/data-federation/s3-databases-config-format.json
     :language: json

  To learn more about these configuration settings, see 
  :ref:`adf-aws-databases-reference`.
---
title: "Repeat steps 1 and 2 in the |json| Editor tab above to define 
       additional |aws| |s3| data stores and virtual databases, 
       collections, and views that map to the stores."
optional: true
level: 4
ref: additional-s3-json-data-stores
content: | 
  To add |service| or |http| data stores for federated queries, see: 

  - :ref:`deploy-atlas-datastore`
  - :ref:`deploy-atlas-datastore`

  .. seealso:: 

   - :ref:`federated-queries`  
   - :ref:`federated-config-eg`

---
title: "Click :guilabel:`Save` to create the {+fdi+}."
level: 4
ref: save-configuration
content: | 

  .. note:: 

     If {+adf+} is unable to read the specified |s3| bucket, it 
     displays a modal to: 

     - :guilabel:`Cancel` this operation and specify a different |iam| 
       role to retrieve the object metadata from the specified |s3| 
       bucket. 
     - :guilabel:`Use Role Anyway` to create the {+fdi+} for the 
       specified bucket using the specified |iam| role. 
       
...
