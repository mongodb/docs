==================================
Frequently Asked Questions: Backup
==================================

.. contents::
   :backlinks: none
   :local:

Operations
----------

Where should I run the Backup agent?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The agent should typically be run on its own host, though this is not required. At a minimum, we recommend that you not run it on the same host as a mongod instance to avoid resource contention. Performance is primarily network-bound; CPU and RAM requirements are low.

Will the MongoDB Backup Service impact my production databases?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

MongoDB Backup Service will typically have minimal impact on production MongoDB deployments. This impact will be similar to that of adding a new secondary to a replica set. The agent can perform the initial sync from a secondary replica. It can also perform the initial sync from a primary, but syncing from a secondary will avoid any impact on the performance of the primary. The Backup Service agent will consume additional network capacity, but for most environments this should have negligible impact.

Is my data safe?
~~~~~~~~~~~~~~~~

Yes, 10gen uses enterprise-grade hardware and multiple secure data centers for hosting your data. The Backup Service agent encrypts data using SSL and two-factor authentication is required for all restores.

Is there a limit to Backup size?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Currently the Backup Service is limited to 500
gigabytes per user group.

How can 10gen provide point-in-time restores for any point in time?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Although it is faster to provide a restore for the time at which a snapshot was actually stored, 10gen can build a restore to any point in time within a 24-hour period by replaying the oplog to the desired time.

Can I take snapshots more or less often than every 6 hours?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Currently users cannot configure the snapshot schedule.

.. _backup-faq-retention:

Can I set my own snapshot retention policy?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Currently users cannot set custom snapshot retention policies. The current snapshot retention policy is as follows:

- 6-hour interval snapshots for 2 days,
- Daily snapshots stored for 1 week,
- Weekly snapshots stored for 1 month, and
- Monthly snapshots stored for 1 year.

How many copies of my data does the Backup Service store?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Although we only charge you for only one copy of the data, we store at least 3 copies of it in at least 2 geographic locations to ensure redundancy.

How long does it take to create a restore?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Time to restore is typically 2 min per GB of snapshot data, plus transfer time. In addition, point-in-time restores will take more time. This will vary depending on a number of factors, including the volume of data and number of updates made to the database (i.e., oplog size) between the time of the utilized snapshot and the point in time chosen.

Does the Backup Service perform any data validation?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

MongoDB Backup Service conducts basic corruption checks and provides an alert if any component (e.g., the agent) is down or broken, but does not perform explicit data validation. We err on the side of caution and invalidate the current backup if corruption is detected; we also send an alert if this happens.

How do I restore? What do I get when I restore?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
You can request a restore via MMS, where you can then choose which snapshot to restore and how it will be delivered. All restores require 2-factor authentication. We will send an authorization code via SMS code to your administrator, which must then be entered to begin the restore process.

Restores are delivered as tar.gzs of data files.

Restore delivery options are:
- SCP to your host – this requires you to provide connection information
- Download – we generate a custom, one-time-use URL from which you can download the restore.


What is the SCP public key for the Backup System?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The SCP public key for the Backup System is shown below. Add this key
to your SSH configuration to allow password-less uploads of backup
snapshots.

:: 

   ssh-dss AAAAB3NzaC1kc3MAAACBAPz6SsWWZpv8hnlOwiy7mvuBYjF4mZGpb89OC3B0lUOtFVQpOkgdxLaLnXuSo9UzhqAmVwxxb65FrPfwrvQsvGgBk0ZvUdIo1/quc5E87siNcqvsACd1QeiXsIROmzwHzaC9nwkSDK3Poih0z437TjUVxMXK0pbTI6MIFum6OgTVAAAAFQDGSkiers+ggnZGjMIz2VnmQoOrGwAAAIEAuRnOp6sEaJOyr15MsB+pdzBXd9Y1E9Y0/EDWJqa/f4KW6dCW7jUbt+w+WsgFShqomH5tHGPYK04+jg3uS94r/shZzpS1caKgTAR0/ofqHxDHc+PYw0NublFZsgkdshyVWG9GWgNNFV79y7EH0JQUnA7ErJEN+Fj+imA1+uScXx8AAACBAPqS59KXMEHuL+JQQgO72JTwb6S8qdbI5lXaraAVNcrsNLcDHc9GKFON/BnoGZLUWi4CdZMq8wFy7sgC8cMQ9YsmwXQpkRLVrmWouhgmNJzK3Sfd7zcQ/5ZBxmVyPhekwTI7aW3tSTrmlw30Tk3oBVicU7ouVvw4czcK4NoGtH75 brs-d@10gen.com
            

Pricing
-------

How does the Backup Service calculate snapshot storage costs?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- We calculate snapshot storage costs based on raw storage size (not file size) at a rate of $0.08 per GB per month. This is the sum of all allocated extents and is typically smaller than file size. We require a minimum charge of $0.10 per replica set per day.
- Storage cost is calculated until the snapshot is purged (according to the policy described under "Can I set my own snapshot retention policy?").


How do you calculate the cost of network data transfer in?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The cost of data transfer in is based on uncompressed data size at a rate of $2 per GB. It applies only to oplog transfer, and not to initial syncs or resyncs.

What is the snapshot creation cost?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The snapshot creation cost is the cost to build a snapshot, which is charged on a one- time basis per snapshot and is calculated based on the size of the snapshot ($0.01 per GB).

What other costs does the Backup Service incur?
-----------------------------------------------

In addition to snapshot storage and creation costs and the network
transfter cost, the Backup Service incurs a minimum cost of $0.10 per
replica set per day.

What is the billing frequency and schedule?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You will recieve a monthly bill for the backup service; however, the
service calculates costs every day.

What is the cost of a restoration?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The is no cost to create a restore.


