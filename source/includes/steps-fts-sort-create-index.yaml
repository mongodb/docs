stepnum: 1
level: 4
ref: nav-to-fts-sort
inherit:
  file: steps-source-project-nav.yaml
  ref: project-nav-search
---
stepnum: 2
level: 4
ref: click-create-fts-index-sort
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-fts-index
---
level: 4
stepnum: 3
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: select-a-configuration-method
---
stepnum: 4
level: 4
ref: enter-index-name-fts-sort
title: "Enter the :guilabel:`Index Name`, and set the :guilabel:`Database and Collection`." 
content: |

  a. In the :guilabel:`Index Name` field, enter ``sort-tutorial``.

     .. include:: /includes/default-fts-index-name.rst 

  #. In the :guilabel:`Database and Collection` section, find the 
     ``sample_mflix`` database, and select the ``movies`` collection.
---
stepnum: 5
level: 4
ref: enter-index-definition-sort
title: "Specify an index definition."
content: |
  The following index definition:   

  - Indexes the ``awards.wins`` field as the :ref:`number
    <bson-data-types-number>` type for both querying and sorting the
    results by the field. 
  - Indexes the ``released`` field as the :ref:`date
    <bson-data-types-date>` type for both querying and sorting the results by 
    the field. 
  - Specifies the :ref:`keyword <ref-keyword-analyzer>` analyzer for both
    indexing and searching the ``title`` field, and indexes the
    ``title`` field as the following types:  

    - :ref:`string <bson-data-types-string>` type for querying the field.
    - :ref:`token <bson-data-types-token>` type for sorting the results
      by the field.

    You can use the :guilabel:`Visual Editor` or the :guilabel:`JSON 
    Editor` in the {+atlas-ui+} to create the index.

  .. tabs:: 
  
     .. tab:: Visual Editor
        :tabid: vib
  
        a. Click :guilabel:`Next`.
        #. Click :guilabel:`Refine Your Index`.
        #. In the :guilabel:`Index Configurations` section, toggle to
           disable :guilabel:`Dynamic Mapping`. 
        #. In the :guilabel:`Field Mappings` section, click
           :guilabel:`Add Field` to display the :guilabel:`Add Field
           Mapping` window. 
        #. For the following fields, one at a time, select the field
           name and data type from the corresponding dropdowns,
           configure the properties if any or accept default, and click
           :guilabel:`Add`. 

           .. list-table:: 
              :header-rows: 1 

              * - Field Name 
                - Data Type 
                - Properties 

              * - ``awards.wins``
                - Number
                - Accept default.
              
              * - ``released``
                - Date
                - Accept default.

              * - ``title`` 
                - Token 
                - Accept default. 

              * - ``title`` 
                - String 
                - Select ``lucene.keyword`` from both the
                  :guilabel:`Index Analyzer` and :guilabel:`Search
                  Analyzer` dropdowns. 

     .. tab:: JSON Editor
        :tabid: jsonib
  
        a. Replace the default index definition with the following definition.

           .. code-block:: json
              :copyable: true 

              {
                "mappings": {
                  "dynamic": false,
                  "fields": {
                    "awards": {
                      "dynamic": false,
                      "fields": {
                        "wins": [
                          {
                            "type": "number"
                          }
                        ]
                      },
                      "type": "document"
                    },
                    "released": [
                      {
                        "type": "date"
                      }
                    ],
                    "title": [{
                      "type": "token"
                    }, {
                      "type": "string",
                      "analyzer": "lucene.keyword",
                      "searchAnalyzer": "lucene.keyword"
                    }]
                  }
                }
              }

        #. Click :guilabel:`Next`.
---
ref: click-create-index-fts-sort
level: 4
stepnum: 6
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-search-index
---
ref: close-in-progress-fts-sort
level: 4
stepnum: 7
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: close-in-progress
---
ref: wait-for-index-fts-sort
level: 4
stepnum: 8
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: wait-for-index
---
