.. _js-administrative-methods:

===================
``mongosh`` Methods
===================

.. meta:: 
   :description: Mongosh methods for interacting with your data and deployments.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: twocols

Introduction
------------

This page contains :binary:`~bin.mongosh` methods.

.. include:: /includes/extracts/admonition-js-prevalence-methods.rst

Native Methods
--------------

The methods listed in this section are :binary:`mongosh` functional
replacements for the native methods that were available in the legacy 
``mongo`` shell. These methods are not exact replacements: output 
formats and some functionality may differ from the corresponding 
legacy methods.

In addition to these methods, the `mongocompat snippet
<https://github.com/mongodb-labs/mongosh-snippets/blob/main/snippets/mongocompat/index.js>`__
provides access to legacy :binary:`mongo` shell APIs.

.. note::

   In the following table ``<path>`` and ``<filename>`` are strings and
   should be in quotes.

   .. code-block:: javascript
      :copyable: false

      // process.chdir( <path> )

      process.chdir( "./data/incoming" )

.. include:: /includes/method/native-methods.rst

.. _atlas-search-index-methods:

Atlas Search Index
------------------

.. versionadded:: 7.0 (*Also available starting in 6.0.7*)

.. include:: /includes/atlas-search-commands/mongosh-method-intro.rst

.. |fts-index| replace:: {+fts+} index or {+avs+} index

.. |fts-indexes| replace:: {+fts+} indexes or {+avs+} indexes

.. include:: /includes/atlas-search-commands/mongosh-method-table.rst

.. _doc-stream-methods:

Atlas Stream Processing
-----------------------

:atlas:`Atlas Stream Processors
</atlas-sp/overview/#mongodb-expression-exp.Stream-Processor>`
let you perform aggregation operations against streams of
continuous data using the same data model and query API that
you use with at-rest data.

Use the following methods to manage Stream Processors:

.. important::

   The following methods can only be run on deployments hosted on
   :atlas:`MongoDB Atlas </>`.

.. list-table::
   :widths: 30 70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`sp.createStreamProcessor()`

     - Creates a stream processor.

   * - :method:`sp.listStreamProcessors()`

     - Lists all existing stream processors on the current stream
       processing workspace.

   * - :method:`sp.process()`

     - Creates an ephemeral stream processor.

   * - :method:`sp.processor.drop()`

     - Deletes an existing stream processor.

   * - :method:`sp.processor.sample()`

     - Returns an array of sampled results from a currently running stream processor.

   * - :method:`sp.processor.start()`

     - Starts an existing stream processor.

   * - :method:`sp.processor.stats()`

     - Returns statistics summarizing an existing stream processor.

   * - :method:`sp.processor.stop()`

     - Stops a currently running stream processor.

.. _collection-method: 

Collections
-----------

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`db.collection.analyzeShardKey()`

     - Calculates metrics for evaluating a shard key.

   * - :method:`db.collection.aggregate()`

     - Provides access to the :ref:`aggregation pipeline <aggregation-pipeline>`.

   * - :method:`db.collection.bulkWrite()`

     - Provides bulk write operation functionality.

   * - :method:`db.collection.compactStructuredEncryptionData()`

     - Wraps :dbcommand:`compactStructuredEncryptionData` to return
       a success or failure object.
   
   * - :method:`db.collection.configureQueryAnalyzer()`

     - Configures query sampling for a collection.

   * - :method:`db.collection.count()`

     - Wraps :dbcommand:`count` to return a count of the number of documents in a collection or a view.

   * - :method:`db.collection.countDocuments()`

     - Wraps the :pipeline:`$group` aggregation stage with a :group:`$sum`
       expression to return a count of the number of documents in a
       collection or a view.

   * - :method:`db.collection.createIndex()`

     - Builds an index on a collection.

   * - :method:`db.collection.createIndexes()`

     - Builds one or more indexes on a collection.

   * - :method:`db.collection.dataSize()`

     - Returns the size of the collection. Wraps the :data:`~collStats.size` field in the output of the :dbcommand:`collStats`.

   * - :method:`db.collection.deleteOne()`

     - Deletes a single document in a collection.

   * - :method:`db.collection.deleteMany()`

     - Deletes multiple documents in a collection.

   * - :method:`db.collection.distinct()`

     - Returns an array of documents that have distinct values for the specified field.

   * - :method:`db.collection.drop()`

     - Removes the specified collection from the database.

   * - :method:`db.collection.dropIndex()`

     - Removes a specified index on a collection.

   * - :method:`db.collection.dropIndexes()`

     - Removes all indexes on a collection.

   * - :method:`db.collection.estimatedDocumentCount()`

     - Wraps :dbcommand:`count` to return an approximate count of the documents in a collection or a view.

   * - :method:`db.collection.explain()`

     - Returns information on the query execution of various methods.

   * - :method:`db.collection.find()`

     - Performs a query on a collection or a view and returns a cursor object.

   * - :method:`db.collection.findAndModify()`

     - Atomically modifies and returns a single document.

   * - :method:`db.collection.findOne()`

     - Performs a query and returns a single document.

   * - :method:`db.collection.findOneAndDelete()`

     - Finds a single document and deletes it.

   * - :method:`db.collection.findOneAndReplace()`

     - Finds a single document and replaces it.

   * - :method:`db.collection.findOneAndUpdate()`

     - Finds a single document and updates it.

   * - :method:`db.collection.getIndexes()`

     - Returns an array of documents that describe the existing indexes on a collection.

   * - :method:`db.collection.getShardDistribution()`

     - For collections in sharded clusters, :method:`db.collection.getShardDistribution()` reports data of :term:`chunk` distribution.

   * - :method:`db.collection.getShardVersion()`

     - Internal diagnostic method for sharded cluster.

   * - :method:`db.collection.hideIndex()`

     - Hides an index from the query planner.

   * - :method:`db.collection.insert()`

     - **Deprecated**. For alternative methods, see :ref:`compatibility`.

   * - :method:`db.collection.insertOne()`

     - Inserts a new document into a collection.

   * - :method:`db.collection.insertMany()`

     - Inserts several new documents into a collection.

   * - :method:`db.collection.isCapped()`

     - Reports if a collection is a :term:`capped collection`.

   * - :method:`db.collection.latencyStats()`

     - Returns latency statistics for a collection.

   * - :method:`db.collection.mapReduce()`

     - Performs map-reduce style data aggregation.

   * - :method:`db.collection.reIndex()`

     - Rebuilds all existing indexes on a collection.

   * - :method:`db.collection.remove()`

     - Deletes documents from a collection.

   * - :method:`db.collection.renameCollection()`

     - Changes the name of a collection.

   * - :method:`db.collection.replaceOne()`

     - Replaces a single document in a collection.

   * - :method:`db.collection.stats()`

     - Reports on the state of a collection. Provides a wrapper around the :dbcommand:`collStats`.

   * - :method:`db.collection.storageSize()`

     - Reports the total size used by the collection in bytes. Provides a wrapper around the :data:`~collStats.storageSize` field of the :dbcommand:`collStats` output.

   * - :method:`db.collection.totalIndexSize()`

     - Reports the total size used by the indexes on a collection. Provides a wrapper around the :data:`~collStats.totalIndexSize` field of the :dbcommand:`collStats` output.

   * - :method:`db.collection.totalSize()`

     - Reports the total size of a collection, including the size of all documents and all indexes on a collection.

   * - :method:`db.collection.unhideIndex()`

     - Unhides an index from the query planner.

   * - :method:`db.collection.update()`

     - **Deprecated**. For alternative methods, see :ref:`compatibility`.

   * - :method:`db.collection.updateOne()`

     - Modifies a single document in a collection.

   * - :method:`db.collection.updateMany()`

     - Modifies multiple documents in a collection.

   * - :method:`db.collection.watch()`

     - Establishes a Change Stream on a collection.

   * - :method:`db.collection.validate()`

     - Performs diagnostic operations on a collection.

.. _js-query-cursor-methods:
.. _doc-cursor-methods:

Cursors
-------

These methods modify the way that the underlying query is executed.

.. list-table::
   :widths: 35, 70
   :header-rows: 1
    
   * - Name

     - Description

   * - :method:`cursor.addOption()`

     - Adds special wire protocol flags that modify the behavior of the query.'

   * - :method:`cursor.allowDiskUse()`

     - Allows MongoDB to use temporary files on disk to store data exceeding the 100
       megabyte system memory limit while processing an in-memory sort operation.

   * - :method:`cursor.batchSize()`

     - Controls the number of documents MongoDB will return to the client in a single network message.

   * - :method:`cursor.close()`

     - Close a cursor and free associated server resources.

   * - :method:`cursor.collation()`

     - Specifies the collation for the cursor returned by the :method:`db.collection.find()`.

   * - :method:`cursor.comment()`

     - Attaches a comment to the query to allow for traceability in the logs and the system.profile collection.

   * - :method:`cursor.count()`

     - Modifies the cursor to return the number of documents in the result set rather than the documents themselves.

   * - :method:`cursor.disableBlockWarnings()`

     - Silence warnings that ``mongosh`` prints when you run blocking
       calls on cursors, such as ``.next()`` or ``.hasNext()`` on
       tailable cursors.
   
   * - :method:`cursor.explain()`

     - Reports on the query execution plan for a cursor.

   * - :method:`cursor.forEach()`

     - Applies a JavaScript function for every document in a cursor.

   * - :method:`cursor.hasNext()`

     - Returns true if the cursor has documents and can be iterated.

   * - :method:`cursor.hint()`

     - Forces MongoDB to use a specific index for a query.

   * - :method:`cursor.isClosed()`

     - Returns ``true`` if the cursor is closed.

   * - :method:`cursor.isExhausted()`

     - Returns ``true`` if the cursor is closed *and* there are no objects remaining in the batch.

   * - :method:`cursor.itcount()`

     - Computes the total number of documents in the cursor client-side by fetching and iterating the result set.

   * - :method:`cursor.limit()`

     - Constrains the size of a cursor's result set.

   * - :method:`cursor.map()`

     - Applies a function to each document in a cursor and collects the return values in an array.

   * - :method:`cursor.max()`

     - Specifies an exclusive upper index bound for a cursor. For use with :method:`cursor.hint()`

   * - :method:`cursor.maxAwaitTimeMS()`

     - Specifies a limit in milliseconds to wait for the next query
       result update.

   * - :method:`cursor.maxTimeMS()`

     - Specifies a cumulative time limit in milliseconds for processing operations on a cursor.

   * - :method:`cursor.min()`

     - Specifies an inclusive lower index bound for a cursor. For use with :method:`cursor.hint()`

   * - :method:`cursor.next()`

     - Returns the next document in a cursor.

   * - :method:`cursor.noCursorTimeout()`

     - Instructs the server to avoid closing a cursor automatically after a period of inactivity.

   * - :method:`cursor.objsLeftInBatch()`

     - Returns the number of documents left in the current cursor batch.

   * - :method:`cursor.pretty()`

     - Configures the cursor to display results in an easy-to-read format.

   * - :method:`cursor.readConcern()`

     - Specifies a :term:`read concern` for a :method:`find() <db.collection.find()>` operation.

   * - :method:`cursor.readPref()`

     - Specifies a :term:`read preference` to a cursor to control how the client directs queries to a :term:`replica set`.

   * - :method:`cursor.returnKey()`

     - Modifies the cursor to return index keys rather than the documents.

   * - :method:`cursor.showRecordId()`

     - Adds an internal storage engine ID field to each document returned by the cursor.

   * - :method:`cursor.size()`

     - Returns a count of the documents in the cursor after applying :method:`~cursor.skip()` and :method:`~cursor.limit()` methods.

   * - :method:`cursor.skip()`

     - Returns a cursor that begins returning results only after passing or skipping a number of documents.

   * - :method:`cursor.sort()`

     - Returns results ordered according to a sort specification.

   * - :method:`cursor.tailable()`

     - Marks the cursor as tailable. Only valid for cursors over capped collections.

   * - :method:`cursor.toArray()`

     - Returns an array that contains all documents returned by the cursor.

   * - :method:`cursor.tryNext()`

     - Returns the next element in the iteration if available or else
       null.

.. _js-database:

Databases
---------

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`db.adminCommand()`

     - Runs a command against the ``admin`` database.

   * - :method:`db.aggregate()`

     - Runs admin/diagnostic pipeline which does not require an underlying collection.

   * - :method:`db.commandHelp()`

     - Returns help information for a :term:`database command`.

   * - :method:`db.createCollection()`

     - Creates a new collection or a view. Commonly used to create a capped collection.

   * - :method:`db.createView()`

     - Creates a view.

   * - :method:`db.currentOp()`

     - Reports the current in-progress operations.

   * - :method:`db.dropDatabase()`

     - Removes the current database.

   * - :method:`db.fsyncLock()`

     - Flushes writes to disk and locks the database to prevent write operations and assist backup operations. Wraps :dbcommand:`fsync`.

   * - :method:`db.fsyncUnlock()`

     - Allows writes to continue on a database locked with :method:`db.fsyncLock()`.

   * - :method:`db.getCollection()`

     - Returns a collection or view object. Used to access collections with names that are not valid in :binary:`~bin.mongosh`.

   * - :method:`db.getCollectionInfos()`

     - Returns collection information for all collections and views in the current database.

   * - :method:`db.getCollectionNames()`

     - Lists all collections and views in the current database.

   * - :method:`db.getLogComponents()`

     - Returns the log message verbosity levels.

   * - :method:`db.getMongo()`

     - Returns the :method:`Mongo()` connection object for the current connection.

   * - :method:`db.getName()`

     - Returns the name of the current database.

   * - :method:`db.getProfilingStatus()`

     - Returns a document that reflects the current profiling level and the profiling threshold.

   * - :method:`db.getReplicationInfo()`

     - Returns a document with replication statistics.

   * - :method:`db.getSiblingDB()`

     - Provides access to the specified database.

   * - :method:`db.hello()`

     - Returns a document that reports the state of the replica set.

   * - :method:`db.help()`

     - Displays descriptions of common ``db`` object methods.

   * - :method:`db.hostInfo()`

     - Returns a document with information about the system MongoDB runs on. Wraps :dbcommand:`hostInfo`

   * - :method:`db.killOp()`

     - Terminates a specified operation.

   * - :method:`db.listCommands()`

     - Displays a list of common database commands.

   * - :method:`db.logout()`

     - *Deprecated*. Ends an authenticated session.

   * - :method:`db.printCollectionStats()`

     - Prints statistics from every collection. Wraps :method:`db.collection.stats()`.

   * - :method:`db.printReplicationInfo()`

     - Prints a report of the status of the replica set from the perspective of the primary.

   * - :method:`db.printSecondaryReplicationInfo()`

     - Prints the status of the replica set from the
       perspective of the secondaries.

   * - :method:`db.printShardingStatus()`

     - Prints a report of the sharding configuration and the chunk ranges.

   * - :method:`db.rotateCertificates()`

     - Performs online TLS certificate rotation. Wraps
       :dbcommand:`rotateCertificates`.

   * - :method:`db.runCommand()`

     - Runs a :ref:`database command <database-commands>`.

   * - :method:`db.serverBuildInfo()`

     - Returns a document that displays the compilation parameters for the :binary:`~bin.mongod` instance. Wraps :dbcommand:`buildInfo`.

   * - :method:`db.serverCmdLineOpts()`

     - Returns a document with information about the runtime used to start the MongoDB instance. Wraps :dbcommand:`getCmdLineOpts`.

   * - :method:`db.serverStatus()`

     - Returns a document that provides an overview of the state of the database process.

   * - :method:`db.setLogLevel()`

     - Sets a single log message verbosity level.

   * - :method:`db.setProfilingLevel()`

     - Modifies the current level of database profiling.

   * - :method:`db.shutdownServer()`

     - Shuts down the current :binary:`~bin.mongod` or :binary:`~bin.mongos` process cleanly and safely.

   * - :method:`db.stats()`

     - Returns a document that reports on the state of the current database.

   * - :method:`db.version()`

     - Returns the version of the :binary:`~bin.mongod` instance.

   * - :method:`db.watch()`

     - Opens a :ref:`change stream cursor <changeStreams>` for a database
       to report on all its non-``system`` collections. Cannot be opened on
       the ``admin``, ``local`` or ``config`` databases.

Query Plan Caches
-----------------

The PlanCache methods are only accessible from a collection's plan
cache object. To retrieve the plan cache object, use the
:method:`db.collection.getPlanCache()` method.

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`db.collection.getPlanCache()`

     - Returns an interface to access the query plan cache object and
       associated PlanCache methods for a collection.
   
   * - :method:`PlanCache.clear()`

     - Clears all the cached query plans for a collection.
       Accessible through the plan cache object of a specific collection,
       i.e. ``db.collection.getPlanCache().clear()``.
   
   * - :method:`PlanCache.clearPlansByQuery()`

     - Clears the cached query plans for the specified :term:`plan cache query shape`.
       Accessible through the plan cache object of a specific collection,
       i.e. ``db.collection.getPlanCache().clearPlansByQuery()``
   
   * - :method:`PlanCache.help()`

     - Displays the methods available for a collection's query plan cache.
       Accessible through the plan cache object of a specific collection,
       i.e. ``db.collection.getPlanCache().help()``.

   * - :method:`PlanCache.list()`

     - Returns the plan cache information for a collection. Accessible
       through the plan cache object of a specific collection, i.e.
       ``db.collection.getPlanCache().list()``.

.. _bulk-operation-methods:

Bulk Operations
---------------

.. include:: /includes/fact-bulkwrite.rst

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`db.collection.initializeOrderedBulkOp()`

     - Initializes a :method:`Bulk()` operations builder for an ordered list of operations.

   * - :method:`db.collection.initializeUnorderedBulkOp()`

     - Initializes a :method:`Bulk()` operations builder for an unordered list of operations.

   * - :method:`Mongo.bulkWrite()`
     
     - Executes bulk write operations on multiple namespaces.

   * - :method:`Bulk()`

     - Bulk operations builder.

   * - :method:`Bulk.execute()`

     - Executes a list of operations in bulk.

   * - :method:`Bulk.find()`

     - Specifies the query condition for an update or a remove operation.

   * - :method:`Bulk.find.arrayFilters()`

     - Specifies the filters that determine which elements of an array to update for an ``update`` or ``updateOne`` operation.

   * - :method:`Bulk.find.collation()`

     - Specifies the :ref:`collation <collation>` for the query condition.

   * - :method:`Bulk.find.delete()`
     - Adds a multiple document delete operation to a list of operations.

   * - :method:`Bulk.find.deleteOne()`
     - Adds a single document delete operation to a list of operations.

   * - :method:`Bulk.find.hint()`

     - Specifies the index to use for the update/replace operation.

   * - :method:`Bulk.find.remove()`
     - An alias for ``Bulk.find.delete()``.

   * - :method:`Bulk.find.removeOne()`
     - An alias for ``Bulk.find.deleteOne()``.

   * - :method:`Bulk.find.replaceOne()`

     - Adds a single document replacement operation to a list of operations.

   * - :method:`Bulk.find.updateOne()`

     - Adds a single document update operation to a list of operations.

   * - :method:`Bulk.find.update()`

     - Adds a ``multi`` update operation to a list of operations.

   * - :method:`Bulk.find.upsert()`

     - Specifies ``upsert: true`` for an update operation.

   * - :method:`Bulk.getOperations()`

     - Returns an array of write operations executed in the :method:`Bulk()` operations object.

   * - :method:`Bulk.insert()`

     - Adds an insert operation to a list of operations.

   * - :method:`Bulk.toJSON()`
     - Returns a JSON document that contains the number of operations and batches in the :method:`Bulk()` operations object.

   * - :method:`Bulk.toString()`
     - Returns the :method:`Bulk.toJSON()` results as a string.

.. _user-management-methods:

User Management
---------------

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`db.auth()`

     - Authenticates a user to a database.

   * - :method:`db.changeUserPassword()`

     - Changes an existing user's password.

   * - :method:`db.createUser()`

     - Creates a new user.
   
   * - :method:`db.dropUser()`

     - Removes a single user.
   
   * - :method:`db.dropAllUsers()`

     - Deletes all users associated with a database.
   
   * - :method:`db.getUser()`

     - Returns information about the specified user.
   
   * - :method:`db.getUsers()`

     - Returns information about all users associated with a database.
   
   * - :method:`db.grantRolesToUser()`

     - Grants a role and its privileges to a user.
   
   * - :method:`db.removeUser()`

     - Deprecated. Removes a user from a database.

   * - :method:`db.revokeRolesFromUser()`

     - Removes a role from a user.
   
   * - :method:`db.updateUser()`

     - Updates user data.
   
   * - :method:`passwordPrompt()`

     - Prompts for the password as an alternative to specifying passwords
       directly in various :binary:`~bin.mongosh` user
       authentication/management methods.

.. _role-management-methods:

Role Management
---------------

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`db.createRole()`

     - Creates a role and specifies its privileges.
   
   * - :method:`db.dropRole()`

     - Deletes a user-defined role.
   
   * - :method:`db.dropAllRoles()`

     - Deletes all user-defined roles associated with a database.
   
   * - :method:`db.getRole()`

     - Returns information for the specified role.
   
   * - :method:`db.getRoles()`

     - Returns information for all the user-defined roles in a database.
   
   * - :method:`db.grantPrivilegesToRole()`

     - Assigns privileges to a user-defined role.
   
   * - :method:`db.revokePrivilegesFromRole()`

     - Removes the specified privileges from a user-defined role.
   
   * - :method:`db.grantRolesToRole()`

     - Specifies roles from which a user-defined role inherits privileges.
   
   * - :method:`db.revokeRolesFromRole()`

     - Removes inherited roles from a role.
   
   * - :method:`db.updateRole()`

     - Updates a user-defined role.

.. _replica-set-functions:

Replication
-----------

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`rs.add()`

     - Adds a member to a replica set.

   * - :method:`rs.addArb()`

     - Adds an :term:`arbiter` to a replica set.

   * - :method:`rs.conf()`

     - Returns the replica set configuration document.

   * - :method:`rs.freeze()`

     - Prevents the current member from seeking election as primary for a period of time.

   * - :method:`rs.help()`

     - Returns basic help text for :term:`replica set` functions.

   * - :method:`rs.initiate()`

     - Initializes a new replica set.

   * - :method:`rs.printReplicationInfo()`

     - Prints a formatted report of the replica set status from the
       perspective of the primary.

   * - :method:`rs.printSecondaryReplicationInfo()`

     - Prints a formatted report of the replica set status from the
       perspective of the secondaries.

   * - :method:`rs.reconfig()`

     - Re-configures a replica set by applying a new replica set configuration object.
  
   * - :method:`rs.reconfigForPSASet()`

     - Safely perform some reconfiguration changes on a primary-secondary-arbiter 
       (PSA) replica set or on a replica set that is changing to a PSA architecture.

   * - :method:`rs.remove()`

     - Remove a member from a replica set.

   * - :method:`rs.status()`

     - Returns a document with information about the state of the replica set.

   * - :method:`rs.stepDown()`

     - Causes the current :term:`primary` to become a secondary which forces an :term:`election`.

   * - :method:`rs.syncFrom()`

     - Sets the member that this replica set member will sync from, overriding the default sync target selection logic.

Sharding
--------

.. include:: /includes/mongosh-sharding-methods.rst

Object Constructors
-------------------

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`Binary.createFromBase64()`

     - Creates a binary object from a base64 value.

   * - :method:`Binary.createFromHexString()`

     - Creates a binary object from a hexadecimal value.

   * - :method:`BinData()`

     - Returns a :ref:`binary data object <document-bson-type-binary-data>`.

   * - :method:`BSONRegExp()`

     - Creates a :method:`BSONRegExp()`.

   * - :method:`BulkWriteResult()`

     - Wrapper around the result set from :method:`Bulk.execute()`.

   * - :method:`Date()`

     - Creates a date object. By default creates a date object including the current date.

   * - :method:`HexData()`

     - Returns a :ref:`binary data object <document-bson-type-binary-data>`.

   * - :method:`ObjectId()`

     - Returns an :term:`ObjectId`.

   * - :method:`ObjectId.createFromBase64()`

     - Creates an :term:`ObjectId` from a base64 value.

   * - :method:`ObjectId.createFromHexString()`

     - Creates an :term:`ObjectId` from a hexadecimal value.

   * - :method:`ObjectId.getTimestamp()`

     - Returns the timestamp portion of an :term:`ObjectId`.

   * - :method:`ObjectId.toString()`

     - Displays the string representation of an :term:`ObjectId`.

   * - :doc:`/reference/method/UUID`

     - Converts a 32-byte hexadecimal string to the UUID BSON subtype.

   * - :method:`WriteResult()`

     - Wrapper around the result set from write methods.

Connections
-----------

.. list-table::
   :widths: 30,70
   :header-rows: 1

   * - Name

     - Description

   * - :method:`connect()`

     - Connects to a MongoDB instance and to a specified database on that instance.

   * - :method:`Mongo()`

     - Creates a new connection object.

   * - :method:`Mongo.getDB()`

     - Returns a database object.

   * - :method:`Mongo.getDBNames()`

     - Returns a list of databases.

   * - :method:`Mongo.getDBs()`

     - Returns a document with a list of databases and metadata.

   * - :method:`Mongo.getURI()`

     - Returns the connection string for the current active connection.

   * - :method:`Mongo.getWriteConcern`

     - Returns the :term:`write concern` for the connection object.

   * - :method:`Mongo.getReadPrefMode()`

     - Returns the current read preference mode for the MongoDB connection.

   * - :method:`Mongo.getReadPrefTagSet()`

     - Returns the read preference tag set for the MongoDB connection.

   * - :method:`Mongo.setCausalConsistency()`

     - Enables or disables causal consistency on the connection object.

   * - :method:`Mongo.setReadPref()`

     - Sets the :term:`read preference` for the MongoDB connection.

   * - :method:`Mongo.setWriteConcern`

     - Sets the :term:`write concern` for the connection object.

   * - :method:`Mongo.startSession()`

     - Starts a session on the connection object.

   * - :method:`Mongo.watch()`

     - Opens a :ref:`change stream cursor <changeStreams>` for a deployment
       to report on all its non-``system`` collections across all its
       databases, excluding the internal ``admin``, ``local``, and
       ``config`` databases.
   
   * - :method:`Session`

     - The session object.

   * - :method:`SessionOptions`

     - The options object for the session.

.. _in-use-encryption-methods:

In-Use Encryption
-----------------

MongoDB supports two approaches to :ref:`In-Use Encryption <about-qe-csfle>`,
{+csfle+} (CSFLE) and {+qe+} (QE). ``ClientEncryption`` is an abstraction used
across drivers and :binary:`~bin.mongosh` that encapsulates operations for 
both CSFLE and QE. However, some methods are specific to one feature.

.. note::

   .. include:: /includes/extracts/csfle-requires-enabling-encryption.rst

.. include:: /includes/table-clientencryption-methods.rst

.. toctree::
   :titlesonly: 
   :hidden: 

   connect </reference/method/connect>
   Mongo </reference/method/Mongo>
   Mongo.getDB </reference/method/Mongo.getDB>
   Mongo.getDBNames </reference/method/Mongo.getDBNames>
   Mongo.getDBs </reference/method/Mongo.getDBs>
   Mongo.getReadPrefMode </reference/method/Mongo.getReadPrefMode>
   Mongo.getReadPrefTagSet </reference/method/Mongo.getReadPrefTagSet>
   Mongo.getURI </reference/method/Mongo.getURI>
   Mongo.getWriteConcern </reference/method/Mongo.getWriteConcern>
   Mongo.setCausalConsistency </reference/method/Mongo.setCausalConsistency>
   Mongo.setReadPref </reference/method/Mongo.setReadPref>
   Mongo.startSession </reference/method/Mongo.startSession>
   Mongo.setWriteConcern </reference/method/Mongo.setWriteConcern>
   Mongo.watch </reference/method/Mongo.watch>
   Session </reference/method/Session>
   SessionOptions </reference/method/SessionOptions>
   ClientEncryption.createEncryptedCollection </reference/method/ClientEncryption.createEncryptedCollection>
   ClientEncryption.encrypt </reference/method/ClientEncryption.encrypt>
   ClientEncryption.encryptExpression </reference/method/ClientEncryption.encryptExpression>
   ClientEncryption.decrypt </reference/method/ClientEncryption.decrypt>
   getClientEncryption </reference/method/getClientEncryption>
   getKeyVault </reference/method/getKeyVault>
   KeyVault.addKeyName </reference/method/KeyVault.addKeyName>
   KeyVault.addKeyAlternateName </reference/method/KeyVault.addKeyAlternateName>
   KeyVault.createDataKey </reference/method/KeyVault.createDataKey>
   KeyVault.createKey </reference/method/KeyVault.createKey>
   KeyVault.deleteKey </reference/method/KeyVault.deleteKey>
   KeyVault.getKey </reference/method/KeyVault.getKey>
   KeyVault.getKeys </reference/method/KeyVault.getKeys>
   KeyVault.getKeyByAltName </reference/method/KeyVault.getKeyByAltName>
   KeyVault.removeKeyAlternateName </reference/method/KeyVault.removeKeyAlternateName>
   KeyVault.removeKeyAltName </reference/method/KeyVault.removeKeyAltName>
   KeyVault.rewrapManyDataKey </reference/method/KeyVault.rewrapManyDataKey>
   rs.add </reference/method/rs.add>
   rs.addArb </reference/method/rs.addArb>
   rs.conf </reference/method/rs.conf>
   rs.freeze </reference/method/rs.freeze>
   rs.help </reference/method/rs.help>
   rs.initiate </reference/method/rs.initiate>
   rs.printReplicationInfo </reference/method/rs.printReplicationInfo>
   rs.printSecondaryReplicationInfo </reference/method/rs.printSecondaryReplicationInfo>
   rs.reconfig </reference/method/rs.reconfig>
   rs.reconfigForPSASet </reference/method/rs.reconfigForPSASet>
   rs.remove </reference/method/rs.remove>
   rs.status </reference/method/rs.status>
   rs.stepDown </reference/method/rs.stepDown>
   rs.syncFrom </reference/method/rs.syncFrom>
   convertShardKeyToHashed </reference/method/convertShardKeyToHashed>
   db.checkMetadataConsistency </reference/method/db.checkMetadataConsistency>
   db.collection.checkMetadataConsistency </reference/method/db.collection.checkMetadataConsistency>
   db.collection.getShardLocation <reference/method/db.collection.getShardLocation>
   sh.abortMoveCollection </reference/method/sh.abortMoveCollection>
   sh.abortReshardCollection </reference/method/sh.abortReshardCollection>
   sh.abortUnshardCollection </reference/method/sh.abortUnshardCollection>
   sh.addShard </reference/method/sh.addShard>
   sh.addShardTag </reference/method/sh.addShardTag>
   sh.addShardToZone </reference/method/sh.addShardToZone>
   sh.addTagRange </reference/method/sh.addTagRange>
   sh.balancerCollectionStatus </reference/method/sh.balancerCollectionStatus>
   sh.checkMetadataConsistency </reference/method/sh.checkMetadataConsistency>
   sh.commitReshardCollection </reference/method/sh.commitReshardCollection>
   sh.disableAutoMerger </reference/method/sh.disableAutoMerger>
   sh.disableAutoSplit </reference/method/sh.disableAutoSplit>
   sh.disableBalancing </reference/method/sh.disableBalancing>
   sh.disableMigrations </reference/method/sh.disableMigrations>
   sh.enableAutoMerger </reference/method/sh.enableAutoMerger>
   sh.enableBalancing </reference/method/sh.enableBalancing>
   sh.enableAutoSplit </reference/method/sh.enableAutoSplit>
   sh.enableMigrations </reference/method/sh.enableMigrations>
   sh.enableSharding </reference/method/sh.enableSharding>
   sh.getBalancerState </reference/method/sh.getBalancerState>
   sh.getShardedDataDistribution </reference/method/sh.getShardedDataDistribution>
   sh.help </reference/method/sh.help>
   sh.isBalancerRunning </reference/method/sh.isBalancerRunning>
   sh.isConfigShardEnabled </reference/method/sh.isConfigShardEnabled>
   sh.listShards </reference/method/sh.listShards>
   sh.moveChunk </reference/method/sh.moveChunk>
   sh.moveCollection </reference/method/sh.moveCollection>
   sh.moveRange </reference/method/sh.moveRange>
   sh.removeRangeFromZone </reference/method/sh.removeRangeFromZone>
   sh.removeShardTag </reference/method/sh.removeShardTag>
   sh.removeShardFromZone </reference/method/sh.removeShardFromZone>
   sh.removeTagRange </reference/method/sh.removeTagRange>
   sh.reshardCollection </reference/method/sh.reshardCollection>
   sh.setBalancerState </reference/method/sh.setBalancerState>
   sh.shardAndDistributeCollection </reference/method/sh.shardAndDistributeCollection>
   sh.shardCollection </reference/method/sh.shardCollection>
   sh.splitAt </reference/method/sh.splitAt>
   sh.splitFind </reference/method/sh.splitFind>
   sh.startAutoMerger </reference/method/sh.startAutoMerger>
   sh.startBalancer </reference/method/sh.startBalancer>
   sh.status </reference/method/sh.status>
   sh.stopAutoMerger </reference/method/sh.stopAutoMerger>
   sh.stopBalancer </reference/method/sh.stopBalancer>
   sh.unshardCollection </reference/method/sh.unshardCollection>
   sh.updateZoneKeyRange </reference/method/sh.updateZoneKeyRange>
   sh.waitForBalancer </reference/method/sh.waitForBalancer>
   sh.waitForBalancerOff </reference/method/sh.waitForBalancerOff>
   sh.waitForPingChange </reference/method/sh.waitForPingChange>
   db.createRole </reference/method/db.createRole>
   db.dropRole </reference/method/db.dropRole>
   db.dropAllRoles </reference/method/db.dropAllRoles>
   db.getRole </reference/method/db.getRole>
   db.getRoles </reference/method/db.getRoles>
   db.grantPrivilegesToRole </reference/method/db.grantPrivilegesToRole>
   db.revokePrivilegesFromRole </reference/method/db.revokePrivilegesFromRole>
   db.grantRolesToRole </reference/method/db.grantRolesToRole>
   db.revokeRolesFromRole </reference/method/db.revokeRolesFromRole>
   db.updateRole </reference/method/db.updateRole>
   db.auth </reference/method/db.auth>
   db.changeUserPassword </reference/method/db.changeUserPassword>
   db.createUser </reference/method/db.createUser>
   db.dropUser </reference/method/db.dropUser>
   db.dropAllUsers </reference/method/db.dropAllUsers>
   db.getUser </reference/method/db.getUser>
   db.getUsers </reference/method/db.getUsers>
   db.grantRolesToUser </reference/method/db.grantRolesToUser>
   db.removeUser </reference/method/db.removeUser>
   db.revokeRolesFromUser </reference/method/db.revokeRolesFromUser>
   db.updateUser </reference/method/db.updateUser>
   passwordPrompt </reference/method/passwordPrompt>
    db.collection.initializeOrderedBulkOp </reference/method/db.collection.initializeOrderedBulkOp>
   db.collection.initializeUnorderedBulkOp </reference/method/db.collection.initializeUnorderedBulkOp>
   Mongo.bulkWrite </reference/method/Mongo.bulkWrite>
   Bulk </reference/method/Bulk>
   Bulk.execute </reference/method/Bulk.execute>
   Bulk.find </reference/method/Bulk.find>
   Bulk.find.arrayFilters </reference/method/Bulk.find.arrayFilters>
   Bulk.find.collation </reference/method/Bulk.find.collation>
   Bulk.find.delete </reference/method/Bulk.find.delete>
   Bulk.find.deleteOne </reference/method/Bulk.find.deleteOne>
   Bulk.find.hint </reference/method/Bulk.find.hint>
   Bulk.find.remove </reference/method/Bulk.find.remove>
   Bulk.find.removeOne </reference/method/Bulk.find.removeOne>
   Bulk.find.replaceOne </reference/method/Bulk.find.replaceOne>
   Bulk.find.updateOne </reference/method/Bulk.find.updateOne>
   Bulk.find.update </reference/method/Bulk.find.update>
   Bulk.find.upsert </reference/method/Bulk.find.upsert>
   Bulk.getOperations </reference/method/Bulk.getOperations>
   Bulk.insert </reference/method/Bulk.insert>
   Bulk.tojson </reference/method/Bulk.tojson>
   Bulk.toString </reference/method/Bulk.toString>
   db.collection.getPlanCache </reference/method/db.collection.getPlanCache>
   PlanCache.clear </reference/method/PlanCache.clear>
   PlanCache.clearPlansByQuery </reference/method/PlanCache.clearPlansByQuery>
   PlanCache.help </reference/method/PlanCache.help>
   PlanCache.list </reference/method/PlanCache.list>
   db.adminCommand </reference/method/db.adminCommand>
   db.aggregate </reference/method/db.aggregate>
   db.commandHelp </reference/method/db.commandHelp>
   db.createCollection </reference/method/db.createCollection>
   db.createView </reference/method/db.createView>
   db.currentOp </reference/method/db.currentOp>
   db.dropDatabase </reference/method/db.dropDatabase>
   db.fsyncLock </reference/method/db.fsyncLock>
   db.fsyncUnlock </reference/method/db.fsyncUnlock>
   db.getCollection </reference/method/db.getCollection>
   db.getCollectionInfos </reference/method/db.getCollectionInfos>
   db.getCollectionNames </reference/method/db.getCollectionNames>
   db.getLogComponents </reference/method/db.getLogComponents>
   db.getMongo </reference/method/db.getMongo>
   db.getName </reference/method/db.getName>
   db.getProfilingStatus </reference/method/db.getProfilingStatus>
   db.getReplicationInfo </reference/method/db.getReplicationInfo>
   db.getSiblingDB </reference/method/db.getSiblingDB>
   db.hello </reference/method/db.hello>
   db.help </reference/method/db.help>
   db.hostInfo </reference/method/db.hostInfo>
   db.killOp </reference/method/db.killOp>
   db.listCommands </reference/method/db.listCommands>
   db.logout </reference/method/db.logout>
   db.printCollectionStats </reference/method/db.printCollectionStats>
   db.printReplicationInfo </reference/method/db.printReplicationInfo>
   db.printSecondaryReplicationInfo </reference/method/db.printSecondaryReplicationInfo>
   db.printShardingStatus </reference/method/db.printShardingStatus>
   db.rotateCertificates </reference/method/db.rotateCertificates>
   db.runCommand </reference/method/db.runCommand>
   db.serverBuildInfo </reference/method/db.serverBuildInfo>
   db.serverCmdLineOpts </reference/method/db.serverCmdLineOpts>
   db.serverStatus </reference/method/db.serverStatus>
   db.setLogLevel </reference/method/db.setLogLevel>
   db.setProfilingLevel </reference/method/db.setProfilingLevel>
   db.shutdownServer </reference/method/db.shutdownServer>
   db.stats </reference/method/db.stats>
   db.version </reference/method/db.version>
   db.watch </reference/method/db.watch>
   cursor.addOption </reference/method/cursor.addOption>
   cursor.allowDiskUse </reference/method/cursor.allowDiskUse>
   cursor.batchSize </reference/method/cursor.batchSize>
   cursor.close </reference/method/cursor.close>
   cursor.isClosed </reference/method/cursor.isClosed>
   cursor.collation </reference/method/cursor.collation>
   cursor.comment </reference/method/cursor.comment>
   cursor.count </reference/method/cursor.count>
   cursor.disableBlockWarnings </reference/method/cursor.disableBlockWarnings>
   cursor.explain </reference/method/cursor.explain>
   cursor.forEach </reference/method/cursor.forEach>
   cursor.hasNext </reference/method/cursor.hasNext>
   cursor.hint </reference/method/cursor.hint>
   cursor.isExhausted </reference/method/cursor.isExhausted>
   cursor.itcount </reference/method/cursor.itcount>
   cursor.limit </reference/method/cursor.limit>
   cursor.map </reference/method/cursor.map>
   cursor.max </reference/method/cursor.max>
   cursor.maxAwaitTimeMS </reference/method/cursor.maxAwaitTimeMS>
   cursor.maxTimeMS </reference/method/cursor.maxTimeMS>
   cursor.min </reference/method/cursor.min>
   cursor.next </reference/method/cursor.next>
   cursor.noCursorTimeout </reference/method/cursor.noCursorTimeout>
   cursor.objsLeftInBatch </reference/method/cursor.objsLeftInBatch>
   cursor.pretty </reference/method/cursor.pretty>
   cursor.readConcern </reference/method/cursor.readConcern>
   cursor.readPref </reference/method/cursor.readPref>
   cursor.returnKey </reference/method/cursor.returnKey>
   cursor.showRecordId </reference/method/cursor.showRecordId>
   cursor.size </reference/method/cursor.size>
   cursor.skip </reference/method/cursor.skip>
   cursor.sort </reference/method/cursor.sort>
   cursor.tailable </reference/method/cursor.tailable>
   cursor.toArray </reference/method/cursor.toArray>
   cursor.tryNext </reference/method/cursor.tryNext>
   db.collection.aggregate </reference/method/db.collection.aggregate>
   db.collection.analyzeShardKey </reference/method/db.collection.analyzeShardKey>
   db.collection.bulkWrite </reference/method/db.collection.bulkWrite>
   db.collection.compactStructuredEncryptionData </reference/method/db.collection.compactStructuredEncryptionData>
   db.collection.configureQueryAnalyzer </reference/method/db.collection.configureQueryAnalyzer>
   db.collection.count </reference/method/db.collection.count>
   db.collection.countDocuments </reference/method/db.collection.countDocuments>
   db.collection.createIndex </reference/method/db.collection.createIndex>
   db.collection.createIndexes </reference/method/db.collection.createIndexes>
   db.collection.dataSize </reference/method/db.collection.dataSize>
   db.collection.deleteMany </reference/method/db.collection.deleteMany>
   db.collection.deleteOne </reference/method/db.collection.deleteOne>
   db.collection.distinct </reference/method/db.collection.distinct>
   db.collection.drop </reference/method/db.collection.drop>
   db.collection.dropIndex </reference/method/db.collection.dropIndex>
   db.collection.dropIndexes </reference/method/db.collection.dropIndexes>
   db.collection.estimatedDocumentCount  </reference/method/db.collection.estimatedDocumentCount>
   db.collection.explain </reference/method/db.collection.explain>
   db.collection.find </reference/method/db.collection.find>
   db.collection.findAndModify </reference/method/db.collection.findAndModify>
   db.collection.findOne </reference/method/db.collection.findOne>
   db.collection.findOneAndDelete </reference/method/db.collection.findOneAndDelete>
   db.collection.findOneAndReplace </reference/method/db.collection.findOneAndReplace>
   db.collection.findOneAndUpdate </reference/method/db.collection.findOneAndUpdate>
   db.collection.getIndexes </reference/method/db.collection.getIndexes>
   db.collection.getShardDistribution </reference/method/db.collection.getShardDistribution>
   db.collection.getShardVersion </reference/method/db.collection.getShardVersion>
   db.collection.hideIndex </reference/method/db.collection.hideIndex>
   db.collection.insert </reference/method/db.collection.insert>
   db.collection.insertMany </reference/method/db.collection.insertMany>
   db.collection.insertOne </reference/method/db.collection.insertOne>
   db.collection.isCapped </reference/method/db.collection.isCapped>
   db.collection.latencyStats </reference/method/db.collection.latencyStats>
   db.collection.mapReduce </reference/method/db.collection.mapReduce>
   db.collection.reIndex </reference/method/db.collection.reIndex>
   db.collection.remove </reference/method/db.collection.remove>
   db.collection.renameCollection </reference/method/db.collection.renameCollection>
   db.collection.replaceOne </reference/method/db.collection.replaceOne>
   db.collection.stats </reference/method/db.collection.stats>
   db.collection.storageSize </reference/method/db.collection.storageSize>
   db.collection.totalIndexSize </reference/method/db.collection.totalIndexSize>
   db.collection.totalSize </reference/method/db.collection.totalSize>
   db.collection.unhideIndex </reference/method/db.collection.unhideIndex>
   db.collection.update </reference/method/db.collection.update>
   db.collection.updateMany </reference/method/db.collection.updateMany>
   db.collection.updateOne </reference/method/db.collection.updateOne>
   db.collection.validate </reference/method/db.collection.validate>
   db.collection.watch </reference/method/db.collection.watch>
   db.collection.createSearchIndex </reference/method/db.collection.createSearchIndex>
   db.collection.dropSearchIndex </reference/method/db.collection.dropSearchIndex>
   db.collection.getSearchIndexes </reference/method/db.collection.getSearchIndexes>
   db.collection.updateSearchIndex </reference/method/db.collection.updateSearchIndex>
   sp.createStreamProcessor </reference/method/sp.createStreamProcessor>
   sp.listConnections </reference/method/sp.listConnections>
   sp.listStreamProcessors </reference/method/sp.listStreamProcessors>
   sp.process </reference/method/sp.process>
   sp.processor.drop </reference/method/sp.processor.drop>
   sp.processor.sample </reference/method/sp.processor.sample>
   sp.processor.start </reference/method/sp.processor.start>
   sp.processor.stats </reference/method/sp.processor.stats>
   sp.processor.stop </reference/method/sp.processor.stop>
   Binary.createFromBase64 </reference/method/Binary.createFromBase64>
   Binary.createFromHexString </reference/method/Binary.createFromHexString>
   BinData </reference/method/BinData>
   BSONRegExp </reference/method/BSONRegExp>
   BulkWriteResult </reference/method/BulkWriteResult>
   Date </reference/method/Date>
   HexData </reference/method/HexData>
   ObjectId </reference/method/ObjectId>
   ObjectId.createFromBase64 </reference/method/ObjectId.createFromBase64>
   ObjectId.createFromHexString </reference/method/ObjectId.createFromHexString>
   ObjectId.getTimestamp </reference/method/ObjectId.getTimestamp>
   ObjectId.toString </reference/method/ObjectId.toString>
   UUID </reference/method/UUID>
   WriteResult </reference/method/WriteResult>
