ref: security
edition: onprem
content: |
  Overview
  --------

  To ensure the security of your |onprem|
  agents, |onprem| servers, and MongoDB deployments, |onprem| supports the
  security options described on this page.

  Security Options Available in the Current Version of |onprem|
  -------------------------------------------------------------

  The following table displays the security options available for the
  different types of connections in your |onprem| environment and provides
  links to setup instructions.

  .. list-table::
     :header-rows: 1

     * - 
       - Connections with |onprem|
       - Connections with Backing Databases
       - Connections with MongoDB Deployments
     * - |onprem|
       - *Not applicable.*
       - - :doc:`SSL </tutorial/configure-ssl-connection-to-backing-mongodb>`
         - :ref:`MONGODB-CR <mongodb-cr>`
         - :doc:`LDAP </tutorial/configure-for-ldap-authentication>`
         - :ref:`Kerberos <configuration-kerberos-settings>`
       - *Connects through the Monitoring, Backup, and Automation agents.
         See the row for each agent in this table.*
     * - Monitoring Agent
       - - :doc:`SSL </tutorial/configure-ssl-connection-to-web-interface>`
       - *Not applicable.*
       - - :doc:`SSL </tutorial/configure-monitoring-agent-for-ssl>`
         - :doc:`MONGODB-CR </tutorial/configure-monitoring-agent-for-cr>`
         - :doc:`LDAP </tutorial/configure-monitoring-agent-for-ldap>`
         - :doc:`Kerberos </tutorial/configure-monitoring-agent-for-kerberos>`
         - :doc:`x.509 </tutorial/configure-monitoring-agent-for-x509>`
     * - Backup Agent
       - - :doc:`SSL </tutorial/configure-ssl-connection-to-web-interface>`
       - *Not applicable.*
       - - :doc:`SSL </tutorial/configure-backup-agent-for-ssl>`
         - :doc:`MONGODB-CR </tutorial/configure-backup-agent-for-cr>`
         - :doc:`LDAP </tutorial/configure-backup-agent-for-ldap>`
         - :doc:`Kerberos </tutorial/configure-backup-agent-for-kerberos>`
         - :doc:`x.509 </tutorial/configure-backup-agent-for-x509>`
     * - Automation Agent
       - - :doc:`SSL </tutorial/configure-ssl-connection-to-web-interface>`
       - *Not applicable.*
       - - :doc:`SSL </tutorial/enable-ssl-for-a-deployment>`
         - :doc:`MONGODB-CR </tutorial/enable-mongodbcr-authentication-for-group>`
         - :doc:`LDAP </tutorial/enable-ldap-authentication-for-group>`
         - :doc:`Kerberos </tutorial/enable-kerberos-authentication-for-group>`
         - :doc:`x.509 </tutorial/enable-x509-authentication-for-group>`
     * - |onprem| user
       - - :doc:`SSL </tutorial/configure-ssl-connection-to-web-interface>`
         - :doc:`Ops Manager Authentication </tutorial/manage-users>`
         - :doc:`LDAP </tutorial/configure-for-ldap-authentication>`
       - *Not applicable.*
       - *See* :manual:`Authentication </core/authentication>` *in the
         MongoDB manual.*

  Supported User Authentication by |onprem| Version
  -------------------------------------------------

  The following table shows the available user authentication mechanisms and
  the release the mechanism became available.

  .. list-table::
     :header-rows: 1

     * - Method
       - |onprem| Versions
     * - Authentication against |application| database
       - 1.0+
     * - Authentication against LDAP
       - 1.4+

  Supported MongoDB Security Features on Linux
  --------------------------------------------

  This section describes supported security options on Linux.

  Connections Between |onprem| and the Backing Databases (Linux)
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  The following table shows security options for connections between
  |onprem| and the :ref:`mms-application-database` and
  :ref:`backup-database` when both run on Linux.

  .. list-table::
     :header-rows: 1

     * - 
       - Username/Password Authentication
       - MongoDB SSL Connections
       - Kerberos Authentication
       - MongoDB SSL Connections with Client Certificates
       - x509 Authentication
       - LDAP Authentication
     * - |onprem| Versions
       - 1.0+
       - 1.6+
       - 1.3+
       - 1.6+
       - 1.6+
       - 1.5+

  Connections Between Agents and MongoDB Deployments (Linux)
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  The following table shows the security options available for connections
  between agents and the MongoDB deployments they manage when the
  deployments run on Linux:

  .. list-table::
     :header-rows: 1

     * - 
       - Username/Password Authentication
       - MongoDB SSL Connections
       - Kerberos Authentication
       - MongoDB SSL Connections with Client Certificates
       - x509 Authentication
       - LDAP Authentication
     * - Monitoring Agent
       - 1.0+
       - 1.0+
       - 1.3+
       - 1.5+
       - 1.8
       - 1.5+
     * - Backup Agent
       - 1.4+
       - 1.4+
       - 1.4.1+
       - 1.5+
       - 1.8
       - 1.5+
     * - Automation Agent
       - 1.6+
       - 1.8
       - 1.8
       - 1.8
       - 1.8
       - 1.8

  Supported MongoDB Security Features on Windows
  ----------------------------------------------

  This section describes supported security options on Windows.

  Connections Between |onprem| and the Backing Databases (Windows)
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  The following table shows security options for connections between
  |onprem| and the :ref:`mms-application-database` and
  :ref:`backup-database` when both run on Windows.

  .. list-table::
     :header-rows: 1

     * - 
       - Username/Password Authentication
       - MongoDB SSL Connections
       - Kerberos Authentication
       - MongoDB SSL Connections with Client Certificates
       - x509 Authentication
       - LDAP Authentication
     * - |onprem| Versions
       - 1.5+
       - 1.6+
       - 
       - 1.6+
       - 1.6+
       - *Not applicable.*

  Connections Between Agents and MongoDB Deployments (Windows)
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  The following table shows the security options available for connections
  between agents and the MongoDB deployments they manage when the
  deployments run on Windows:

  .. list-table::
     :header-rows: 1

     * - 
       - Username/Password Authentication
       - MongoDB SSL Connections
       - Kerberos Authentication
       - MongoDB SSL Connections with Client Certificates
       - x509 Authentication
       - LDAP Authentication
     * - Monitoring Agent
       - 1.5+
       - 1.5+
       - 
       - 1.5+
       - 1.8
       - *Not applicable.*
     * - Backup Agent
       - 1.5+
       - 1.5+
       - 
       - 1.5+
       - 1.8
       - *Not applicable.*
     * - Automation Agent
       - 1.8
       - 1.8
       - 
       - 1.8
       - 1.8
       - *Not applicable.*

  .. note:: MongoDB for Windows does not support LDAP.

---
ref: security
edition: cloud
content: |

  Overview
  --------

  |mms| provides configurable encryption, authentication, and authorization
  to ensure the security of your |mms| agents and MongoDB deployments. |mms|
  supports :ref:`SSL <cloud-ssl>`, :ref:`cloud-mongodb-cr`,
  :ref:`cloud-ldap`, and :ref:`cloud-kerberos`.

  .. _cloud-ssl:

  SSL Encryption
  --------------

  |mms| can use SSL for encrypting communications for the following
  Monitoring Agent and Backup Agent connections:

  - Connections to |mms|.

  - Connections to MongoDB instances that use SSL. You must set each MongoDB
    host's :guilabel:`Use SSL` setting in |mms| and must configure the
    agents' SSL settings. See
    :doc:`/tutorial/configure-monitoring-agent-for-ssl` and
    :doc:`/tutorial/configure-backup-agent-for-ssl`.

  Access Control and Authentication
  ---------------------------------

  MongoDB uses Role-Based Access Control (RBAC) to determine access to a
  MongoDB system. When run with access control, MongoDB requires users to
  authenticate themselves to determine their access.

  If you :ref:`enable authentication <enable-authentication>` for your
  deployments, the |mms| agents authenticate to the deployments as MongoDB
  users with appropriate privileges.

  If a MongoDB deployment runs with access control, the Monitoring and
  Backup Agents must authenticate to the deployment as MongoDB users with
  appropriate access. See the following:

  - :doc:`/reference/required-access-monitoring-agent`
  - :doc:`/reference/required-access-backup-agent`

  For an overview on authenticating with the supported mechanisms, see
  :ref:`cloud-mongodb-cr`, :ref:`cloud-ldap`, and
  :ref:`cloud-kerberos`.

  .. _cloud-mongodb-cr:

  MONGODB-CR
  ----------

  |mms| can use the MongoDB Challenge-Response, i.e. ``MONGODB-CR``,
  authentication mechanism to authenticate to a MongoDB deployment. For more
  information, see the ``MONGODB-CR`` section on the :manual:`Authentication
  page </core/authentication>` in the MongoDB manual.

  If your MongoDB deployment uses ``MONGODB-CR`` for authentication, you
  must create a MongoDB user for the |mms| agents as well as specify the
  host's authentication settings.

  To create a MongoDB user, see
  :doc:`/tutorial/configure-monitoring-agent-for-cr` and
  :doc:`/tutorial/configure-backup-agent-for-cr`.

  You can specify the host's authentication settings when :doc:`adding the
  host </tutorial/add-existing-mongodb-processes>`, or you can :doc:`edit the
  settings </tutorial/edit-host-authentication-credentials>` for an existing
  host.

  .. _cloud-ldap:

  LDAP
  ----

  |mms| agents can use the LDAP authentication mechanism to authenticate to
  the MongoDB deployment.

  If your MongoDB deployment uses LDAP for authentication, you must create a
  MongoDB user for the |mms| agents as well as specify the host's
  authentication settings.

  To create a MongoDB user for the agents, see
  :doc:`/tutorial/configure-monitoring-agent-for-ldap` and
  :doc:`/tutorial/configure-backup-agent-for-ldap`.

  You can specify the host's authentication settings when :doc:`adding the host
  </tutorial/add-existing-mongodb-processes>`, or you can :doc:`edit
  the settings </tutorial/edit-host-authentication-credentials>` for an
  existing host.

  .. _cloud-kerberos:

  Kerberos
  --------

  If your MongoDB deployment uses Kerberos for authentication, you must
  create the Kerberos Principal for the |mms| agents, create a MongoDB user
  for that Kerberos Principal, edit the agent's configuration file, and
  specify the host's authentication settings.

  If you are running both the Monitoring Agent and the Backup Agent on the
  same server, then both agents must connect as the same Kerberos Principal.

  To create a Kerberos Principal and the associated MongoDB user as well
  as edit the configuration file, see
  :doc:`/tutorial/configure-monitoring-agent-for-kerberos` and
  :doc:`/tutorial/configure-backup-agent-for-kerberos`.

  You can specify the host's authentication settings when :doc:`adding
  the host </tutorial/add-existing-mongodb-processes>`, or you can :doc:`edit
  the settings </tutorial/edit-host-authentication-credentials>` for an
  existing host.

...
