====================
Back up a Deployment
====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

You can choose to back up all databases and collections on the deployment or specific ones.

.. important::

   Only sharded clusters or replica sets can be backed up. To back up a
   standalone :program:`mongod` process, you must first 
   :manual:`convert it to a single-member replica set </tutorial/convert-standalone-to-replica-set>`.

Prerequisites
-------------

- For a Replica Set:

  - |mms| must be monitoring the deployment.

  - It must run MongoDB version 2.2.0 or later.

  - It must have an active :term:`primary` node.

- For a Sharded Cluster:

  - |mms| must be monitoring the deployment and also be monitoring at least
    one :program:`mongos` in the cluster.

  - It must run MongoDB version 2.4.3 or later.

  - All :term:`config servers <config server>` must be running.

  - The balancing round must be able to complete in less than one hour.

- See the :doc:`/core/backup-preparations` to
  decide how to back up the data and what data to back up.

.. only:: onprem

- The MongoDB version and |mms| version must meet the :ref:`compatibility
  requirements <backup-compatibility>`.

.. only:: cloud

- The MongoDB version must meet the :ref:`minimum compatibility
  <backup-compatibility>`.

Procedure
---------

.. include:: /includes/steps/enable-backup.rst
