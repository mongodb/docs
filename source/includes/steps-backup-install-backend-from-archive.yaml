title: Stop any currently running instance.
stepnum: 1
ref: backup-install-stop
action:
  pre: |
    If you are upgrading an existing installation, please stop the
    currently running instance:
  language: sh
  code: |
    <install_dir>/bin/mongodb-mms-backup-daemon stop
---
title: Download the Backup archive.
stepnum: 2
ref: download
pre: |
  Download the Backup archive for the latest release from `the downloads
  page <http://www.mongodb.com/subscription/downloads/mms>`_.
---
title: Install the Backup Daemon.
stepnum: 3
ref: install
action:
  pre: |
    Extract the archive, as in the following command:
  language: sh
  code: |
    tar -zxf mongodb-mms-backup-daemon-<version>.x86_64.tar.gz
---
title: Configure the back-end software package.
stepnum: 4
ref: backup-install-backend-configure
pre: |
  Configure the Backup Daemon, by editing the
  ``<install-dir>/conf/conf-daemon.properties``
  file. Specify the required configuration options. See
  :doc:`/reference/configuration` for information about each value.
action:
  pre: |
    The following values of the following settings must correspond to the
    values set in the monitoring application:

    - :setting:`mongo.mongoUri`

    - :setting:`mongo.replicaSet`

    - :setting:`mongo.backupdb.mongoUri`

    - :setting:`mongo.backupdb.replicaSet`

    Consider the following example:
  language: cfg
  code: |
    mongo.mongoUri=mongodb://<mms_mongod_ip>:27017/
    mongo.replicaSet=rs0

    mongo.backupdb.mongoUri=mongodb://<backup_mongod_ip>:27017/
    mongo.backupdb.replicaSet=rs1
post: |
  Additionally, ensure that the file system that holds the
  :setting:`rootDirectory` has sufficient space to accommodate the
  current snapshots of all backed up instances.
---
title: "Synchronize the ``mms-gen-key`` file."
stepnum: 5
ref: backup-install-sync-genkey
content: |
  Synchronize the ``<install-dir>/bin/mms-gen-key`` file from the MMS
  Application Server. This is required only if the Backup Daemon
  is installed on a different server than the MMS Application.
---
title: Start the Backup Daemon.
stepnum: 5
ref: backup-install-backend-start
action:
  pre: |
    To start the Backup Daemon run:
  language: sh
  code: |
    <install_dir>/bin/mongodb-mms-backup-daemon start
post: |
  If you run into any problems, the log files are at ``<install_dir>/logs``.
...
