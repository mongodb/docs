.. _mcli-om-clusters-indexes-create-cmd:

==============================================
mongocli ops-manager clusters indexes create
==============================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/styles/corrections.rst

The ``clusters indexes create`` command creates a rolling index for a
cluster in the specified |onprem| project. You can also create an
index through the |onprem| :opsmgr:`UI
</data-explorer/indexes/index.html#create-an-index>`.

.. _om-clusters-indexes-create-syntax:

Syntax
------

.. code-block:: text

   mongocli ops-manager|om clusters|cluster indexes|index create 
      [ <index-name> ]
      [ --alternate <alternate> ]
      [ --backwards ]
      [ --caseFirst <sort-order>
      [ --caseLevel ]
      --collectionName <collection-name>
      --db <database-name>
      --key <field>:<type>
      [ --locale <ICU-locale> ]
      [ --MaxVariable <max-variable> ]
      [ --normalization ]
      [ --numericOrdering ]
      [ --output|-o <output-format> ]
      [ --projectId <project-id> ]
      --rsName <replica-set-name>
      [ --sparse ]
      [ --strength <level-of-comparison> ]
      [ --unique ]

.. include:: /includes/fact-command-line-help.rst

.. _om-clusters-indexes-create-options:

Options
-------

.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option 
     - Type 
     - Description 
     - Required? 

   * - ``<index-name>``
     - string
     - Name of the index to create.
     - no

   * - ``--alternate``
     - string
     - Determines whether collation should consider whitespace and
       punctuations as base characters for purposes of comparison. For
       valid values, see :manual:`Collation
       </reference/collation/index.html#collation>`.
     - no

   * - ``--backwards``
     - 
     - If set, strings with diacritics sort from the back to the front 
       of the string. For more information, see :manual:`Collation
       </reference/collation/index.html#collation>`.
     - no

   * - ``--caseFirst``
     - string
     - Determines sort order of case differences during tertiary level 
       comparisons. For valid values, see :manual:`Collation
       </reference/collation/index.html#collation>`.
     - no

   * - ``--caseLevel``
     - 
     - If set, the index uses case comparison. This field applies only 
       if the ``strength`` level is set to ``1`` or ``2.`` For more
       information, see :manual:`Collation
       </reference/collation/index.html#collation>`.
     - no

   * - ``--collectionName``
     - string
     - Name of the collection on which to create an index.
     - yes

   * - ``--db``
     - string
     - Name of the database that contains the collection on which to
       create an index. 
     - yes

   * - ``--key``
     - string or array of strings
     - Field to be indexed and the type of index in the following 
       format: ``field:type``. For more information on index creation,
       see :manual:`Indexes </indexes/#indexes>`.

       .. important::

          If you want to create a :manual:`compound index
          </core/index-compound/>`, you can:
          
          - Specify each ``field:type`` pair in a comma-separated list
            in one ``--key`` flag
          - Specify each ``field:type`` pair with a separate ``--key``  
            flag

     - yes

   * - ``--locale``
     - string
     - Locale that the ICU defines. For more
       information, see :manual:`Collation
       </reference/collation/index.html#collation>`.
     - no

   * - ``--MaxVariable``
     - string 
     - Determines up to which characters are considered ignorable when
       ``--alternate shifted``. For valid values and more
       information, see :manual:`Collation
       </reference/collation/index.html#collation>`.
     - no

   * - ``--normalization``
     - 
     - If set, collation checks if text requires normalization and
       performs normalization to compare text. For more
       information, see :manual:`Collation
       </reference/collation/index.html#collation>`.
     - no

   * - ``--numericOrdering``
     - 
     - If set, collation compares numeric strings as numbers. If unset, 
       collation compares numeric strings as strings. For more
       information, see :manual:`Collation
       </reference/collation/index.html#collation>`.
     - no

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are set. If omitted, uses the 
       {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project where you want to 
       create the index. If omitted, uses the project ID in 
       the profile or :ref:`environment variable <mcli-env-var>`.
     - no

   * - ``--rsName``
     - string
     - Replica set on which to build the index.
     - yes

   * - ``--sparse``
     - 
     - Creates an index that only references documents with the 
       specified field. These indexes use less space but behave
       differently in some situations (particularly sorts). See
       :manual:`Sparse Indexes </core/index-sparse>` for more
       information.

       The following index types are sparse by default and ignore
       this option:

       - :manual:`2dsphere </core/2dsphere>`
       - :manual:`2d </core/2d>`
       - :manual:`geoHaystack </core/geohaystack>`
       - :manual:`text </core/index-text>`

       For a compound index that includes ``2dsphere`` index key(s)
       along with keys of other types, only the ``2dsphere`` index
       fields determine whether the index references a document.

       .. versionchanged:: 3.2 
       
          Starting in MongoDB 3.2, MongoDB provides the option to create
          :ref:`partial indexes <index-type-partial>`. Partial indexes
          offer a superset of the functionality of sparse indexes. If
          you are using MongoDB 3.2 or later, :ref:`partial indexes
          <index-type-partial>` should be preferred over sparse indexes.
     - no

   * - ``--strength``
     - integer
     - Level of comparison to perform. For valid values, see
       :manual:`Collation </reference/collation/index.html#collation>`.
     - no

   * - ``--unique``
     - 
     - Creates a unique index so that the collection will not accept
       insertion or update of documents where the index key value
       matches an existing value in the index.

       *Unavailable* for :manual:`hashed </core/index-hashed>` indexes.
     - no

.. _om-clusters-indexes-create-output:

Output
------

The command prints the following message to the terminal:

.. code-block:: text
   :copyable: false
   
   Your index is being created

You can check the status of your index in the |onprem|
:opsmgr:`UI </data-explorer/indexes/index.html#view-indexes>`,
the :manual:`mongo shell, or with Compass
</tutorial/manage-indexes/index.html>`.

If the command prints an error, see 
:ref:`Troubleshooting <mcli-troubleshooting>` for recommended solutions.

.. _om-clusters-indexes-create-example: 

Examples
--------

Example 1
~~~~~~~~~

The following ``mongocli om clusters indexes create`` command creates
an index named ``bedrooms_1`` on the ``listings`` collection
of the ``realestate`` database on the replica set ``repl1``. The command
uses the {+default-profile+}. 

.. code-block:: text
   :copyable: false

   mongocli om clusters indexes create bedrooms_1 \
   --collectionName listings --db realestate --key bedrooms:1 \
   --rsName repl1

The command prints the following to the terminal.

.. code-block:: json
   :copyable: false

   Your index is being created

Example 2
~~~~~~~~~

The following ``mongocli om clusters indexes create`` command creates
a compound index named ``property_room_bedrooms`` on the
``listings`` collection of the ``realestate`` database on the replica
set ``repl1``. The command uses the {+default-profile+}.

.. code-block:: text
   :copyable: false

   mongocli om clusters indexes create property_room_bedrooms \
   --collectionName listings --db realestate --key property_type:1 \
   --key room_type:1 --key bedrooms:1 --rsName repl1

The command prints the following to the terminal.

.. code-block:: json
   :copyable: false

   Your index is being created

