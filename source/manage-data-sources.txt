.. _manage-existing-data-sources:
.. _charts-modify-data-source:
.. _mod-data-source-alias:

===================
Manage Data Sources
===================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

If you have the :authrole:`Project Owner` role, you can
modify data source settings from the data source's settings page.

.. _access-data-source-settings-page:

Access Data Source Settings
---------------------------

To access the data source's settings page:

.. procedure::
   :style: normal

   .. include:: /includes/steps-access-deployment.rst

   .. step:: In the :guilabel:`Data Access` section, click the name of the database that contains the data source.

      A list of the database's data sources appears.

   .. step:: Click :guilabel:`Manage` next to the data source's information.

      The data source's details page displays.

   .. step:: Check the connection status and connect the data source.

      If the data source connection status is :guilabel:`Connected`,
      you already connected this data source to |charts|. The
      :guilabel:`Data Access` section displays.

      If the data source connection status is :guilabel:`Disconnected`: 

      a. Click the connect icon :icon-fa5:`link` next to the data
         source connection status.
      #. Click :guilabel:`Reconnect` on the modal that displays. 

      The data source connects and the :guilabel:`Data Access`
      section displays.

.. _data-source-embedding:
.. _mod-data-source-permissions:

Modify Data Source Permissions
------------------------------

If you have the :authrole:`Project Owner` role, you can control who can see charts that use the data source.

Enable External Sharing for a Data Source
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

External sharing grants others the ability to either:

- :ref:`Embed charts <embedding-charts>` to use the data source in
  external web pages.
- View charts when given a link to that chart.

To share a chart externally via embed or link, you must enable external
sharing both on the data source and the individual chart.

|charts-short| disables external sharing by default for all data
sources. 

To enable external sharing for a data source:

.. procedure::
   :style: normal

   .. step:: Access the data source's settings page.

      To learn more, see :ref:`access-data-source-settings-page`.

   .. step:: Turn on external sharing.

      In the :guilabel:`External Users` subsection of the :guilabel:`Data Access` section, toggle 
      :guilabel:`External users can view data in this data source` to
      :guilabel:`ON`.

   .. step:: Select your authentication settings.
   
      Select either:

      a. :guilabel:`Allow authenticated external data access`.

         Any chart that uses this data source requires authentication through an
         :abbr:`SSO (Single Sign-On)` provider for external viewing. Authentication
         providers add an extra layer of security to your data.

         To learn how to configure an embedding authentication provider,
         see :doc:`/configure-auth-providers`.

         Users can view charts that use this data source on dashboards when they are logged into |charts|. They can't view the charts on dashboards shared via a public link.

      #. :guilabel:`Allow unauthenticated external data access`.

         Any chart that uses this data source does **not** require authentication for external viewing. Though less
         difficult to implement, allowing unauthenticated external data access is less secure. Use this option only for charts
         that display non-sensitive data.

         - Embedded charts can render using both unauthenticated and
           authenticated requests.

         - Any charts using this data source can be viewed on
           :ref:`dashboards shared via a link <dashboard-access-link>`.

After you enable external sharing for a data source, you can enable external sharing for individual charts that use that data source.

.. note::

   If you turn off external sharing for a data source, all charts which 
   use that data source stop rendering immediately.

Disable External Sharing for a Data Source
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To disable external sharing for a data source:

.. procedure::
   :style: normal

   .. step:: Access the data source's settings page.

      To learn more, see :ref:`access-data-source-settings-page`.

   .. step:: Turn off external sharing.

      In the :guilabel:`External Users` subsection of the :guilabel:`Data Access` section, toggle 
      :guilabel:`External users can view data in this data source` to
      :guilabel:`OFF`.

.. _permission-model:
.. _data-source-set-permissions:
.. _data-source-specific-access:
.. _data-source-access-everyone:

Modify Data Source Permissions
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you have the :authrole:`Project Owner` role, you can modify data source permissions for each project role. Data source permissions determine whether a user can view charts created using data in this data source.

.. note::

   |charts-short| automatically assigns project roles to users based on
   their |service| :atlas:`user role </reference/user-roles>`.

To modify permissions for a project role:

.. procedure::
   :style: normal

   .. step:: Access the data source's settings page.

      To learn more, see :ref:`access-data-source-settings-page`.

   .. step:: Select or clear boxes in the project role's row.

      For each project role, you can select more than one option:

      - :guilabel:`Can view charts with data in this data source`.
      - :guilabel:`Can create charts with data in this data source`.

      Hover over a project role to learn which :atlas:`Atlas user roles </reference/user-roles>` correspond to that project role.

      To prevent users with a project role from creating and viewing charts for the data source, clear both boxes in the project role's row.

      To allow all users to create and view charts for the data source, select all of the boxes in all of the rows.

.. _modify-data-source-read-preference:

Modify Data Source Read Preference
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To modify a data source's read preference, you must modify the read preference for its deployment. To learn more, see
:ref:`manage-deployment`.

Modify Data Source Pipeline
---------------------------

You can modify a chart view's pipeline by 
:ref:`accessing the data source's settings page
<access-data-source-settings-page>` and clicking the
:guilabel:`Pipeline` tab. To learn more, see
:ref:`data-sources-pipeline`.

The :guilabel:`Pipeline` is dimmed for collections. To create a
pipeline based on a collection, :ref:`create a charts view
<charts-views>`.

.. toctree::
   :titlesonly:

Disconnect a Data Source
------------------------

To disconnect a data source, see :ref:`connect-disconnect-data-source`.
To delete a charts view, see :ref:`charts-views`.
You can't delete a collection from your data sources.
