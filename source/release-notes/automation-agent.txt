==========================
Automation Agent Changelog
==========================

.. default-domain:: mongodb

.. only:: onprem

   .. _automation-2.0.9.1201:

   Automation Agent ``2.0.9.1201``
   -------------------------------

   *Released with Ops Manager 1.8 on 2015-06-23*

   - Added support for managing SSL-enabled deployments.

   - Added support for managing deployment using Kerberos, LDAP, and
     x.509 Client Certificate authentication.

   - Added support to import an existing :program:`mongos` with a config file.

   - Added support for importing an existing deployment 
     that contains authenticated :term:`arbiters <arbiter>` on which the hostname
     does not resolve locally to the loopback interface.

   - Added the ability to upgrade the ``authSchemaVersion`` when auth is not enabled.

   - Added support to change the storage engine for :term:`replica sets
     <replica set>` with more than one data node.

   - Enabled storage engine conversions for single-node replica sets
     and :term:`standalones <standalone>`.

   - Added more detailed logging of when MongoDB, the Monitoring Agent,
     or the Backup Agent rotate their logs.

   - Added support for distribution-specific MongoDB Community Edition builds.

   - Added up-front validation to ensure that MongoDB processes are
     running as the same user as the Automation Agent.

   - Added functionality to delete MongoDB binaries on disk that are
     not used by a managed process.

   - Added optimization where |mms| assumes success when starting a forked
     MongoDB process, rather than waiting for EOF.

   - Improved algorithm for balancing :program:`mongod` processes across
     cores.

   - When deleting directories, symlinks are no longer deleted.

   - Fixed issue importing credentials for ``MONGODB-CR`` users from
     ``SCRAM-SHA-1`` deployments. See: :issue:`MMS-2612` for more
     details.

   - Fixed issue with deriving the default port for config servers
     started with the :option:`--configsvr` option but with no port
     specified. See: :issue:`MMS-2489`.

   - Fixed issue with configuring :term:`oplog` sizes greater than 1TB.

   - Fixed issue where the Automation Agent interfered with
     manually-created replica set tags.

   - Ensured that the Automation Agent fails gracefully when an expected
     user does not exist during an initial import.

   .. _automation-1.4.18.1199-1:

   Automation Agent ``1.4.18.1199-1``
   ----------------------------------
   
   *Released with Ops Manager 1.6.3 on 2015-06-23*
   
   - Added support for importing an existing deployment 
     that contains authenticated :term:`arbiters <arbiter>` on which the hostname
     does not resolve locally to the loopback interface.

   - Fixed logic used for performing a rolling restart.

   - Fixed issue with deriving the default port for config servers
     started with the :option:`--configsvr` option but with no port
     specified. See: :issue:`MMS-2489`.

   Automation Agent ``1.4.16.1075``
   --------------------------------
   
   *Released 2015-04-28*
   
   - Fixed an issue with updating users created on MongoDB 2.4.
   
   - Fixed an issue with :term:`config server` repair that occurred if the
     third config server was out of sync.

   .. _automation-1.4.15.999:

   Automation Agent ``1.4.15.999``
   -------------------------------

   *Released 2015-03-26*

   - Fixed a rare edge-case that prevented the Automation Agent from
     successfully enabling authentication.

   Automation Agent ``1.4.14.983``
   -------------------------------

   *Released 2015-03-02*

   Initial release.

.. only:: cloud

   Automation Agent ``2.0.11.1231``
   --------------------------------
   
   *Released 2015-07-15*

   - :issue:`MMS-2711`: Fixed an issue with rolling storage engine upgrades for authenticated
     replica sets that include an arbiter.
   - :issue:`MMS-2707`: Improved handling of rolling operations for replica sets that
     contain more than one arbiter.
   - :issue:`MMS-2759`: fixed an issue with importing ``SCRAM-SHA-1`` users
     into an existing deployment.
   - Added optimization to ensure that the credentials used during
     an Import Existing job are not cached or reused.

   Automation Agent ``2.9.0.1201``
   -------------------------------
   
   *Released 2015-06-24*

   - Fixed behavior of rolling upgrades when one or more :term:`secondaries <secondary>`
     has significant replication lag to ensure that a secondary has
     always fully caught up before upgrading the :term:`primary`.

   - Fixed creation of ``SCRAM-SHA-1`` users imported from one
     deployment item (:term:`standalone`, :term:`replica set`, or
     :term:`sharded cluster`) and then applied to a new sharded cluster.

   - Added a small sleep time during the auto-upgrade process.

   Automation Agent ``2.0.8.1184``
   -------------------------------
   
   *Released 2015-06-17*
   
   - Fixed bug that prevented the deletion of users from the ``$external`` database.
   
   - Added fix that prevents the Automation, Monitoring and Backup
     agents from sharing a Kerberos credentials cache.

   - Reverted to an earlier version of a third-party library as the newer
     edition prevented JSON parsing from working correctly on Windows.

   Automation Agent ``2.0.7.1158``
   -------------------------------
   
   *Released 2015-06-12*
   
   - Added fix for :issue:`MMS-2612`, where users imported from a
     MongoDB 3.0 deployment running with ``authSchemaVersion=5`` could
     not be applied to other deployment items.

   Automation Agent ``2.0.6.1148``
   -------------------------------
   
   *Released 2015-05-29*
   
   - Fixed issue with importing existing deployments using SSL
     but not ``MONGODB-X509`` authentication.

   Automation Agent ``2.0.4.1140``
   -------------------------------
   
   *Released 2015-05-22*
   
   - Fixed issue determining the Kerberos keytab for a process on Ubuntu

   Automation Agent ``2.0.2.1138``
   -------------------------------
   
   *Released 2015-05-21*
   
   - Fixed issue with configuring the Windows firewall when the Windows
     firewall was disabled.

   Automation Agent ``2.0.2.1136``
   -------------------------------
   
   *Released 2015-05-20*
   
   - Enabled storage engine conversions for single-node replica sets and
     standalones.

   - Added optimization where |mms| assumes success when starting a forked
     MongoDB process, rather than waiting for EOF.

   Automation Agent ``2.0.0.1120``
   -------------------------------

   *Released 2015-05-13*

   - Added functionality to delete MongoDB binaries on disk that are not
     used by an managed process.
   - Fixed issue with management of the Monitoring and Backup Agents by
     the Automation Agent on Windows.
   - Added up-front validation to ensure that MongoDB processes are
     running as the same user as the Automation Agent.

   Automation Agent ``1.9.3.1109``
   -------------------------------

   *Released 2015-05-08*

   - Added fix for :issue:`MMS-2489`: fixed issue deriving the default
     port for config servers started with the
     :option:`--configsvr` option but with no port specified.

   Automation Agent ``1.9.1.1100``
   -------------------------------
   
   *Released 2015-05-01*
   
   - Added support for importing an existing deployment to automation
     when the deployment contains authenticated arbiters on which the
     hostname does not resolve locally to the loopback interface.

   Automation Agent ``1.9.1.1093``
   -------------------------------
   
   *Released 2015-04-30*
   
   - Fixed memory leak issue with the Automation Agent.

   Automation Agent ``1.9.0.1073``
   -------------------------------

   *Released 2015-04-21*

   - Added ability to change the storage engine for replica sets with
     more than one data node.

   - Added a RHEL7-specific Automation Agent build. The generic 
     builds will not work with RHEL7.
     
     If you run an earlier Automation Agent (prior to ``1.9.0``), the
     agent will fail to auto-upgrade on RHEL7: you will need to do the
     upgrade manually.

   - Added more detailed logging of when MongoDB, Monitoring Agent,
     or Backup Agent log rotation.
   - Added support for new distribution-specific MongoDB builds.
   - The Kerberos credentials cache now uses a fixed name.
   - When deleting directories, |mms| no longer deletes symlinks.

   Automation Agent ``1.8.1.1042``
   -------------------------------

   *Released 2015-04-06*

   - Fixed issue where replica set tags were unset when reconfiguring an
     unrelated replica set.

   Automation Agent ``1.8.0.1034``
   -------------------------------
   
   *Released 2015-04-01*
   
   - Added ability to upgrade ``authSchemaVersion`` when auth is not
     enabled.
   
   - Added support to :doc:`import an existing
     </tutorial/add-hosts-to-monitoring>` :program:`mongos` running with
     a config file.
   
   - Fixed issue where the Automation Agent interfered with
     manually-created replica set tags.

   Automation Agent ``1.7.1.1023``
   -------------------------------

   *Released 2015-03-27*

   - Updated to ensure that the Automation Agent fails gracefully in the
     case where an expected user does not exist during an initial import.

   Automation Agent ``1.7.0.992``
   ------------------------------

   *Released: 2015-03-16*

   - Improves algorithm for balancing :program:`mongod` processes across cores

   - Fixed issue with configuring oplog sizes greater than 1 TB

   - Improvements that make auto-upgrades more reliable

   Automation Agent ``1.6.2.960``
   ------------------------------

   *Released 2015-02-23*

   - Ability to import an existing deployment into Automation, which allows
     you to use Automation to manage the deployment. See
     :doc:`/tutorial/add-existing-host-to-automation`.

   - The :guilabel:`Deployment` tab now displays all deployment information,
     for both servers and processes, on one page, with icons for selecting
     view options.

   Automation Agent ``1.3.0.718``
   ------------------------------

   *Released 2014-11-12*

   - Support for MongoDB 2.8

   - Fixed issues with upgrades for 2.6-series minor version with auth
     enabled.

   Automation Agent ``0.4.0``
   --------------------------

   *Released 2014-05-08*

   Initial release for Automation beta program.
   
