####################################
stopShardDraining (database command)
####################################

.. meta::
   :description: Stops the balancer from draining chunks from the given shard. The shard resumes its role in the sharded cluster and is included in rebalancing operations.


.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Definition
----------

.. dbcommand:: stopShardDraining

   .. include:: /includes/command/stopShardDraining

   When the command runs, it tells the balancer that you want
   the shard to remain in the cluster. The balancer then stops
   draining the shard and again includes the shard in rebalance
   operations, shifting chunks back onto the shard.

   The command returns an error if the shard doesn't exist,
   otherwise it returns ``ok``.

   To start draining a shard, use the
   :dbcommand:`startShardDraining` command. 

   To check the status of a draining shard, use the
   :dbcommand:`shardDrainingStatus` command.

   To remove a shard after it finishes draining, use the
   :dbcommand:`commitShardRemoval` command.

   .. versionadded:: 8.3

Compatibility
-------------

This command is available in deployments hosted in the following environments: 

.. include:: /includes/fact-environments-onprem-only.rst

.. note::

   .. include:: /includes/edit-shards-atlas-compatibility.rst

Syntax
------

The command has the following syntax:

.. code-block:: javascript

   db.adminCommand( { 
        stopShardDraining: <shard> 
   } )

Behavior
--------

Access Requirements
~~~~~~~~~~~~~~~~~~~

If you have :setting:`~security.authorization` enabled, you must
have the :authrole:`clusterManager` role or any role that
includes the :authaction:`removeShard` action.

Examples
--------

To start draining a shard, use the :method:`db.adminCommand`
method to run the :dbcommand:`startShardDraining` command:

.. code-block:: javascript

   db.adminCommand( { startShardDraining: "shard04" } )

To stop draining the shard, use the :method:`db.adminCommand`
method to run the ``stopShardDraining`` command:

.. code-block:: javascript

   db.adminCommand( { stopShardDraining: "shard04" } )

Learn More
----------

- :dbcommand:`startShardDraining`

- :dbcommand:`shardDrainingStatus`

- :dbcommand:`commitShardRemoval`

