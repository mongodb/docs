.. _release-notes-8.3:

=============================
Release Notes for MongoDB 8.3
=============================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: twocols

.. include:: /includes/in-dev.rst

General Changes
---------------

serverStatus Output
~~~~~~~~~~~~~~~~~~~

.. |serverstatus| replace:: :dbcommand:`serverStatus`
.. include:: /includes/fact-serverstatus-excl-fields-w-none.rst

For details, see :ref:`<serverstatus-excl-fields>`.

Sharding
--------

findShardsOnConfigTimeoutMS Parameter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

MongoDB 8.3 adds the ``findShardsOnConfigTimeoutMS`` parameter 
which sets the timeout in milliseconds for ``find`` operations 
against the ``config.shards`` namespace. For details, see 
:parameter:`findShardsOnConfigTimeoutMS`.

config.csrs.indexes Removed
~~~~~~~~~~~~~~~~~~~~~~~~~~~

MongoDB 8.3 removes the ``config.csrs.indexes`` namespace.

Time Series
~~~~~~~~~~~

Starting in MongoDB 8.3, creating an index with the name of ``"_id_"`` or
specifying a hint of ``"_id_"`` on time series collections returns an error. 

Logging
-------

Fields to Track Use of Memory by Queries
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Starting in MongoDB 8.3, you can use the following new fields to track
query memory use:

.. list-table::
   :header-rows: 1

   * - Field
     - Description

   * - ``inUseTrackedMemBytes``
     - Number of bytes of tracked memory in use by the current query
       operation.

   * - ``peakTrackedMemBytes``
     - Maximum number of bytes of tracked memory in use by the current
       query operation.

Both fields appear in the following places:

- :ref:`current-op-agg` output
- :method:`db.currentOp()` output
- :ref:`Database profiler <profiler>` output
- :ref:`Log messages <log-messages-ref>`
- :ref:`Slow query log messages <log-message-json-examples-slow-op>`

The ``peakTrackedMemBytes`` field also appears in the following places:

- :ref:`Explain results <explain-results>`
- :method:`PlanCache.list()` output
- :pipeline:`$planCacheStats` output

General Changes
---------------

cachePressureQueryPeriodMilliseconds Parameter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

MongoDB 8.3 adds the ``cachePressureQueryPeriodMilliseconds`` parameter 
which sets the time interval MongoDB waits between checks for storage engine cache 
pressure. If the storage engine is under cache pressure, MongoDB aborts the oldest
transaction. For details, see :parameter:`cachePressureQueryPeriodMilliseconds`.

.. toctree::
   :titlesonly:
   :hidden:
   
   Compatibility Changes </release-notes/8.3-compatibility>
   Changelog </release-notes/8.3-changelog>
