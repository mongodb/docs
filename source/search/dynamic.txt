:template: guide

.. _guides-search-dynamic:

=====================
Build a Dynamic Index
=====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

.. short-description::

   Retrieve documents in MongoDB with full-text search.

In this guide, you will learn how to create a search index
for relevance-based search as an alternative to document-based search.

.. time:: 15

What You'll Need
----------------

- A MongoDB account. See :ref:`guides-create-atlas-account`.
- An Atlas cluster. See :ref:`guides-create-a-cluster`.
- Sample datasets :ref:`loaded into your cluster <guides-load-sample-data>`.

Procedure
---------

.. procedure::
   :style: normal

   .. step:: Navigate to the search index editor.

      .. procedure::
         :style: connected

      .. step:: Select a project.

         .. step:: Navigate to the ``sales`` collection of the 
            ``sample_supplies`` database.

            Click :guilabel:`Browse Collections` to pull up a list of
            databases in the sample dataset. In the right-hand pane,
            click the ``sample_supplies``, then click the ``sales``
            collection.

         .. step:: Click :guilabel:`Search Indexes` in the upper right
            of the collection preview pane.

   .. step:: Create a search index in the :guilabel:`Visual Editor`.

      .. procedure::
         :style: connected

         .. step:: Click :guilabel:`Create Search Index`.

         .. step:: Click the :guilabel:`Visual Editor` configuration 
            method, then click :guilabel:`Next`.

         .. step:: Review the :guilabel:`Index Name and Data Source` 
            page to ensure that ``sample_supplies.sales`` is selected, 
            then click :guilabel:`Next`.

         .. step:: Click :guilabel:`Create Search Index`. Wait for the 
            :guilabel:`Status` column to read :guilabel:`Active`.

      This definition recursively indexes fields of 
      :ref:`many common data types <bson-data-chart>` across indexed 
      documents.

   .. step:: Query your collection.

      .. procedure::
         :style: connected
         
         .. step:: Click on the name of your search index. In the
            left-hand menu of the :guilabel:`Index Overview`, click
            :guilabel:`Search Tester`.

         .. step:: Type ``notepad`` into the search bar, then click 
            :guilabel:`Search`. Review the results. Each record 
            includes a :guilabel:`relevance score <scoring-ref>`.

         .. step:: Click :guilabel:`View Query Syntax`. The modal window
            displays the query sent through the {+fts+} API.

            When building applications using {+fts+}, you can use this 
            syntax to construct queries for programmatic execution.



Summary
-------

If you successfully completed the procedure in this guide, you have
created an Atlas Search index with dynamic field mappings and used it
to perform a relevance-based query against the 
``sample_supplies.sales`` collection. In the next guide, you will learn 
how to perform a refined search by creating an index with static field 
mappings.

.. guide-next::