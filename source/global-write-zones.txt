.. _global-writes-zones:
.. _create-global-write-cluster-zone-templates:

===================================
Global Write Zones and Zone Mapping
===================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/cluster-settings/multi-cloud/incompatible-feature.rst

Each |service| Global Cluster supports up to 9 distinct zones. Each
zone consists of one :guilabel:`Highest Priority` region
and one or more :guilabel:`Electable`, :guilabel:`Read-only`, or
:guilabel:`Analytics` regions. The available regions depend on
the selected cloud service provider. 

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - Region Type
     - Description

   * - :guilabel:`Highest Priority`
     - Region where |service| deploys the :term:`primary` replica
       set member for the shard or shards associated with that zone.
       Clients can only issue write operations to the :term:`primary`.

       |service| uses the geographic location of the 
       :guilabel:`Highest Priority` regions to construct a map of
       geographically-near countries and subdivisions. The 
       |global-write| cluster uses this map for directing write
       operations to the correct zone.

       .. tip::

          To facilitate low-latency local secondary reads of globally
          distributed data, for each zone in the cluster, add a
          :guilabel:`Read-only` node in the
          :guilabel:`Highest Priority` region of every other cluster
          zone.

   * - :guilabel:`Electable` 
     - Region where |service| deploys electable :term:`secondary` 
       replica set members for the shard or shards associated to that 
       zone. :guilabel:`Electable` regions add additional fault 
       tolerance in the event of a partial or total regional outage in 
       the :guilabel:`Highest Priority` region.

   * - :guilabel:`Read-only` 
     - Region where |service| deploys non-electable :term:`secondary`
       replica set members for supporting secondary read operations. 

   * - :guilabel:`Analytics` 
     - Region where |service| deploys
       :ref:`analytics nodes <analytics-nodes-overview>`. Analytics
       nodes are read-only nodes configured with distinct
       :ref:`replica set tags <replica-set-tags>`. You can use these
       tags to direct queries to specific regions. As a result,
       analytics nodes can help isolate reporting queries from your
       normal operational workload as well as reduce latency for local
       reads.

Shard Distribution
------------------

For each shard associated to a zone, |service| distributes the
shard nodes across the configured regions. While |service| allows
more than one shard per zone, users should instead consider 
creating additional zones to address high user volume in a concentrated
geographic area.

.. note::
   
   |service| supports up to :ref:`50 shards per sharded cluster <can-i-deploy-more-than-50-shards>`
   regardless of the number of zones. Contact support by clicking
   :guilabel:`Support` from the |service| UI if you have requirements
   for more shards in your |global-write-cluster|.

The |service| cluster builder includes templates for automatically
configuring |global-write| zones for the |global-write-cluster|. 
Each template provides a visual description of the cluster zone
configuration, including estimates of geographic latency and coverage.
For complete documentation on creating a |global-write-cluster|,
see :ref:`create-new-global-write-cluster`.

Considerations
--------------

.. include:: /includes/fact-remove-global-zone.rst
