=====================
Create the First User
=====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. only:: onprem

    .. include:: /includes/api-ops-base-url.rst

Resource
--------

.. code-block:: none

      POST /api/public/v1.0/unauth/users

Create the first |mms| user. This endpoint is available only when the |mms|
instance has no users. This is the only API call you can make without first 
having an API key.

The user created through this endpoint is automatically granted the
:ref:`GLOBAL_OWNER <global-owner-role>` role. The returned document
includes the new user's Public API key, which you can use to make further
API calls.

The endpoint does not create a group, but you can use the new user and
API key to create a group through the :doc:`/reference/api/groups`
resource in the API. You cannot login to |mms| until after you have
created a group.

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

This endpoint does not use HTTP request path parameters.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

This endpoint does not use HTTP request query parameters.

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

All fields are required.

.. list-table::
      :widths: 10 10 80
      :header-rows: 1

      * - ``Name``
        - Type
        - Description

      * - ``username``
        - string
        - |mms| username.

      * - ``password``
        - string
        - Password. This field is NOT included in the entity returned from the
          server. It can only be sent in the entity body when creating a new user.

      * - ``emailAddress``
        - string
        - Email address.

      * - ``firstName``
        - string
        - First name.

      * - ``lastName``
        - string
        - Last name.

Response
--------

The HTTP document contains each of the following elements:

.. include:: /includes/extracts/api-users-response-elements.rst


Example Request
---------------

.. class:: copyable-code
.. code-block:: sh

      curl -H "Content-Type: application/json" -i -X POST "http://<ops-manager-host>/api/public/v1.0/unauth/users" --data '
      {
        "username": "jane.doe@mongodb.com",
        "emailAddress": "jane.doe@mongodb.com",
        "password": "Passw0rd.",
        "firstName": "Jane",
        "lastName": "Doe"
      }'

Example Response
----------------

.. code-block:: none

      HTTP/1.1 201 Created

      {
        "user": {
          "username": "jane.doe@mongodb.com",
          "roles": [
            {
              "roleName": "GLOBAL_OWNER"
            }
          ],
          "lastName": "Doe",
          "id": "533dc19ce4b00835ff81e2eb",
          "firstName": "Jane",
          "emailAddress": "jane.doe@mongodb.com",
          "links": [ ... ]
        },
        "apiKey": "1234abcd-ab12-cd34-ef56-1234abcd1234"
      }