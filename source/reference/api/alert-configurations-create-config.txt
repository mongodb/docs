=============================
Create an Alert Configuration
=============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/fact-projects-groups-synonyms.rst

.. include:: /includes/api-base-url-new.rst

Syntax
------

.. code-block:: http

   POST /groups/{GROUP-ID}/alertConfigs

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 10 15 75

   * - Parameter
     - Necessity
     - Description

   * - ``GROUP-ID``
     - Required
     - Project identifier.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/no-query-parameters-list.rst

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/extracts/api-alert-configuration-create.rst

Response Elements
-----------------

The response includes the alert configuration details:

.. include:: /includes/extracts/api-alert-configuration-elements.rst

Example Request
---------------

.. code-block:: sh
   :linenos:
   :emphasize-lines: 5-21

   curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \
        --request POST "https://cloud.mongodb.com/api/atlas/v1.0/groups/5deffe1ff10fab613544e4b2/alertConfigs" \
        --header "Content-Type: application/json" \
        --data '
          {
            "eventTypeName" : "REPLICATION_OPLOG_WINDOW_RUNNING_OUT",
            "enabled" : true,
            "notifications" : [ {
              "delayMin" : 0,
              "emailEnabled" : true,
              "intervalMin" : 60,
              "roles" : [ "GROUP_OWNER" ],
              "smsEnabled" : false,
              "typeName" : "GROUP"
            } ],
            "threshold" : {
              "operator" : "LESS_THAN",
              "threshold" : 1
            },
            "typeName" : "REPLICA_SET"
          }'

Example Response
----------------

.. code-block:: json
   :linenos:
   :emphasize-lines: 4,16-28
   :copyable: false

   {
     "created":"2020-02-26T01:14:40Z",
     "enabled":true,
     "eventTypeName":"REPLICATION_OPLOG_WINDOW_RUNNING_OUT",
     "groupId":"{GROUP-ID}",
     "id":"{ALERT-CONFIG-ID}",
     "links":[{
       "href":"https://cloud.mongodb.com/api/public/v1.0/groups/{GROUP-ID}/alertConfigs/{ALERT-CONFIG-ID}",
       "rel":"self"
     },
     {
       "href":"https://cloud.mongodb.com/api/public/v1.0/groups/{GROUP-ID}/alertConfigs/{ALERT-CONFIG-ID}/alerts",
       "rel":"http://mms.mongodb.com/alerts"
     }],
     "matchers":[],
     "notifications":[{
       "delayMin":0,
       "emailEnabled":true,
       "intervalMin":60,
       "roles":["GROUP_OWNER"],
       "smsEnabled":false,
       "typeName":"GROUP"
     }],
     "threshold":{
       "operator":"LESS_THAN",
       "threshold":1
     },
     "typeName":"REPLICA_SET",
     "updated":"2020-02-26T01:14:40Z"
   }
