==============================
Troubleshoot Connection Issues
==============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This page outlines common connection issues and possible resolutions.

Cluster :guilabel:`Connect` button is disabled
----------------------------------------------

Your cluster :guilabel:`Connect` button may be disabled if your
cluster is in the provisioning state. Your cluster needs to provision
when it is first deployed, or when it is
:doc:`scaled up or down </scale-cluster>`. The provisoning process can
take up to 10 minutes, after which the :guilabel:`Connect` button will
become enabled.

Too many open connections to your cluster
-----------------------------------------

|service| sets the limit for concurrent incoming connections to a
cluster based on the cluster tier. If you try to connect
when you are at this limit, MongoDB displays an error stating
"connection refused because too many open connections".

For a detailed comparision of cluster tiers and their maximum
concurrent connections, see :doc:`/connection-limits/`.

Possible Solutions
~~~~~~~~~~~~~~~~~~

- Close any open connections to your cluster not currently in use.

- :doc:`Scale your cluster </scale-cluster>` to a higher tier to
  support more concurrent connections.

- Restart your application.

- To prevent this issue in the future, consider utilizing the
  :urioption:`maxPoolSize` connection string option to limit the
  number of connections in the connection pool.

.. seealso::

   For more details on fixing this issue, see the
   :doc:`/reference/alert-resolutions/connection-alerts` page.

Authentication to the cluster failed
------------------------------------

To connect to |service|, you must authenticate with a MongoDB user.
To create a MongoDB user for your cluster, see
:doc:`security-add-mongodb-users/`.

Possible Solutions
~~~~~~~~~~~~~~~~~~

If you have created a user and are having trouble authenticating,
try the following:

- Check that you are using the correct username and password for
  your MongoDB user, and that you are connecting to the correct
  cluster.

- Check that you are specifying the correct ``authSource`` database in
  your connection string.

- If you have a special character in your password, see
  :ref:`Special characters in connection string password
  <special-pass-characters>`.

Attempting to connect to a cluster from behind a firewall
---------------------------------------------------------

|service| clusters operate on port ``27017``. You must be able to reach
this port to connect to your clusters.

To check your ability to reach this port, visit
http://portquiz.net:27017. If you cannot access port ``27017``,
check your system firewall settings and ensure they are not
blocking access to this port.

.. _special-pass-characters:

Special characters in connection string password
------------------------------------------------

If you have special characters in your connection string password, you
must encode those characters. For a complete list of special characters
and their corresponding encodings, see the
`ASCII Codes Table <https://ascii.cl/>`__. Use the corresponding
:guilabel:`Hex` value for your characters.

.. example::

   If your password in plain-text is ``p@ssw0rd'9'!``, you would need
   to encode your password as:

   .. code-block:: none
      :copyable: false

      p%40ssw0rd%279%27%21

Connection string incompatible with driver version
--------------------------------------------------

If you see this error message, your driver is likely out of date. For
instructions on updating your driver, refer to your specific
:driver:`Driver Documentation <>`.

MongoDB Compass Troubleshooting
-------------------------------

If you are using |compass| to connect to your cluster, you can visit
the :compass:`Compass Connection Errors
</current/troubleshooting/connection-errors/>` page for additional
troubleshooting resources.

Other Issues
------------

If you are still experiencing cluster connection issues, please
contact support using the chat button in the bottom right corner of
|service|.
