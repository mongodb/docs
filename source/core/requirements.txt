===========================================
|onprem| Hardware and Software Requirements
===========================================

.. default-domain:: mongodb

This page describes the hardware and software requirements for the servers
that run the :doc:`/core/system-overview`, including the servers that run
the backing MongoDB replica sets.

The servers that run the Backup Daemon and the backing replica sets **must**
also meet the configuration requirements in the :manual:`MongoDB Production
Notes </administration/production-notes>` in addition to the requirements on
this page. The Production Notes include information on
:manual:`ulimits </reference/ulimit>`, :manual:`NUMA
</administration/production-notes#production-numa>`,
:manual:`Transparent Huge Pages (THP)
</reference/transparent-huge-pages>`, and other configuration options.

.. warning::

   Failure to configure servers according to the :manual:`MongoDB
   Production Notes </administration/production-notes>` can lead to
   production failure.

This page also includes requirements for the EC2 security group used when
installing on AWS servers.

.. _hardware-requirements:

Hardware Requirements
---------------------

Each server must meet the sum of the requirements for all its components.

|onprem| Monitoring and Automation require servers for the following
components:

- :ref:`mms-application-package`.

- :ref:`mms-application-database` replica set members

  .. note:: Usually the |application| and one of the Application database's
            replica set members run on the same server.

If you run Backup, |onprem| also requires servers for the following:

- :ref:`Backup Daemon <backup-daemon>`

- :ref:`Backup Blockstore database <mms-backup-blockstore-database>` replica set members

.. note::

   The following requirements are specific to a given component. You must add
   together the requirements for the components you will install. For example,
   the requirements for the |application| do not cover the |application|
   database.

.. _application-hardware-requirements:

|application| Hardware
~~~~~~~~~~~~~~~~~~~~~~

The |application| requires the hardware listed here.

.. list-table::
   :header-rows: 1

   * - **Number of Monitored Hosts**
     - **CPU Cores**
     - **RAM**
   * - Up to 400 monitored hosts
     - 4+
     - 15 GB
   * - Up to 2000 monitored hosts
     - 8+
     - 15 GB
   * - More than 2000 hosts
     - Contact MongoDB Account Manager
     - Contact MongoDB Account Manager

.. _mms-application-database-specifications:

|application| Database Hardware
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/requirements-application-database.rst

.. _backup-hardware-requirements:

|onprem| Backup Daemon Hardware
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The Backup Daemon server must meet the requirements in the table below and
**also must meet** the configuration requirements in the :manual:`MongoDB
Production Notes </administration/production-notes>`. The Production Notes
include information on :manual:`ulimits </reference/ulimit>`,
:manual:`NUMA </administration/production-notes#production-numa>`,
:manual:`Transparent Huge Pages (THP)
</reference/transparent-huge-pages>`, and other options.

.. warning::

   Failure to configure servers according to the :manual:`MongoDB
   Production Notes </administration/production-notes>` can lead to
   production failure.

If you wish to install the Backup Daemon on the same physical server as the
|application|, the server must satisfy these requirements separately
from the requirements in :ref:`application-hardware-requirements`.

The server running the Backup Daemon acts like a hidden secondary for
every replica set assigned to it, receiving the streamed :term:`oplog`
entries each replica set's :term:`primary`. However, the Backup Daemon
differs from a hidden secondary in that the replica set is not aware of
it.

The server must have the disk space and write
capacity to maintain the replica sets plus the space to store an additional
copy of the data to support point-in-time restore. Typically, the Backup
Daemon must be able to store 2 to 2.5 times the sum of the size on disk of all
the backed-up replica sets, as it also needs space locally to build
:ref:`point-in-time <point-in-time-restore>` restores.

Before installing the Backup Daemon, we recommend contacting your MongoDB Account
Manager for assistance in estimating the storage requirements for your Backup
Daemon server.

.. list-table::
   :header-rows: 1
   :widths: 20, 12, 8, 15, 15

   * - **Number of Hosts**
     - **CPU Cores**
     - **RAM**
     - **Disk Space**
     - **Storage IOPS/s**
   * - Up to 200 hosts
     - 4+ 2Ghz+
     - 15 GB additional RAM
     - Contact MongoDB Account Manager
     - Contact MongoDB Account Manager

.. _mms-blockstore-database-specifications:

|onprem| Backup Blockstore Database Hardware
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/requirements-backup-blockstore-database.rst

.. _aws-security-groups:

EC2 Security Groups
-------------------

.. include:: /includes/requirements-aws-security.rst

Software Requirements
---------------------

Operating System
~~~~~~~~~~~~~~~~

The |application| and Backup Daemon(s) can run on 64-bit versions of the following operating systems:

- CentOS 5 or later

- Red Hat Enterprise Linux 5 or later

- SUSE 11 or Later

- Amazon Linux AMI (latest version only)

- Ubuntu 12.04 or later

- Windows Server 2008 R2 or later

.. _onprem-config-ulimits:

Ulimits
~~~~~~~

The |onprem| packages automatically raise the open file, max user processes, and
virtual memory ulimits. On Red Hat, be sure to check for a
``/etc/security/limits.d/90-nproc.conf`` file that may override the max user
processes limit. If the ``/etc/security/limits.d/90-nproc.conf`` file exists,
remove it before continuing.

See :manual:`MongoDB ulimit Settings </reference/ulimit>` for recommended
ulimit settings.

.. warning::

   Always refer to the :manual:`MongoDB Production Notes
   </administration/production-notes>` to ensure healthy server configurations.

.. _authentication-requirements:

Authentication
~~~~~~~~~~~~~~

If you are using LDAP for user authentication to |onprem| (as described in
:doc:`/tutorial/configure-for-ldap-authentication`), you must enable LDAP
**before setting up** |mms|.

.. important::

   You **cannot** enable LDAP once you have opened the |onprem| user
   interface and registered the first user. You can enable LDAP **only**
   on a completely blank, no-hosts, no-users installation.

MongoDB
~~~~~~~

.. versionchanged:: 1.8

   The :ref:`mms-application-database` and
   :ref:`mms-backup-blockstore-database` must run MongoDB version 2.6.0
   or later. |onprem| 1.8 does not support backing databases running
   earlier versions of MongoDB.

Your **backed-up** sharded cluster deployments must run at least MongoDB 2.4.3 or
later. Your backed-up replica set deployments must run at least MongoDB
2.2 or later.

Web Browsers
~~~~~~~~~~~~

|onprem| supports clients using the following browsers:

- Chrome 8 and greater

- Firefox 12 and greater

- IE 9 and greater

- Safari 6 and greater

The |application| will display a warning on non-supported browsers.

SMTP
~~~~

|onprem| requires email for fundamental server functionality such as
password reset and alerts.

Many Linux server-oriented distributions include a local SMTP server by
default, for example, Postfix, Exim, or Sendmail. You also may configure |onprem|
to send mail via third party providers, including Gmail and Sendgrid.

SNMP
~~~~

If your environment includes SNMP, you can configure an SMNP trap receiver
with periodic heartbeat traps to monitor the internal health of |mms|.

For more information, see :ref:`Configure SNMP Heartbeat Support
<snmp-heartbeat-configure>`.
