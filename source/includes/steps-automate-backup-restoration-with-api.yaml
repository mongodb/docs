title: "Retrieve the snapshot ID."
stepnum: 1
level: 4
ref: snapshot-id
content: |
  Call the
  :doc:`Get All Snapshots </reference/api/snapshots/get-all-snapshots-for-one-cluster>`
  resource to find the ID for the desired snapshot. Issue the
  following command, replacing:

  .. list-table::
     :widths: 15 10 75
     :header-rows: 1

     * - Name
       - Type
       - Description

     * - ``PUBLIC-KEY``
       - string
       - Your public API Key for your |api| credentials.

     * - ``PRIVATE-KEY``
       - string
       - Your :ref:`private API Key <mms-prog-api-key>` for your |api|
         credentials.

     * - ``{+opsmgr-url+}``
       - string
       - |url| of your |mms| instance.

     * - ``GROUP-ID``
       - string
       - Unique identifier of your Project from your
         :doc:`Project Settings <manage-project-settings>`.

     * - ``CLUSTER-ID``
       - string
       - Unique identifier of your cluster.

  .. code-block:: sh
     :linenos:

     curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \
          --header "Accept: application/json" \
          --header "Content-Type: application/json" \
          --include \
          --request GET "http://{+opsmgr-url+}/api/public/v1.0/groups/{GROUP-ID}/clusters/{CLUSTER-ID}/snapshots"
---
title: "Create a restore job for the snapshot."
stepnum: 2
level: 4
ref: create-restore-job
content: |
  Call the
  :doc:`Get One Restore Job </reference/api/restorejobs/get-one-single-restore-job-for-one-cluster>` resource to
  request a snapshot restore.

  Issue the following command, replacing:

  .. list-table::
     :widths: 15 10 75
     :header-rows: 1

     * - Name
       - Type
       - Description

     * - ``PUBLIC-KEY``
       - string
       - Your public API Key for your |api| credentials.

     * - ``PRIVATE-KEY``
       - string
       - Your :ref:`private API Key <mms-prog-api-key>` for your |api|
         credentials.

     * - ``{+opsmgr-url+}``
       - string
       - |url| of your |mms| instance.

     * - ``GROUP-ID``
       - string
       - Unique identifier of your project that contains the source
         cluster for the restore job. You can find this value in the
         :doc:`Project Settings <manage-project-settings>` of that
         project.

     * - ``CLUSTER-ID``
       - string
       - Unique identifier of your source cluster for the restore job.

     * - ``TARGET-GROUP-ID``
       - string
       - Unique identifier of your project that contains the target
         cluster for the restore job.

     * - ``TARGET-CLUSTER-ID``
       - string
       - Unique identifier of your target cluster for the restore job.

     * - ``SNAPSHOT-ID``
       - string
       - Unique identifier of the snapshot you want to restore.

  .. code-block:: sh
     :linenos:

      curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \
           --header "Accept: application/json" \
           --header "Content-Type: application/json" \
           --include \
           --request  POST "http://{+opsmgr-url+}/api/public/v1.0/groups/{GROUP-ID}/clusters/{CLUSTER-ID}/restoreJobs"
           --data '
             {
               "delivery" : {
                 "methodName" : "AUTOMATED_RESTORE",
                 "targetGroupId" : "{TARGET-GROUP-ID}",
                 "targetClusterId" : "{TARGET-CLUSTER-ID}"
               },
               "snapshotId": "{SNAPSHOT-ID}"
             }'

  .. note::

     To learn more about restoring snapshots with additional examples,
     see the
     :doc:`Create One Restore Job for One Cluster </reference/api/restorejobs/create-one-restore-job-for-one-cluster>`
     |api| resource page.
...
