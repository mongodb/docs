stepnum: 1
level: 4
source:
  file: steps-source-access-control.yaml
  ref: select-auth-page
---
stepnum: 2
level: 4
title: "On the :guilabel:`Select Authentication Mechanisms` screen, click :guilabel:`Next`."
content: |
  If you wish to :doc:`enable one or more Authentication Mechanisms
  </tutorial/edit-host-authentication-credentials>` for your |mms|
  project, select them and then click :guilabel:`Next`.
ref: mechanisms-next
---
stepnum: 3
level: 4
title: "Specify the |tls| Settings."
ref: specify-ssl-settings
content: |

  .. list-table::
     :widths: 30 70
     :header-rows: 1

     * - Field
       - Action

     * - :guilabel:`Enable TLS`
       - Toggle this slider to :guilabel:`Yes`.

     * - :guilabel:`TLS CA File Path`
       - The |tls| |certauth| file is a ``.pem``-format certificate
         file that contains the root certificate chain from the
         |certauth|. The {+mdbagent+} uses this same |certauth| file
         to connect to every item in your deployment.

         Type the file path to the |tls| |certauth| file on every host
         running a MongoDB process:

         - Type the file path on all Linux hosts in the first box.

         - Type the file path on all Windows hosts in the second box.

         This enables the :setting:`net.tls.CAFile` setting for the
         MongoDB processes in the project.

     * - :guilabel:`Client Certificate Mode`
       - Specify whether client |tls| certificates are optional or
         required for every MongoDB deployment in the project.

         .. list-table::
            :widths: 25 75
            :stub-columns: 1

            * - :guilabel:`OPTIONAL`
              - You may choose which MongoDB deployments in this
                project use |tls|\-encrypted network connections.

                .. list-table::
                   :widths: 50 50
                   :header-rows: 1

                   * - |mongod| :parameter:`tlsMode`
                     - All Agents Connect with |tls|

                   * - ``allowTls``, ``preferTls``, or ``requireTls``
                     - Yes

                   * - ``None``
                     - No

            * - :guilabel:`REQUIRED`
              - Every MongoDB deployment in this project starts with
                |tls|\-encrypted network connections. All Agents
                must use |tls| to connect to any MongoDB
                deployment.

  Click :guilabel:`Continue`.

---
stepnum: 4
level: 4
title: "Configure the {+mdbagent+}s."
ref: agent-ssl-credentials
content: |

  .. list-table::
     :widths: 30 70
     :header-rows: 1

     * - Field
       - Action

     * - :guilabel:`Agent Auth Mechanism`
       - In this list, click :guilabel:`X.509 Client Certificate`.

     * - :guilabel:`{+mdbagent+} Username`
       - Type the MongoDB user name for the {+mdbagent+}.

     * - :guilabel:`{+mdbagent+} PEM Key File`
       - Type the file path on the Agent hosts to the `PEM` key file.

         - The first box is for all Linux Agent hosts.

         - The second box is for all Windows Agent hosts.

     * - :guilabel:`{+mdbagent+} PEM Key Password`
       - *Optional.* If you encrypted the Agent's |pem| key file, enter
         its password in this box.

  .. admonition:: What if I had |tls| certificates for Legacy Backup or Monitoring Agents?
     :class: note

     - If you updated to the {+mdbagent+} from deployments that used
       Automation, the {+mdbagent+} manages the |tls| settings.

     - If you updated to the {+mdbagent+} from deployments that did not
       use Automation but you had Backup Agents, Monitoring Agents, or
       both, you *can* set your *Backup Agent and Monitoring
       Agent-specific* settings during the Agent update or through the
       following procedure:

       1. Navigate to :guilabel:`Deployment` :icon-fa5:`arrow-right`
          :guilabel:`Agents` :icon-fa5:`arrow-right`
          :guilabel:`Downloads & Settings` :icon-fa5:`arrow-right`
          :guilabel:`Custom Configurations` :icon-fa5:`arrow-right`
          :guilabel:`Edit Custom Configuration`.

       2. Click :icon-fa5:`pencil-alt`.

       3. Under the :guilabel:`Backup Configurations` section:

          a. Type the :doc:`desired setting </reference/backup-agent>`
             in the :guilabel:`Setting` box and its corresponding value
             in the :guilabel:`Value` box.

          #. To add more than one :guilabel:`Setting`, click the
             :guilabel:`+ Add Setting` link. Another row appears.

          #. Repeat until all settings have been added.

       4. Under the :guilabel:`Monitoring Configurations` section:

          a. Type the
             :doc:`desired setting </reference/monitoring-agent>`
             in the :guilabel:`Setting` box and the corresponding value
             in the :guilabel:`Value` box.

          #. To add more than one :guilabel:`Setting`, click the
             :guilabel:`+ Add Setting` link. Another row appears.

          #. Repeat until all settings have been added.

       You can click the :icon-fa5:`trash-alt` to remove any settings
       that you have added.

---
stepnum: 5
level: 4
title: "Click :guilabel:`Save` to set your changes."
ref: save-changes-for-credentials
---
stepnum: 6
level: 4
source:
  file: steps-source-deployment-page.yaml
  ref: review-and-confirm
...
