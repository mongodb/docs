.. _security-two-factor-auth:

================================
Legacy Two Factor Authentication
================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. important::

   .. include:: /includes/fact-2fa-deprecated.rst

   If an :authrole:`Organization Owner` enables |mfa-short|,
   all organization members must also enable |mfa-short| before
   accessing that organization.

Legacy |2fa| provides a second layer of security for your
|service| account. If you have |2fa| enabled for your account, after you
enter your username and password, you are prompted for a six-digit
time-sensitive verification code. This code is sent to a separate
device, such as a mobile phone or security token, that you can read
and enter into |service| and complete your login.

.. note::

   - An |service| :authrole:`Organization Owner` can require that all
     :ref:`Atlas users <atlas_users>` within their organization enable 
     |mfa| for their |service| accounts. To learn more, see 
     :ref:`atlas-require-mfa`.

   - If you login using your Google account:

     .. include:: /includes/facts/google-auth/2fa.rst

   To learn more about organization settings, see
   :ref:`Change Organization Settings <organization-settings>`.

|service| includes the following sources for |2fa| verification codes:

.. tabs::

   tabs:
     - id: phone
       name: Text or Voice
       content: |

         **Text Messages** (|sms|)

         When |service| prompts you for a verification code,
         |service| sends the 6-digit verification code using text
         (|sms|) to the provided phone number.

         The cellular carrier's |sms| rates apply.

         **Automated Voice Calls**

         When |service| prompts you for a verification code,
         |service| calls the provided phone number. An automated
         system repeats the 6-digit verification code a total of
         three times before hanging up.

         The cellular carrier's Voice Call rates apply.

         .. important:: Voice only works in the US / Canada.

         .. note::

            |service| users who operate within a geographic region
            with limited cellular service coverage or reliability may
            encounter delays in receiving the |2fa| code via |sms| or
            Voice. Consider using a |2fa| app or device instead.

     - id: app
       name: 2FA App
       content: |

         When |service| prompts you for a verification code, you can
         provide one that is generated in a |2fa| app. You must pair
         the |2fa| app with |service| first.

         This tutorial uses the `Google Authenticator 
         <https://www.google.com/landing/2step/>`__ mobile app.

         There are other mobile device apps and web browser plug-ins
         that provide |2fa| capabilities. You can use any that support
         the |totp|.

         You can pair only one app with |service| at any one time.

     - id: token
       name: 2FA device
       content: |

         When |service| prompts you for a verification code, you can
         provide one that is generated in a |2fa| |piv| device. You
         must pair the |piv| device app with |service| first using a
         |2fa| app. These devices must support |totp|.

         This procedure uses a YubiKey security key, specifically
         those that work with `Authenticator Codes <https://support.yubico.com/support/solutions/articles/15000006419-using-your-yubikey-with-authenticator-codes>`__.
         Other |2fa| |piv| hardware devices that use |totp| should
         work in a similar fashion.

         .. note:: Informational Reference Only
         
            MongoDB does not endorse the aforementioned service, and
            its reference is intended only as informational. Defer to
            your organization's procedures in selecting the
            appropriate vendor or service for supporting |2fa| via
            smart card or similar device.

.. _two-factor-reset:

Reset Legacy Two Factor Authentication
--------------------------------------

Since legacy |2fa| is deprecated, if you have legacy |2fa| enabled and 
you lose access to your |2fa| device, you must 
:ref:`set up multi-factor authentication <atlas-enable-mfa>` 
to replace |2fa|.
