=================================
Preparing Backing MongoDB Servers
=================================

.. default-domain:: mongodb

Overview
--------

Backing MongoDB servers run the databases that store |onprem| data and
snapshots. |onprem| requires separate backing servers for the
:ref:`mms-application-database` and the
:ref:`mms-backup-blockstore-database`.

You provision backing MongoDB servers when you install |onprem|, but if you run out
of capacity on the |onprem| Backup Blockstore database, you can add capacity by
provisioning additional backing servers.

The databases that run on the backing MongoDB servers:

- Store data in support of |onprem| operations and store no other data.

- Must be running MongoDB 2.4.9 or later.

- Must have the MongoDB ``security.javascriptEnabled`` set to ``true``, which
  is the default. The |onprem| Application uses the :query:`$where` query and
  requires this setting be enabled on the MMS Application database.

- Must **not** run the MongoDB ``notablescan`` option.

Requirements and Specifications
-------------------------------

Read the :manual:`MongoDB Production Notes </administration/production-notes>`
before installing MongoDB and other software on your servers.

MMS Application Database Specifications

.. include:: /includes/requirements-application-database.rst

|onprem| Backup Blockstore Database Specifications
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/requirements-backup-blockstore-database.rst

Procedure
---------

To create replica sets, start the :program:`mongod` instances for each member
of a new replica set, configure the replica set, then add the
:program:`mongod` instances to the replica set. For more information, see
:manual:`Deploy a Replica Set </tutorial/deploy-replica-set>` in the MongoDB
manual.

For information on installing MongoDB, see :manual:`Install MongoDB
</installation/>`.
