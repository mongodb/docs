=================
Automation Status
=================

.. default-domain:: mongodb

Overview
--------

The Public API provides the ``automationStatus`` resource to retrieve the
status of each MongoDB process in the deployment.

The ``automationStatus`` resource returns the ``goalVersion`` field and
the ``processes`` array. The array reports the status of each MongoDB
process as viewed by the Automation Agent.

Sample Entity
-------------

.. code-block:: javascript

   "goalVersion": 29,
   "processes": [
       {
           "hostname": "AGENT_HOST_0",
           "name": "BLUE_0",
           "lastGoalAchieved": 28,
           "plan": ["Download", "Start", "WaitRsInit"]
       },
       {
           "hostname": "AGENT_HOST_1",
           "name": "BLUE_1",
           "lastGoalAchieved": 29,
           "plan": []
       }
   ]

Entity Fields
-------------

.. list-table::
   :widths: 10 10 80
   :header-rows: 1

   * - Name
     - Type
     - Description
   * - goalVersion
     - integer
     - The version of the most recently submitted :ref:`automation
       configuration <automation-configuration-sample-entity>`. If there is a
       :ref:`conflict in submissions of automation configurations
       <concurrent-cluster-config>`, this field lists the winning
       configuration.
   * - processes
     - array
     - The group's deployed MongoDB instances.
   * - hostname
     - string
     - The fully qualified domain name (retrieved by issuing ``hostname -f``)
       of the server on which the MongoDB process and Automation Agent are
       hosted.
   * - name
     - string
     - The process name as specified in the automation configuration.
   * - lastGoalAchieved
     - integer
     - The last version of the automation configuration with which this
       process had deployed as configured. If the ``lastGoalAchieved``
       number is not equal to the ``goalVersion`` number, the process has
       not yet deployed according to the current configuration.
   * - plan
     - array
     - Describes how a process that is not yet up-to-date with the
       configuration will achieve the goal state.

Operation
---------

- ``GET /api/public/v1.0/groups/GROUP-ID/automationStatus``

  Retrieve the status of each MongoDB process in the deployment.

Example
-------

Update a host: ::

  curl -u "username:apiKey" "https://mms.mongodb.com/api/public/v1.0/groups/533c5895b91030606f21033a/automationStatus" --digest -i
