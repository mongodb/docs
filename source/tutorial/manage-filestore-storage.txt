===================================
Manage File System Snapshot Storage
===================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Ops Manager can backup databases to either another database (blockstore), to a
local file system or a combination of both. This tutorial covers using
file system stores to backup your MongoDB databases. 

If you use file system snapshot storage and use multiple |onprem| instances
(including those activated as Backup Daemons), all |onprem| instances
must have the same view of the file system snapshot storage. You can achieve
this through a Network File System (NFS) application or something similar. If
the |onprem| instances do not share the same view of file
system snapshot storage, Backup restores will not be possible and |onprem|
will not be able to remove expired snapshots.

.. note::
   Use multiple snapshot stores when you must add capacity or when you
   must meet data localization or other regulatory requirements.
   :doc:`/tutorial/assign-snapshot-stores-to-data-center` describes how
   to assign snapshot stores to different data centers.

Prerequisites
-------------

Before creating any file system snapshot stores:

- Ensure a storage volume with sufficient capacity is attached to the |onprem|
  server to store the snapshot files and the oplog MongoDB database.

- :doc:`Deploy the dedicated MongoDB instance(s) 
  </tutorial/prepare-backing-mongodb-instances>` to host the oplog stores for this 
  snapshot store.

- If you use multiple |onprem| instances (including those activated as
  Backup Backup Daemons), set up a Network File System (NFS) application or
  something similar to ensure the all instances share the same view
  of file system snapshot storage.

.. include:: /includes/important-multiple-instances-share-view-filesystem-snapshots.rst

Procedures
----------

.. _add-filestore:

Add a File System Store
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/admin-add-filestore.rst


.. _edit-filestore:

Edit an Existing File System Store
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Once created, file system stores are listed directly on the Snapshot Storage page in a table. Each row contains the settings for each File System Store.

.. include:: /includes/steps/admin-edit-filestore.rst


.. _delete-filestore:

Delete a File System Store
~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/admin-delete-filestore.rst

