title: "Open the ``conf-mms.properties`` file with ``root`` (Linux) or :guilabel:`Administrator` (Windows) privileges."
level: 4
stepnum: 1
level: 4
ref: config-files
content: |
  This file configures |onprem|'s connection to the :ref:`mms-application-database`.
---
title: "Configure |onprem| to connect to the |application| Database."
stepnum: 2
level: 4
ref: configure-application-access-control
content: |
  :setting:`mongo.mongoUri` contains the connection string used to access the
  :ref:`mms-application-database`.

  The :setting:`mongo.mongoUri` reference provides examples of the connection
  string format for each authentication mechanism and details the required
  permissions for the connecting user.

  For an |application| Database using Kerberos authentication, the
  :setting:`mongo.mongoUri` setting would resemble:

  .. code-block:: ini

     mongo.mongoUri=mongodb://username%40REALM.example.net@mydb1.example.net:
     40000/?authMechanism=GSSAPI
---
title: "Configure any other authentication mechanism-specific settings in ``conf-mms.properties``."
stepnum: 3
level: 4
ref: configure-auth
action:
  - pre: |
      If you are using Kerberos authentication, you must :ref:`configure
      the Kerberos settings <configuration-kerberos-settings>`,
      as in the following:
    language: ini
    code: |
      jvm.java.security.krb5.kdc=kdc.example.com
      jvm.java.security.krb5.realm=EXAMPLE.COM
      mms.kerberos.principal=mms/mmsweb.example.com@EXAMPLE.COM
      mms.kerberos.keyTab=/path/to/mms.keytab
  - pre: |
      If you are using x.509 Client Certificate Authentication, you must
      also be connecting over SSL. See: :ref:`configure-ssl-backing` for
      the SSL configuration instructions.
---
title: "Restart all the |onprem| instances, including those with the Backup Daemon enabled."
stepnum: 4
level: 4
ref: restart-onprem-and-daemon
pre: |
  If the |application| Database is running over SSL, proceed to the
  :ref:`SSL configuration tutorial <configure-ssl-backing>`.
content: |
  Restart |onprem| using the appropriate command
  for your distribution:

  Installed on Linux with DEB or RPM package:

  .. code-block:: sh

     sudo service mongodb-mms restart

  Installed on Linux from an Archive:

  .. code-block:: sh

     <install_dir>/bin/mongodb-mms restart

  Installed on Windows:

  a. Click :guilabel:`Control Panel`.

  b. Click :guilabel:`System and Security`.

  c. Click :guilabel:`Administrative Tools`.

  d. Click :guilabel:`Services`.

  e. In the **Services** list, right-click on the :guilabel:`MongoDB Ops
     Manager HTTP Service` and click :guilabel:`Restart`.

  f. Optionally, in the **Services** list, right-click on the :guilabel:`MongoDB
     Backup Daemon Service` and click :guilabel:`Restart`.
...
