===========================
MongoDB Agent Prerequisites
===========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/styles/corrections.rst

.. tabs-pillstrip:: platforms

Chip Architectures
------------------

The MongoDB Agent must run on 64-bit architectures.

Server Networking Access
------------------------

The hosts that serve the MongoDB deployments must:

- Have full networking access to each other through their fully
  qualified domain names (FQDNs). Each host must be able to reach every
  other host through the |fqdn|. To find the |fqdn| for each host, run
  the following command in the shell:

  .. code-block:: sh

     hostname -f

- Resolve each |fqdn| to a unique IP address. Run the following
  command in the shell to resolve the |fqdn|:

  .. code-block:: sh

     dig +short myip.opendns.com @resolver1.opendns.com

- Set the Common Name or :rfc:`Subject Alternative Name <3280>` value
  of any |ssl| certificates to the MongoDB hostâ€™s |fqdn|.

The network configuration must allow each MongoDB Agent to
make a direct connection to every MongoDB deployment listed on the
:guilabel:`Deployment` page. |mms| does not support port forwarding.

Installing to a Host that Already Runs MongoDB
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you install the MongoDB Agent to a server that is already running
a MongoDB process, the agent must have:

- Permission to stop any MongoDB processes. The MongoDB Agent
  restarts the process using the Agent's own set of MongoDB binaries.
  If you had installed MongoDB with a package manager, use the same
  package manager to install the MongoDB Agent. This gives the agent
  the same owner as MongoDB.

- ``Read`` and ``Write`` permissions on the MongoDB data directory and
  log directory.

Installing to a Host Before Installing MongoDB
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you deploy the MongoDB Agent to a server that does not have
MongoDB installed, ensure the user that owns the MongoDB Agent has
``Read`` and ``Write`` permissions on the MongoDB data and log
directories you plan to use.

.. _generate-agent-api-key:

.. include:: /includes/prerequisites-agent-api-key.rst

.. tabs-platforms::

   tabs:
     - id: windows
       content: |

         Disable Windows Firewall Stealth Mode
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

         Windows Firewall stealth mode should be disabled on the MongoDB
         hosts on which the MongoDB Agent is installed for best
         performance.

     - id: debian
       content: |

         Root Access
         ~~~~~~~~~~~

         To install the MongoDB Agent using a ``deb`` package, you must
         have ``root`` access.

