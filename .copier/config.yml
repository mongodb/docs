# Docs Copier Workflow Configuration
# Referenced from main config file in https://github.com/mongodb/code-example-tooling/blob/main/.copier/workflows/main.yaml

# ============================================================================
# LOCAL DEFAULTS
# ============================================================================
# These defaults apply to all workflows in this file
# They override main config defaults but can be overridden by individual workflows

defaults:
  exclude:
    - "**/.env"
    - "**/node_modules/**"
  deprecation_check:
    enabled: true
    file: "deprecated_examples.json"

# ============================================================================
# WORKFLOW CONFIGURATION
# ============================================================================
# To add a workflow, create a DOCSP Jira ticket with the component set to `DevDocs`.s
# See also [README.md](https://github.com/mongodb/code-example-tooling/blob/main/examples-copier/docs/README.md)

workflows:

  # --------------------------------------------------------------------------
  # Go SDK Project Examples â†’ Artifact Repo (Architecture Center)
  # --------------------------------------------------------------------------
  - name: "atlas-sdk-go-project-examples" 
    destination: 
      repo: "mongodb/atlas-architecture-go-sdk"
      branch: "main"
    
    transformations:
      - glob:
          pattern: "content/code-examples/tested/go/atlas-sdk/project-copy/**/*"
          transform: "${relative_path}"
    
    commit_strategy:
      type: "pull_request"
      pr_title: "Update Atlas SDK Go examples from ${source_repo} PR ${pr_number}"
      pr_body: |
        Automated update of Atlas SDK Go project examples

        - Source: ${source_repo}
        - Source PR: #${pr_number}
        - Commit: ${commit_sha}
        
        **Changes:**
        - Files updated: ${file_count}
      commit_message: "Automated copy from ${source_repo} PR #${pr_number}"
      auto_merge: false
    
