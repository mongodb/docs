=============================================
Manage Your Two-Factor Authentication Options
=============================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

.. only:: cloud

   |mms| requires two-factor authentication to help users control
   access to their |mms| accounts. To log into |mms|, a user must
   provide their password (i.e. "something you know"), as well as a
   second time-sensitive verification code, delivered during
   authentication (i.e. "something you have"). By requiring both
   factors, |mms| can grant authentication requests with a higher
   degree of confidence.

.. only:: onprem

   When enabled, |mms| requires two-factor authentication to help
   users control access to their |mms| accounts. To log into |mms|, a
   user must provide their password (i.e. "something you know"), as
   well as a second time-sensitive verification code, delivered during
   authentication (i.e. "something you have"). By requiring both
   factors, |mms| can grant authentication requests with a higher
   degree of confidence.

|mms| users receive verification codes through text messages (SMS),
automated voice calls or an application that implements the
`Time-based One-time Password Algorithm (TOTP)
<http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm>`_,
such as the Google Authenticator, Duo Mobile or Authy applications.
Users can configure two-factor authentication mechanisms when signing
up for |mms| or from your user :guilabel:`Account` page. To access
your user :guilabel:`Account` page, click on your user name in the
upper-right hand corner and select :guilabel:`Account`.

.. only:: onprem

   .. note::

      .. include:: /includes/extracts/two-factor-authentication-full-environment.rst

Authentication with Text or Voice Messages
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Users can receive verification codes through text or voice by providing
phone numbers when setting up their |mms| profiles. When a user needs a
code, |mms| sends the code using text (SMS) or through an automated
phone call that reads out the code.

Certain network providers and countries may impose delays on SMS
messages. Users who experience delays should consider
`Google Authenticator <https://en.wikipedia.org/wiki/Google_Authenticator?oldid=852977877>`__
for verification codes.

.. include:: /includes/fact-two-factor-auth-India-limit.rst

Authentication using Google Authenticator
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Google Authenticator is a smartphone application that uses
`TOTP
<http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm>`__
to generate verification codes. When a user needs a code, the
application generates a time-based code based on a private key that
was shared between |mms| and the user's Google Authenticator
application during the initial pairing process.

The Google Authenticator application **does not** require a Google
account and does not connect a user's |mms| account to Google in any
way. Google Authenticator has both `iOS
<https://itunes.apple.com/us/app/google-authenticator/id388497605>`_ and
`Android
<https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2>`_
editions, and the user does not need to associate the application with
a Google account. |mms| two-factor authentication using Google
Authenticator is not in any way integrated with Googleâ€™s own account
authentication mechanisms, and |mms| does *not* provide two-factor
authentication codes to Google.

Other Two Factor Authentication Implementations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

There are implementations of the Time-based One-time Password Algorithm
(TOTP) other than Google Authenticator. 

.. example::

   The
   `Authenticator <http://www.windowsphone.com/en-us/store/app/authenticator/021dd79f-0598-e011-986b-78e7d1fa76f8>`_
   application for Windows Phones.

Ensure that whichever devices runs the TOTP application has its own
set of robust authentication requirements.
To learn about more implementations of TOTP, consider the
`list of TOTP implementations`_ on Wikipedia.

.. _`list of TOTP implementations`: http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm#Client_implementations

Two-Factor Authentication on a Shared Account
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A global team that shares the same |mms| account can use Google
Authenticator and use the same seed code for all team members. To
generate a common seed code that all team members can use, select the
:guilabel:`Can't scan the barcode?` link when
:ref:`Configuring Two-Factor Authentication with Google Authenticator <two-factor-google-authenticator>`.

Configure Two-Factor Authentication with Text or Voice
------------------------------------------------------

.. include:: /includes/steps/two-factor-auth-configure-text-voice.rst

.. _two-factor-google-authenticator:

Configure Two-Factor Authentication with Google Authenticator
-------------------------------------------------------------

.. include:: /includes/steps/two-factor-auth-configure-authenticator.rst

Generate New Recovery Codes
---------------------------

As a backup, you can generate recovery codes to use in place of a sent
code when you do not have access to a phone or your Google
Authenticator application. Each recovery code is single-use, and you
should save these codes in a secure place. When you generate new
recovery codes, you invalidate previously generated ones.

.. include:: /includes/steps/two-factor-generate-recovery-codes.rst

Reset Two Factor Authentication
-------------------------------

.. important:: 
   
   Resetting |2fa| for an |mms| account disables |2fa| for that
   account. You can re-configure |2fa| after performing the reset
   procedure.

#. Log in to |mms|.

#. From the |2fa| entry dialog:

   a. Click the :guilabel:`Reset your two factor authentication` link.

   .. cond:: onprem

      b. Click :guilabel:`Ops Manager user? Click here`.
      
   .. cond:: cloud

      b. Click :guilabel:`Cloud Manager user? Click here`.
   
#. Type your |mms| username. |mms| emails a link to the e-mail
   account associated with the |mms| username.

#. Check your email, and click the link that |mms| sent to start the
   |2fa| reset procedure.
   
#. Follow the directions on the |2fa| reset page. After completing the
   reset procedure, |mms| allows you to log in to the |mms| account
   without requiring a :abbr:`2FA (Two Factor Authentication)` code.
