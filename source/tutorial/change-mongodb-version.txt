=============================
Change the Version of MongoDB
=============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can upgrade or downgrade MongoDB versions within the same Feature
Compatibility Version (FCV) in |mms| :term:`sharded clusters <sharded cluster>`,
:term:`replica sets <replica set>`, and :term:`standalone MongoDB instances <standalone>`
while maximizing the availability of your deployments.

You can :doc:`add custom-built versions of MongoDB </tutorial/configure-available-mongodb-version>`
for |mms| to download.

If |mms| does not manage your deployment, you need to change the version
of MongoDB manually. To learn more, see upgrade tutorials for each 
:manual:`MongoDB release </release-notes>`.

.. include:: /includes/extracts/mongodb-eol-3.6.rst

Considerations
--------------

.. include:: /includes/considerations-change-mongodb-version.rst

Prerequisites
-------------

Remove Incompatible MongoDB Features when Downgrading
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If the MongoDB deployment has set its
:guilabel:`Feature Compatibility Version` to the same release series
as its :guilabel:`Version`, you must first downgrade the
:manual:`featureCompatibilityVersion</reference/command/setFeatureCompatibilityVersion>`
of the instance manually.

.. cond:: onprem

   .. tabs::

      .. tab:: 4.2 to 4.0
         :tabid: four-two-to-three-six

         .. include:: /includes/steps/remove-incompat-features-42-40.rst

      .. tab:: 4.0 to 3.6
         :tabid: four-oh-to-three-six

         .. include:: /includes/steps/remove-incompat-features-40-36.rst

      .. tab:: 3.6 to 3.4
         :tabid: three-six-to-three-four

         .. include:: /includes/steps/remove-incompat-features-36-34.rst

      .. tab:: 3.4 to 3.2
         :tabid: three-four-to-three-two

         .. include:: /includes/steps/remove-incompat-features-34-32.rst

.. cond:: cloud

   .. tabs::

      .. tab:: 4.2 to 4.0
         :tabid: four-two-to-three-six

         .. include:: /includes/steps/remove-incompat-features-42-40.rst

      .. tab:: 4.0 to 3.6
         :tabid: four-oh-to-three-six

         .. include:: /includes/steps/remove-incompat-features-40-36.rst

      .. tab:: 3.6 to 3.4
         :tabid: three-six-to-three-four

         .. include:: /includes/steps/remove-incompat-features-36-34.rst

Procedure
---------

.. include:: /includes/steps/change-mongodb-version.rst
