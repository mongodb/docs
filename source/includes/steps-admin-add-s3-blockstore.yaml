stepnum: 1
source:
  file: steps-source-admin-navigation.yaml
  ref:  admin-backup-snapshot
---
title: "Click :guilabel:`Create New S3 Blockstore`."
stepnum: 2
level: 4
ref: create-new-s3-blockstore
---
title: "Provide the S3 blockstore details."
stepnum: 3
level: 4
ref: provide-new-s3-blockstore-details
content: |

   .. list-table::
      :widths: 30 70
      :header-rows: 1

      * - Field
        - Contents

      * - :guilabel:`Name`

        - Type the name for the :abbr:`S3 (Simple Storage Service)` blockstore.
        
      * - :guilabel:`S3 Bucket Name`

        - Type the name of the :abbr:`S3 (Simple Storage Service)` bucket
          where you want to host the the :abbr:`S3 (Simple Storage Service)`
          blockstore.

          .. important::

             You cannot move an :abbr:`S3 (Simple Storage Service)` blockstore
             to another :abbr:`S3 (Simple Storage Service)` bucket after the
             :abbr:`S3 (Simple Storage Service)` blockstore has been created.
             If you need to use a different :abbr:`S3 (Simple Storage
             Service)` bucket to host your :abbr:`S3 (Simple Storage Service)`
             blockstore, you need to create a new :abbr:`S3 (Simple Storage
             Service)` blockstore in that different :abbr:`S3 (Simple Storage
             Service)` bucket.

      * - :guilabel:`S3 Endpoint`
        - Type the :abbr:`URL (Uniform Resource Locator)` for an :abbr:`AWS
          (Amazon Web Services)` :abbr:`S3 (Simple Storage Service)` or
          :abbr:`S3 (Simple Storage Service)`-compatible bucket.

          .. note::

             MongoDB currently supports endpoints for:

             - :abbr:`AWS (Amazon Web Services)` :abbr:`S3 (Simple Storage Service)` 
               `API <http://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html>`_,
             - IBM `Cloud Object Storage <https://developer.ibm.com/recipes/tutorials/cloud-object-storage-s3-api-intro/>`_ 
               `API <https://ibm-public-cos.github.io/crs-docs/index.html>`_ and 
             - DellEMC `Elastic Cloud Storage <https://www.dellemc.com/en-us/storage/ecs/index.htm#collapse=>`_ 
               `API <https://www.emc.com/techpubs/ecs/ecs_s3_supported_features-1.htm>`_.

             IBM and DellEMC support a subset of the full :abbr:`AWS (Amazon
             Web Services)` :abbr:`S3 (Simple Storage Service)` :abbr:`API
             (Application Programming Interface)`.

      * - :guilabel:`Path Style Access`

        - Click if you want your :abbr:`AWS (Amazon Web Services)` :abbr:`S3
          (Simple Storage Service)` or :abbr:`S3 (Simple Storage
          Service)`-compatible bucket to use a path style :abbr:`URL (Uniform
          Resource Locator)` endpoint (``s3.amazonaws.com/<bucket>``) instead
          of a virtual host style :abbr:`URL (Uniform Resource Locator)`
          endpoint (``<bucket>.s3.amazonaws.com``).
        
      * - :guilabel:`AWS Access Key`

        - Type your :abbr:`AWS (Amazon Web Services)` Access Key ID.
        
      * - :guilabel:`AWS Secret Key`

        - Type your :abbr:`AWS (Amazon Web Services)` Secret Access Key.
        
      * - :guilabel:`Datastore Type`

        - Select :guilabel:`Standalone`, :guilabel:`Replica Set` or
          :guilabel:`Sharded Cluster`. This MongoDB database stores
          the metadata for the blockstore.

      * - :guilabel:`MongoDB Host List` 
          (:term:`Replica Set` and :term:`Sharded Cluster` only) 

        - Type a comma-separated list of :program:`mongod` instances
          (for a Replica Set) or :program:`mongos` instances (for a
          Sharded Cluster) in the ``<hostname:port>`` format that
          comprise the blockstore metadata database.

          .. example::

             ``host1.example.com:27017, host2.example.com:27017, host2.example.com:27018``

      * - :guilabel:`MongoDB Hostname` 
          (Standalone only)

        - Type the hostname of the :abbr:`S3 (Simple Storage Service)`
          blockstore metadata database.
        
      * - :guilabel:`MongoDB Port` 
          (Standalone only)

        - Type the port number of the :abbr:`S3 (Simple Storage Service)`
          blockstore metadata database.
        
      * - :guilabel:`Username` 

        - 

          .. list-table::
             :widths: 25 45 30
             :header-rows: 1

             * - Auth Mechanism
               - Action
               - Configure Instructions

             * - Username and Password (``SCRAM-SHA-1``)
               - Type the name of the user authorized to access the S3
                 blockstore metadata database.
               - :manual:`SCRAM-SHA-1 </core/security-
                 scram-sha-1>`

             * - x.509 (``X.509``)
               - Type the `RFC2253
                 <https://www.ietf.org/rfc/rfc2253.txt>`_-formatted
                 subject from the client certificate of the user
                 authorized to access the S3 blockstore metadata
                 database.
               - :manual:`x.509 </tutorial/configure-x509-client-authentication>`

             * - Kerberos (``GSSAPI``)
               - Type the User Principal Name of the user authorized to
                 access the S3 blockstore metadata database.
               - :manual:`Kerberos </core/kerberos>`

             * - LDAP (``PLAIN``)
               - Type the name of the :abbr:`LDAP (Lightweight
                 Directory Access Protocol)` user authorized to access
                 the S3 blockstore metadata database.
               - :manual:`LDAP </core/security-ldap>`

      * - :guilabel:`Password` (optional) 

        - 

          .. list-table::
             :widths: 25 45 30
             :header-rows: 1

             * - Auth Mechanism
               - Action
               - Configure Instructions

             * - Username and Password (``SCRAM-SHA-1``)
               - Type the password associated with the username that
                 can access the S3 blockstore metadata database.
               - :manual:`SCRAM-SHA-1 </core/security-
                 scram-sha-1>`

             * - x.509 (``X.509``)
               - Leave it blank.
               - :manual:`x.509 </tutorial/configure-x509-client-authentication>`

             * - Kerberos (``GSSAPI``)
               - Kerberos retrieves the password from its 
                 :doc:`keytab file </tutorial/enable-kerberos-authentication-for-group/>`. 
                 You do not need to type a password into this field.
               - :manual:`Kerberos </core/kerberos>`

             * - LDAP (``PLAIN``)
               - Type the password of the :abbr:`LDAP (Lightweight
                 Directory Access Protocol)` user authorized to access
                 the S3 blockstore metadata database.
               - :manual:`LDAP </core/security-ldap>`
        
      * - :guilabel:`Connection Options` (optional) 

        - Type any additional :manual:`configuration file options
          </reference/configuration-options>` for the MongoDB instance.

          This field supports unescaped values only.

          For proper syntax, see :manual:`Connection String URI
          Format </reference/connection-string>` in the MongoDB manual.
        
      * - :guilabel:`Encrypted Credentials` (optional)

        - Select if the credentials for the database were encrypted using the
          :ref:`credentialstool <encrypt-mongodb-user-credentials>`. 
          The credentials include the Username, Password, AWS Access
          Key ID and AWS Secret Key.

      * - :guilabel:`Use TLS/SSL` (optional)

        - Select if the :abbr:`S3 (Simple Storage Service)` blockstore
          metadata database only accepts connection encrypted using :abbr:`TLS
          (Transport Layer Security)`/:abbr:`SSL (Secure Sockets Layer)`.

          To enable :abbr:`TLS (Transport Layer Security)`/:abbr:`SSL (Secure
          Sockets Layer)` on the :abbr:`S3 (Simple Storage Service)`
          blockstore metadata database, see :manual:`Configure mongod and
          mongos for TLS/SSL </tutorial/configure-ssl>`.
        
      * - :guilabel:`New Assignment Enabled` (optional)

        - Select if you want to enable this :abbr:`S3 (Simple Storage
          Service)` blockstore after creating it. This is selected by default
          so the :abbr:`S3 (Simple Storage Service)` blockstore can be
          assigned backup jobs. If you clear this checkbox, the :abbr:`S3
          (Simple Storage Service)` blockstore is created but you cannot
          assign backups to this :abbr:`S3 (Simple Storage Service)`
          blockstore.

---
title: "Click :guilabel:`Create`."
stepnum: 4
level: 4
ref: create-blockstore 
...
