=======================================
Convert Config Servers to a Replica Set
=======================================

.. default-domain:: mongodb

Overview
--------

Beginning in MongoDB 3.2, :term:`config servers <config server>` run the
WiredTiger storage engine and run as replica sets, both by default. Config
servers store metadata for a sharded cluster. The metadata they store enable
the consistent view
of data across the cluster. Running config servers as replica sets allows
you to configure the availability of your cluster metadata, according to
your organization's needs.
You can manage config server replica sets just as you do all
replica sets.

You can convert pre-3.2 config servers to replica sets by first upgrading
their sharded cluster to 3.2 and then selecting the option for |mms| to
perform the conversion. If the config servers use the MMAPv1 :term:`storage
engine`, |mms| changes the storage engine to WiredTiger.

During storage engine conversion, |mms| creates temporary config servers on
ephemeral ports. Automation eventually deletes these hosts after the
upgrade. But if your Monitoring Agent should detect them at any point
during the conversion, they'll appear as unreachable hosts in your
deployments list. You can delete them from the list. See
:doc:`/tutorial/unmanage-deployment`.

Prerequisites
-------------

To convert a set of config servers to a replica set, you must:

- Have three config servers.

- Upgrade your sharded cluster to MongoDB 3.2 or higher before converting
  the config servers. To upgrade the MongoDB version, see
  :doc:`/tutorial/change-mongodb-version`.

Procedure
---------

.. include:: /includes/steps/convert-config-servers-to-replica-set.rst
