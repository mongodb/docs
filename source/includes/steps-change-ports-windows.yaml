stepnum: 1
level: 4
ref: open-the-registry
title: "Open the Registry Editor."
content: |
  From the :guilabel:`Start` menu, click :guilabel:`Run`, and then type
  ``regedit``, and click :guilabel:`OK`. The Registry Editor will open.
---
stepnum: 2
level: 4
ref: open-mms-params
title: "Set the port that |onprem| should use."
content: |
  By default, |onprem| uses port ``8080``. You can change the port
  by editing the relevant registry value.

  Open the following registry value:
    
  .. code-block:: none

     SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\MMS\Parameters\Java\Options
---
stepnum: 3
level: 4
ref: edit-base-port
title: "Add ``-Dbase-port=<portnumber>`` to the ``Options`` registry value, setting the value to the desired port."
action:
  pre: "Add a new line in the ``Options`` file that resembles the following:"
  language: none
  code: |
    -Dbase-port=11700
  post: "When changing the port, ensure that the chosen port is available."
---
stepnum: 4
level: 4
ref: open-bslurp-params
title: "To change the Backup HTTP Service's port, open the ``\\MMSBSlurp\\Parameters\\Java\\Options`` registry value."
content: |
  Open the following registry value:

  .. code-block:: none

     SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\MMSBSlurp\Parameters\Java\Options
---
stepnum: 5
level: 4
ref: edit-bslurp-port
title: "Edit ``-Dbase-port=8081`` to point to the desired port."
action:
  pre: |
    ``-Dbase-port=8081`` is already listed in the ``Options`` registry value. Edit it
    to use the desired port:
  language: sh
  code: |
    -Dbase-port=11701
  post: "When changing the port, ensure that the chosen port is available."
---
stepnum: 6
level: 4
ref: save-and-exist
title: "When you are done editing the settings, click :guilabel:`OK`, and exit the Registry Editor."
---
stepnum: 7
level: 4
ref: edit-url-configuration
title: "Edit :setting:`mms.centralUrl` and :setting:`mms.backupCentralUrl` to use the new ports."
pre: |
  Open :ref:`conf-mms.properties` with root access for editing.
action:
  - heading: "Update :setting:`mms.centralUrl` to use the new port specified by ``-DBase-port`` in the ``\\MMS\\Parameters\\Java\\Options`` registry value:"
    language: ini
    code: |
      mms.centralUrl=http://mms.example.com:11700
  - heading: "Update :setting:`mms.backupCentralUrl` to use the new port specified by ``-DBase-port`` in the ``\\MMSBSlurp\\Parameters\\Java\\Options`` registry value:"
    language: ini
    code: |
      mms.backupCentralUrl=http://mms.example.com:11701
    post: "Save the changes, and close the file."
---
stepnum: 8
level: 4
title: "Restart |onprem|."
ref: restart
content: |
  To restart the |onprem| HTTP service, open the :guilabel:`Control Panel`,
  then :guilabel:`System and Security`, then :guilabel:`Administrative Tools`,
  and finally, double click to open the :guilabel:`Services` window.

  In the :guilabel:`Services` list, restart the |win-http-service|
  and |win-backup-http-service| by right-clicking on them in the list, 
  and choosing :guilabel:`Restart`.
post: |
  |onprem| will restart. The |onprem|
  interface should be accessible at the new URL and port combination.
...