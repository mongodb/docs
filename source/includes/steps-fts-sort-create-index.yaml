stepnum: 1
level: 4
ref: nav-to-fts-sort
inherit:
  file: steps-source-project-nav.yaml
  ref: project-nav-search
---
stepnum: 2
level: 4
ref: click-create-fts-index-sort
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-fts-index
---
level: 4
stepnum: 3
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: select-a-configuration-method
---
stepnum: 4
level: 4
ref: "Enter the :guilabel:`Index Name`, and set the :guilabel:`Database and Collection`." 
content: |

  a. In the :guilabel:`Index Name` field, enter ``sort-tutorial``.

     .. include:: /includes/default-fts-index-name.rst 

  #. In the :guilabel:`Database and Collection` section, find the 
     ``sample_mflix`` database, and select the ``movies`` collection.
---
stepnum: 5
level: 4
ref: enter-index-definition-sort
title: "Specify an index definition."
content: |
  Use the :guilabel:`Visual Editor` or the :guilabel:`JSON Editor` 
  in the |service| user interface to create an index definition that:

  - Indexes the ``released`` and ``year`` fields as date and number
    field types respectively.
  - Indexes the ``title`` field as ``string`` and ``autocomplete`` types. 
  - Analyzes the title field using the ``lucene.keyword`` analyzer for
    the ``string`` type.
  - Stores the ``title`` field on ``mongot``.

  .. tabs::
      
     .. tab:: Visual Editor
        :tabid: visual-editor

        a. Click :guilabel:`Next`.
        #. Click :guilabel:`Refine Your Index`.
        #. In the :guilabel:`Index Configuration` section, toggle to
           disable :guilabel:`Dynamic Mapping`. 
        #. In the :guilabel:`Field Mappings` section, click
           :guilabel:`Add Field` and add the following fields by
           clicking :guilabel:`Add` after configuring the settings for
           each field.   
              
           .. list-table:: 
              :header-rows: 1
   
              * - Field Name  
                - Data Type Configuration 

              * - ``title``
                - i. Click :guilabel:`Data Type` dropdown and select
                     :guilabel:`String`.  
                  #. Change the :guilabel:`Index Analyzer` to
                     ``lucene.keyword``.
                  #. Click :guilabel:`Add Another Data Type` and select 
                     :guilabel:`Autocomplete` from the dropdown. 
                  #. Change the :guilabel:`Max Grams` and :guilabel:`Min
                     Grams` to ``5``, select ``false`` for
                     :guilabel:`Fold Diacritics`, and keep
                     :guilabel:`Tokenization` as ``edgeGram``.

              * - ``year``
                - i. Click :guilabel:`Data Type` dropdown and select
                     :guilabel:`Number`.
                  #. Keep the default value for all **Number
                     Properties**. 

              * - ``released``
                - i. Click :guilabel:`Data Type` dropdown. 
                  #. Select :guilabel:`Date` from the dropdown.

        #. In the :guilabel:`Stored Source Fields` section, click
           :guilabel:`Specified` and do the following:

           a. Select ``title`` from the dropdown under :guilabel:`Fields
              to Include in Stored Source`. 
           #. Click :guilabel:`Add`.

        #. Click :guilabel:`Save Changes`.

     .. tab:: JSON Editor
        :tabid: json-editor

        a. Replace the default definition with the following:

           .. code-block:: json
              :linenos:

              {
                "mappings": {
                  "dynamic": false,
                  "fields": {
                    "released": {
                      "type": "date"
                    },
                    "title": [
                      {
                        "foldDiacritics": false,
                        "maxGrams": 5,
                        "minGrams": 5,
                        "tokenization": "edgeGram",
                        "type": "autocomplete"
                      },
                      {
                        "analyzer": "lucene.keyword",
                        "searchAnalyzer": "lucene.keyword",
                        "type": "string"
                      }
                    ],
                    "year": {
                      "type": "number"
                    }
                  }
                },
                "storedSource": {
                  "include": [
                    "title"
                  ]
                }
              }

        #. step:: Click :guilabel:`Next`.
---
ref: click-create-index-fts-sort
level: 4
stepnum: 6
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: click-create-search-index
---
ref: close-in-progress-fts-sort
level: 4
stepnum: 7
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: close-in-progress
---
ref: wait-for-index-fts-sort
level: 4
stepnum: 8
inherit:
  file: steps-fts-tutorial-create-index.yaml
  ref: wait-for-index
---
