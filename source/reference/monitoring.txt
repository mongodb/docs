==========================================
Database Commands Used by {+magent+}
==========================================

.. default-domain:: mongodb

The {+magent+} uses a set of MongoDB diagnostic, administrative, and
other :manual:`database commands </reference/command>` to report on the status
of your MongoDB deployment. The agent uses these commands:

- :dbcommand:`_isSelf`
- :dbcommand:`buildInfo`

- :dbcommand:`collStats` on the following :manual:`local database
  </reference/local-database>` collections, which support replication
  operations:

  - :data:`local.oplog.rs`

- :dbcommand:`connPoolStats`

- :dbcommand:`dbStats` The {+magent+} collects storage statistics for a
  given database at 20 minute intervals.

- :dbcommand:`find` on the following :manual:`config database </reference/config-database>`
  collections, which support sharding operations:

  - :data:`config.chunks`
  - :data:`config.collections`
  - :data:`config.databases`
  - :data:`config.lockpings`
  - :data:`config.mongos`
  - :data:`config.settings`
  - :data:`config.shards`


- :dbcommand:`find` on the following :manual:`local database </reference/local-database>`
  collections, which support replication operations:

  - :data:`local.system.replset`

- :dbcommand:`find` on the :data:`system.profile <<database>.system.profile>`
  collection. Only if :doc:`database profiling </tutorial/profile-database>`
  is enabled. Database profiling is disabled by default.

- :method:`findOne <db.collection.findOne>` on the
  :data:`local.oplog.rs` collection. Only for MongoDB v2.6 and earlier.

- :dbcommand:`getCmdLineOpts`

- :dbcommand:`getLog` issued with:

  - A value of ``global``. Only if you have enabled :doc:`log collection
    </tutorial/view-logs>`.

  - A value of ``startupWarnings``.

- :dbcommand:`getParameter` issued with a value of ``*``
- :dbcommand:`getShardVersion`
- :dbcommand:`hostInfo`
- :dbcommand:`listDatabases`
- :dbcommand:`netstat`
 
- :dbcommand:`ping`

- :dbcommand:`profile`. Only if :doc:`database profiling
  </tutorial/profile-database>` is enabled. Database profiling is disabled by
  default.

- :dbcommand:`replSetGetStatus`
- :dbcommand:`serverStatus`
