.. _atlas-admin-api-access:

=========================================
Configure {+atlas-admin-api+} Access
=========================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

To access the {+atlas-admin-api+}, generate an
:ref:`API key <atlas-prog-api-key>` for your organization.

Organization |api| keys aren't associated with user credentials and
can't log in to the |service| console.

You can :ref:`limit the locations from which API requests can be made <enable-api-access-list>`.

.. _atlas-prog-api-key:

Organization API Keys
---------------------

Organization |api| keys have two parts: a Public Key and a Private Key.
You can't use an |api| key to log into |service| through its console.

All |api| keys belong to the organization. You can give an |api| key
access to a project.

- To create and manage |api| keys, use the :guilabel:`Access Manager`.

- To add the new |api| key created in an organization,
  :ref:`invite the API key to the project <invite-org-app-api-keys>`.

.. _about-org-app-api-keys:

Manage Organization API Keys
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. note:: Required Permission

   To perform any of the following actions, you must have the
   :authrole:`Organization Owner` role.

- :doc:`/tutorial/configure-api-access/organization/view-one-api-key`
- :doc:`/tutorial/configure-api-access/organization/create-one-api-key`
- :doc:`/tutorial/configure-api-access/organization/change-one-api-key`
- :doc:`/tutorial/configure-api-access/organization/remove-one-api-key`

.. _about-project-app-api-keys:

Manage API Key Access to a Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. note:: Required Permissions

   To perform any of the following actions, you must have the
   :authrole:`Project Owner` role.

- :doc:`/tutorial/configure-api-access/project/view-one-api-key`
- :doc:`/tutorial/configure-api-access/project/create-one-api-key`
- :doc:`/tutorial/configure-api-access/project/change-one-api-key`
- :doc:`/tutorial/configure-api-access/project/remove-one-api-key`
- :doc:`/tutorial/configure-api-access/project/invite-org-to-project`
- :doc:`/tutorial/configure-api-access/project/change-one-api-key-access-list`

.. _enable-api-access-list:

API Resource Request Access Lists
---------------------------------

|service| allows your API key to make requests from any address on the
internet. |service| has some exceptions to this rule. These exceptions
limit which :ref:`resources <atlas-require-api-access-list>` an API key
can use without location-based limits.

To add these location-based limits to your API key, create an **API
Access List**. This list limits the internet addresses from which a
specific API key to make API requests.

Any |api| keys with an |api| access list require all |api| requests to
come from an IP address on that list. Your API access list must include
entries for all clients that use the |api|.

.. _atlas-require-api-access-list:

Use API Resources that Require an Access List
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following |api| resources require an API access list:

Organization API Access List Entries
````````````````````````````````````

:doc:`Create </reference/api/apiKeys-orgs-create-one>`
or :doc:`remove </reference/api/apiKey-delete-one-apiKey>` an
organization API key access list entry.

Cloud Backup Restores
`````````````````````

- Return a :doc:`dedicated </reference/api/cloud-backup/restore/get-one-restore-job>`
  or :doc:`serverless </reference/api/cloud-backup/restore/return-one-restore-job-for-one-serverless-instance>`
  cloud backup restore job.

- Return all
  :doc:`dedicated </reference/api/cloud-backup/restore/get-all-restore-jobs>`
  or
  :doc:`serverless </reference/api/cloud-backup/restore/return-all-restore-jobs-for-one-serverless-instance>` 
  cloud backup restore jobs.

- Restore a :doc:`dedicated </reference/api/cloud-backup/restore/create-one-restore-job>`
  or :doc:`serverless </reference/api/cloud-backup/restore/restore-one-snapshot-of-one-serverless-instance>`
  cloud backup snapshot.

- Cancel the restore of a :doc:`dedicated </reference/api/cloud-backup/restore/delete-one-restore-job>`
  or serverless cloud backup snapshot.

Cloud Backup Snapshots
``````````````````````

:doc:`Take </reference/api/cloud-backup/backup/get-all-backups>` or
:doc:`remove </reference/api/cloud-backup/backup/delete-one-backup>`
one cloud backup snapshot.

Legacy Backups
``````````````

- :doc:`Restore </reference/api/legacy-backup/restore/create-one-restore-job>`,
  :doc:`remove </reference/api/legacy-backup/backup/delete-one-snapshot>`,
  or :doc:`change the expiration date </reference/api/legacy-backup/backup/change-one-snapshot-expiration>`
  of a legacy backup snapshot.

- :doc:`Clear </reference/api/cloud-backup/schedule/delete-all-schedules>`
  or :doc:`update </reference/api/cloud-backup/schedule/modify-one-schedule>`
  a legacy backup snapshot schedule.

.. _atlas-require-all-api-access-list:

Require an API Access List for All Requests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can require *all* |api| requests from an |api| key to come from an
entry on its |api| access list. If you require |api| access lists, API
keys can't make any |api| requests until you define at least one |api|
access list entry.

To set your organization to require API access lists for every API key:

.. include:: /includes/steps/require-ip-access-list.rst

.. toctree::
   :titlesonly:

   /tutorial/configure-api-access/organization/view-one-api-key
   /tutorial/configure-api-access/organization/create-one-api-key
   /tutorial/configure-api-access/organization/change-one-api-key
   /tutorial/configure-api-access/organization/remove-one-api-key
   /tutorial/configure-api-access/project/view-one-api-key
   /tutorial/configure-api-access/project/create-one-api-key
   /tutorial/configure-api-access/project/change-one-api-key
   /tutorial/configure-api-access/project/remove-one-api-key
   /tutorial/configure-api-access/project/invite-org-to-project
   /tutorial/configure-api-access/project/change-one-api-key-access-list
