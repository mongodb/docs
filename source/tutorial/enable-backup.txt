====================
Back up a Deployment
====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

You can choose to back up all databases and collections on the deployment or specific ones.

.. important::

   .. include:: /includes/fact-backup-standalone-restriction.rst

Unique Names for Deployment Items
---------------------------------

Ensure your deployment items have unique names before creating backups.

.. include:: /includes/important-unique-names-deployment-items.rst

Prerequisites
-------------

- For a Replica Set:

  - |mms| must be monitoring the deployment.

  - It must run MongoDB version 2.6 or later.

  - It must have an active :term:`primary` node.
  
- For a Sharded Cluster:

  - |mms| must be monitoring the deployment, including at
    least one :program:`mongos` in the cluster.

  - It must run MongoDB version 2.6 or later.

  - All :term:`config servers <config server>` must be running. The
    config server ``mongod`` processes must be started with either the
    ``--configsvr`` command line option or the ``{ "clusterRole":
    "configsvr" }`` setting in the ``mongod`` configuration file.

  - The balancing round must be able to complete in less than one hour.

- .. include:: /includes/extracts/backup-prereq-mongodb-compatibility.rst

- Decide how to back up the data and what data to back up. See the
  :doc:`/core/backup-preparations`.

Procedure
---------

.. include:: /includes/steps/enable-backup.rst
