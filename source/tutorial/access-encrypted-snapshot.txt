.. This feature is only available behind a feature flag for certain customers. This page has been hidden from the TOC and from Google/Docs search indexing.  

:orphan:

.. meta::

   :robots: noindex, nosnippet

============================
Access an Encrypted Snapshot
============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

When you use :ref:`security-kms-encryption`, |service| encrypts the
``mongod`` data files in your snapshots.  If you want to download and
restore a snapshot, the ``mongod`` can't read these data files unless it
has access to a |kmip| server that can provide the appropriate
decryption key. You can use the |kmip| Proxy Standalone to access the
``mongod`` data files. You download the |kmip| Proxy Standalone as a
binary for your specific operating system.

Considerations
--------------

Cloud Provider Credentials
~~~~~~~~~~~~~~~~~~~~~~~~~~

By default, the |kmip| Proxy Standalone uses the credentials stored in
the
``/<dbPath>/cloudProviderCredentials/<keyID>.<cloudProvider>.metadata``
file. If you rotate keys, these credentials reflect the latest key
rotation.

If the |kmip| Proxy Standalone binary is unable to decrypt the snapshots
using these credentials, the binary shows an error message stating that
you must update the metadata files on disk that contain the old
credentials. You can update the metadata file with any text editor.

Procedure
---------

.. include:: /includes/steps/access-encrypted-snapshot.rst

