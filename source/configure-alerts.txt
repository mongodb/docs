========================
Configure Alert Settings
========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

For each organization and project, you can select which conditions
trigger alerts and how users are notified.

.. include:: /includes/fact-free-shared-alerts.rst

Prerequisites
-------------

.. _alerts-webhook-ips:

|ipaddr| Addresses and |cidr| Blocks for Alert Webhooks
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You have the option to configure alerts to be delivered via webhook.
This sends an |http| ``POST`` request to an endpoint for
programmatic processing. 

If you want to successfully deliver a webhook to the specified
endpoint, the endpoint must accept incoming |http| ``POST`` from the
following |ipaddr| addresses and |cidr| blocks:

- ``107.20.0.247``
- ``18.210.185.2``
- ``18.210.245.203``
- ``18.214.178.145``
- ``18.235.145.62``
- ``18.235.48.235``
- ``34.192.82.120``
- ``34.233.152.179``
- ``34.233.179.140``
- ``34.235.52.68``
- ``35.171.106.60``
- ``35.172.148.213``
- ``35.172.245.18``
- ``35.174.179.65``
- ``35.174.230.146``
- ``35.175.94.38``
- ``52.206.222.245``
- ``52.21.89.200``
- ``52.87.98.128``
- ``54.173.82.137``
- ``54.175.147.155``
- ``4.71.186.128/25``
- ``4.35.16.128/25``

.. tabs::

   tabs:
     - id: org
       name: Organization Alerts
       content: |
         
     - id: project
       name: Project Alerts
       content: |
         
.. _default-alert-settings:

Default Alert Settings
----------------------

.. tabs::

   hidden: true

   tabs:
     - id: org
       name: Organization Alerts
       content: |
         
         |service| provides no default alerts for organizations.

     - id: project
       name: Project Alerts
       content: |

         |service| provides the following default alerts for a new
         project:

         - :alert:`Replica set has no primary`

         - :alert:`Cluster is missing an active mongos`

         - :alert:`Disk space % used on Data Partition is`

         - :alert:`Disk I/O % utilization on Data Partition is`

         - :alert:`User joined the project`

         - :alert:`Credit card is about to expire`

         - :alert:`Query Targeting: Scanned Objects / Returned`

         - :alert:`Connections % of configured limit is`

         - :alert:`System: CPU (Steal) % is`

         - :alert:`System: CPU (User) % is`

         |service| provides the following default alert for projects
         using :ref:`security-aws-kms`:

         - :alert:`AWS encryption key elapsed time since last rotation is above 365 days <AWS encryption key elapsed time since last rotation is above (n) days>`

.. _notification-options:

Notification Options
--------------------

.. tabs::

   hidden: true

   tabs:
     - id: org
       name: Organization Alerts
       content: |

         When you configure an alert, you select how notifications are
         sent. You can select multiple notification methods, such as
         email, text message, or team collaboration tools.

         |service| supports Slack as a notification method. From the
         organization's :guilabel:`Settings` menu, click
         :guilabel:`Add to Slack` in :guilabel:`Slack` Settings and
         log in to your preferred Slack workspace.

         |service| supports configuring all of the following
         notification methods during alert configuration:

         - PagerDuty

         - Flowdock

         - HipChat

         - DataDog

         - Webhook

         - VictorOps

         - OpsGenie

     - id: project
       name: Project Alerts
       content: |

         When you configure an alert, you select how notifications are
         sent. You can select multiple notification methods, such as
         email, text message, or team collaboration tools.

         To use certain notification methods, you must first set up
         notification methods in the project's :guilabel:`Settings`.
         If the notification method's value becomes invalid, |service|
         sends an email to the project owner. The following
         notification methods require set up in the Project's'
         :guilabel:`Settings`:

         - PagerDuty

         - Flowdock

         - HipChat

         - DataDog

         - Slack

         - Webhook

         - VictorOps

         - OpsGenie

.. _configure-alert-settings:

Configure an Alert
------------------

When you create a new alert, you can clone an existing alert.

.. tabs::

   hidden: true

   tabs:
     - id: org
       name: Organization Alerts
       content: |

         .. include:: /includes/steps/configure-org-alert.rst
         
     - id: project
       name: Project Alerts
       content: |

         .. include:: /includes/steps/configure-project-alert.rst

.. _disable-alert-setting:

Disable an Alert
----------------

.. tabs::

   hidden: true

   tabs:
     - id: org
       name: Organization Alerts
       content: |
         
         .. include:: /includes/steps/disable-org-alert.rst

         If you disable an alert setting, |service| cancels active
         alerts related to the setting. A disabled alert setting
         remains visible but grayed-out and can be later re-enabled.

   tabs:
     - id: project
       name: Project Alerts
       content: |

         .. include:: /includes/steps/disable-project-alert.rst

         If you disable an alert setting, |service| cancels active
         alerts related to the setting. A disabled alert setting
         remains visible but grayed-out and can be later re-enabled.

.. _delete-alert-setting:

Delete an Alert
---------------

.. tabs::

   hidden: true

   tabs:
     - id: org
       name: Organization Alerts
       content: |
         
         .. include:: /includes/steps/delete-org-alert.rst

         If you delete an alert setting, |service| cancels active
         alerts related to the setting. A deleted alert setting does
         not remain visible.

   tabs:
     - id: project
       name: Project Alerts
       content: |

         .. include:: /includes/steps/delete-project-alert.rst

         If you delete an alert setting, |service| cancels active
         alerts related to the setting. A deleted alert setting does
         not remain visible.

