===========================
Authentication Requirements
===========================

.. default-domain:: mongodb

|mms| requires elevated privileges to collect complete data from
MongoDB 2.4 instances with authentication
enabled.

.. admonition:: Sharded Cluster Requirements

   To properly configure the ``agent`` user on a sharded cluster, you
   must create the user on the :program:`mongos` **and** on each
   shard's replica set :manual:`primary </core/replica-set-primary>`.

   This creates an ``admin`` database that stores credentials that is
   specific to each shard. See :manual:`Sharded Cluster Security
   </core/sharded-cluster-security>` for a detailed discussion of
   authentication and authorization for sharded clusters.

Authentication Requirements
---------------------------

The following table lists the commands needed to grant the required
permissions to the ``agent`` user.  For an explanation of what each
privilege role means, see: `User Privilege Roles in MongoDB
<http://docs.mongodb.org/manual/reference/user-privileges/>`_.

.. only:: saas

   .. include:: /includes/table/mms-auth-roles-saas.rst

   .. include:: /includes/fact-auth-backup-requirements.rst

.. only:: hosted

   .. include:: /includes/table/mms-auth-roles-hosted.rst
