.. _groom-priority-page:

==============
Groom Priority
==============

.. include:: /includes/styles/corrections.rst

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

This page displays a list of the status of all of the backup jobs and
their blockstores. There are three types of jobs that run to maintain
a blockstore:

Tracking jobs
  Scheduled to run every three days unless a previously scheduled
  blockstore job has not finished in that time. Tracking jobs also are
  scheduled to run immediately after a groom job. Tracking jobs
  determine the current ratio of living to dead blocks
  in blockstores.

Groom jobs
  Scheduled to run when the ratio of living to dead
  bytes drops below ``0.45``. To learn more about grooming, see
  :ref:`Groom page <grooms-page>`

Integrity Check Jobs
  Scheduled to run every seven days unless a previously scheduled
  blockstore job has not finished in that time. These checks make sure
  that the blockstore has no data integrity issues.

Each blockstore can run only one blockstore job (groom, track, or
integrity check) at a time unless you change its
:ref:`Load Factor <edit-blockstore>`. The :guilabel:`Load Factor` sets
how many jobs that a blockstore can run at the same time. It is set to
``1`` by default.

To learn how to change the :guilabel:`Load Factor`, see
:ref:`Edit a Blockstore <edit-blockstore>`.

Each row in this table lists a backup job. Its background color
indicates if the state of its associated blockstore is accurate and
current.

.. list-table::
   :header-rows: 1
   :widths: 15 85

   * - Color
     - Blockstore Storage Usage Status

   * - Blue
     - Amount of blockstore storage usage is changing. Blockstore groom
       job is in progress.

   * - Green
     - Amount of blockstore storage usage is accurate. Blockstore has
       run a tracking job since last groom job ran.

   * - Red
     - Amount of blockstore storage usage is stale. Blockstore has run
       a groom job since its last tracking job ran.

Manual Blockstore Maintenance
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

From this page, you can also perform three kinds of blockstore
maintenance manually:

Move Blocks to a Different Blockstore
  To move a backup's chunks to a different blockstore, select the
  destination blockstore in the backup's :guilabel:`Blockstore List`
  column. You might want to do this if you add a new blockstore and
  would like to balance data.

Groom a Blockstore
  To initiate a groom job, click :guilabel:`Schedule` in the
  :guilabel:`Groom Action` column for the blockstore
  :term:`replica set` you want to groom. You should not need to
  manually schedule groom jobs. |onprem|
  :ref:`runs the jobs automatically <grooms-page>`.

Check Blockstore Integrity
  To initiate an integrity check, click :guilabel:`IntegCheck` in the
  :guilabel:`Integrity Action` column for the blockstore
  :term:`replica set` you want to check. The
  :guilabel:`Integrity Schedule Result` modal appears and displays the
  status of the blockstore.

.. seealso:: :doc:`/tutorial/configure-block-size`.
