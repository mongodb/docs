title: Configure a load balancer with the pool of |application| servers.
stepnum: 1
ref: configure-load-balancer
pre: |
   This configuration depends on the general configuration of your
   load balancer and environment.
---
title: "Update each |application| server with the load balanced URL."
stepnum: 2
ref: update-load-balanced-url
content: |
  On each server, edit the ``conf-mms.properties`` file to
  configure the ``mms.centralUrl`` property to point to the load balancer URL.

  The ``conf-mms.properties`` file is located in the
  ``<install_dir>/conf/`` directory. See :doc:`/reference/configuration`
  for more information.
---
title: "Update each |application| server with the replication hosts information."
stepnum: 3
ref: update-replication-hosts
pre: |
  On each server, edit the ``conf-mms.properties`` file to
  set the :setting:`mongo.mongoUri` property to the :manual:`connection string
  </reference/connection-string/>` of the :ref:`mms-application-database`. You
  *must* specify at least **3** hosts in the :setting:`mongo.mongoUri`
  connection string. For example:
action:
  language: ini
  code: |
    mongo.mongoUri=mongodb://<mms0.example.net>:<27017>,<mms1.example.net>:<27017>,<mms2.example.net>:<27017>/?maxPoolSize=100
---
title: "Synchronize the ``gen.key`` file across all the |application| servers."
stepnum: 4
ref: sync-gen-key
pre: |
   Synchronize the ``/etc/mongodb-mms/gen.key`` file across all Application
   Servers. The |application| server uses this file to
   encrypt sensitive information before storing the data in a database.
...
