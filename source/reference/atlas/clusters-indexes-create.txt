.. _mcli-atlas-clusters-indexes-create-cmd:

======================================
mongocli atlas clusters indexes create
======================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/styles/corrections.rst

The ``clusters indexes create`` command creates a rolling index for an
|service| cluster in the specified project. You can also create a
rolling index with the |service| :atlas:`API </reference/api/rolling-index-create-one/index.html>`.

.. _atlas-clusters-indexes-create-syntax:

Syntax
------

.. code-block:: text

   mongocli atlas clusters|cluster indexes|index create [ <index-name> ]
        --clusterName <name-of-cluster>
        --collection <name-of-collection>
        --db <name-of-database>
        --key <field:type>
        [ --output|-o <output-format> ]
        [ --projectId <project-ID> ]
        [ --sparse ]
        [ --unique ]

.. include:: /includes/fact-command-line-help.rst

.. _atlas-clusters-indexes-create-options:

Options
-------

.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option 
     - Type 
     - Description 
     - Required? 

   * - ``<index-name>``
     - string
     - Name of the index to create. Index names must be unique.
     - no

   * - ``--clusterName``
     - string
     - Name of the cluster on which to create an index.
     - yes

   * - ``--collection``
     - string
     - Name of the collection on which to create an index.
     - yes

   * - ``--db``
     - string
     - Name of the database that contains the collection on which to
       create an index. 
     - yes

   * - ``--key``
     - string or array of strings
     - Field to be indexed and the type of index in the following 
       format: ``field:type``. For more information on index creation,
       see the :manual:` </indexes/>`.

       .. important::

          If you want to create a :manual:`compound index
          </core/index-compound/>`, you can:

          - Specify multiple ``field:type`` pairs in a comma-separated 
            list with one ``--key`` flag
          - Specify each ``field:type`` pair with a separate ``--key``  
            flag
     - yes

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are set. If omitted, uses the 
       {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project where you want to 
       create the cluster. If omitted, uses the project ID in 
       the profile or :ref:`environment variable <mcli-env-var>`.
     - no

   * - ``--sparse``
     - 
     - Creates an index that only references documents with the 
       specified field. These indexes use less space but behave
       differently in some situations (particularly sorts). See
       :manual:`Spares Indexes </core/index-sparse>` for more
       information.

       The following index types are sparse by default and ignore
       this option:

       - :manual:`2dsphere </core/2dsphere>`
       - :manual:`2d </core/2d>`
       - :manual:`geoHaystack </core/geohaystack>`
       - :manual:`text </core/index-text>`

       For a compound index that includes ``2dsphere`` index key(s)
       along with keys of other types, only the ``2dsphere`` index
       fields determine whether the index references a document.

       .. versionchanged:: 3.2 
       
          Starting in MongoDB 3.2, MongoDB provides the option to create
          :ref:`partial indexes <index-type-partial>`. Partial indexes
          offer a superset of the functionality of sparse indexes. If
          you are using MongoDB 3.2 or later, :ref:`partial indexes
          <index-type-partial>` should be preferred over sparse indexes.
     - no

   * - ``--unique``
     - 
     - Creates a unique index so that the collection will not accept
       insertion or update of documents where the index key value
       matches an existing value in the index.

       *Unavailable* for :manual:`hashed </core/index-hashed>` indexes.
     - no

.. _atlas-clusters-indexes-create-output:

Output
------

The command prints the following message to the terminal:

.. code-block:: text
   :copyable: false
   
   Your index is being created

You can check the status of your index in the |service| :atlas:`UI
</data-explorer/indexes/index.html#view-indexes>`, the :manual:`mongo
shell, or Compass </tutorial/manage-indexes/index.html>`.

If the command prints an error, see 
:ref:`Troubleshooting <mcli-troubleshooting>` for recommended solutions.

.. _atlas-clusters-indexes-create-example: 

Examples
--------

Example 1
~~~~~~~~~

The following ``mongocli atlas clusters indexes create`` command creates
an index named ``bedrooms_1`` on the ``listings`` collection
of the ``realestate`` database. The command uses the {+default-profile+}.

.. code-block:: text
   :copyable: false

   mongocli atlas clusters indexes create bedrooms_1 --clusterName Cluster0 --collection listings --db realestate --key bedrooms:1

The command prints the following to the terminal.

.. code-block:: json
   :copyable: false

   Your index is being created

Example 2
~~~~~~~~~

The following ``mongocli atlas clusters indexes create`` command creates
a compound index named ``property_room_bedrooms`` on the
``listings`` collection of the ``realestate`` database. The
command uses the {+default-profile+}.

.. code-block:: text
   :copyable: false

   mongocli atlas clusters indexes create property_room_bedrooms --clusterName Cluster0 --collection listings --db realestate --key property_type:1 --key room_type:1 --key bedrooms:1

The command prints the following to the terminal.

.. code-block:: json
   :copyable: false

   Your index is being created

