:noprevnext:

.. _upgrade-k8s-operator:

====================
Upgrade the |k8s-op|
====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The following procedure outlines how to upgrade the |k8s-op-short|
to its latest version. 

.. note::
   
   .. include:: /includes/summary-1-20-suffix-change.rst


.. warning::

   Starting from 1.17, the |k8s-op-short| has a known bug that causes the upgrade 
   process to fail if the repository for images contains a colon (``:``). For example, 
   using a repository URL like ``repo:5000/myrepomongo`` results in an upgrade failure. 
   This issue affects versions 1.17 through 1.19.0. However, it is fixed in 1.19.1. 
   
Upgrade using |k8s|
-------------------

The following steps depend on how your environment is configured:

.. tabs::
         
   .. tab:: Online using kubectl
      :tabid: kubectlup
 
      .. _upgrade-k8s-operator-kubectl:

      .. include:: /includes/steps/upgrade-kubectl.rst

   .. tab:: Online using Helm
      :tabid: helmonlinek8sup

      .. _upgrade-k8s-operator-helm:

      .. include:: /includes/steps/upgrade-k8s-online-helm.rst
            
   .. tab:: Offline using Helm and Docker
      :tabid: helmofflinek8sup

      To upgrade the |k8s-op-short| on a host not connected to the
      Internet:

      .. include:: /includes/steps/upgrade-k8s-offline-helm-host.rst

Upgrade using OpenShift
-----------------------

The following steps depend on how your environment is configured:

.. tabs:: 
      
   .. tab:: Online using oc
      :tabid: ocup

      .. _upgrade-k8s-operator-oc:

      .. include:: /includes/steps/upgrade-oc.rst

   .. tab:: Online using Helm
      :tabid: helmonlineosup

      .. _upgrade-operator-helm-oc:

      .. include:: /includes/steps/upgrade-os-online-helm.rst
            
   .. tab:: Offline using Helm and Docker
      :tabid: helmofflineosup

      To upgrade the |k8s-op-short| on a host not connected to the
      Internet: 

      .. include:: /includes/steps/upgrade-os-offline-helm-host.rst

.. include:: /includes/troubleshoot-k8s.rst
