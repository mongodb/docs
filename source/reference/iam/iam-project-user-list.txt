.. _iam-project-user-list:

================================
mongocli iam projects users list
================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``mongocli iam projects users list`` command lists users in the 
MongoDB service project. You can also retrieve the users in your 
projects through the: 

- |service| :atlas:`UI 
  </access/manage-project-access/#view-who-can-access-a-project>` and 
  :atlas:`API </reference/api/user-get-all/>`
- |cloud-short| :cloudmgr:`UI 
  </tutorial/manage-users/#view-who-can-access-a-project>` and :cloudmgr:`API 
  </reference/api/groups/get-all-users-in-one-group/>`
- |onprem| :opsmgr:`UI </tutorial/manage-users/#view-who-can-access-a-project>` 
  and :opsmgr:`API </reference/api/groups/get-all-users-in-one-group/>`

.. _mcli-iam-project-user-list-cmd-permissions:

Permissions Required 
--------------------

The following table shows the role you must have in your MongoDB service to 
list the users in your project: 

.. list-table::
   :header-rows: 1 
   :widths: 40 60

   * - MongoDB Service
     - Role

   * - |service|
     - :atlas:`Project Owner </reference/user-roles/#Project-Owner>`

   * - |cloud-short|
     - - :cloudmgr:`Project Owner </reference/user-roles/#Project-Owner>` or, 
       - :cloudmgr:`Project User Admin 
         </reference/user-roles/#Project-User-Admin>`

   * - |onprem| 
     - - :opsmgr:`Project Owner </reference/user-roles/#Project-Owner>` or, 
       - :opsmgr:`Project User Admin 
         </reference/user-roles/#Project-User-Admin>`

.. _mcli-iam-project-user-list-syntax:

Syntax 
------

.. code-block:: text 

   mongocli iam projects users list
        [ --limit <integer> ]
        [ --output|-o <output-format> ]
        [ --page <integer> ]
        [ --profile|-P <profile-name> ]
        [ --projectId <project-ID> ]

.. include:: /includes/fact-command-line-help.rst

.. _mcli-iam-project-user-list-options:

Options 
-------

.. list-table:: 
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option 
     - Type 
     - Description 
     - Required? 

   * - ``--limit``
     - integer
     - Number of projects to return from the result set.

       - If omitted, returns all projects.
       - If this value exceeds the number of projects, ``mongocli``
         returns all projects.
     - no

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--page``
     - integer
     - Starting chunk of projects to return from the result set. The
       ``--limit`` flag sets the number of projects per page.

       - If omitted, returns the first page.
       - If this value exceeds the number of pages, ``mongocli``
         returns the last page.
     - no 

   * - ``--profile``, ``-P`` 
     - string 
     - Name of the profile that contains the access information. If omitted, 
       uses the {+default-profile+}. 
     - no 

   * - ``--projectId`` 
     - string 
     - Unique identifier of the project for which to retrieve the users. If 
       omitted, uses the specified profile to access the MongoDB service 
       project. 
     - no

.. _mcli-iam-project-user-list-output:

Output 
------

The command prints following output to the terminal if the command 
succeeds. If the command returns errors, see :ref:`Troubleshooting 
<troubleshooting>` for recommended solutions.

.. code-block:: text
   :copyable: false

   ID          FIRST NAME       LAST NAME     USERNAME
   <user-ID>   <first-name>     <last-name>   <username>

The above default output is a subset of the fields returned by this command. 
For the complete list of |json| fields returned by the command, see the |api|  
reference for your MongoDB service:

- :atlas:`Atlas </reference/api/user-get-all/#response>`
- :cloudmgr:`Cloud Manager 
  </reference/api/groups/get-all-users-in-one-group/#response>`
- :opsmgr:`Ops Manager 
  </reference/api/groups/get-all-users-in-one-group/#response>`

.. _mcli-iam-project-user-list-examples:

Example
-------

.. tabs::

   .. tab:: Default
      :tabid: default

      The following command lists users in the specified |cloud-short| 
      project. It uses a profile named ``cmProfile`` for accessing 
      |cloud-short|. 

      .. code-block:: text 

         mongocli iam projects users list --projectId 5e84b94c003f2d6370004f4e --profile cmProfile

      The previous command prints the following in the default format to 
      the terminal. For more information on these fields, see 
      :ref:`Output <mcli-iam-project-user-list-output>`.

      .. code-block:: json 
         :copyable: false 

         ID                         FIRST NAME   LAST NAME   USERNAME
         5dd559c17a3e5a1f363ba8ea   John         Doe         john.doe@example.com

   .. tab:: JSON
      :tabid: json

      The following command lists users in an |service| project. It uses the 
      {+default-profile+} for accessing |service|. 

      .. code-block:: text 

         mongocli iam projects users list --output json

      The previous command prints the following in the default format to 
      the terminal. For more information on these fields, see 
      :ref:`Output <mcli-iam-project-user-list-output>`.

      .. code-block:: json 
         :copyable: false 

         [
           {
             "id": "5f6e2c02a2dcef512bf0f169",
             "emailAddress": "john.doe@example.com",
             "firstName": "John",
             "lastName": "Doe",
             "links": [
               {
                 "rel": "self",
                 "href": "http://example.mongodb.com/api/atlas/v1.0/users/5f6e2c02a2dcef512bf0f169"
               }
             ],
             "roles": [
               {
                 "roleName": "GROUP_OWNER",
                 "groupId": "5f6e2c04a2dcef512bf0f171"
               },
               {
                 "roleName": "GROUP_OWNER",
                 "groupId": "5f6e2ebba2dcef512bf0f82d"
               }
             ],
             "username": "john.doe@example.com"
           }
         ]
