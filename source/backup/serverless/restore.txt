.. _serverless-restore-snapshot:

=================================================
Restore a {+Serverless-Instance+} from a Snapshot
=================================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

|service| lets you restore data to a {+serverless-instance+} from a
snapshot.

.. include:: /includes/admonitions/notes/backup-restore-roles.rst

To learn more, see :ref:`serverless-snapshots`.

Restore Restrictions
--------------------

- You can restore from only the two most recent snapshots of a
  {+serverless-instance+}.

- You can't restore snapshots from {+shared-clusters+}, 
  {+dedicated-clusters+}, or from |mms| to {+serverless-instances+}.

Prerequisites
-------------

Stop Client Operations during Restoration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You must ensure that the target {+serverless-instance+} doesn't receive
client requests during restoration. You can restore to a new
{+serverless-instance+} and reconfigure your application to use that 
new {+serverless-instance+} once it is running for maximum uptime.

.. important::

   |service| disables database users on a target {+serverless-instance+}
   during a restore to prevent the target from receiving client
   requests.

Procedure
---------

1. Click :guilabel:`Database` in the top-left corner of |service|.

#. From the :guilabel:`{+Database-Deployments+}` view, click the name of your
   {+serverless-instance+}.

#. Click the :guilabel:`Backup` tab.

#. Select a cluster's snapshot to restore.

   Click :guilabel:`Restore`.

#. Follow the prompts to restore your :ref:`{+serverless-instance+}
   snapshot <restore-cloud-provider-snapshot-serverless>`. 

.. _restore-cloud-provider-snapshot-serverless:

Restore your Snapshot to a {+serverless-instance+}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. warning::

   |service| deletes all existing data on the target 
   {+serverless-instance+} prior to the restore. The 
   {+serverless-instance+} is **unavailable** for the duration of
   the restore.

1. Click :guilabel:`Restore` in the :guilabel:`Actions` column
   for the snapshot you want to restore.

#. From the :guilabel:`Restore` dialog, select the target 
   {+serverless-instance+} to which you want to restore.

   .. note::

      For best possible restore performance, select a target 
      {+serverless-instance+} that belongs to:

      - The same |service| project as the snapshot.
      - The same cloud provider region as the snapshot.

#. Click :guilabel:`Restore`.

#. Restart your application and ensure it uses the new target cluster.

View Status of Snapshot Restorations
------------------------------------

|service| provides a detailed list of completed and in-progress
snapshot restorations, including when |service| took the snapshot and
the snapshot's delivery type. To view this list, from a
{+serverless-instance+}'s :guilabel:`Backup` tab, click the 
:guilabel:`Restores` tab.

The :guilabel:`Status` column of the table displays the results of
completed snapshots, and the progress of snapshots currently
being restored.

The :guilabel:`Status` column updates as the restoration
progresses on the {+serverless-instance+}. When the restoration 
completes, the column displays the time of completion and the 
{+serverless-instance+} to which |service| restored the snapshot.
