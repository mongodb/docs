title: "Login to the host running the Backup Agent."
stepnum: 1
ref: login
content: |


---
title: "Edit the Backup Agent configuration file to specify the settings for SSL certificates."
stepnum: 2
ref: certificate
pre: |

  Edit the Backup Agent configuration file. The location of the file depends
  upon the platform running the Backup Agent.

  .. list-table::
     :widths: 40 60
     :header-rows: 1

     * - Platform
       - File Location

     * - RHEL, CentOS, Amazon Linux, and Ubuntu 
       - ``/etc/mongodb-mms/backup-agent.config``

     * - OS X, Windows, and other Linux systems
       - ``<installationDirectory>/local.config``

content: |

  Set the following settings if you use a Backup Agent that
  connects to an SSL-enabled MongoDB deployment.

  .. note:: 
  
     Only ``sslTrustedServerCertificates`` is required. The other settings are
     optional.

  .. list-table::
     :widths: 40 60
     :header-rows: 1

     * - Setting
       - Value

     * - ``sslClientCertificate``
     
       - Type the path to the SSL certificates the Backup Agent uses.

     * - ``sslClientCertificatePassword``
     
       - Type the password to decrypt the private key set in the file
         specified with the ``sslClientCertificate`` setting.

         Required only if the client certificate PEM file is encrypted.

     * - ``sslTrustedServerCertificates``
     
       - Type the path to the trusted Certificate Authority (CA) certificates.

     * - ``sslRequireValidServerCertificates``
     
       - Type ``true`` if |mms| should validate SSL certificates or ``false``
         to disable certificate verification.

         .. warning::

            Set this option to ``false`` only for testing purposes. It makes
            connections between |mms| and MongoDB deployments susceptible to
            *man-in-the-middle* attacks.

  .. example::

     The Backup Agent configuration file for a Backup Agent with SSL enabled
     should look similar to this:

     .. code-block:: ini

        sslClientCertificate=<certDirectory>/sslCertificate.pem
        sslClientCertificatePassword='thisFakePassword'
        sslTrustedServerCertificates=<certDirectory>/sslCACert.pem
        sslRequireValidServerCertificates=true

  .. seealso::
     For additional information on these settings, see 
     :ref:`backup-mongodb-ssl-settings`.

---
title: "Restart agent."
stepnum: 3
ref: restart
content: |
  Use the shell command for the platform as specified in :doc:`/tutorial/start-or-stop-backup-agent`.
...
