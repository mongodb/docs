.. _cpp-authentication-x509:

====================
X.509 Authentication
====================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: certificate, code example

Overview
--------

In the **X.509** authentication mechanism, the server and client use the
:wikipedia:`TLS <Transport_Layer_Security>` protocol to exchange X.509 public-key
certificates. You can use this mechanism to authenticate to MongoDB Atlas, MongoDB
Enterprise Advanced, and MongoDB Community Edition.

.. tip:: X.509 Mechanism

   To learn how to use TLS/SSL with the {+driver-short+},
   see the :ref:`TLS/SSL <cpp-tls>` guide.

   For more information about X.509 certificates, see
   :ref:`X.509 <x509-client-authentication>` in the {+mdb-server+} manual.

Code Placeholders 
~~~~~~~~~~~~~~~~~

The code example on this page uses the following placeholders:

- ``<hostname>``: The network address of your MongoDB deployment.
- ``<port>``: The port number of the MongoDB deployment. If you omit this parameter,
  the driver uses the default port number (``27017``). You don't need a port number
  when connecting to a MongoDB Atlas cluster.

To use the code example on this page, replace these
placeholders with your own values.

Using X.509 Authentication in Your Application
----------------------------------------------

X.509 authentication requires the use of TLS encryption with certificate validation.
To authenticate the client, you will need a valid TLS certificate and private encryption 
key. These can be stored in separate files or together in one ``.pem`` file.

.. note::

   Even if the certificate and private key are stored in the same file, you must specify the
   path to that file in both the ``ssl_cert`` and ``ssl_key`` options.


To configure X.509 authentication in your application, set the authentication 
mechanism and certificate path in your connection string, as shown in the 
following example:

.. literalinclude:: /includes/authentication.cpp
            :language: cpp
            :copyable: true
            :start-after: // start-x509
            :end-before: // end-x509

API Documentation
-----------------

To learn more about creating a ``mongocxx::client`` object in {+driver-short+},
see the following API documentation:

- `mongocxx::client <{+api+}/classmongocxx_1_1v__noabi_1_1client.html>`__ 