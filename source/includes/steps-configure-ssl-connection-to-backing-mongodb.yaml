title: "Open the |onprem| configuration files with root privileges."
stepnum: 1
level: 4
ref: config-files
content: |
  Open the files listed below. :doc:`/reference/configuration` describes
  the locations of each file:

  - ``conf-mms.properties``, which configures |onprem|'s connection to 
    the :ref:`mms-application-database`.

  - **Optional** ``conf-daemon.properties``, which configures the Backup
    Daemon's connection to the |application| Database. You only need to
    open ``conf-daemon.propeties`` if you have installed the
    :ref:`backup-daemon`.
---
title: "Configure |onprem| to connect to the |application| Database over SSL."
stepnum: 2
level: 4
ref: configure-onprem
content: |
  Configure the following settings in ``conf-mms.properties``:

  :setting:`mongo.ssl`: Set this to ``true`` to indicate that the
  :ref:`mms-application-database` is using SSL.

  :setting:`mongodb.ssl.CAFile`: Specify the PEM file that contains the root
  certificate chain from the Certificate Authority that signed the MongoDB
  server certificate.

  :setting:`mongodb.ssl.PEMKeyFile`: If the MongoDB instance is running
  with :option:`--sslCAFile <mongod --sslCAFile>` option, specify the PEM
  file containing an x.509 certificate and private key.

  :setting:`mongodb.ssl.PEMKeyFilePassword`: If the client PEM file contains
  an encrypted private key, specify the password for PEM file. To encrypt
  this password in the configuration file, use the |mms| ``credentialstool``
  tool. See :ref:`encrypt-mongodb-user-credentials`.
---
title: "Configure the Backup Daemon to connect to the |application| Database over SSL."
stepnum: 3
level: 4
ref: configure-backup
optional: true
content: |
  If you are using Backup, set the following settings in ``conf-daemon.properties``:
  
  Set :setting:`mongo.ssl` to ``true``. This setting should match the
  :setting:`mongo.ssl` setting in ``conf-mms.properties``.

  Update the SSL settings with the SSL client certificate information to use to
  connect to the backing databases. :setting:`mongodb.ssl.CAFile`,
  :setting:`mongodb.ssl.PEMKeyFile`, and
  :setting:`mongodb.ssl.PEMKeyFilePassword` should match the settings
  in ``conf-mms.properties``. 
---
stepnum: 4
level: 4
source:
  ref: restart-onprem-and-daemon
  file: steps-configure-access-control-connection-to-backing-db.yaml
pre: ""
...
