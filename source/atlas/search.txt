:template: guide

.. _guide-search-dynamic:

========================================================
Build and Use an |fts| Index with Dynamic Field Mappings
========================================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

.. short-description::

   Perform a basic relevance-based search in MongoDB.

In this guide, you will learn how to implement a simple search index
for relevance-based search as an alternative to document-based search.

What You'll Need
----------------

- A MongoDB account. See :ref:`guides-create-atlas-account`.
- An Atlas cluster. See :ref:`guides-create-a-cluster`.

Procedure
---------

.. procedure::
   :style: normal

   .. step:: Log in to MongoDB Atlas.

      Log in to MongoDB Atlas according to the steps described in 
      :ref:`Sign Up for a MongoDB Account <guides-create-atlas-account>`.

   .. step:: Navigate to the search index editor.

      .. procedure::
         :style: connected

         .. step:: Select a project.

         .. step:: Populate your cluster with sample data.

            On your target cluster pane, click the three-dot button to 
            open the dropdown menu. Click :guilabel:`Load Sample Dataset`
            and wait for the load operation to complete.

         .. step:: Navigate to the `sales` collection of the `sample_supplies` database.

            Click :guilabel:`Browse Collections` to pull up a list of
            databases in the sample dataset. In the right-hand pane,
            click the ``sample_supplies``, then click the ``sales``
            collection.

         .. step:: Click :guilabel:`Search Indexes` in the upper right
            of the collection preview pane.

   .. step:: Create a search index in the :guilabel:`Visual Editor`.

      .. procedure::
         :style: connected

         .. step:: Click :guilabel:`Create Search Index`.

         .. step:: Click the :guilabel:`Visual Editor` configuration 
            method, then click :guilabel:`Next`.

         .. step:: Review the :guilabel:`Index Name and Data Source` to
            ensure that ``sample_supplies.sales`` is selected, then click
            :guilabel:`Next`.

         .. step:: Click :guilabel:`Create Search Index`. Wait for the 
            :guilabel:`Status` column to read :guilabel:`Active`.

      You now have a search index with dynamic field mappings.

   .. step:: Query your collection.

      .. procedure::
         :style: connected

         .. step:: On the :guilabel:`Search Tester` page, type 
            ``notepad`` into the search bar, then click 
            :guilabel:`Search`.

         .. step:: Review the results. Each record includes a relevance
            score based onhow closely that record matches your search 
            term, and on the rules described in the index definition.
            Dynamic indexes treat all fields equally.

         .. step:: Click :guilabel:`View Query Syntax`. The modal window
            displays the query sent through the Atlas Search API.

Summary
-------

If you successfully completed the procedure in this guide, you have
created an Atlas Search index with dynamic field mappings and used it
to perform a relevance-based query against your database. In the next
guide, you will learn how to refine your searches by creating indexes
with static field mappings.

.. guide-next::