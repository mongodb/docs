=====================
Get Suggested Indexes
=====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Retrieves any suggested indexes generated by the |service|
:doc:`Performance Advisor </performance-advisor>`.

.. include:: /includes/fact-projects-groups-synonyms.rst

.. include:: /includes/api-requirements.rst

.. include:: /includes/api-base-url-new.rst

Resource
--------

.. code-block:: none

   GET /groups/{GROUP-ID}/processes/{PROCESS-ID}/performanceAdvisor/suggestedIndexes

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Path Element
     - Description

   * - ``GROUP-ID``
     - Unique identifier for the :doc:`project
       </organizations-projects>`.

   * - ``PROCESS-ID``
     - The |service| hostname and port, e.g.
       ``m10-shard-00-00-17jcm.mongodb.net:27017``. To retrieve all
       processes in the project with a given ``GROUP-ID``, use the
       :doc:`/groups/{GROUP-ID}/processes
       </reference/api/processes-get-all/>` endpoint.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/api/base-query-list-parameters.rst

.. include:: /includes/api/list-tables/requests/pa-suggested-indexes-query-parameters.rst

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/no-body-parameters.rst

Response
--------

.. include:: /includes/list-table-pa-suggested-indexes-response.rst

.. _suggested_indexes_example_request:

Example Request
---------------

.. code-block:: shell

   curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest -i \
     --header "Accept: application/json" \
     --header "Content-Type: application/json" \
     --request GET "https://cloud.mongodb.com/api/atlas/v1.0/groups/{GROUP-ID}/processes/{PROCESS-ID}/performanceAdvisor/suggestedIndexes?namespaces=test.users&namespaces=test.inventory&pretty=true"

Example Response
----------------

.. code-block:: json
   :copyable: false

   {
     "shapes" : [ {
       "avgMs" : 42,
       "count" : 2,
       "id" : "5b74689a80eef53f3388897e",
       "inefficiencyScore" : 50000,
       "namespace" : "test.users",
       "operations" : [ {
         "predicates" : [{ "find" : { "emails" : "la@sa.kp" } }],
         "raw" : "2018-08-15T17:14:11.115+0000 I COMMAND  [conn4576] command test.users appName: \"MongoDB Shell\" command: find { find: \"users\", filter: { emails: \"la@sa.kp\" }, lsid: { id: UUID(\"1a4e71d3-9b67-4e9c-b078-9fdf3fae9091\") }, $clusterTime: { clusterTime: Timestamp(1534353241, 1), signature: { hash: BinData(0, AB91938B7CF7BC87994A2909A98D87F29101EFA0), keyId: 6589681559618453505 } }, $db: \"test\" } planSummary: COLLSCAN keysExamined:0 docsExamined:50000 cursorExhausted:1 numYields:391 nreturned:1 reslen:339 locks:{ Global: { acquireCount: { r: 784 } }, Database: { acquireCount: { r: 392 } }, Collection: { acquireCount: { r: 392 } } } protocol:op_msg 34ms",
         "stats" : {
           "ms" : 34,
           "nReturned" : 1,
           "nScanned" : 50000,
           "ts" : 1534353251147
         }
       }, {
         "predicates" : [{ "find" : { "emails" : "tocde@fijoow.to" } }],
         "raw" : "2018-08-15T17:14:18.665+0000 I COMMAND  [conn4576] command test.users appName: \"MongoDB Shell\" command: find { find: \"users\", filter: { emails: \"tocde@fijoow.to\" }, lsid: { id: UUID(\"1a4e71d3-9b67-4e9c-b078-9fdf3fae9091\") }, $clusterTime: { clusterTime: Timestamp(1534353241, 1), signature: { hash: BinData(0, AB91938B7CF7BC87994A2909A98D87F29101EFA0), keyId: 6589681559618453505 } }, $db: \"test\" } planSummary: COLLSCAN keysExamined:0 docsExamined:50000 cursorExhausted:1 numYields:390 nreturned:1 reslen:342 locks:{ Global: { acquireCount: { r: 782 } }, Database: { acquireCount: { r: 391 } }, Collection: { acquireCount: { r: 391 } } } protocol:op_msg 36ms",
         "stats" : {
           "ms" : 36,
           "nReturned" : 1,
           "nScanned" : 50000,
           "ts" : 1534353258697
         }
       } ]
     } ],
     "suggestedIndexes" : [ {
       "id" : "5b74689a80eef53f3388897f",
       "impact" : [ "5b74689a80eef53f3388897e" ],
       "index" : [ {
         "emails" : 1
       } ],
       "namespace" : "test.users",
       "weight" : 37.220480901815623
     }, {
       "id" : "5b74689a80eef53f33888980",
       "impact" : [ "5b74689a80eef53f3388897d" ],
       "index" : [ {
         "email" : 1
       } ],
       "namespace" : "test.inventory",
       "weight" : 19.037578309966488
     } ]
   }
