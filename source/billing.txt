.. _atlas-billing:

=======
Billing
=======

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Billing is at the organization level while preserving visibility into
usage in each project.

|service| charges by the hour for your MongoDB clusters. |service|
tabulates costs daily and displays your current monthly costs in the
upper right corner. To view line-item charges, click the
:guilabel:`details` link to go to the invoice.

As you create or modify a cluster, you can compare the costs of
different options before applying them. |service| displays the costs,
except for data transfer, in a :guilabel:`Cluster Overview` box.

.. note::

   The :guilabel:`Cluster Overview` box does not display
   :ref:`data transfer costs <data-transfer-costs>`.

.. seealso::  |service-pricing|_

.. _billing-overview:

Billing Overview
----------------

Billing is at the organization level. All projects within an
organization share the same billing settings.

To view and edit billing information, select the organization in the
:guilabel:`Context` menu, then click :guilabel:`Billing`.

Payment Method
~~~~~~~~~~~~~~

Use the :guilabel:`Edit Payment Method` dialog to edit the following
information for your organization:

- :guilabel:`Billing Address` associated with the credit card.

  .. note::

     |service| uses the :guilabel:`Invoice Address` defined in your
     :guilabel:`Billing Profile`, if any, if you select
     :guilabel:`Same as Invoice Address`.

- :guilabel:`Credit Card` information.

- The :guilabel:`VAT Tax ID Number` if required. See
  :ref:`VAT ID Number <vat-id-number>` for more information.

  .. include:: /includes/vat-clarification.rst

- :guilabel:`Coupon or Activation Code` allows you to enter the
  activation code that you received from our sales team. For details,
  see :ref:`Apply Credit Purchased from MongoDB Sales <apply-credit>`.

Billing Profile
~~~~~~~~~~~~~~~

Use the :guilabel:`Edit Billing Profile` dialog to edit the following
information for your organization:

- :guilabel:`Billing Email Address` for the organization. |service|
  sends the organization's invoices to this address. If the address is
  not set, invoices are emailed to all members of the organization.

- An optional :guilabel:`Invoice Address` that is separate from the
  :guilabel:`Billing Address` set in the :guilabel:`Payment Method`.

- The :guilabel:`VAT Tax ID Number` for the organization if required.
  See :ref:`VAT ID Number <vat-id-number>` for more information.

.. include:: /includes/vat-clarification.rst

.. _vat-id-number:

VAT ID Number
~~~~~~~~~~~~~

If your organization's billing or invoice address is in a country that
is a member of the European Union, add your :abbr:`VAT (Value Added
Tax)` ID number on the :guilabel:`Payment Method` or the
:guilabel:`Billing Profile` dialog.

|service| only displays the :guilabel:`VAT Tax ID Number` field beneath
the address entry if you select a country other than the United States.

.. include:: /includes/vat-clarification.rst

Retry a Failed Payment
~~~~~~~~~~~~~~~~~~~~~~

If you receive notification of a failed payment, click
:guilabel:`Billing` and check that your :guilabel:`Payment Method` is
correct.

To retry the payment, click :guilabel:`Billing`, then
:guilabel:`Usage History`. On the line for the failed payment, click
:guilabel:`Retry`.

.. include:: /includes/footnote-databearing.rst

.. _apply-credit:

Apply Credit Purchased from MongoDB Sales
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When you buy credit from :website:`MongoDB Sales </lp/contact/sales>`,
MongoDB sends you an email containing an activation code. You can
apply this credit to your |service| invoice balance. To apply the code
to your account:

#. Select your organization from the :guilabel:`Context` drop-down
   list at the top of the left column of the screen.

#. Click :guilabel:`Billing`.

#. Click :guilabel:`Apply Credit` and enter the activation code.

To add the activation code on the :guilabel:`Edit Payment Method`
dialog box, click :guilabel:`Edit` next to :guilabel:`Payment Method`.

.. note::

   - If you do not add your credit activation code within the first 30
     days of use, we charge the credit card associated with the
     account. Credit card charges are non-refundable.

   - If you lost your activation code, create a support ticket in
     |service|. To start a support ticket, click :guilabel:`Support` 
     in the left-hand navigation.

   - If you would prefer to pre-pay for your |service| account using
     credit instead of receiving and paying invoices, please contact
     the :website:`sales team </lp/contact/sales>`.

.. _payment-alternatives:

Alternative Payment Methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~

For alternative payment methods, please contact the
:website:`sales team </lp/contact/sales>` for assistance.

Live Migrate Your Data to |service|
-----------------------------------

The |service| Live Migration Service is a free service hosted and
operated by MongoDB to help users migrate existing MongoDB databases to
|service-fullname|. All incoming data transfers to an |service| cluster
are also free.
`Learn more <https://www.mongodb.com/cloud/atlas/migrate?utm_source=atlas-billing&utm_campaign=20-docs-in-20-days-migrations&utm_medium=docs>`_
about migrating to |service|.

View or Download Your Invoices
------------------------------

|service| invoices at the :ref:`organization <organizations>` level.
Charges are typically posted the next day.

To configure the payment method and billing profile for an
organization, or to view the most recent and pending charges for
an organization, access the organization's :ref:`billing-overview`.

View or Download Your Current Invoice
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

|service| displays the current charges for your |service| organization
as :guilabel:`Usage This Month:` in the top-right corner of the
organization view. Click :guilabel:`details` to view
the current invoice for your organization.

Alternatively:

1. In the :guilabel:`Context` dropdown, select the desired
   organization.

#. Click :guilabel:`Billing` in the left-hand navigation bar.

#. From the :guilabel:`Billing Overview` view, click
   :guilabel:`View Invoice`.

To download charges and payments for your current invoice, click one of
the invoice format buttons on the right side of the invoice view. You
can download the invoice in :guilabel:`PDF`, :guilabel:`TXT`, and
:guilabel:`CSV` formats.

View or Download Past Invoices
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To view all invoices for your |service| organization:

1. In the :guilabel:`Context` dropdown, select the desired
   organization.

#. Click :guilabel:`Billing` in the left-hand navigation bar.

#. Click the :guilabel:`Usage History` tab.

To view charges and payments for a specific invoice, click the link
for the invoice shown in the :guilabel:`Invoice Date` column.

To download charges and payments for an invoice, click one of the
invoice format buttons in the :guilabel:`Download As` column. You
can download invoices in :guilabel:`PDF`, :guilabel:`TXT`, and
:guilabel:`CSV` formats.

Filter Past Invoices
````````````````````

The :guilabel:`Usage History` tab supports filtering by invoice
status and date.

To filter by invoice status, click the :guilabel:`Status` drop-down
and select the status to filter by:

- :guilabel:`Pending` - invoices still pending payment.
- :guilabel:`Free` - invoices with a total charge of ``$0.00``.
- :guilabel:`Successful` - invoices that are paid.

To filter by invoice date, set the :guilabel:`From` or :guilabel:`To`
date inputs to the required date range. Leaving :guilabel:`From`
blank sets the lower date boundry to the organization's creation date.
Leaving :guilabel:`To` blank sets the upper date boundry to the
current date.

.. _region-costs:

Cloud Service Provider and Region
---------------------------------

|service| supports deploying clusters onto :ref:`Amazon Web Services
<amazon-aws>`, the :ref:`Google Cloud Platform <google-gcp>`, and
:ref:`Microsoft Azure <microsoft-azure>`. The choice of cloud service
provider and region or regions for the |service| project affects the
cost of running a |service| cluster.

Multi-region cluster costs depend on the number of and location of 
additional regions selected. When creating a cluster, |service|
displays the :ref:`cluster tier cost <instance-size-costs>` based on only
the :guilabel:`Preferred Region` of the cluster. You can see the total
cost of running the cluster in the :guilabel:`Cluster Overview`.

.. _instance-size-costs:

Cluster Tier
-------------

|service| provides different cluster tiers. Each cluster tier has a
default RAM capacity, storage capacity, and maximum storage speed. The 
cluster's per-hour charge includes these default values.
|service| uses the selected cluster when deploying all the
data-bearing [#data-bearing]_ servers in your cluster.

Depending on the choice of cloud service provider, |service| provides
customization options for :ref:`cluster storage capacity
<storage-capacity>` and the :ref:`speed <instance-storage-speed>` of
that storage. If you add capacity or speed, you incur additional costs
on top of the base cost. For multi-region clusters, the per-cluster
cost, including any selected customizations, is relative to the
:guilabel:`Preferred Region`. The :guilabel:`Cluster Overview` box shows 
your overall charges.

.. _storage-capacity:
.. _instance-storage-capacity:

Storage Capacity
~~~~~~~~~~~~~~~~

|service| charges for storage capacity differently depending on whether
you use the cluster default or specify a custom storage capacity. If
you use the default, storage is included in the cluster's per-hour
cost. If you customize, |service| charges for the entire amount of
storage, not the difference from the default size.

For example, if the cluster default is 80 GB and if you increase
storage to 100 GB, the change in cost is the charge for 100 GB. If you
then increase storage to 120 GB, the change in cost is the charge for
20 GB.

.. note::

   Increasing storage capacity can change the max IOPS available
   with each :guilabel:`Custom Storage Speed`.

.. _storage-speed:
.. _instance-storage-speed:

Custom Storage Speed
~~~~~~~~~~~~~~~~~~~~

|service| measures storage speed as maximum |iops|. Each |service|
:ref:`cluster tier<instance-size-costs>` offers a default storage
speed that is included in the cluster's per-hour cost. The choice of
cloud service provider and cluster affects the available storage
speed customization options, as well as the cost of selecting a custom
storage speed.

|aws|
  For most cluster types, you can increase storage speed from
  :guilabel:`Standard` to :guilabel:`Fast` or :guilabel:`Fastest`,
  which affects costs. Selecting a custom speed changes both |iops| and
  the type of storage used. The storage type changes from a
  general-purpose |ssd| to a provisioned-|iops| |ssd|. For more
  information on storage types, see
  `Amazon EBS Volume Types <http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSVolumeTypes.html>`_.

|gcp|
  All clusters use |ssd| persistent disks with fixed maximum |iops|
  based on the cluster storage capacity. The maximum |iops| increases
  as storage capacity increases. The cost of the increased maximum
  |iops| is included in the cost of the increased storage capacity. For
  more information on the |gcp| persistent disks, see
  `Persistent Disks <https://cloud.google.com/compute/docs/disks/#pdspecs>`_.

:abbr:`Azure (Microsoft Azure)`
  All clusters use premium |ssd| disks with fixed maximum |iops| based
  on the storage capacity. The maximum |iops| increases as storage
  capacity increases. The cost of the increased maximum |iops| is
  included in the cost of the increased storage capacity. For more
  information on the Azure Premium disks, see
  `High-performance Premium Storage and managed disks for VMs <https://docs.microsoft.com/en-us/azure/storage/storage-premium-storage>`_.

.. _data-transfer-costs:

Data Transfer
-------------

|service| data transfer costs depend on the cloud service provider
where you deployed the cluster. Multi-region clusters may have higher
data transfer costs depending on the number and location of additional
regions, as well as the number of clusters deployed to each region.

|service| tabulates data transfer costs daily.

.. note::

   |service| does not charge for data transfer on ``M0`` Free Tier
   and ``M2/M5`` shared clusters.

|aws|
  |service| charges for data transfer between the |service| server and
  another server. Data transfer charges include traffic between
  cluster nodes, including an outgoing transfer from the source node
  and an incoming transfer to the destination node within the same AWS
  region. Charges for data transfer increase as follows, from lowest
  to highest:

  - Data transfer between the originating MongoDB |service| server and
    a server in the same AWS region.

  - Data transfer between the originating MongoDB |service| server and
    a server in a different AWS region.

  - Data transfer between the originating MongoDB |service| server and
    a server not in an AWS region.

|gcp|
  |service| charges for outgoing data transfers from an |service|
  server to another server. Incoming data transfers to an |service|
  server are free. Data transfer charges for a |service| cluster are
  as follows, from lowest to highest:

  - Outgoing data transfer between the originating MongoDB |service|
    node and:

    - a server that is in the same region but not in the same zone, or

    - a server where both the originating MongoDB |service| node and
      the destination server are in different regions in the United
      States of America.

  - Outgoing data transfer between the originating MongoDB |service|
    node and:

    - a server in a different continent, or

    - a server in the same continent (excluding USA) but a different
      region, or

    - a server or machine not in a |gcp| data center.

:abbr:`Azure (Microsoft Azure)`
  |service| charges for outgoing data transfer from an |service|
  server to another server or machine *not* in the same region.
  Incoming data transfers to a |service| server are free. Data
  transfer charges for an |service| cluster depend on the geographic
  location of the source server.

.. _server-number-costs:

Number of Servers
-----------------

|service| charges the cluster cost and data storage cost for each
data-bearing server [#data-bearing]_ in your cluster. For a replica
set, the number of data-bearing servers equals the replication factor.
For a sharded cluster, the number of data-bearing servers equals the
replication factor multiplied by the number of shards.

If you enable sharding, |service| also runs three
:ref:`config servers <sharding-config-server>` in addition to your
data-bearing servers. Your selections for cluster tier and data
storage do not affect the costs of the config servers. Config servers
are charged at a separate rate. Their cost is reflected in the cost of
the cluster.

.. _advanced-security:

Advanced Security
-----------------

|service| supports
:doc:`Encryption at Rest via customer KMS </security-kms-encryption>`
and :doc:`LDAP User Authentication and Authorization </security-ldaps>`
in |service| projects and clusters.

Excluding |service-fullname| Enterprise and |service-fullname| Platinum
customers, |service| charges a 45% uplift to the cost of each cluster
with **LDAP User Authentication and Authorization** and/or
**Encryption at Rest via customer KMS** enabled.

Configuring **LDAP User Authentication and Authorization** for a
project enables the feature for all clusters in the project.
Configuring **Encryption at Rest via customer KMS** for a project
allows enabling/disabling the feature on per cluster basis

.. _database-auditing:

Database Auditing
-----------------

|service| supports database auditing. See
:doc:`Set up Database Auditing </database-auditing>` for details.

Excluding |service-fullname| Enterprise and |service-fullname| Platinum
customers, |service| charges a 30% uplift in the hourly cost of all
dedicated clusters for projects using Database Auditing.

Backup
------

The |service| :doc:`backup-cluster` supports
:doc:`/backup/continuous-backups` and
:doc:`/backup/cloud-provider-snapshots`. Each backup method has
its own cost calculations and considerations.

|service| charges for each replica set in a cluster. For a replica set
deployment, the backup costs are the cost to backup data for the
replica set. For a sharded cluster deployment, |service| sums the cost
to backup the data for each shard replica set *and* the config server
replica set.

|service| charges for the network transfer costs of restoring a
snapshot. See :ref:`data-transfer-costs` for more information on how
|service| charges for network data.

Continuous Backups
~~~~~~~~~~~~~~~~~~

The backup cost for continuous backups is per GB per month
(US$2.50 / GB / month) as specified on the |service-pricing|_. The
monthly rate is annualized and then divided by 365 to arrive at a
Daily Backup Rate per GB. The first 1 GB of backup data is free.

Monthly backup costs are primarily based on the size per-gigabyte of
the data to back up. This size is roughly equivalent to the
uncompressed size of all documents and all indexes for all the
databases backed up.

To retrieve the size in gigabyte of the documents and indexes for a
given database, you can issue the
:manual:`db.stats() </reference/method/db.stats>` method and sum the
``dataSize`` and ``indexSize`` fields.

.. code-block:: javascript

   db.stats(1024*1024*1024).dataSize + db.stats(1024*1024*1024).indexSize

The rate is based on your having 28 snapshots at steady state:

- The six-hour snapshots are kept for two days;

- The daily snapshots for one week,

- The weekly snapshots for one month,

- The monthly for one year.

Adding that up, you get 8 + 5 + 3 + 12 = 28 snapshots. We adjust the
backup rate daily based on the following formula:

.. code-block:: none

   backupRatePerMonth = $1.25 + snapshotAtSteadyState/28 * $1.25

Changing the snapshot frequency or retention period affects the base
rate per GB. See :ref:`modify-backup-schedule` for more information.

.. admonition:: Examples

   - For a three-member replica set with 30GB of data, |service|
     charges US$72.50 each month (using the default backup rate).

     ``(30GB - 1GB) × US$2.50 = US$72.50``

   - A sharded cluster with 3 shards contains 90GB of data, with each
     shard containing 30GB of data each. The config server replica set
     contains 5GB of data.

     For this sharded cluster, |service| charges US$227.50 per month
     (using the default backup rate).

     ``((30GB - 1GB) × US$2.50) × 3) + ((5GB - 1GB) × US$2.50) =
     US$227.50``

.. _billing-backup-cloud-provider-snapshots:

Cloud Provider Snapshots
~~~~~~~~~~~~~~~~~~~~~~~~

.. tabs-cloud-providers::

     tabs:

     - id: azure
       content: |

         The backup cost for cloud provider snapshots is the *total*
         size of all snapshots per GB per month. The rate per GB
         depends on the region of the cluster. For multi-region
         clusters, the rate per GB depends on the cluster's preferred
         region.

         .. example::

            For a three member replica set deployed to the Azure
            ``useast2`` region (Virginia, USA) with three snapshots of
            10, 20, and 30GB respectively, |service| charges US$20.40.

            ``(10GB * US$0.34) + (20GB * US$0.34) + (30GB * US$0.34)``

            .. note::

               The US$0.34 rate per GB is specific to the
               :ref:`Azure <windows-azure>` ``useast2`` region at the
               time of writing. |service| displays the most current
               cost per GB for the cluster's selected region during
               cluster configuration.
               See :doc:`/tutorial/create-new-cluster` or :doc:`scale-cluster`
               for more information on cluster configuration.

         When restoring a cluster using a manual download via HTTPS,
         |service| also charges per-hour that the download link remains
         active. Contact MongoDB Support for more information.
         From the |service| project or cluster view, click
         :guilabel:`Support` in the left-hand navigation bar.

     - id: aws
       content: |

         The backup cost for Cloud Provider Snapshots is the
         *total* size of all snapshots per GB per month. The rate per
         GB depends on the region of the cluster. For multi-region
         clusters, the snapshot storage location depends on the
         location of the replica set member targeted for snapshots.
         The rate per GB therefore depends on the region of the
         targeted replica set member at the time of the snapshot.

         |aws| Cloud Provider Snapshots
         supports incremental snapshots, where a new snapshot saves
         only the data that changed after your most recent snapshot.
         For example, a cluster with ``10GB`` of data and 3 snapshots
         may require less than ``30GB`` of total snapshot storage
         depending on how data changed between snapshots.

         If the existing snapshot storage volume becomes invalid,
         |service| creates a new snapshot storage volume in the same
         region as the cluster's current primary and takes a full-copy
         snapshot. |service| continues using that primary and its
         |aws| region for snapshots
         and snapshot storage. This may result in a higher invoice for
         the few days required to re-establish incremental snapshots.
         The cost per GB for snapshot storage may also change
         depending on the region of the new snapshot target.
         For more information on how |service| manages snapshot
         storage, see :ref:`backup-cloud-provider`.

         When restoring a cluster using a manual download via HTTPS,
         |service| also charges per-hour that the download link remains
         active. Contact MongoDB Support for more information.
         From the |service| project or cluster view, click
         :guilabel:`Support` in the left-hand navigation bar.

If you have questions on Cloud Provider Snapshot backup sizing and
pricing, please contact |service| support by clicking
:guilabel:`Support` from the left-hand navigation of the |service| UI.

Lowering the Monthly Rate
~~~~~~~~~~~~~~~~~~~~~~~~~

:ref:`backup-continuous`
  Lowering snapshot frequency or lowering snapshot retention lowers the
  cost per gigabyte. Increasing the snapshot frequency or the snapshot
  retention increases the cost per gigabyte. To modify the snapshot
  frequency or retention for a cluster, see
  :ref:`modify-backup-schedule`.

:ref:`backup-cloud-provider`
  The cost of backups is dependent on the region of the replica set
  member targeted for snapshots. Modifying the
  region configuration for your cluster may reduce the cost per
  gigabyte for snapshot storage. You can change regions by
  :ref:`scaling the cluster <scale-cluster-region>`.

|bic|
-----

Excluding |service-fullname| Enterprise and |service-fullname| Platinum
customers, if |bic| is enabled for your cluster:

- The billing rate for the |bic| is described in the Cluster UI
  as a daily uplift on the cost of the associated cluster. You can
  view the rate when :ref:`deploying your cluster <create-new-cluster>`
  or by :doc:`modifying your cluster </scale-cluster>`.

- |bic| has a sustained-usage pricing. That is, the daily rate is
  charged only up to a maximum for the month.

.. _sitch-for-atlas:

Stitch for Atlas
----------------

|stitch-docs| applications may incur data transfer and compute costs
for each application in a project. If you have Stitch applications in
your organization, your invoice includes these costs as a line item.
See `Stitch Billing <https://docs.mongodb.com/stitch/billing/>`_ for
more information.

Support Plan
------------

If you have an upgraded :doc:`support plan </support>`, the total
support cost for the month is listed in the :guilabel:`Summary` section
of your invoice. Support cost line items are listed in the
:guilabel:`Details` section.

.. _data-lake-billing:

|service| |data-lake| (Beta)
----------------------------

|service| |data-lake| incurs costs for the amount of data scanned and
returned by the service.

Total Data Scanned
~~~~~~~~~~~~~~~~~~

|service| charges for the total number of bytes that |data-lake| scans
from your |aws| S3 buckets, rounded up to the nearest megabyte.
|service| charges **$5.00 per TB** of scanned data, with a minimum of
**10 MB** or **$0.00005 per query**.

You can use partitioning strategies and compression in |aws| S3 to
reduce the amount of data scanned.

Total Data Returned
~~~~~~~~~~~~~~~~~~~

|service| charges for the total number of bytes returned by
|data-lake|. This total is the sum of the following data transfers:

- The number of bytes transferred between |data-lake| service nodes
- The number of bytes transferred from |data-lake| to the client

Returned data is billed as outlined in the :guilabel:`Data Transfer
Fees` section of the |service-pricing|_. The cost of data transfer
depends on the Cloud Service Provider charges for same-region,
region-to-region, or region-to-internet data transfer.
