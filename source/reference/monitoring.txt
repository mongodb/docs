====================
Monitoring Reference
====================

This document contains references of the different types of hosts,
databases, and other statuses that may occur in |monitoring|.

.. _host-types:

Host Types
----------

The possible values for the "Type" column in the :guilabel:`Deployment` page are:

- primary
- secondary
- standalone
- master
- slave
- unknown
- recovering

The "Host Type" selector on the advanced dashboard creator also
includes:

- conf
- mongos

.. note::

   The host type column may also have the value "no data," which means
   that |monitoring| has not received any data from the Monitoring
   Agent for this host. Possible causes for this state:

   - If the Monitoring Agent can't connect to the server because of
     networking restrictions or issues (i.e. firewalls, proxies,
     routing.)

   - If your database is running with SSL. You must enable SSL either
     globally or on a per-host basis. See
     :doc:`/tutorial/configure-monitoring-agent-for-ssl` and
     :doc:`/tutorial/edit-host-ssl-use` for more information.

   - If your database is running with authentication. You must supply
     |monitoring| with the authentication credentials either when
     you're adding a host *or* by clicking the gear icon and then
     :guilabel:`Edit Host` to the right of the entry on the
     :guilabel:`Deployment` page.

Host Process Types
------------------

|monitoring| can monitor the process types:

- ``mongod`` database processes
- ``mongod`` arbiter processes
- ``mongos``
- Monitoring Agents

.. index:: alerts; events

Event Types
-----------

Types of events in the Events section of the MMS console:

- new host
- restart
- upgrade

.. index:: alerts; types

Alert Types
-----------

The available alert types are:

- Old Host Version
- Host Down
- Agent Down
- Now Secondary
- Now Primary

.. index:: chart; colors

Chart Colors
------------

- A *red bar* indicates a server restart.

- A *purple bar* indicates the server is now a primary.

- A *yellow bar* indicates the server is now a secondary.

Status Page
~~~~~~~~~~~

- cpu time
- db storage
- page faults
- repl lag
- replica
- network
- cursors
- queues
- connections
- background flush avg
- lock % [#global-lock]_
- btree
- non-mapped virtual memory
- memory
- asserts
- opcounters-repl
- opcounters

.. [#global-lock] For versions of MongoDB after 2.1.1, this chart has
   a drop-down menu next to the tile that lists available databases,
   including "global" to represent the global lock for this
   host. Select a database to see its lock utilization. See `the
   documentation of lock reporting in serverStatus
   <http://docs.mongodb.org/manual/reference/server-status/#server-status-locks>`_
   for more information.

.. _db-stats-list:

DB Stats Page
~~~~~~~~~~~~~

- collections
- objects
- average object size
- data size
- storage size
- num extents
- indexes
- index size
- file size

Database Commands Used by the Monitoring Agent
----------------------------------------------

- serverStatus
- buildinfo
- getCmdLineOpts
- connPoolStats
- _isSelf
- getParameter
- ismaster
- getShardVersion
- netstat
- replSetGetStatus
- shards.find
- mongos.find
- config.chunks.group
- oplog.find
- collstats - oplog.rs
- sources.find (slave)
- config.settings.find
- dbstats
- db.locks
