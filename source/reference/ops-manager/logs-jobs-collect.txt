.. _mcli-om-logs-jobs-collect-cmd:

======================================
mongocli ops-manager logs jobs collect
======================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``logs jobs collect`` command starts a job to collect logs from the 
specified |onprem| project. You can also collect logs from an |mms| 
project through the |mms| 
:opsmgr:`API </reference/api/log-collections/log-collections-submit/>`.

.. _om-logs-jobs-collect-syntax:

Syntax 
------

.. code-block:: text 

   mongocli ops-manager|om logs|log jobs|job collect <resourceType> <resourceName>
        --sizeRequestedPerFileBytes <number-of-bytes>
        --type <log-type>
        [ --redacted <boolean> ]
        [ --output|-o <output-format> ] 
        [ --projectId <id-of-project> ]
        [ --profile|-P <profile-name> ]

.. _om-logs-jobs-collect-options:

Options 
-------

.. list-table:: 
   :header-rows: 1 
   :widths: 35 10 50 5

   * - Option 
     - Type 
     - Description 
     - Required?

   * - ``<resourceType>``
     - string
     - Type of resource from which to collect logs. Must be one of the 
       following values:

       - ``CLUSTER``
       - ``PROCESS``
       - ``REPLICASET``
     - yes

   * - ``<resourceName>``
     - string
     - Name of the resource from which to collect logs. 
     - yes

   * - ``--sizeRequestedPerFileBytes``
     - number
     - Size for each log file in bytes. 
     - yes

   * - ``--type``
     - string
     - Type of logs to collect. Must be one of the following values:

       - ``AUTOMATION_AGENT``
       - ``BACKUP_AGENT``
       - ``MONITORING_AGENT``
       - ``MONGODB``
       - ``FTDC``
     - yes

   * - ``--redacted``
     - boolean
     - If ``true``, emails, hostnames, IP addresses, and namespaces in 
       responses involving this job are replaced with random string 
       values.
     - no

   * - ``--output``, ``-o``
     - string 
     - .. include:: /includes/extracts/fact-basic-options-output.rst
     - no

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are saved. If omitted, uses the {+default-profile+}. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project containing the logs you want to 
       collect.

       .. include:: /includes/admonitions/note-get-project-id.rst
     - no

.. _om-logs-jobs-collect-output:

Output 
------

The command prints a |json| document with an ``id`` field to the 
terminal if the command succeeds. If the command returns an error,
see :ref:`Troubleshooting <troubleshooting>` for recommended solutions.

.. list-table::
   :widths: 10 10 80
   :header-rows: 1
   :stub-columns: 1

   * - Name
     - Type
     - Description

   * - ``id``
     - string
     - Unique identifier of the created log collection job.

Example
-------

The following example uses the 
``mongocli ops-manager logs jobs collect``
command to start a log collection job for ``MONGODB`` logs from a
replica set named ``myReplicaSet``. The command uses the {+default-profile+} where the project ID and the |svc-api-key|\s are stored.

.. code-block:: text
   :copyable: false

   mongocli ops-manager logs jobs collect REPLICASET myReplicaSet --sizeRequestedPerFileBytes 10000000 --type MONGODB --output json

The above command prints the following result in the specified format to 
the terminal. To learn more about this result, see 
:ref:`om-logs-jobs-collect-output`.

.. code-block:: json
   :copyable: false

   {
	   "id": "15ec3001b081a6533d071acf"
   }
