=====================================
Add Monitored Processes to Automation
=====================================

.. default-domain:: mongodb

Overview
--------

|mms| can automate operations for your monitored MongoDB processes.
Adding your processes to Automation lets you reconfigure, stop, and
restart MongoDB through the |mms| interface.

Adding monitored processes involves two steps. First, install the
Automation Agent on each server hosting a monitored MongoDB process.
Second, add the processes to Automation through the |mms| interface.

Prerequisites
-------------

Automation supports most but not all available MongoDB options. Automation
supports the options describe in
:doc:`/reference/cluster-configuration-process-options`.

The user running the Automation Agent must the same as the user running
the MongoDB process to be managed.

.. For example, this is the ``mongod`` user on Debian systems and the 
   ``mongodb`` user on RHEL systems.

The servers that host the MongoDB processes must have full networking
access to each other through their fully qualified domain names (retrieved
on each server by issuing ``hostname -f``). Each server must be able to
reach every other server through the FQDN.

|mms| must be currently monitoring the MongoDB processes, and the
Monitoring Agent must be running. The processes must appear in the |mms|
:guilabel:`Deployment` tab.

Procedures
----------

Install the Automation Agent on Each Server
+++++++++++++++++++++++++++++++++++++++++++

Install the Automation Agent on each server that hosts a monitored MongoDB
process. Ensure that the Automation Agent has adequate permissions to
stop and restart the existing Monitoring Agent so that it can update the
Monitoring Agent as new versions are released.

On each server, you must download the agent, create the necessary
directories, and configure the agent's ``local.config`` file with the
Group ID and API key.

.. include:: /includes/steps/automation-agent-install-for-existing-deployment.rst

For additional information on installing the agent, see
:doc:`/tutorial/nav/install-automation-agent`.

Add the Processes to Automation
+++++++++++++++++++++++++++++++

.. include:: /includes/steps/add-monitored-deployment-to-automation.rst
