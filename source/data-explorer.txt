.. _data-explorer:

=============
Data Explorer
=============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: twocols

.. include:: /includes/fact-atlas-free-tier-limits.rst

The :guilabel:`Data Explorer` in |service| provides the ability to:

- View databases,collections and indexes in your cluster.

- Create and drop databases, collections, and indexes.

- Insert/edit/delete documents.

Data explorer reads from the primary unless the primary is unavailable.
If the primary is unavailable, data explorer reads from a non-hidden,
non-delayed secondary member.

.. _data-explorer-access:

Access ``Data Explorer``
------------------------

.. admonition:: Required Privileges
   :class: important

   To access :guilabel:`Data Explorer`, you must have access provided by at
   least one of the following roles:

   - :authrole:`Project Owner` (A user with :authrole:`Organization
     Owner` role has ``Project Owner`` access for all projects in the
     organization.)

   - :authrole:`Project Data Access Admin`

   - :authrole:`Project Data Access Read/Write`

   - :authrole:`Project Data Access Read Only`

To access :guilabel:`Data Explorer`, click :guilabel:`Clusters` and
then for the MongoDB cluster, click the :guilabel:`Collections` button. Or, if
you are already viewing a specific cluster, select the :guilabel:`Collections`
tab. The tab lists the databases in your deployment and the collections
in each database.

.. _view-db-collections:

View Databases and Collections
------------------------------

From the :guilabel:`Collections` tab, you can view the databases and
collections in the deployment. To view the collections in a particular
database, click on the database.

.. _de-view-documents:

View Documents
--------------

From the :guilabel:`Collections` tab, you can view documents in a
collection. To view documents for a collection:

.. container:: admonition

   .. include:: /includes/steps/data-explorer-find.rst

.. _de-insert-documenets:

Insert Documents
----------------

To insert a new document through the :guilabel:`Data Explorer`, you
must have access provided by at least one of the following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

- :authrole:`Project Data Access Read/Write`

To add a document to a collection through the :guilabel:`Data
Explorer`, you can specify the document to insert from scratch or you
can clone an existing document and modify its fields and values as
needed.

Insert Document
~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/steps/data-explorer-insert-document.rst

Clone a Document
~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/steps/data-explorer-clone-document.rst


Edit a Document
---------------

To edit a collection's documents through the :guilabel:`Data Explorer`,
you must have access provided by at least one of the following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

- :authrole:`Project Data Access Read/Write`

To edit a document from a collection through the :guilabel:`Data
Explorer`,

.. container:: admonition

   .. include:: /includes/steps/data-explorer-edit-document.rst

Delete a Document
-----------------

To delete documents from a collection through the :guilabel:`Data
Explorer`, you must have access provided by at least one of the
following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

- :authrole:`Project Data Access Read/Write`


To delete a document from a collection through the :guilabel:`Data
Explorer`,

.. container:: admonition

   .. include:: /includes/steps/data-explorer-delete-document.rst


.. _de-view-indexes:

View Indexes
------------

From the :guilabel:`Collections` tab, you can view index information
for a collection. To view index information for a collection:

.. container:: admonition

   .. include:: /includes/steps/data-explorer-indexes.rst

.. _de-create-a-db:

Create a Database
-----------------

To create a database through the :guilabel:`Data Explorer`, you
must have access provided by at least one of the following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

- :authrole:`Project Data Access Read/Write`

To create a database through the :guilabel:`Data Explorer`,

.. container:: admonition

   .. include:: /includes/steps/data-explorer-create-database.rst

.. _de-create-a-collection:

Create a Collection
-------------------

To create a collection through the :guilabel:`Data Explorer`, you
must have access provided by at least one of the following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

- :authrole:`Project Data Access Read/Write`

To create a collection in an existing database through the :guilabel:`Data
Explorer`,

.. tip::

   To create the first collection in a new database, see
   :ref:`de-create-a-db`.

.. container:: admonition

   .. include:: /includes/steps/data-explorer-create-collection.rst

.. _de-create-an-index:

Create an Index
---------------

To create an index through the :guilabel:`Data Explorer`, you
must have access provided by at least one of the following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

To create an index for a collection through the :guilabel:`Data Explorer`,

.. container:: admonition

   .. include:: /includes/steps/data-explorer-create-index.rst

.. _de-drop-a-db:

Drop a Database
---------------

To drop a database through the :guilabel:`Data Explorer`, you
must have access provided by at least one of the following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

To drop a database, including all its collections, through the
:guilabel:`Data Explorer`,

.. container:: admonition

   .. include:: /includes/steps/data-explorer-drop-db.rst

.. _de-drop-a-collection:

Drop a Collection
-----------------

To drop a collection through the :guilabel:`Data Explorer`, you
must have access provided by at least one of the following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

To drop a collection, including its documents and indexes, through the
:guilabel:`Data Explorer`,

.. container:: admonition

   .. include:: /includes/steps/data-explorer-drop-collection.rst

.. _de-drop-an-index:

Drop an Index
-------------

To drop an index through the :guilabel:`Data Explorer`, you
must have access provided by at least one of the following roles:

- :authrole:`Project Owner` (A user with :authrole:`Organization Owner`
  role has ``Project Owner`` access for all projects in the
  organization.)

- :authrole:`Project Data Access Admin`

To drop an index from a collection through the :guilabel:`Data
Explorer`,

.. note::

   You cannot delete the ``_id`` index.

.. container:: admonition

   .. include:: /includes/steps/data-explorer-drop-index.rst

.. _de-shard-collection-for-global-writes:

Shard a Collection for Global Writes
------------------------------------

Administrators can shard collections for :ref:`Global Writes <create-new-global-write-cluster>`
using the :guilabel:`Data Explorer`. The collection must reside in a cluster
that is configured for Global Writes, and you must have the
:authrole:`Project Owner` role to shard a collection for Global
Writes in the Data Explorer.

Collections must meet the following criteria before you can shard them
for Global Writes:

- Every document in the collection must include a ``location`` field.

- The value of the ``location`` field must be either an `ISO-3166-1
  alpha 2 <https://en.wikipedia.org/wiki/ISO_3166-1>`_ country code  or
  a supported `ISO-3166-2 <https://en.wikipedia.org/wiki/ISO_3166-2>`_
  subdivision code. Documents that do not match this criteria may be
  routed to any shard in the cluster. To view the complete list of 
  currently supported country and subdivision codes, visit
  `https://cloud.mongodb.com/static/atlas/country_iso_codes.txt <https://cloud.mongodb.com/static/atlas/country_iso_codes.txt>`_.

The ``location`` field is the first of two document fields that form a
compound shard key. The administrator chooses the second field of the
key during the following procedure. See `Choosing a Shard Key
<https://docs.mongodb.com/manual/core/sharding-shard-key/#choosing-a-shard-key>`_
for guidance on choosing a secondary shard key and the effect of shard
key choice on data distribution. See :manual:`Sharding </sharding>` for
general information about sharding.

To shard a collection for Global Writes:

.. include:: /includes/steps/shard-collection-for-global-writes.rst

|service| displays the compound shard key near the top of the
:guilabel:`Global Writes` tab after configuring the collection.
