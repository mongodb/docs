===================================================
Optional: Configure Email Service, Twilio, and SNMP
===================================================

.. default-domain:: mongodb

Configure Email Email Service
-----------------------------

Set the following value in the
``<install_dir>/conf/conf-mms.properties`` file:

.. code-block:: ini

   mms.emailDaoClass=com.xgen.svc.core.dao.email.JavaEmailDao

Then, in the same file, set the following values as defined by your email
provider. Defaults specified inline:

.. code-block:: ini

   mms.mail.transport=<smtp/smtps> # (defaults to smtp)
   mms.mail.hostname=<mail.example.com> # (defaults to localhost)
   mms.mail.port=<number> # (defaults to 25)
   mms.mail.tls=<true/false> # (defaults to false)

The following two values are optional,
and unless set default to disabled authentication:

.. code-block:: ini

   mms.mail.username=
   mms.mail.password=

AWS Simple Email Service Configuration
--------------------------------------

If you use the AWS Simple Email Service, set the following value in
``<install_dir>/conf/conf-mms.properties`` to configure integration with
AWS's Simple Email Service (SES:)

.. code-block:: ini

   mms.emailDaoClass=com.xgen.svc.core.dao.email.AwsEmailDao

To configure this integration you must also provide your AWS account
credentials in the following two properties:

.. code-block:: ini

   aws.accesskey=
   aws.secretkey=

.. _twilio-sms-configure:

Configure Twilio SMS Alert Support
----------------------------------

To receive alert notifications via SMS, signup for a Twilio account at
`<http://www.twilio.com/docs/quickstart>`_ and enter your account ID, API
token, and Twilio phone number into the following properties:

.. code-block:: ini

   twilio.account.sid=
   twilio.auth.token=
   twilio.from.num=

.. _snmp-heartbeat-configure:

Configure SNMP Heartbeat Support
--------------------------------

The MIB file is available for download at:
`<http://downloads.mongodb.com/on-prem-monitoring/MMS-MONGODB-MIB.txt>`_

You can configure the On-Prem MMS Server to send a periodic heartbeat trap notification
(v2c) that contain an internal health assessment of the MMS
Server.

The MMS Server can send traps to one or more endpoints on the standard
SNMP UDP port 162.

There are three configuration options that affect the heartbeat
behavior:

.. code-block:: ini

   # Listening UDP port for SNMP. (Note: Setting to less than 1024 will require running MMS server with root privileges.)
   snmp.listen.port=11611 #default

   # Period in seconds between heartbeat notifications
   snmp.default.heartbeat.interval=300 #default

   # Optional comma-separated list of hosts where 'heartbeat' traps will be sent on standard UDP port 162.
   # Leaving blank (the default) disables the SNMP heartbeat functionality
   snmp.default.hosts=


