.. _mongodb-roles:

======================
Configure Custom Roles
======================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can create :doc:`custom roles </security-add-mongodb-roles>` in 
|service| when the built-in
:ref:`database user privileges <atlas-user-privileges>`
cannot describe your desired set of privileges.

.. note:: Free and Shared Cluster Limitation

   Changes to :doc:`custom roles </security-add-mongodb-roles>`
   make take up to 30 seconds to deploy in ``M0`` free tier and
   ``M2/M5`` shared clusters.

.. _add-mongodb-roles:

Add Custom Roles
----------------

The following procedure shows how to create a custom role through the
|service| UI. To create custom roles through the |service| API, see
:doc:`/reference/api/custom-roles-create-a-role`.

.. include:: /includes/steps/add-roles.rst

Modify Custom Roles
-------------------

The following procedure shows how to modify custom roles through the
|service| UI. To modify custom roles through the |service| API, see
:doc:`/reference/api/custom-roles-update-a-role`.

1. In the :guilabel:`Security` section of the left navigation, click
   :guilabel:`Database Access`. The :guilabel:`Custom Roles` tab
   displays.

#. Click :icon-fa5:`pencil-alt` :guilabel:`Edit` next to the role you
   want to modify. You can modify the following components of the role:

   - The action(s)/role(s) the custom role inherits.

   - The database(s)/collection(s) on which those privileges
     apply.

#. Click :guilabel:`Update Custom Role` to save the changes.

Delete Custom Roles
-------------------

The following procedure shows how to delete custom roles through the
|service| UI. To delete custom roles through the |service| API, see
:doc:`/reference/api/custom-roles-delete-a-role`.

1. In the :guilabel:`Security` section of the left navigation, click
   :guilabel:`Database Access`. The :guilabel:`Custom Roles` tab
   displays.

#. Click :icon-fa4:`trash-o` :guilabel:`Delete` next to the role you
   want to delete.

#. Click :guilabel:`Delete` in the dialog to confirm deletion.

.. include:: /includes/fact-delete-custom-role-scenarios.rst

Considerations
--------------

- If a :ref:`database user <mongodb-users>` is assigned a custom
  role, they cannot be assigned any other roles. 

- |service| rolls back any role modifications not made through the UI
  or :doc:`API </reference/api/custom-roles>`. You must use the
  |service| UI or API to add, modify, or delete custom roles on
  |service| clusters.

- .. include:: /includes/fact-role-auditing.rst
