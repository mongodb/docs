title: Download the latest version of the Monitoring Agent package.
stepnum: 1
edition:
  - cloud
ref: download-saas
pre: |
  Issue one of the following commands using the system shell:
action:
  - heading: "For Ubuntu 15.X, 16.X:"
    language: sh
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_amd64.ubuntu1604.deb
  - heading: "For Ubuntu 12.X, 14.X:"
    language: sh
    code: |
      curl -OL https://cloud.mongodb.com/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_amd64.deb
---
title: "Download the latest version of the Monitoring Agent package."
stepnum: 1
edition: onprem
ref: download-hosted
pre: |
  Issue one of the following commands using the system shell:
action:
  - heading: "For Ubuntu 15.X, 16.X:"
    language: sh
    code: |
      curl -OL <ops-manager-host>/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_amd64.ubuntu1604.deb
  - heading: "For Ubuntu 12.X, 14.X:"
    language: sh
    code: |
      curl -OL <ops-manager-host>/download/agent/monitoring/mongodb-mms-monitoring-agent_latest_amd64.deb
---
title: "Install the Monitoring Agent package."
stepnum: 2
ref: install
pre: |
  Issue one of the following commands using the system shell:
action:
  - heading: "For Ubuntu 15.X, 16.X:"
    language: sh
    code: |
      sudo dpkg -i mongodb-mms-monitoring-agent_latest_amd64.ubuntu1604.deb
  - heading: "For Ubuntu 12.X, 14.X:"
    language: sh
    code: |
      sudo dpkg -i mongodb-mms-monitoring-agent_latest_amd64.deb
---
stepnum: 3
source:
  file: steps-source-install-agent.yaml
  ref: retrieve-monitoring-mms-api-key
---
title: "Edit the ``monitoring-agent.config`` file to include your agent API key."
stepnum: 4
ref: configure-monitoring-mms-api-key
content: |
  In the ``/etc/mongodb-mms/monitoring-agent.config`` file, set the
  :msetting:`mmsApiKey` property to your API key.
---
stepnum: 5
source:
  file: steps-source-install-agent.yaml
  ref: proxy
replacement:
  agentname: "Monitoring"
  httpProxy: ":msetting:`httpProxy`"
  configfile: "/etc/mongodb-mms/monitoring-agent.config"
---
title: "Start the Monitoring Agent."
stepnum: 6
ref: start-monitoring
pre: |
  Issue the following command:
action:
  - heading: "For Ubuntu 15.X or later:"
    language: sh
    code: |
       sudo systemctl start mongodb-mms-monitoring-agent.service
  - heading: "For Ubuntu 12.X, 14.X:"
    language: sh
    code: |
      sudo start mongodb-mms-monitoring-agent
...
