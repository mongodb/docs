===================================
SNMP Configuration for Replica Sets
===================================

.. default-domain:: mongodb

Overview
--------

Each physical machine must run a single SNMP master process to gather
statistics on all software tracked on that machine. This includes
:program:`mongod` instances, operating system behaviors, and all
other software that you wish to track.

All SNMP subagents must report to an SNMP master on the same physical
device. Do not run more than one SNMP master on the same physical
device.

.. seealso:: :doc:`/tutorial/troubleshoot-snmp`

Run in Production
-----------------

When running production MongoDB instances, always run a separate
piece of software as the SNMP master (e.g. ``snmpd``), and run
:program:`mongod` as an SNMP sub-agent.

.. code-block:: none

   mongod --snmp-subagent

See :doc:`/tutorial/monitor-mongodb-with-snmp` and
:doc:`/tutorial/monitor-mongodb-windows-with-snmp` for more
information.

Run in Testing
--------------

When running in a test environment, you can run :program:`mongod`
as an SNMP subagent. But as a convenience for testing purposes only,
you may avoid setting up an SNMP master by running :program:`mongod`
as its own SNMP master:

.. code-block:: none

   mongod --snmp-master

