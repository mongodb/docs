ref: server-pool-intro
edition: onprem
content: |
   Server Pool
   -----------

   |onprem| Server Pool allows |onprem| users with administrative
   privileges, i.e. |onprem| Administrators, to maintain a pool of
   provisioned servers that already have Automation Agents installed.
   When users in a group want to create a new MongoDB deployment, they
   can request servers from this pool to host the MongoDB deployment.

   For details, see :ref:`provision-via-server-pool`.
---
ref: server-pool-intro
edition: cloud
content: ""
---
ref: server-pool-key-location
edition: onprem
content: |
   To find the server pool key, in the :guilabel:`Admin` menu,
   go to :guilabel:`Server Pool` view and click on the
   :guilabel:`Agent Configuration` tab.
---
ref: server-pool-key-location
edition: cloud
content: ""
---
ref: server-pool-key
edition: onprem
content: |
   The server pool key associates this server to the server pool.

   .. include:: /includes/extracts/server-pool-key-location.rst
---
ref: server-pool-key
edition: cloud
content: ""
---
ref: server-pool-properties-file-content-description
content: |
   The properties file contains key/value pairs of the form
   ``<property>=<value>``. The |onprem| Administrator decides on both the
   property names and values.
edition: onprem
---
ref: server-pool-properties-file-content-description
content: ""
edition: cloud
---
ref: server-pool-properties-file-note
content: |
   .. note::
      Ensure that the properties file contains the desired property names
      and values *before* starting the Automation Agent on the server.

      Once the server is registered with the pool, changes to the
      properties file do not take effect until the server is *first*
      removed and the Automation Agent restarted.
      
edition: onprem
---
ref: server-pool-properties-file-note
content: ""
edition: cloud
---
ref: server-pool-properties-file
edition: onprem
content: |
   .. include:: /includes/extracts/server-pool-properties-file-content-description.rst

   .. include:: /includes/extracts/server-pool-properties-file-note.rst

   The properties and the values in this file may be presented to the
   user during server request as options when a user requests servers
   from the server pool. That is, the user can request servers that
   match certain properties.

   The |onprem| Administrator determines which properties to display to
   the user in the server request screen. For details, see
   :ref:`server-pool-server-request-options`.

---
ref: server-pool-properties-file
edition: cloud
content: ""
---
ref: server-pool-agent-group-settings
content: |
   This setting is usually set when the Automation Agent is
   installed and is required to bind the server to a group.

   .. admonition:: Server Pool 

      Do not set if adding the server to a server pool. To add the
      server to a server pool, set :asetting:`serverPoolKey`,
      :asetting:`serverPoolPropertiesFile`, and
      :asetting:`serverPoolStateFile` instead.
   
edition: onprem
---
ref: server-pool-agent-group-settings
content: ""
edition: cloud
---
ref: server-pool-state-file-permission
content: |
   Ensure that the directory path to the file exists and the agent
   has read and write access to the directory. The file itself need
   not exist; however, if it does exist, the agent must have read
   and write access to the file.
edition: onprem
---
ref: server-pool-state-file-permission
content: ""
edition: cloud
---
ref: server-pool-agent-config-choice
content: |
   - Bind to a specific group via the :asetting:`mmsGroupId`,
     :asetting:`mmsApiKey`, and :asetting:`mmsBaseUrl` settings.
     
     \- or -

   - Add the server to a server pool via :asetting:`serverPoolKey`,
     :asetting:`serverPoolPropertiesFile`,
     :asetting:`serverPoolStateFile`, and :asetting:`mmsBaseUrl` settings.
     
edition: onprem
---
ref: server-pool-agent-config-choice
content: ""
edition: cloud
...
