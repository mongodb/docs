#  This file borrows content from other files, including
#  /includes/options-shared.yaml,
#  which uses {{program}} to refer to the tool.
#
program: mongo
name: shell
directive: option
args: null
description: |
  Enables the shell interface. If you invoke the {{program}} command
  and specify a JavaScript file as an argument, or use :option:`--eval` to
  specify JavaScript on the command line, the {{role}} option
  provides the user with a shell prompt after the file finishes executing.
optional: true
---
program: mongo
name: nodb
directive: option
args: null
description: |
  Prevents the shell from connecting to any database instances. Later, to
  connect to a database within the shell, see
  :ref:`mongo-shell-new-connections`.
optional: true
---
program: mongo
name: norc
directive: option
args: null
description: |
  Prevents the shell from sourcing and evaluating :file:`~/.mongorc.js` on
  start up.
optional: true
---
program: mongo
name: quiet
directive: option
args: null
description: |
  Silences output from the shell during the connection process.
optional: true
---
program: mongo
name: port
directive: option
args: <port>
description: |
  Specifies the port where the :binary:`~bin.mongod` or :binary:`~bin.mongos`
  instance is listening. If {{role}} is not specified,
  {{program}} attempts to connect to port ``27017``.
optional: true
---
program: mongo
name: host
directive: option
args: <hostname>
description: |
  Specifies the name of the host machine where the
  {{instance}} is running. If this is not specified,
  {{program}} attempts to connect to a MongoDB process running on
  the localhost.

  To connect to a replica set,
     Specify the :setting:`replica set name <~replication.replSetName>`
     and a seed list of set members. Use the following form:

     .. code-block:: none

        <replSetName>/<hostname1><:port>,<hostname2><:port>,<...>

  For TLS/SSL connections (``--ssl``),
    .. include:: /includes/extracts/ssl-facts-mongo-ssl-hostname-verification.rst

  For `DNS seedlist connections <https://docs.mongodb.com/manual/reference/connection-string/#dns-seedlist-connection-format/>`_, 
     Specify the connection protocol as ``mongodb+srv``, followed by
     the DNS SRV hostname record and any options. The ``authSource``
     and ``replicaSet`` options, if included in the connection string,
     will override any corresponding DNS-configured options set in the
     TXT record. Use of the ``mongodb+srv:`` connection string
     implicitly enables TLS/SSL (normally set with ``ssl=true``) for
     the client connection. The TLS/SSL option can be turned off by
     setting ``ssl=false`` in the query string.

     Example:

     .. code-block:: none

        mongodb+srv://server.example.com/?connectionTimeout=3000ms

     .. versionadded:: 3.6

optional: true
replacement:
  instance: ":binary:`~bin.mongod` or :binary:`~bin.mongos`"
---
program: mongo
name: eval
directive: option
args: <javascript>
description: |
  Evaluates a JavaScript expression that is specified as an argument.
  {{program}} does not load its own environment when evaluating code.
  As a result many options of the shell environment are not available.
optional: true
---
program: mongo
name: username
aliases: -u
args: <username>
directive: option
description: |
  Specifies a username with which to authenticate to a MongoDB database
  that uses authentication. Use in conjunction with the :option:`--password` and
  :option:`--authenticationDatabase` options.
---
program: mongo
name: password
aliases: -p
args: <password>
directive: option
description: |
    Specifies a password with which to authenticate to a MongoDB database
    that uses authentication. Use in conjunction with the :option:`--username`
    and :option:`--authenticationDatabase` options. To force {{program}} to
    prompt for a password, enter the {{role}} option as the
    last option and leave out the argument.
---
program: mongo
aliases: -h
name: help
inherit:
  name: help
  program: _shared
  file: options-shared.yaml
---
program: mongo
name: version
inherit:
  name: version
  program: _shared
  file: options-shared.yaml
---
program: mongo
name: verbose
directive: option
args: null
description: |
  Increases the verbosity of the output of the shell during the connection
  process.
optional: true
---
program: mongo
name: ipv6
directive: option
args: null
description: |
  Enables IPv6 support. {{program}} disables IPv6 by default.

  To connect to a MongoDB cluster via IPv6, you must specify
  both {{role}} *and* 
  :option:`--host \<mongod/mongos IPv6 address\> <mongo --host>`
  when starting the {{program}} shell.

  :binary:`~bin.mongod` and :binary:`~bin.mongos` disable IPv6 support
  by default. Specifying {{role}} when connecting to a
  ``mongod/mongos`` does not enable IPv6 support on the 
  ``mongod/mongos``. For documentation on enabling IPv6 support
  on the ``mongod/mongos``, see :setting:`net.ipv6`.

---
program: mongo
name: <db name>
directive: option
args: null
description: |
  Specifies the name of the database to connect to. For
  example:

  .. code-block:: sh

     mongo admin

  The above command will connect the {{program}} shell to the
  :term:`admin database` of the MongoDB deployment running on the local machine. You may specify a remote
  database instance, with the resolvable hostname or IP address. Separate
  the database name from the hostname using a ``/`` character. See the
  following examples:

  .. code-block:: none

     mongo mongodb1.example.net/test
     mongo mongodb1/admin
     mongo 10.8.8.10/test

  This syntax is the *only* way to connect to a specific database.

  To specify alternate hosts and a database, you must use this syntax and cannot
  use :option:`--host` or :option:`--port`.
optional: true
---
program: mongo
name: <file.js>
directive: option
args: null
description: |
  Specifies a JavaScript file to run and then exit. Generally this should
  be the last option specified.

  .. optional:: To specify a JavaScript file to execute *and* allow
     {{program}} to prompt you for a password using
     :option:`--password`, pass the filename as the first parameter with
     :option:`--username` and :option:`--password` as the last options, as
     in the following:

     .. code-block:: sh

        mongo file.js --username username --password

  Use the :option:`--shell` option to return to a shell after the file
  finishes running.
optional: true
---
program: mongo
name: authenticationDatabase
args: <dbname>
directive: option
description: |

  Specifies the authentication database where the specified :option:`--username` has been created.
  See :ref:`user-authentication-database`.

post: |
  If you do not specify a value for {{role}}, {{program}} uses the database
  specified in the connection string.
---
program: mongo
name: authenticationMechanism
args: <name>
default: SCRAM-SHA-1
directive: option
description: |
  Specifies the authentication mechanism the {{program}} instance uses to
  authenticate to the :binary:`~bin.mongod` or :binary:`~bin.mongos`.

  .. versionchanged:: 4.0

     MongoDB removes support for the deprecated MongoDB
     Challenge-Response (``MONGODB-CR``) authentication mechanism.

     MongoDB adds support for SCRAM mechanism using the SHA-256 hash
     function (``SCRAM-SHA-256``).

  .. include:: /includes/list-table-auth-mechanisms.rst

---
program: mongo
name: ssl
args: null
directive: option
description: |

  .. deprecated:: 4.2 Use {{alternative}} instead.

  Enables connection to a :binary:`~bin.mongod` or :binary:`~bin.mongos` that has
  TLS/SSL support enabled.

  .. include:: /includes/extracts/ssl-facts-mongo-shell-ca.rst

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
replacement:
  alternative: ":option:`--tls <mongo --tls>`"
---
program: mongo
name: sslCertificateSelector
inherit:
  name: sslCertificateSelector
  program: mongod
  file: options-mongod.yaml
replacement:
  alternative: ":option:`--tlsCertificateSelector <mongo --tlsCertificateSelector>`"

---
program: mongo
name: sslPEMKeyFile
args: <filename>
directive: option
description: |

  .. deprecated:: 4.2 Use {{alternative}} instead.

  Specifies the :file:`.pem` file that contains both the TLS/SSL certificate
  and key. Specify the file name of the :file:`.pem` file using relative
  or absolute paths.

  This option is required when using the ``--ssl`` option to connect
  to a :binary:`~bin.mongod` or :binary:`~bin.mongos` that has
  :setting:`~net.ssl.CAFile` enabled *without*
  :setting:`~net.ssl.allowConnectionsWithoutCertificates`.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
replacement:
  alternative: ":option:`--tlsCertificateKeyFile <mongo --tlsCertificateKeyFile>`"

---
program: mongo
name: sslPEMKeyPassword
args: <value>
directive: option
description: |

  .. deprecated:: 4.2 Use {{alternative}} instead.

  Specifies the password to de-crypt the certificate-key file (i.e.
  ``--sslPEMKeyFile``). Use the {{role}} option only if the
  certificate-key file is encrypted. In all cases, the {{program}} will
  redact the password from all logging and reporting output.

  If the private key in the PEM file is encrypted and you do not
  specify the {{role}} option, the {{program}} will prompt for a
  passphrase. See :ref:`ssl-certificate-password`.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
replacement:
  alternative: ":option:`--tlsCertificateKeyFilePassword <mongo --tlsCertificateKeyFilePassword>`"

---
program: mongo
name: sslCAFile
args: <filename>
directive: option
description: |
  .. deprecated:: 4.2 Use {{alternative}} instead.


  Specifies the :file:`.pem` file that contains the root certificate chain
  from the Certificate Authority. Specify the file name of the
  :file:`.pem` file using relative or absolute paths.

  .. include:: /includes/extracts/ssl-facts-mongo-shell-ca.rst

  .. include:: /includes/extracts/ssl-facts-see-more.rst

optional: true
replacement:
  alternative: ":option:`--tlsCAFile <mongo --tlsCAFile>`"

---
program: mongo
name: sslCRLFile
args: <filename>
directive: option
description: |

  .. deprecated:: 4.2 Use {{alternative}} instead.

  Specifies the :file:`.pem` file that contains the Certificate Revocation
  List. Specify the file name of the :file:`.pem` file using relative or
  absolute paths.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
replacement:
  alternative: ":option:`--tlsCRLFile <mongo --tlsCRLFile>`"

---
program: mongo
name: sslFIPSMode
args: null
directive: option
description: |
  .. deprecated:: 4.2 Use {{alternative}} instead.
 
  Directs the {{program}} to use the FIPS mode of the TLS/SSL  
  library. Your system must have a FIPS compliant library to use
  the {{role}} option.

  .. include:: /includes/note-fips-is-enterprise-only.rst
optional: true

replacement:
  alternative: ":option:`--tlsFIPSMode <mongo --tlsFIPSMode>`"

---
program: mongo
name: sslAllowInvalidCertificates
args: null
directive: option
description: |
  .. deprecated:: 4.2 Use {{alternative}} instead.
  

  Bypasses the validation checks for server certificates and allows
  the use of invalid certificates to connect.

  .. note::
     
     .. include:: /includes/extracts/ssl-facts-x509-invalid-certificate.rst

  .. include:: /includes/extracts/ssl-facts-invalid-cert-warning-clients.rst

  When using the :setting:`~net.ssl.allowInvalidCertificates` setting,
  MongoDB logs as a warning the use of the invalid certificate.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
replacement:
  alternative: ":option:`--tlsAllowInvalidCertificates <mongo --tlsAllowInvalidCertificates>`"


---
program: mongo
name: gssapiServiceName
inherit:
  name: gssapiServiceName
  program: _shared
  file: options-shared.yaml
---
program: mongo
name: gssapiHostName
inherit:
  name: gssapiHostName
  program: _shared
  file: options-shared.yaml
---
program: mongo
name: sslAllowInvalidHostnames
args: null
directive: option
description: |
  .. deprecated:: 4.2 Use {{alternative}} instead.

  Disables the validation of the hostnames in TLS/SSL certificates. Allows
  {{program}} to connect to MongoDB instances even if the hostname in their
  certificates do not match the specified hostname.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
replacement:
  alternative: ":option:`--tlsAllowInvalidHostnames <mongo --tlsAllowInvalidHostnames>`"

---
program: mongo
name: enableJavaScriptJIT
directive: option
optional: true
args: null
description: |
   .. versionadded:: 4.0

   Enable the JavaScript engine's JIT compiler.
---
program: mongo
name: disableJavaScriptJIT
directive: option
optional: true
args: null
description: |
   .. versionchanged:: 4.0

      .. include:: /includes/fact-jit-disabled.rst

   Disables the JavaScript engine's JIT compiler.
---
program: mongo
name: disableJavaScriptProtection
directive: option
optional: true
args: null
description: |
   .. versionadded:: 3.4

   Allows fields of type :ref:`javascript<bson-types>` and
   :ref:`javascriptWithScope<bson-types>` to be automatically
   marshalled to JavaScript functions in the :binary:`~bin.mongo`
   shell.

   With the ``--disableJavaScriptProtection`` flag set, it is possible
   to immediately execute JavaScript functions contained in documents.
   The following example demonstrates this behavior within the shell:

   .. code-block:: javascript

      > db.test.insert({ _id: 1, jsFunc: function(){ print("hello") } } )
      WriteResult({ "nInserted" : 1 })
      > var doc = db.test.findOne({ _id: 1 })
      > doc
      { "_id" : 1, "jsFunc" : function (){ print ("hello") } }
      > typeof doc.jsFunc
      function
      > doc.jsFunc()
      hello

   The default behavior (when :binary:`~bin.mongo` starts *without* the
   ``--disableJavaScriptProtection`` flag) is to convert embedded
   JavaScript functions to the non-executable MongoDB shell type
   ``Code``. The following example demonstrates the default behavior
   within the shell:

   .. code-block:: javascript

      > db.test.insert({ _id: 1, jsFunc: function(){ print("hello") } } )
      WriteResult({ "nInserted" : 1 })
      > var doc = db.test.findOne({ _id: 1 })
      > doc
      { "_id" : 1, "jsFunc" : { "code" : "function (){print(\"hello\")}" } }
      > typeof doc.func
      object
      > doc.func instanceof Code
      true
      > doc.jsFunc()
      2016-11-09T12:30:36.808-0800 E QUERY    [thread1] TypeError: doc.jsFunc is
      not a function :
      @(shell):1:1
---
program: mongo
name: networkMessageCompressors
args: <string>
directive: option
description: |

   .. versionadded:: 3.4

   Enables network compression for communication between this
   {{program}} shell and:

   - a :binary:`~bin.mongod` instance

   - a :binary:`~bin.mongos` instance.

   You can specify the following compressors:	

   - :term:`snappy`

   - :term:`zlib` (Available starting in MongoDB 3.6)

   - :term:`zstd` (Available starting in MongoDB 4.2)

   .. include:: /includes/fact-networkMessageCompressors.rst

#   Commenting out for now since observation that we don't do this for others and so readers could erroneously think only this option has a uri equivalent.
#   Starting in MongoDB 4.0.5 (and MongoDB 3.6.10), you can also specify
#   the compressors for the {{program}} shell in the uri connection
#   string.  See :urioption:`compressors`.

---
program: mongo
name:  retryWrites
args:
directive: option
description: |

   .. versionadded:: 3.6

   Enables retryable writes as the default for sessions in the
   :binary:`~bin.mongo` shell.

   For more information on sessions, see :ref:`sessions`.
---
name: sslDisabledProtocols
args: <string>
description: |

   .. deprecated:: 4.2 Use {{alternative}} instead.

   Disables the specified TLS protocols. The option recognizes the
   following protocols: ``TLS1_0``, ``TLS1_1``, ``TLS1_2``, and
   starting in version 4.0.4 (and 3.6.9), ``TLS1_3``.

   - On macOS, you cannot disable ``TLS1_1`` and leave both ``TLS1_0`` and
     ``TLS1_2`` enabled. You must also disable at least one of the other
     two; for example, ``TLS1_0,TLS1_1``.

   - To list multiple protocols, specify as a comma separated list of
     protocols. For example ``TLS1_0,TLS1_1``.

   - The specified disabled protocols overrides any default disabled
     protocols.

   Starting in version 4.0, MongoDB disables the use of TLS 1.0 if TLS
   1.1+ is available on the system. To enable the
   disabled TLS 1.0, specify ``none`` to {{role}}.  See :ref:`4.0-disable-tls`.

   .. versionadded:: 3.6.5

optional: true
program: mongo
directive: option
replacement:
  alternative: ":option:`--tlsDisabledProtocols <mongo --tlsDisabledProtocols>`"
---
program: mongo
name: tls
args: null
directive: option
description: |

  .. versionadded:: 4.2

  Enables connection to a :binary:`~bin.mongod` or :binary:`~bin.mongos` that has
  TLS/SSL support enabled.

  .. include:: /includes/extracts/ssl-facts-mongo-shell-ca.rst

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
---
program: mongo
name: tlsCertificateKeyFile
args: <filename>
directive: option
description: |

  .. versionadded:: 4.2

  Specifies the :file:`.pem` file that contains both the TLS/SSL
  certificate and key for the :binary:`~bin.mongo` shell. Specify the
  file name of the :file:`.pem` file using relative or absolute paths.

  This option is required when using the :option:`--tls <mongo --tls>`
  option to connect to a :binary:`~bin.mongod` or :binary:`~bin.mongos`
  instance that requires :ref:`client certificates
  <mongo-connect-require-client-certificates-tls>`. That is, the
  :binary:`~bin.mongo` shell present this certificate to the server.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
---
program: mongo
name: tlsCertificateKeyFilePassword
args: <value>
directive: option
description: |

  .. versionadded:: 4.2

  Specifies the password to de-crypt the certificate-key file (i.e.
  :option:`--tlsCertificateKeyFile <mongo --tlsCertificateKeyFile>`).
  
  Use the {{role}} option only if the
  certificate-key file is encrypted. In all cases, the {{program}} will
  redact the password from all logging and reporting output.

  If the private key in the PEM file is encrypted and you do not
  specify the {{role}} option, the {{program}} will prompt for a
  passphrase. See :ref:`ssl-certificate-password`.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
---
program: mongo
name: tlsCertificateSelector
inherit:
  name: tlsCertificateSelector
  program: mongod
  file: options-mongod.yaml
---
program: mongo
name: tlsCAFile
args: <filename>
directive: option
description: |
  .. versionadded:: 4.2
    
  Specifies the :file:`.pem` file that contains the root certificate
  chain from the Certificate Authority. This file is used to validate
  the certificate presented by the
  :binary:`~bin.mongod`/:binary:`~bin.mongos` instance.
  
  Specify the file name of the :file:`.pem` file using relative or
  absolute paths.

  .. include:: /includes/extracts/ssl-facts-mongo-shell-ca.rst

  .. include:: /includes/extracts/ssl-facts-see-more.rst

optional: true
---
program: mongo
name: tlsCRLFile
args: <filename>
directive: option
description: |

  .. versionadded:: 4.2

  Specifies the :file:`.pem` file that contains the Certificate Revocation
  List. Specify the file name of the :file:`.pem` file using relative or
  absolute paths.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
---
program: mongo
name: tlsFIPSMode
args: null
directive: option
description: |
  .. versionadded:: 4.2
 
  Directs the {{program}} to use the FIPS mode of the TLS/SSL  
  library. Your system must have a FIPS compliant library to use
  the {{role}} option.

  .. include:: /includes/note-fips-is-enterprise-only.rst
optional: true

---
program: mongo
name: tlsAllowInvalidCertificates
args: null
directive: option
description: |
  .. versionadded:: 4.2

  Bypasses the validation checks for the certificates presented by the
  :binary:`~bin.mongod`/:binary:`~bin.mongos` instance and allows
  connections to servers that present invalid certificates.

  .. note::
     
     .. include:: /includes/extracts/ssl-facts-x509-invalid-certificate.rst

  .. include:: /includes/extracts/ssl-facts-invalid-cert-warning-clients.rst

  When using the :setting:`~net.ssl.allowInvalidCertificates` setting,
  MongoDB logs as a warning the use of the invalid certificate.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
---
program: mongo
name: tlsAllowInvalidHostnames
args: null
directive: option
description: |
  .. versionadded:: 4.2

  Disables the validation of the hostnames in the certificate presented
  by the :binary:`~bin.mongod`/:binary:`~bin.mongos` instance. Allows
  {{program}} to connect to MongoDB instances even if the hostname in
  the server certificates do not match the server's host.

  .. include:: /includes/extracts/ssl-facts-see-more.rst
optional: true
---
name: tlsDisabledProtocols
args: <string>
description: |

   .. versionadded:: 4.2

   Disables the specified TLS protocols. The option recognizes the
   following protocols: ``TLS1_0``, ``TLS1_1``, ``TLS1_2``, and
   starting in version 4.0.4 (and 3.6.9), ``TLS1_3``.

   - On macOS, you cannot disable ``TLS1_1`` and leave both ``TLS1_0`` and
     ``TLS1_2`` enabled. You must also disable at least one of the other
     two; for example, ``TLS1_0,TLS1_1``.

   - To list multiple protocols, specify as a comma separated list of
     protocols. For example ``TLS1_0,TLS1_1``.

   - The specified disabled protocols overrides any default disabled
     protocols.

   Starting in version 4.0, MongoDB disables the use of TLS 1.0 if TLS
   1.1+ is available on the system. To enable the
   disabled TLS 1.0, specify ``none`` to {{role}}.  See :ref:`4.0-disable-tls`.

optional: true
program: mongo
directive: option
---
name: awsAccessKeyId
args: <string>
description: |

  An AWS `Access Key <https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html>`__
  associated to an IAM user with ``List`` and ``Read`` permissions for the
  AWS Key Management Service (KMS). The {{program}} shell uses the specified 
  {{role}} to access the KMS. 
  
  {{role}} is required for enabling :doc:`/core/security-client-side-encryption` 
  for the {{program}} shell session. {{role}} requires *all* of the following
  command line options:

  - :option:`--awsSecretAccessKey` 
  - :option:`--keyVaultNamespace`

  If {{role}} is omitted, use the :method:`Mongo()` constructor within the shell
  session to enable client-side field level encryption.

  To mitigate the risk of leaking access keys into logs, consider specifying
  an environmental variable to {{role}}. 

optional: true
program: mongo
directive: option
---
name: awsSecretAccessKey
args: <string>
description: |

  An AWS `Secret Key <https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html>`__
  associated to the specified :option:`--awsAccessKeyId`.
  
  {{role}} is required for enabling :doc:`/core/security-client-side-encryption` 
  for the {{program}} shell session. {{role}} requires *all* of the following
  command line options:

  - :option:`--awsAccessKeyId` 
  - :option:`--keyVaultNamespace`

  If {{role}} and its supporting options are omitted, use :method:`Mongo()`
  within the shell session to enable client-side field level encryption.

  To mitigate the risk of leaking access keys into logs, consider specifying
  an environmental variable to {{role}}. 

optional: true
program: mongo
directive: option
---
name: awsSessionToken
args: <string>
description: |

  An AWS `Session Token <https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html>`__
  associated to the specified :option:`--awsAccessKeyId`.
  
  {{role}} is required for enabling :doc:`/core/security-client-side-encryption` 
  for the {{program}} shell session. {{role}} requires *all* of the following
  command line options:

  - :option:`--awsAccessKeyId` 
  - :option:`--awsSecretAccessKey`
  - :option:`--keyVaultNamespace`

  If {{role}} and its supporting options are omitted, use :method:`Mongo()`
  within the shell session to enable client-side field level encryption.

  To mitigate the risk of leaking access keys into logs, consider specifying
  an environmental variable to {{role}}. 

optional: true
program: mongo
directive: option
---
name: keyVaultNamespace
args: <string>
description: |

  The full namespace (``<database>.<collection>``) of the collection used as a
  key vault for :doc:`/core/security-client-side-encryption`. {{role}} is
  required for enabling client-side field level encryption. for the {{program}}
  shell session. {{program}} creates the specified namespace if it does not
  exist.
  
  {{role}} requires *all* of the following command line options:

  - :option:`--awsAccessKeyId` 
  - :option:`--awsSecretAccessKey`

  If {{role}} and its supporting options are omitted, use the :method:`Mongo()`
  constructor within the shell session to enable client-side field level
  encryption.

optional: true
program: mongo
directive: option
...
