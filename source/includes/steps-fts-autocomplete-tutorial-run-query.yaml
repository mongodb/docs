stepnum: 1
ref: connect-to-database-deployment-fts-autocomplete
inherit:
  file: steps-fts-tutorial-run-query.yaml
  ref: connect-to-database-deployment-fts

---
stepnum: 2
ref: use-sample-mflix-autocomplete
inherit:
  file: steps-fts-tutorial-run-query.yaml
  ref: use-sample-mflix

---
stepnum: 3
title: "Run an |fts| query with the ``autocomplete`` operator on the ``movies`` collection."
ref: run-first-query-autocomplete
content: |

  The following query searches for movies with the characters ``ger`` in
  the ``title`` field. The query includes a:

  - :pipeline:`$limit` stage to limit the output to 20 results.
  - :pipeline:`$project` stage to exclude all fields except ``title``.

  .. code-block:: json
     :linenos:

     db.movies.aggregate([
       {
         $search: {
           "autocomplete": {
             "path": "title",
             "query": "ger"
           }
         }
       },
       {
         $limit: 20
       },
       {
         $project: {
           "_id": 0,
           "title": 1
         }
       }
     ])

  This query returns the following results:

  .. code-block:: json
     :copyable: false
     :linenos:

     { title: "Gertie the Dinosaur" },
     { title: "Germany Year Zero" },
     { title: "Germany in Autumn" },
     { title: "Germany Pale Mother" },
     { title: "Gerhard Richter - Painting" },
     { title: "Geronimo: An American Legend" },
     { title: "How to Live in the German Federal Republic" },
     { title: "Geri's Game" },
     { title: "The Gerson Miracle" },
     { title: "The German Doctor" },
     { title: "From Caligari to Hitler: German Cinema in the Age of the Masse"},
     { title: "From Caligari to Hitler: German Cinema in the Age of the Masses"},
     { title: "Gervaise" },
     { title: "Gertrud" },
     { title: "Germinal" },
     { title: "Gerry" },
     { title: "Gèraldine" },
     { title: "Gerontophilia" },
     { title: "Pionery-geroi" },
     { title: "Rece do gèry" }


  In these results, the characters ``ger`` appear at the
  beginning of a word in all the titles. |fts| returns ``Gèraldine`` 
  and ``Rece do gèry`` in the results because we set ``foldDiacritics`` 
  to ``true``.

...
