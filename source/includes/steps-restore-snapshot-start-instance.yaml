stepnum: 1
source:
  file: steps-enable-backup.yaml
  ref: select-backup-tab-overview-page
edition:
  - cloud
  - classic
---
title: "Select the :guilabel:`Backups` tab, and then select either :guilabel:`Sharded Cluster Status` or :guilabel:`Replica Set Status`."
stepnum: 1
ref: backup-tab
edition:
  - onprem
---
stepnum: 2
source:
  file: steps-download-snapshot-replica-set.yaml
  ref: click-deployment-select-restore
edition:
  - cloud
  - classic
---
title: "Click the name of the sharded cluster or replica set to restore."
stepnum: 2
ref: select-name
edition:
  - onprem
pre: |
  |mms| displays your selection's stored snapshots.
---
stepnum: 3
source:
  file: steps-download-snapshot-replica-set.yaml
  ref: select-restore-point
edition:
  - cloud
  - classic
---
stepnum: 3
source:
  file: steps-download-snapshot-replica-set.yaml
  ref: select-snapshot-old
edition:
  - onprem
---
stepnum: 4
source:
  file: steps-download-snapshot-replica-set.yaml
  ref: select-restore-destination
edition:
  - cloud
  - classic
---
stepnum: 4
source:
  file: steps-download-snapshot-replica-set.yaml
  ref: select-http
edition:
  - onprem
---
stepnum: 5
source:
  file: steps-download-snapshot-replica-set.yaml
  ref: retrieve
edition:
  - cloud
  - classic
---
stepnum: 5
source:
  file: steps-download-snapshot-replica-set.yaml
  ref: retrieve-old
edition:
  - onprem
---
title: "Extract the data files from the .tar.gz archive created by the backup service."
stepnum: 6
ref: extract-files
action:
    language: sh
    code: |
      tar -zxvf <tarball-name>.tar.gz
---
title: "Select the location where the mongod will access the data files."
stepnum: 7
ref: create-dbpath
pre: |
  The directory you choose will become the mongod's data directory. You
  can either create a new directory or use the existing location of the
  extracted data files.
action:
  - pre: |
      If you create a new directory, move the files to that directory.
  - pre: |
      If you use the existing location of the extracted data files, you
      can optionally create a symbolic link to the location using the
      following command, where ``<hash>-<rsname>-<time>`` is the name of
      the snapshot and ``<dbpath>`` is the data directory:
    language: sh
    code: |
      ln -s <hash>-<rsname>-<time>/ <dbpath>
---
title: "Start the mongod with the new data directory as the dbpath."
stepnum: 8
ref: start-mongod-dbpath
action:
  - pre: |
      In the mongod configuration, set the ``dbpath`` option to the path
      of the data directory that holds the data files from the |backup|
      snapshot.
    language: sh
    code: |
      mongod --dbpath /data/db
...
