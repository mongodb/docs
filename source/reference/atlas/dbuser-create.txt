.. _mcli-atlas-dbuser-create-command:

============================
mongocli atlas dbuser create
============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

The ``dbuser create`` command creates a MongoDB database user 
to access the specified |service| cluster. You can also 
create a MongoDB database user through the |service| :atlas:`UI 
</tutorial/create-mongodb-user-for-cluster/>` or 
:atlas:`API </reference/api/database-users-create-a-user/>`.

.. _dbuser-create-syntax:

Syntax
------

.. code-block:: text

   mongocli atlas dbuser create     
        --password|-p <password-of-user>
        [ --profile|-P <profile-name> ]
        [ --projectId <project-ID> ]
        --role <name-of-role>
        --username|-u <name-of-user>
        [ --authDB <authentication-database> ]

.. include:: /includes/fact-command-line-help.rst

.. _dbuser-create-options:

Options
-------

.. list-table::
   :header-rows: 1
   :widths: 20 10 60 10

   * - Option 
     - Type
     - Description
     - Required?

   * - ``--password``, ``-p``
     - string
     - Password for authenticating the user to MongoDB. 
     - yes

   * - ``--profile``, ``-P``
     - string
     - Name of the profile where the public and private 
       keys for the project are saved. If omitted, uses the 
       ``default`` profile. To learn more about creating a 
       profile, see :ref:`mcli-configure`.
     - no

   * - ``--projectId``
     - string
     - Unique identifier of the project that contains the 
       cluster. If omitted, uses the project ID in the profile or 
       :ref:`environment variable <mcli-env-var>`.
     - no

   * - ``--role``
     - string or array of strings
     - Comma-separated list of user's roles and the databases 
       or collections on which the roles apply. A role allows the 
       user to perform particular actions on the specified database 
       or collection. To learn more about the list of 
       default roles, see :atlas:`MongoDB Database User Privileges 
       </security-add-mongodb-users/index.html#mongodb-database-user-privileges>`.
     - yes

   * - ``--username``, ``-u``
     - string
     - Username for authenticating the user to MongoDB.
     - yes

   * - ``--authDB``
     - string
     - Name of the authentication database. Defaults to ``admin``.
     - no

.. _dbuser-create-command-output:

Output 
------
.. include:: /includes/command-output-intro.rst

.. include:: /includes/atlas-dbuser-output-fields.rst

.. _dbuser-create-examples:

Examples 
--------

The examples below use the ``mongocli atlas dbuser create`` command to 
create a MongoDB database user to access the |service| cluster. When the 
command is run, it prints the :ref:`Output Fields 
<dbuser-create-command-output>` to the terminal.
 
.. _dbuser-create-eg-1:

Example 1 
~~~~~~~~~~

The following command creates a user with the following attributes:

- Username: ``user1`` 
- Password: ``passW0rd`` 
- Role: ``atlasAdmin`` 

The command uses the profile named ``egAtlasProfile`` for accessing 
|service| to create the user.

.. code-block:: sh
   :copyable: false

   ~ mongocli atlas dbuser create --username user1 --password passW0rd 
   --role atlasAdmin@admin --projectId 5e2211c17a3e5a48f5497de3 --profile 
   egAtlasProfile   

The previous command prints the following fields
to the terminal. To learn more about these fields, see 
:ref:`Output <dbuser-create-command-output>`.

.. code-block:: json
   :copyable: false

   {
	    "roles": [{
			   "roleName": "atlasAdmin",
			   "databaseName": "admin"
	  	}],
	    "groupId": "5e2211c17a3e5a48f5497de3",
	    "username": "user1",
	    "databaseName": "admin",
	    "ldapAuthType": "NONE"
    }

.. _dbuser-create-eg-2:

Example 2
~~~~~~~~~

The following commands show two ways to create a user with 
``readWriteAnyDatabase`` and ``clusterMonitor`` privileges. The 
command uses the ``default`` profile to access the specified 
project. 

The following command shows the ``--role`` option with 
two privileges separated by a comma. 

.. code-block:: sh
   :copyable: false

   mongocli atlas dbuser create --username egUser --password passW0rd --role readWriteAnyDatabase@admin,clusterMonitor@admin --projectId 5e2211c17a3e5a48f5497de3

The following command specifies the ``--role`` option twice, 
once for each privilege.

.. code-block:: sh
   :copyable: false

   mongocli atlas dbuser create --username egUser --password passW0rd --role readWriteAnyDatabase@admin --role clusterMonitor@admin --projectId 5e2211c17a3e5a48f5497de3

The commands print the following fields to the terminal. 
To learn more about these fields, see :ref:`Output 
<dbuser-create-command-output>`. 

.. code-block:: json
   :copyable: false

   {
	     "roles": [{
			     "roleName": "readWriteAnyDatabase",
			     "databaseName": "admin"
		    },
		    {
		     	 "roleName": "clusterMonitor",
			     "databaseName": "admin"
		    }],
	      "groupId": "5e2211c17a3e5a48f5497de3",
	      "username": "egUser",
	      "databaseName": "admin",
	      "ldapAuthType": "NONE"
    }
