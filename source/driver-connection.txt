==================
Connect via Driver
==================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: twocols

The :guilabel:`Connect` dialog for a cluster provides the :manual:`URI
string </reference/connection-string/>` to use to connect via the
MongoDB drivers. To connect using the drivers, use the `version(s) of
the driver recommended
<https://docs.mongodb.com/ecosystem/drivers/driver-compatibility-reference/>`_
for use with the version of your |service| cluster.

In the :manual:`connection string </reference/connection-string/>`,
replace ``PASSWORD`` with the password for the user.

.. important::

   If the password contains reserved URI characters, you must escape
   the characters per `RFC 2396
   <https://www.ietf.org/rfc/rfc2396.txt>`_. For example, if your
   password is ``@bc123``, you must escape the ``@`` character when
   specifying the password in the connection string; i.e. ``%40bc123``.

The following examples use the connection string to authenticate and
connect to an |service| cluster. In the examples, ``PASSWORD`` has been
replaced with the password (``myRealPassword``) for the user ``kay``.

.. seealso:: :ref:`connection-limits`

.. _driver-connection-c:

C Driver Example
----------------

.. code-block:: c

   client = mongoc_client_new ("mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin");
   db = mongoc_client_get_database (client, "test");

.. admonition:: Minimum Driver Version(s)

   :ref:`Version 1.3 <reference-compatibility-mongodb-c>`

.. _driver-connection-cpp:

C++ Driver Example
------------------

.. code-block:: cpp

   #include <mongocxx/client.hpp>
   #include <mongocxx/instance.hpp>

   //...

   mongocxx::instance inst{};
   mongocxx::client conn{mongocxx::uri{"mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin"}};
   mongocxx::database db = conn["test"];

.. admonition:: Minimum Driver Version(s)

   - C+11: :ref:`Version 0.3.0 <reference-compatibility-mongodb-cpp>`
   
   - Legacy series: :ref:`Version legacy-1.1.0+ <reference-compatibility-mongodb-cpp>`

.. _driver-connection-csharp:

C#/.Net Driver Example
----------------------

.. code-block:: csharp

   var client = new MongoClient("mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin");
   var database = client.GetDatabase("test");

.. admonition:: Minimum Driver Version(s)

   - 2.x series: :ref:`Version 2.2 <reference-compatibility-mongodb-csharp>`
   - 1.x series: :ref:`Version 1.11 <reference-compatibility-mongodb-csharp>`

.. _driver-connection-java:

Java Driver Example
-------------------

.. code-block:: java

   MongoClientURI uri = new MongoClientURI(
      "mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin");

   MongoClient mongoClient = new MongoClient(uri);
   MongoDatabase database = mongoClient.getDatabase("test");

.. admonition:: Minimum Driver Version(s)

   - 3.x Series: :ref:`Version 3.2 <reference-compatibility-mongodb-java>`
   - 2.x Series: :ref:`Version 2.14 <reference-compatibility-mongodb-java>`

.. _driver-connection-node:

Node.js Driver Example
----------------------

.. code-block:: javascript

   var MongoClient = require('mongodb').MongoClient;

   var uri = "mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin";
   MongoClient.connect(uri, function(err, db) {
     db.close();
   });

.. include:: /includes/extracts/connection-details-driver.rst

For example, the following connection string specifies ``test`` in the
database component and includes the ``authSource=admin`` option.

.. code-block:: javascript

   var uriTestDb = "mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/test?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin";
   MongoClient.connect(uriTestDb, function(err, db) {
      db.close();
   });

.. admonition:: Minimum Driver Version(s)

   :ref:`Version 2.1.0 <reference-compatibility-mongodb-node>`

.. _driver-connection-perl:

Perl Driver Example
-------------------

.. code-block:: perl

   my $client = MongoDB->connect("mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin");
   my $db = $client->get_database( 'test' );

.. admonition:: Minimum Driver Version(s)

   :ref:`Version 1.2.x <reference-compatibility-mongodb-perl>`

.. _driver-connection-php:

PHP Driver Example
------------------

The following example uses the MongoDB PHP Library which provides a
high-level abstraction around the lower-level PHP driver:

.. code-block:: php

   $client = new MongoDB\Client(
       'mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin');

   $db = $client->test;

.. admonition:: Minimum Driver Version(s)

   :ref:`PHP library 1.0+ <reference-compatibility-mongodb-php>`

   :ref:`Version mongodb-1.1 <reference-compatibility-mongodb-php>`

.. _driver-connection-python:

Python Driver Example
---------------------

.. code-block:: python

   client = pymongo.MongoClient("mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin")
   db = client.test
   
.. admonition:: Minimum Driver Version(s)

   :ref:`Version 3.2 <reference-compatibility-mongodb-python>`

.. _driver-connection-ruby:

Ruby Driver Example
-------------------

.. code-block:: ruby

   client = Mongo::Client.new('mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin')

.. include:: /includes/extracts/connection-details-driver.rst

For example, the following connection string specifies ``test`` in the
database component and includes the ``authSource=admin`` option.

.. code-block:: ruby

   client = Mongo::Client.new('mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/test?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin')

.. admonition:: Minimum Driver Version(s)

   :ref:`Version 2.2 <reference-compatibility-mongodb-ruby>`

Mongoid Example
~~~~~~~~~~~~~~~

.. code-block:: yaml

   production:
     # Configure available database clients. (required)
     clients:
       # Defines the default client. (required)
       default:
         # Defines the name of the default database that Mongoid can connect to.
         # (required).
         database: 'myDatabaseName'
      
         # Provides the hosts the default client can connect to. Must be an array
         # of host:port pairs. (required)
         hosts:
           - mycluster0-shard-00-00-wpeiv.mongodb.net:27017
           - mycluster0-shard-00-01-wpeiv.mongodb.net:27017
           - mycluster0-shard-00-02-wpeiv.mongodb.net:27017
         options:
           # The name of the user for authentication.
           user: kay
        
           # The password of the user for authentication.
           password: myRealPassword

           # The database or source to authenticate the user against. If the database
           # specified above is not admin, admin MUST be specified here.
           auth_source: admin

           # All Atlas servers use SSL. (default: false)
           ssl: true

.. _driver-connection-scala:

Scala Driver Example
--------------------

.. code-block:: scala

   val uri: String = "mongodb://kay:myRealPassword@mycluster0-shard-00-00-wpeiv.mongodb.net:27017,mycluster0-shard-00-01-wpeiv.mongodb.net:27017,mycluster0-shard-00-02-wpeiv.mongodb.net:27017/admin?ssl=true&replicaSet=Mycluster0-shard-0&authSource=admin"
   System.setProperty("org.mongodb.async.type", "netty")
   val client: MongoClient = MongoClient(uri)
   val db: MongoDatabase = client.getDatabase("test")

.. admonition:: Minimum Driver Version(s)

   :ref:`Version 1.1 <reference-compatibility-mongodb-scala>`

