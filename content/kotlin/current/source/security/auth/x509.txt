.. _x509-auth-mechanism:
.. _kotlin-mongodb-x509:

====================
X.509 Authentication
====================
.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: authorization, certificate, code example

Overview
--------

In the **X.509** authentication mechanism, the server and client use the
:wikipedia:`TLS <Transport_Layer_Security>` protocol to exchange X.509 public-key
certificates. You can use this mechanism to authenticate to MongoDB Atlas, MongoDB
Enterprise Advanced, and MongoDB Community Edition.

.. tip:: X.509 Mechanism

   To learn how to use TLS/SSL with the {+driver-short+},
   see :ref:`TLS/SSL <kotlin-tls>`.

   For more information about X.509 certificates, see
   :ref:`X.509 <x509-client-authentication>` in the {+mdb-server+} manual.

Code Placeholders
~~~~~~~~~~~~~~~~~

The code examples on this page use the following placeholders:

* ``hostname`` - network address of your MongoDB server, accessible by your client.
* ``port`` - port number of your MongoDB server.
* ``authenticationDb`` - MongoDB database that contains your user's
  authentication data. If you omit this parameter, the driver uses the
  default value ``admin``.

Authenticate with X.509
-----------------------

Select the :guilabel:`Connection String` or the :guilabel:`MongoCredential`
tab below for instructions and sample code for specifying this authentication
mechanism:

.. tabs::

   .. tab::
      :tabid: Connection String

      To specify the ``X.509`` authentication mechanism by using a connection
      string, assign the ``authMechanism`` parameter the value ``MONGODB-X509``
      and enable TLS by assigning the ``tls``
      parameter a ``true`` value. Your code to instantiate a ``MongoClient``
      should resemble the following:

      .. literalinclude:: /examples/generated/AuthTest.snippet.x-509-string.kt
         :language: kotlin
      
   .. tab::
      :tabid: MongoCredential

      To specify the ``X.509`` authentication mechanism by using the
      ``MongoCredential`` class, use the
      `createMongoX509Credential() <{+core-api+}/MongoCredential.html#createMongoX509Credential(java.lang.String)>`__
      method. Also, enable TLS by calling the
      `applyToSslSettings() <{+core-api+}/MongoClientSettings.Builder.html#applyToSslSettings(com.mongodb.Block)>`__
      method and setting the ``enabled`` property to ``true`` in the
      `SslSettings.Builder <{+core-api+}/connection/SslSettings.Builder.html>`__
      block. Your code to instantiate a ``MongoClient`` should resemble the following:

      .. literalinclude:: /examples/generated/AuthTest.snippet.x-509-cred.kt
         :language: kotlin

For additional information on configuring your application to use
certificates and TLS/SSL options, see our
:ref:`TLS/SSL guide <kotlin-tls>`.


