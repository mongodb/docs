ref: fts-sort-speed-tutorial-step1
level: 4
stepnum: 1
inherit:
  file: steps-fts-tutorial-run-query.yaml
  ref: connect-to-database-deployment-fts
---
ref: fts-sort-speed-tutorial-step2
level: 4
stepnum: 2
inherit:
  file: steps-fts-tutorial-run-query.yaml
  ref: use-sample-mflix
---
ref: fts-sort-speed-tutorial-step3
level: 4
stepnum: 3
title: "Run an |fts| query against the indexed field and sort for speed."
content: |
  .. include:: /includes/extracts/fts-sort-for-speed-constant-desc.rst 

  .. include:: /includes/extracts/fts-sort-for-speed-stage.rst

  .. io-code-block::
     :copyable: true

     .. input::
        :language: js
        :linenos:

        db.movies.aggregate([
          {
            $search: {
              "near": {
                "path": "year",
                "origin": 2015,
                "pivot": 5
              }
            }
          },
          {
            $limit: 5
          },
          {
            $project: {
              title: 1,
              released: 1,
              year: 1
            }
          }
        ])

     .. output::
        :language: json

        {
          _id: ObjectId("573a13adf29313caabd2b765"),
          title: 'Jurassic World',
          released: ISODate("2015-06-12T00:00:00.000Z"),
          year: 2015
        },
        {
          _id: ObjectId("573a13b1f29313caabd3719d"),
          title: 'The Stanford Prison Experiment',
          released: ISODate("2015-07-17T00:00:00.000Z"),
          year: 2015
        },
        {
          _id: ObjectId("573a13b5f29313caabd42f7f"),
          year: 2015,
          title: 'Ex Machina',
          released: ISODate("2015-04-24T00:00:00.000Z")
        },
        {
          _id: ObjectId("573a13b5f29313caabd44e2b"),
          year: 2015,
          title: 'Ant-Man',
          released: ISODate("2015-07-17T00:00:00.000Z")
        },
        {
          _id: ObjectId("573a13b8f29313caabd4d540"),
          title: 'The Danish Girl',
          released: ISODate("2015-11-27T00:00:00.000Z"),
          year: 2015
        }
...
