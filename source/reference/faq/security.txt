=============
FAQ: Security
=============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

How does |service| encrypt my data?
-----------------------------------

|service| uses whole volume (disk) encryption for any data at rest,
including your cluster data and backups of that data.

|service| also requires |tls| encryption for client data and
intra-cluster network communications.

If your organization requires more specific information regarding
|service| encryption, please contact |service| |mdb-support|. From the
|service| project or cluster view, click :guilabel:`Support` in the
left-hand navigation bar.

Can I disable TLS on my deployment?
-----------------------------------

No.

.. _faq-tls-1.0-deprecation:

What versions of TLS does |service| support?
-------------------------------------------- 

|service| requires |tls| connections for all |service| clusters. 
After July 2020, |service| enabled Transport Layer Security  (|tls|)
protocol version 1.2 by default for all new |service|  clusters
regardless of the MongoDB version.

MongoDB 4.0 and later :manual:`disabled support for TLS 1.0 
</release-notes/4.0/#disable-tls-1-0>` where |tls| 1.1+ is available.
You can manually configure |tls| 1.1 or 1.0 by 
:ref:`editing your cluster configuration 
<scale-cluster-more-configuration-options>`. 

You can read more about timing and reasons for the change from the
`Payment Card Industry (PCI) <https://blog.pcisecuritystandards.org/migrating-from-ssl-and-early-tls>`_
as well as the
`National Institute of Standards and Technology (NIST) 
<https://www.nist.gov/news-events/news/2014/04/nist-revises-guide-use-transport-layer-security-tls-networks>`_.

If you have questions about |tls| support or cannot update your
applications to support |tls| 1.2, please contact |service| 
|mdb-support|.

To open a |service| support ticket, log into the your |service|
account. Click the :guilabel:`Support` link in the |service| console
and fill in the requested details.

How do I know if my applications support TLS 1.2?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Applications whose underlying programming languages or security 
libraries predate |tls| 1.2 may require updating to a more recent 
version to support |tls| 1.2. You may also need to update the 
application host operating system to support |tls| 1.2.

MongoDB and |service| don't provide services to audit external
applications for which versions of |tls| support they support.
Third party services, such as
`howsmyssl.com <https://www.howsmyssl.com/s/api.html>`_
may provide the appropriate tooling. MongoDB doesn't endorse this
service, and its reference is only informational. Use your
organization's procedures for selecting the vendor or service for auditing
your applications.

What do I have to do to update my clusters for TLS 1.2?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- Conduct an audit of your applications for support of |tls| 1.2.
- Udate all components of your technology stack that don't support
  |tls| 1.2.
- :ref:`Modify <scale-cluster-more-configuration-options>` your cluster
  configuration to use |tls| 1.2.

Can I force enable TLS 1.0?
~~~~~~~~~~~~~~~~~~~~~~~~~~~

|service| allows you to manually configure |tls| 1.0 during
:ref:`cluster modification <scale-cluster-more-configuration-options>`.

Enabling |tls| 1.0 for any |service| cluster carries significant risks.
Consider enabling |tls| 1.0 only for as long as required to update your
application stack to support |tls| 1.2.

.. _faq-tls-ca:

Which certificate authority signs MongoDB Atlas TLS certificates?
-----------------------------------------------------------------

On 25 February 2020, |service-fullname| moved to `Let's Encrypt
<https://letsencrypt.org>`__ as the new |certauth| for |tls|
certificates for all |service| clusters.

Beginning on 1 May 2021, new |tls| certificates that |service-fullname|
creates use ISRG instead of IdenTrust for their root |certauth| in line 
with Let's Encrypt's `announcement
<https://letsencrypt.org/2019/04/15/transitioning-to-isrg-root.html>`__
of this transition.

On 17 March 2022, |service-fullname| moved to Let's Encrypt as the new
Certificate Authority for |tls| certificates for ``cloud.mongodb.com``.

Please review the following scenarios to ensure that you don't
experience connectivity issues:

.. _tls-change-hard-code:

Hard-coded Certificate Authority
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you hard-coded the IdenTrust's root |certauth| (`DST Root CA X3
<https://letsencrypt.org/certs/trustid-x3-root.pem.txt>`__) or an
`intermediate certificate
<https://letsencrypt.org/certificates/#intermediate-certificates>`__ 
as the only trusted |certauth| for your application's connection to
|service|, ensure that you add Let's Encrypt's root |certauth|
(`ISRG Root X1 <https://letsencrypt.org/certs/isrgrootx1.pem.txt>`__) to
your certificate store.

Java Users
~~~~~~~~~~

Let's Encrypt's new ISRG root certificate isn't present in the default
trust store for Java version 7 prior to the 7u151 update, or Java
version 8 prior to the 8u141 update. Use a Java release after 18 July
2017.

Ensure your Java client software is up-to-date. Use the latest Java
versions to utilize many improvements beyond these new |certauth|
requirements for our |tls| certificates.

If you have your own trust store, add the Let's Encrypt certificate to
it. To learn more, see :ref:`tls-change-hard-code`.

Windows Server Users
~~~~~~~~~~~~~~~~~~~~

The ISRG Root X1 root |certauth| isn't included by default in
Windows Server, but it is available in the
`Microsoft Trusted Root Program
<https://docs.microsoft.com/en-us/security/trusted-root/participants-list>`__.

To configure Windows Server to download trusted root certificates,
including Let's Encrypt's new ISRG root certificate, see `Windows Documentation 
<https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn265983(v=ws.11)>`__.

Amazon Linux AMI Users
~~~~~~~~~~~~~~~~~~~~~~

`Amazon Linux AMI <https://aws.amazon.com/amazon-linux-ami/>`__ 
doesn't support the new ISRG Root X1 root |certauth|.

If you are using Amazon Linux AMI, migrate to Amazon Linux 2.
After 30 September 2021, the support of ISRG Root X1 certificates is
mandatory for |service| to avoid certificate compatibility issues.

To continue using Amazon Linux AMI after 30 September 2021, manually
install the new ISRG Root X1 root |certauth|.

Everyone Else
~~~~~~~~~~~~~

This change shouldn't impact you if you use a recent programming
language and operating system version.
