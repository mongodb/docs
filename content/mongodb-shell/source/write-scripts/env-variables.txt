.. _mongosh-env-variables:

==================================================
Use Environment Variables in MongoDB Shell Scripts
==================================================

.. facet::
   :name: genre
   :values: tutorial

.. facet::
   :name: programming_language
   :values: javascript/typescript

.. meta:: 
   :description: Learn how to use environment variables in MongoDB Shell scripts.
   :keywords: server

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can use environment variables in your MongoDB Shell scripts to
manage configuration settings and store sensitive information outside of
your source code. For example, environment variables let you store
database connection strings, API keys, and other parameters outside of
your main scripts.

About this Task
---------------

In the following example, you will learn how to use an environment
variable for your MongoDB connection string.

There are multiple ways to load environment variables from a file into
your script. This example uses the built-in ``loadEnvFile()`` function,
which loads variables from an ``.env`` file into your application's
environment.

Before you Begin
----------------

To complete this tutorial, you need to install the ``mongodb`` npm
package. To install the required package, run the following command:

.. code-block:: none

   npm install mongodb

Steps
-----

.. procedure::
   :style: normal

   .. step:: Create a file to store your environment variable

      In an empty directory, create a new file named ``.env``.

   .. step:: Define an environment variable

      In the ``.env`` file, define an environment variable for your
      MongoDB connection string:

      .. code-block:: shell

         MONGODB_URI="<connection-string>"

   .. step:: Write a script that uses the environment variable
         
      In the same directory as your ``.env`` file, create a script
      called ``myScript.js`` and populate it with the following
      contents:

      .. code-block:: javascript
         :emphasize-lines: 6

         // Load environment variables from the .env file
         const { loadEnvFile } = require('node:process');
         loadEnvFile();

         // Connect to the MongoDB database
         db = connect(process.env.MONGODB_URI);

         // Confirm the connection by printing the database name
         console.log(db);

      The script uses the ``process.env`` object to access your
      connection string environment variable.

   .. step:: Run your script

      The script outputs the name of the database you connected to. The
      default database is ``test``.

      .. io-code-block::
         :copyable: true
      
         .. input::
            :language: none
            
            mongosh --file myScript.js
      
         .. output::
            :language: none

            test

Learn More
----------

- :ref:`mongosh-require-external-files-and-modules`

- :ref:`mongosh-scoping`

- :ref:`snip-overview`
