# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2011-2015
# This file is distributed under the same license as the mongodb-manual package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: mongodb-manual 3.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2015-03-30 14:28-0400\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../source/applications/design-notes.txt:3
# a74bfc3982134830a8c1e3a07ee07221
msgid "Design Notes"
msgstr ""

#: ../source/applications/design-notes.txt:7
# 09b729f82b0b4712aa4dbe682be5b19f
msgid "This page details features of MongoDB that may be important to keep in mind when developing applications."
msgstr ""

#: ../source/applications/design-notes.txt:11
# f415c90e9747412a9b7007be56e9d091
msgid "Schema Considerations"
msgstr ""

#: ../source/applications/design-notes.txt:14
# 95aef8eeda2748ad9244b37520060f39
msgid "Dynamic Schema"
msgstr ""

#: ../source/applications/design-notes.txt:16
# 612c9032df984c36aa5def398ffc75c5
msgid "Data in MongoDB has a *dynamic schema*. :term:`Collections <collection>` do not enforce :term:`document` structure. This facilitates iterative development and polymorphism. Nevertheless, collections often hold documents with highly homogeneous structures. See :doc:`/core/data-models` for more information."
msgstr ""

#: ../source/applications/design-notes.txt:22
# 1ce9308514a5480bbf9da64a23b2f5a5
msgid "Some operational considerations include:"
msgstr ""

#: ../source/applications/design-notes.txt:24
# 9fe2ba550aef4aaea6e1a0276a0f11e0
msgid "the exact set of collections to be used;"
msgstr ""

#: ../source/applications/design-notes.txt:26
# 58833fa30939402d8ae6c184ebc29639
msgid "the indexes to be used: with the exception of the ``_id`` index, all indexes must be created explicitly;"
msgstr ""

#: ../source/applications/design-notes.txt:29
# e921fe07ded34ccf90c271c43b996364
msgid "shard key declarations: choosing a good shard key is very important as the shard key cannot be changed once set."
msgstr ""

#: ../source/applications/design-notes.txt:32
# 3cd96f310c984a618855edd9d944626b
msgid "Avoid importing unmodified data directly from a relational database. In general, you will want to \"roll up\" certain data into richer documents that take advantage of MongoDB's support for embedded documents and nested arrays."
msgstr ""

#: ../source/applications/design-notes.txt:38
# cdb0390fa4584322869b3c3410c155b9
msgid "Case Sensitive Strings"
msgstr ""

#: ../source/applications/design-notes.txt:40
# e4c9aaacdc5946d8acd9589fb62034c5
msgid "MongoDB strings are case sensitive. So a search for ``\"joe\"`` will not find ``\"Joe\"``."
msgstr ""

#: ../source/applications/design-notes.txt:43
# ff567bd2a9214dd3a40f925c37cbbaac
msgid "Consider:"
msgstr ""

#: ../source/applications/design-notes.txt:45
# 756d81bc842c41948300b73a10af2d1c
msgid "storing data in a normalized case format, or"
msgstr ""

#: ../source/applications/design-notes.txt:47
# edecddea3833470781be03e2404f48a0
msgid "using regular expressions ending with the ``i`` option, and/or"
msgstr ""

#: ../source/applications/design-notes.txt:49
# 907873dc90514f29916354bcdedd9460
msgid "using :doc:`$toLower </reference/operator/aggregation/toLower/>` or :doc:`$toUpper </reference/operator/aggregation/toUpper/>` in the :doc:`aggregation framework </core/aggregation/>`."
msgstr ""

#: ../source/applications/design-notes.txt:54
# 9a664e99ca214a08b7bb4bdac835ba9d
msgid "Type Sensitive Fields"
msgstr ""

#: ../source/applications/design-notes.txt:56
# ec1cd01159154aa7a4a92f68c156d84f
msgid "MongoDB data is stored in the BSON format, a binary encoded serialization of JSON-like documents.  BSON encodes additional type information. See `bsonspec.org <http://bsonspec.org/#/specification>`_ for more information."
msgstr ""

#: ../source/applications/design-notes.txt:61
# 2e24fd57ab734b46a41313ba84e64df1
msgid "Consider the following document which has a field ``x`` with the *string* value ``\"123\"``:"
msgstr ""

#: ../source/applications/design-notes.txt:68
# 902eeb09b9bc4b40b5f5e7275a4bd59f
msgid "Then the following query which looks for a *number* value ``123`` will **not** return that document:"
msgstr ""

#: ../source/applications/design-notes.txt:76
# 7302dea16089448ea86ba88f6d4f0b1b
msgid "General Considerations"
msgstr ""

#: ../source/applications/design-notes.txt:79
# 445f0e95e05f4602afabccbaec9bb428
msgid "By Default, Updates Affect **one** Document"
msgstr ""

#: ../source/applications/design-notes.txt:81
# baa2493080144aa99cde010377e0de15
msgid "To update multiple documents that meet your query criteria, set the :method:`update` ``multi`` option to ``true`` or ``1``. See: :ref:`Update Multiple Documents <update-multiple-documents>`."
msgstr ""

#: ../source/applications/design-notes.txt:85
# 6705459f73114d00a72282c4c73110ee
msgid "Prior to MongoDB 2.2, you would specify the ``upsert`` and ``multi`` options in the :method:`update` method as positional boolean options. See: the :method:`update` method reference documentation."
msgstr ""

#: ../source/applications/design-notes.txt:90
# 78c4e108fd2b48ddb2e7e63ad8e43bc9
msgid "BSON Document Size Limit"
msgstr ""

#: ../source/applications/design-notes.txt:92
# 728a136ee3bc421894a4702f5083f0e3
msgid "The :limit:`BSON Document Size` limit is currently set at 16MB per document. If you require larger documents, use :doc:`GridFS </core/gridfs/>`."
msgstr ""

#: ../source/applications/design-notes.txt:97
# 7560cee3cd5243fd91a9e08fca025c42
msgid "No Fully Generalized Transactions"
msgstr ""

#: ../source/applications/design-notes.txt:99
# 45101430e122440583c3a0de59eaf2f0
msgid "MongoDB does not have :doc:`fully generalized transactions </core/write-operations-atomicity>`. If you model your data using rich documents that closely resemble your application's objects, each logical object will be in one MongoDB document. MongoDB allows you to modify a document in a single atomic operation. These kinds of data modification pattern covers most common uses of transactions in other systems."
msgstr ""

#: ../source/applications/design-notes.txt:108
# 9982da02a32242faa4811402eb3d781c
msgid "Replica Set Considerations"
msgstr ""

#: ../source/applications/design-notes.txt:111
# a6de3fdbe7ec48f79e2eba8979fde4af
msgid "Use an Odd Number of Replica Set Members"
msgstr ""

#: ../source/applications/design-notes.txt:113
# d12a2c75c0964137ad664a6286b8c335
msgid ":doc:`Replica sets </replication/>` perform consensus elections. To ensure that elections will proceed successfully, either use an odd number of members, typically three, or else use an :term:`arbiter` to ensure an odd number of votes."
msgstr ""

#: ../source/applications/design-notes.txt:119
# e08b300de30141d9a3b985278fc045d9
msgid "Keep Replica Set Members Up-to-Date"
msgstr ""

#: ../source/applications/design-notes.txt:121
# 21dffae532904b3484d5b3a14287a377
msgid "MongoDB replica sets support :doc:`automatic failover </core/replica-set-high-availability>`. It is important for your secondaries to be up-to-date. There are various strategies for assessing consistency:"
msgstr ""

#: ../source/applications/design-notes.txt:126
# 8e67662d8ec441999eaf4ce0bdc871b1
msgid "Use monitoring tools to alert you to lag events. See :doc:`/administration/monitoring` for a detailed discussion of MongoDB's monitoring options."
msgstr ""

#: ../source/applications/design-notes.txt:130
# 7f278bd3fe384c78af20be3ed6ffb4a0
msgid "Specify appropriate write concern."
msgstr ""

#: ../source/applications/design-notes.txt:132
# a33c4d7ba69149e7860faee7b7e94085
msgid "If your application requires *manual* fail over, you can configure your secondaries as :ref:`priority 0 <replica-set-secondary-only-members>`. Priority 0 secondaries require manual action for a failover. This may be practical for a small replica set, but large deployments should fail over automatically."
msgstr ""

#: ../source/applications/design-notes.txt:139
# 49b327590ba04f2c88899d5e0eb94830
msgid ":ref:`replica set rollbacks <replica-set-rollback>`."
msgstr ""

#: ../source/applications/design-notes.txt:142
# 48b1c61a6f0a44f4bb4e4319a1a15623
msgid "Sharding Considerations"
msgstr ""

#: ../source/applications/design-notes.txt:144
# 5477f3282c784238bae0420878b57ce7
msgid "Pick your shard keys carefully. You cannot choose a new shard key for a collection that is already sharded."
msgstr ""

#: ../source/applications/design-notes.txt:147
# 76073106967649ddb7de793b040fc2ef
msgid "Shard key values are immutable."
msgstr ""

#: ../source/applications/design-notes.txt:149
# f3f80e2ed6524f17ba98dd10e7909cf7
msgid "When enabling sharding on an *existing collection*, MongoDB imposes a maximum size on those collections to ensure that it is possible to create chunks. For a detailed explanation of this limit, see: :limit:`<sharding-existing-collection-data-size>`."
msgstr ""

#: ../source/applications/design-notes.txt:154
# 069459b5848b4442842699c8a2529b60
msgid "To shard large amounts of data, create a new empty sharded collection, and ingest the data from the source collection using an application level import operation."
msgstr ""

#: ../source/applications/design-notes.txt:159
# 9202c56f781d4cb19910447d1c765d64
msgid "Unique indexes are not enforced across shards except for the shard key itself. See :doc:`/tutorial/enforce-unique-keys-for-sharded-collections`."
msgstr ""

#: ../source/applications/design-notes.txt:162
# 0b4f21bb51ce401dabe68d158e15cf18
msgid "Consider :doc:`pre-splitting </tutorial/create-chunks-in-sharded-cluster>` an empty sharded collection before a massive bulk import."
msgstr ""

#: ../source/applications/design-notes.txt:166
# 14b996598ff743d4992c5793d01104fd
msgid "Analyze Performance"
msgstr ""

#: ../source/applications/design-notes.txt:168
# 5b5519fecc0c4d96bdc872f49cc7f14b
msgid "As you develop and operate applications with MongoDB, you may want to analyze the performance of the database as the application. Consider the following as you begin to investigate the performance of MongoDB."
msgstr ""

#: ../source/applications/design-notes.txt:174
# 807a60cdeef147c2841ee8fc9a96cd3d
msgid "Overview"
msgstr ""

#: ../source/applications/design-notes.txt:176
# c23fd85c518d4edb834a33798531f11a
msgid "Degraded performance in MongoDB is typically a function of the relationship between the quantity of data stored in the database, the amount of system RAM, the number of connections to the database, and the amount of time the database spends in a locked state."
msgstr ""

#: ../source/applications/design-notes.txt:182
# af4ecff1a02f4e8199241bf3d61a0559
msgid "In some cases performance issues may be transient and related to traffic load, data access patterns, or the availability of hardware on the host system for virtualized environments. Some users also experience performance limitations as a result of inadequate or inappropriate indexing strategies, or as a consequence of poor schema design patterns. In other situations, performance issues may indicate that the database may be operating at capacity and that it is time to add additional capacity to the database."
msgstr ""

#: ../source/applications/design-notes.txt:191
# a298359b1357435da930b94a71a3fd19
msgid "The following are some causes of degraded performance in MongoDB."
msgstr ""

#: ../source/applications/design-notes.txt:194
# dc45b237d0304c19afdf406931f13439
msgid "Locks"
msgstr ""

#: ../source/applications/design-notes.txt:196
# 5be45fc234424c939f32c8824d99f390
msgid "MongoDB uses a locking system to ensure data set consistency. However, if certain operations are long-running, or a queue forms, performance will slow as requests and operations wait for the lock. Lock-related slowdowns can be intermittent. To see if the lock has been affecting your performance, look to the data in the :ref:`globalLock` section of the :dbcommand:`serverStatus` output. If :data:`globalLock.currentQueue.total <serverStatus.globalLock.currentQueue.total>` is consistently high, then there is a chance that a large number of requests are waiting for a lock. This indicates a possible concurrency issue that may be affecting performance."
msgstr ""

#: ../source/applications/design-notes.txt:208
# c09a8ac35b24498aa6ca9ede463e4642
msgid "If :data:`globalLock.totalTime <serverStatus.globalLock.totalTime>` is high relative to :data:`~serverStatus.uptime`, the database has existed in a lock state for a significant amount of time. If :data:`globalLock.ratio <serverStatus.globalLock.ratio>` is also high, MongoDB has likely been processing a large number of long running queries. Long queries are often the result of a number of factors: ineffective use of indexes, non-optimal schema design, poor query structure, system architecture issues, or insufficient RAM resulting in :ref:`page faults <administration-monitoring-page-faults>` and disk reads."
msgstr ""

#: ../source/applications/design-notes.txt:220
# 0731bcbb869c41dc9f58d72882e1e3d2
msgid "Memory Use for MMAPv1 Storage Engine"
msgstr ""

#: ../source/applications/design-notes.txt:222
# c85ce6434ce74e8f928800530ff0a97b
msgid "MongoDB uses memory mapped files to store data. Given a data set of sufficient size, the MongoDB process will allocate all available memory on the system for its use. While this is part of the design, and affords MongoDB superior performance, the memory mapped files make it difficult to determine if the amount of RAM is sufficient for the data set."
msgstr ""

#: ../source/applications/design-notes.txt:229
# 03e7cd39ecfe4e7890d1dba315c7115a
msgid "The :ref:`memory usage statuses <memory-status>` metrics of the :dbcommand:`serverStatus` output can provide insight into MongoDB's memory use. Check the resident memory use (i.e. :data:`mem.resident <serverStatus.mem.resident>`): if this exceeds the amount of system memory *and* there is a significant amount of data on disk that isn't in RAM, you may have exceeded the capacity of your system."
msgstr ""

#: ../source/applications/design-notes.txt:237
# 255af824ec644d6b86b26389940b1f31
msgid "You should also check the amount of mapped memory (i.e. :data:`mem.mapped <serverStatus.mem.mapped>`.) If this value is greater than the amount of system memory, some operations will require disk access :term:`page faults <page fault>` to read data from virtual memory and negatively affect performance."
msgstr ""

#: ../source/applications/design-notes.txt:246
# a1a1ad020c7e4f19b142d57eaca179dd
msgid "Page Faults for MMAPv1 Storage Engine"
msgstr ""

#: ../source/includes/fact-page-fault.rst:1
# e4948517ac754af5835491cd689ce320
msgid "With the MMAPv1 storage engine, page faults can occur as MongoDB reads from or writes data to parts of its data files that are not currently located in physical memory. In contrast, operating system page faults happen when physical memory is exhausted and pages of physical memory are swapped to disk."
msgstr ""

#: ../source/applications/design-notes.txt:250
# a719e20a318d483589aa54b26db6593c
msgid "Page faults triggered by MongoDB are reported as the total number of page faults in one second. To check for page faults, see the :data:`extra_info.page_faults <serverStatus.extra_info.page_faults>` value in the :dbcommand:`serverStatus` output."
msgstr ""

#: ../source/applications/design-notes.txt:255
# 1c8f91cf487842ed8012eb7b54414550
msgid "MongoDB on Windows counts both hard and soft page faults."
msgstr ""

#: ../source/applications/design-notes.txt:257
# f8c9e570f941488f84f9815538220fa2
msgid "The MongoDB page fault counter may increase dramatically in moments of poor performance and may correlate with limited physical memory environments. Page faults also can increase while accessing much larger data sets, for example, scanning an entire collection. Limited and sporadic MongoDB page faults do not necessarily indicate a problem or a need to tune the database."
msgstr ""

#: ../source/applications/design-notes.txt:264
# e56d63942fe44e4db0684b360c16b605
msgid "A single page fault completes quickly and is not problematic. However, in aggregate, large volumes of page faults typically indicate that MongoDB is reading too much data from disk. In many situations, MongoDB's read locks will \"yield\" after a page fault to allow other processes to read and avoid blocking while waiting for the next page to read into memory. This approach improves concurrency, and also improves overall throughput in high volume systems."
msgstr ""

#: ../source/applications/design-notes.txt:272
# a9908e5f832a4c32b8267c2030d2e866
msgid "Increasing the amount of RAM accessible to MongoDB may help reduce the frequency of page faults. If this is not possible, you may want to consider deploying a :term:`sharded cluster` or adding :term:`shards <shard>` to your deployment to distribute load among :program:`mongod` instances."
msgstr ""

#: ../source/applications/design-notes.txt:277
# 4de48bab88454f55bb39eb89f6bf62b1
msgid "See :ref:`faq-storage-page-faults` for more information."
msgstr ""

#: ../source/applications/design-notes.txt:280
# 280531fde0d74addbea6dca9883caa6f
msgid "Number of Connections"
msgstr ""

#: ../source/applications/design-notes.txt:282
# 8bbe0b6894344fffb8d583ffaa1374ef
msgid "In some cases, the number of connections between the application layer (i.e. clients) and the database can overwhelm the ability of the server to handle requests. This can produce performance irregularities. The following fields in the :dbcommand:`serverStatus` document can provide insight:"
msgstr ""

#: ../source/applications/design-notes.txt:288
# aa7d440f89404fc99c4dac8123c76f3c
msgid ":data:`globalLock.activeClients <serverStatus.globalLock.activeClients>` contains a counter of the total number of clients with active operations in progress or queued."
msgstr ""

#: ../source/applications/design-notes.txt:293
# 0b045ee246a04c70957caf8fe2efd0db
msgid ":data:`~serverStatus.connections` is a container for the following two fields:"
msgstr ""

#: ../source/applications/design-notes.txt:296
# d0477dc239db4a8a8a6f82abce465b2f
msgid ":data:`~serverStatus.connections.current` the total number of current clients that connect to the database instance."
msgstr ""

#: ../source/applications/design-notes.txt:299
# cdee76d49c5840beb0314126c252fd3f
msgid ":data:`~serverStatus.connections.available` the total number of unused collections available for new clients."
msgstr ""

#: ../source/applications/design-notes.txt:302
# 49759025b19e409c8289f1fa3d750823
msgid "If requests are high because there are numerous concurrent application requests, the database may have trouble keeping up with demand. If this is the case, then you will need to increase the capacity of your deployment. For read-heavy applications increase the size of your :term:`replica set` and distribute read operations to :term:`secondary` members. For write heavy applications, deploy :term:`sharding` and add one or more :term:`shards <shard>` to a :term:`sharded cluster` to distribute load among :program:`mongod` instances."
msgstr ""

#: ../source/applications/design-notes.txt:312
# c4d5125b72fb4167afa5e6cb26572cb1
msgid "Spikes in the number of connections can also be the result of application or driver errors. All of the officially supported MongoDB drivers implement connection pooling, which allows clients to use and reuse connections more efficiently. Extremely high numbers of connections, particularly without corresponding workload is often indicative of a driver or other configuration error."
msgstr ""

#: ../source/applications/design-notes.txt:319
# c8dee2a33b6a4e62a15061475e85bd44
msgid "Unless constrained by system-wide limits MongoDB has no limit on incoming connections. You can modify system limits using the ``ulimit`` command, or by editing your system's ``/etc/sysctl`` file. See :doc:`/reference/ulimit` for more information."
msgstr ""

#: ../source/applications/design-notes.txt:328
# 37a52e31305443df8d1e998f7e469089
msgid "Database Profiling"
msgstr ""

#: ../source/applications/design-notes.txt:330
# 3f57c8beb05043c9a3719a1af1a642ab
msgid "MongoDB's \"Profiler\" is a database profiling system that can help identify inefficient queries and operations."
msgstr ""

#: ../source/applications/design-notes.txt:333
# 3a0393147c924750a4cd90c52fc17e96
msgid "The following profiling levels are available:"
msgstr ""

#: ../source/applications/design-notes.txt:338
# 7ce33143890f4fae9ed356a7445d93cd
msgid "**Level**"
msgstr ""

#: ../source/applications/design-notes.txt:340
# e12591c6d87045b4922230f2100c5605
msgid "**Setting**"
msgstr ""

#: ../source/applications/design-notes.txt:342
# 02cd695200c840c88e7bc0462b23f36a
msgid "0"
msgstr ""

#: ../source/applications/design-notes.txt:344
# 42ac6647cc454082a218b758041fdff0
msgid "Off. No profiling"
msgstr ""

#: ../source/applications/design-notes.txt:346
# 9f7e20a31cd040f48b1ba645ecda2d41
msgid "1"
msgstr ""

#: ../source/applications/design-notes.txt:348
# ea4a9e20535544edb0cb9d6fe3c4bf23
msgid "On. Only includes *\"slow\"* operations"
msgstr ""

#: ../source/applications/design-notes.txt:350
# 12a57175f1c14c65a6e860b665730d70
msgid "2"
msgstr ""

#: ../source/applications/design-notes.txt:352
# c9f7f8dcfff74e6b812ccb5b55f91870
msgid "On. Includes *all* operations"
msgstr ""

#: ../source/applications/design-notes.txt:354
# aff888e8ae9c4c21901916dbeadc53a5
msgid "Enable the profiler by setting the :dbcommand:`profile` value using the following command in the :program:`mongo` shell:"
msgstr ""

#: ../source/applications/design-notes.txt:362
# 73230fbe360c454ab77cfb23c4acb68e
msgid "The :setting:`~operationProfiling.slowOpThresholdMs` setting defines what constitutes a \"slow\" operation. To set the threshold above which the profiler considers operations \"slow\" (and thus, included in the level ``1`` profiling data), you can configure :setting:`~operationProfiling.slowOpThresholdMs` at runtime as an argument to the :method:`db.setProfilingLevel()` operation."
msgstr ""

#: ../source/applications/design-notes.txt:0
# bc5fcc3cf9aa4b78ac9020ddf2b52e96
msgid "See"
msgstr ""

#: ../source/applications/design-notes.txt:371
# 01c67963d1ff434da9900e20a052f69b
msgid "By default, :program:`mongod` records all \"slow\" queries to its :setting:`log <logpath>`, as defined by :setting:`~operationProfiling.slowOpThresholdMs`."
msgstr ""

#: ../source/applications/design-notes.txt:376
# 891e66b916fa40ab98ad21e86d831f19
msgid "Because the database profiler can negatively impact performance, only enable profiling for strategic intervals and as minimally as possible on production systems."
msgstr ""

#: ../source/applications/design-notes.txt:380
# 906bced132d9441582d41ae726d46877
msgid "You may enable profiling on a per-:program:`mongod` basis. This setting will not propagate across a :term:`replica set` or :term:`sharded cluster`."
msgstr ""

#: ../source/applications/design-notes.txt:384
# e81a79a2e5784587baca8a2f43e29ba6
msgid "You can view the output of the profiler in the ``system.profile`` collection of your database by issuing the ``show profile`` command in the :program:`mongo` shell, or with the following operation:"
msgstr ""

#: ../source/applications/design-notes.txt:392
# 8f04419bca9d43c8845bd2ee94cc1d05
msgid "This returns all operations that lasted longer than 100 milliseconds. Ensure that the value specified here (``100``, in this example) is above the :setting:`~operationProfiling.slowOpThresholdMs` threshold."
msgstr ""

#: ../source/applications/design-notes.txt:396
# c147c5eacea045e3931604d8048c3bd3
msgid ":doc:`/administration/optimization` addresses strategies that may improve the performance of your database queries and operations."
msgstr ""

