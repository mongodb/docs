========================
Compress Network Traffic
========================

.. meta::
   :keywords: network compression, zlib, snappy, zstd, Ruby driver, connection string, URI, settings, configure

.. contents:: On this page
   :local:
   :depth: 2

Overview
--------

The {+driver-short+} supports network compression to reduce the amount
of data transmitted between the client and the server.

The driver supports the following compression algorithms:

- `Snappy <https://google.github.io/snappy/>`__
- `Zlib <https://zlib.net/>`__
- `Zstandard <https://github.com/facebook/zstd/>`__


If you specify multiple compression algorithms, the driver selects the first
one in the list supported by your MongoDB instance.

Specify Compression Algorithms
------------------------------

To enable compression for the connection to your MongoDB instance,
specify the algorithms you want to use in one of the following ways: 

- Add the algorithms to your connection string as a parameter 
- Specify the algorithms in the ``compressors`` option of your ``Mongo::Client`` object

.. tabs::

   .. tab:: Connection String
      :tabid: connection-string

      To enable network compression by using the connection string, add the ``compressors`` option. 
      You can specify one or more algorithms as a comma-separated list.

      .. literalinclude:: /includes/connect/network-compression.rb
         :start-after: start-connection-string
         :end-before: end-connection-string
         :language: ruby      

   .. tab:: Client Settings
      :tabid: client-settings

      To enable compression in your Client object, pass the ``compressors`` option
      to the ``Mongo::Client`` constructor.

      .. literalinclude:: /includes/connect/network-compression.rb
         :start-after: start-client-settings
         :end-before: end-client-settings
         :language: ruby     
