===========================
Update the Monitoring Agent
===========================

.. _upgrade-mms-agent:

Prerequisites
-------------

If your MongoDB deployment uses Kerberos or network authentication,
confirm that you have installed all software required to install the
monitoring agent. See :ref:`legacy-agent-installation` for more
information.

Update the Agent on UNIX/Linux
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To update the Monitoring agent on UNIX/Linux systems:

#. Stop the agent processes.

#. Download the latest Monitoring agent from the :guilabel:`Settings` page of the MMS
   console, in the :guilabel:`Monitoring Agent` section.

#. Restart the Monitoring agent.

Update the Agent on Windows
~~~~~~~~~~~~~~~~~~~~~~~~~~~

To update the agent on Windows systems:

#. Download the latest Monitoring agent from the "Settings" page of the MMS
   console in the :guilabel:`Monitoring Agent` section).

#. From a command shell, issue the following:

   .. code-block:: sh

      sc stop MongoMMS
      sc delete MongoMMS

   This should stop and uninstall |monitoring|.

#. Confirm that the service no longer exists. Issue the following
   command:

   .. code-block:: sh

      sc query MongoMMS

   This operation will return a message that resembles the
   following:

   .. code-block:: none

      [SC] EnumQueryServicesStatus:OpenService FAILED 1060:

      The specified service does not exist as an installed service.

#. When you have successfully uninstalled the Monitoring agent, you can use
   ``mongommsinstall.bat`` to reinstall |monitoring|.

#. Restart the agent.
