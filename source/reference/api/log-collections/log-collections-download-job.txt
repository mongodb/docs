=======================================
Download Logs from a Log Collection Job
=======================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/fact-groups-projects-synonyms.rst

When you create a log collection job, |mms| starts a background job to
download the logs from the specified |mms| deployment.  Use this
endpoint to download a ``.tar.gz`` file stream for all logs associated
with the specified job.

You can download logs from both successful and failed log collection jobs.
If the job failed, all successful components are downloaded. The logs are
downloaded to the same directory where the request is executed, and
in the same format used when downloading logs through the |mms| UI.

For example:

.. code-block:: none 

   hostname/
       automation_agent/
           Automation-agent-verbose.log.2019-01-...
       mongos/
           ...
       myShard_1/
           27017/
               ...
           27018/
   ...
   
.. note::

   You cannot download logs from jobs in the ``EXPIRED`` or
   ``IN_PROGRESS`` states.

.. include:: /includes/api/base-api-uri.rst

Resource
--------

.. code-block:: http

   GET /groups/{GROUP-ID}/logCollectionJobs/{JOB-ID}/download

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 60
   :header-rows: 1
   :stub-columns: 1

   * - Name
     - Type
     - Description

   * - GROUP-ID
     - string
     - Unique identifier of the :term:`project` that the log collection
       job is associated with.

   * - JOB-ID
     - string
     - Unique identifier of the job for which to download the logs. You
       can obtain the ``JOB-IDs`` associated with your group by using
       the :doc:`/reference/api/log-collections/log-collections-get-all`
       endpoint.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/api/no-query-single-parameters.rst

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/api/no-body-parameters.rst

Response
--------

Response Header
~~~~~~~~~~~~~~~

.. include:: /includes/api/api-headers/401.rst

.. include:: /includes/api/api-headers/200.rst

Response Body
~~~~~~~~~~~~~

.. include:: /includes/api/no-response-body.rst