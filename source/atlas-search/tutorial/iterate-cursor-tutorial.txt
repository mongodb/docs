.. _iterate-cursor-tutorial:

==============================================
How to Iterate Your Cursor to View All Results 
==============================================

.. default-domain:: mongodb

.. meta::
   :description: In this tutorial, learn how to iterate a cursor, pulling all results from it until it is exhausted.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

This tutorial describes how to return all results for an |fts| query by
iterating your cursor until it is exhausted. By default, some |fts|
clients like {+mongosh+} and |compass| print up to the first 20
documents in the results. To view all results at once, we recommend that
you iterate your cursor until it is exhausted. To demonstrate how to
iterate your cursor to view all results, this tutorial takes you through
the following steps:  

1. Set up an |fts| index with :ref:`dynamic mapping
   <static-dynamic-mappings>` on the ``sample_mflix.movies`` collection. 
#. Run an |fts| query that iterates your cursor until it is exhausted to
   retrieve all documents that contain the term ``summer`` in the ``title``
   field. 

.. include:: /includes/atlas-roles/create-search-index.rst

Create the |fts| Index 
----------------------

In this section, you create an |fts| index that uses :ref:`dynamic
mapping <static-dynamic-mappings>` to automatically index all the
:ref:`dynamically indexable <bson-data-chart>` fields in the
``sample_mflix.movies`` collection. 

.. include:: /includes/steps-fts-iterate-cursor-tutorial-create-index.txt

Run the Sample Queries 
----------------------

In this section, you connect to your |service| cluster and run
queries against the ``title`` field in the ``sample_mflix.movies``
collection to search for the term ``summer``. The collection includes
over 75 documents that contain the term ``summer`` in the title, but by
default, some |fts| clients print only the top 20 results for the query.
So, to view all the results for the query term at once, you iterate your
cursor using some example methods like ``toArray()`` and ``forEach()``,
pulling all results until the cursor is exhausted. 

.. include:: /includes/steps-fts-iterate-cursor-tutorial-shell-query

