.. _monitor-cluster-metrics:

====================
View Cluster Metrics
====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

|service| collects and displays metrics for your servers, databases,
and MongoDB processes. 

.. include:: /includes/fact-cluster-metrics.rst

.. note::

   The number of servers that |service| displays on the 
   :guilabel:`Metrics` page at any given time depends on the browser 
   screen size. Use the :guilabel:`Toggle Members` section to control 
   which servers |service| displays. Hover over the ``S`` and ``P`` 
   icons to find out which servers they represent.

View Metrics
------------

You can view metrics in the following ways:

:ref:`view-all-cluster-metrics`
   The :guilabel:`Clusters` view displays all clusters in an 
   |service| :ref:`project <projects>` and features core metrics per cluster.

:ref:`view-replica-set-metrics`
   View the metrics for a specific replica set in an |service| 
   :ref:`project <projects>`.

:ref:`view-sharded-cluster-metrics`
   View the metrics for a specific sharded cluster in an |service|
   :ref:`project <projects>`.

:ref:`view-mongodb-process-metrics`
   View the metrics for a specific MongoDB process in an 
   |service| cluster.

:ref:`view-real-time-metrics`
   View Real Time metrics for a specific |service| cluster in a 
   :ref:`project <projects>`.

:ref:`view-atlas-search-metrics`
   View |fts| metrics for |service| clusters with at least one active 
   |fts| index.

.. _monitoring-storage-granularity:

Monitoring Data Storage Granularity
-----------------------------------

|service| stores metrics data at increasing granularity levels. For each
increasing granularity level, |service| computes the metrics data based
on the averages from the previous granularity level. The length of
retention depends on the granularity. |service| computes the metrics 
data based on the averages from the previous granularity level.

.. example::

   After 48 hours' worth of data is collected, each group of
   60 minutes is compacted into a single unit of an hour. After 63 days,
   each group of 24 hours is compacted into a single unit of a day.

Metrics data is gathered at a 1-minute granularity. |service| retains
different granularities of metric data for different periods of time:

.. list-table::
   :header-rows: 1

   * - Data Period
     - Duration of Retention

   * - 1 minute
     - 48 hours

   * - 5 minutes
     - 48 hours

   * - 1 hour
     - 63 days

   * - 1 day
     - Forever

|service| retains all database-specific statistics. MongoDB log data is
retained at a maximum rate of 2000 lines per 2 minutes.

Free Tier and Shared Cluster Monitoring Considerations
------------------------------------------------------

- ``M0`` Free Tier and ``M2/M5`` Shared clusters support a subset of
  the metrics and charts available. For complete documentation on
  the limitations of ``M0/M2/M5`` clusters,
  see :ref:`atlas-free-tier`.
  
- .. include:: /includes/fact-free-tier-monitoring-pause.rst

.. toctree::
   :titlesonly:
   :hidden:

   /view-all-cluster-metrics
   /view-replica-set-metrics
   /view-sharded-cluster-metrics
   /view-mongodb-process-metrics
   /view-real-time-metrics
   /view-atlas-search-metrics
