title: "Configure the agent with the trusted CA certificate that signed the MongoDB instance's certificate."
stepnum: 1
ref: certificate
content: |
  In the agent's install directory, edit the ``monitoring-agent.config``
  file and set the :bsetting:`sslTrustedServerCertificates` field to the path of a
  file containing one or more certificates in PEM format.

  By default, the agent connects to MongoDB instances using a trusted
  certificate. For testing purposes, you can set the
  :msetting:`sslRequireValidServerCertificates` setting to ``False`` to bypass
  this check. This configuration is **not** recommended for production use as
  it makes the connection insecure.

  For additional information on these settings, see
  :ref:`monitoring-agent-ssl-settings`.

## when steps.yaml gets the ability to do replacement text, this step
## should reuse text from step 1 in steps-backup-agent-configure-ssl.yaml
---
title: Activate SSL for the agent's connection to the MongoDB instance.
stepnum: 2
ref: activate
content: |
  In |mms|, select the :guilabel:`Monitoring` tab and then select
  :guilabel:`Deployment`. On the line listing the host, click the gear
  icon and select :guilabel:`Edit Host`. Select the :guilabel:`SSL` tab,
  and then turn on SSL.

  *Optionally*, you can enable SSL support globally through the agent's
  :msetting:`useSslForAllConnections` configuration option. See
  :ref:`monitoring-agent-ssl-settings`.
...
