.. _order-data-prerequisites-setup:

=========================
Setup and Import the Data
=========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

*Time to Complete: 8 minutes*

Prerequisites
-------------

.. include:: /includes/fact-tutorial-prerequisites.rst

Download the Data
-----------------

Download the example dataset from
https://raw.githubusercontent.com/mongodb/docs-assets/charts-tutorial/mgenerate-order-data.json.
To download the documents, right-click on the URL and select
:guilabel:`Save Link As`. This file contains the data you will import
into the ``test.supplySales`` collection of your Atlas cluster in the
following step.

To give an idea of the data you will visualize, here is a sample
document from the dataset:

.. code-block:: json

   {
     "_id": {"$oid":"5afb2c3dc09c8d2dd5852cf2"},
     "saleDate":{"$date":"2017-11-08T19:06:53.449Z"},
     "items":[
       {
         "name":"envelopes",
         "tags":["stationary","office","general"],
         "price":{"$numberDecimal":"9.83"},
         "quantity":10
       },
       {
         "name":"pens",
         "tags":["office","writing","school","stationary"],
         "price":{"$numberDecimal":"73.62"},
         "quantity":2
       },
       {
         "name":"laptop",
         "tags":["office","school","electronics"],
         "price":{"$numberDecimal":"595.72"},
         "quantity":4
       },
       {
         "name":"notepad",
         "tags":["office","writing","school"],
         "price":{"$numberDecimal":"34.65"},
         "quantity":3
       }
     ],
     "storeLocation":"Seattle",
     "customer":{
       "gender":"M",
       "age":45,
       "email":"uga@we.so",
       "satisfaction":4
     },
     "couponUsed":false,
     "purchaseMethod":"Online"
   }

Import the Data
---------------

Now that you have a file containing the documents you will be
visualizing in |charts-short|, use
:manual:`mongoimport </reference/program/mongoimport/>` to import the
contents of that file into the ``test.supplySales`` collection.

.. code-block:: javascript

   mongoimport --host <myAtlasHost> --ssl -u <USER> -p <PASSWORD> --authenticationDatabase admin \
   --db test --collection supplySales \
   --drop --file <path/to/mgenerate-order-data.json>

.. note::

   Refer to the :manual:`mongoimport </reference/program/mongoimport/>`
   page to familiarize yourself with the proper command syntax.

   Additionally, the Atlas documentation for `Connecting to a
   Cluster using Command Line Tools <https://docs.atlas.mongodb.com/command-line-tools/#command-line-tools-mongoimport>`_
   may prove helpful.

Add the Data Collection as a Data Source
----------------------------------------

Now that the data is in the desired collection, add the collection as a
:doc:`data source </data-sources>` in |charts|. Adding a
collection as a data source links the collection to |charts-short| and
allows us to create visualizations using that data.

.. note::

   Before completing this procedure, ensure that you have allowed your
   Atlas cluster to
   `accept connections <https://docs.atlas.mongodb.com/security-whitelist/>`_
   from |charts|.

1. Click the :guilabel:`Data Sources` tab.

#. Click :guilabel:`New Data Source`.

#. In the :guilabel:`New Data Source` dialog, enter the
   :manual:`connection string </reference/connection-string/index.html>`
   which points to the cluster containing the imported data.

   .. example::

      The following connection string points to an Atlas cluster called
      ``jefftestcluster`` and authenticates a user named ``admin`` on
      the ``admin`` database.

      .. code-block:: none

         mongodb://admin:<password>@jefftestcluster-shard-00-00-bfkni.mongodb.net:27017,jefftestcluster-shard-00-01-bfkni.mongodb.net:27017,jefftestcluster-shard-00-02-bfkni.mongodb.net:27017/test?ssl=true&replicaSet=JeffTestCluster-shard-0&authSource=admin

      For further instructions on determining your Atlas connection
      string, see the
      `Connect Your Application <https://docs.atlas.mongodb.com/driver-connection/#connect-your-application>`_
      Atlas documentation.

#. Click :guilabel:`Connect`.

#. Select the ``test.supplySales`` collection.

#. Click :guilabel:`Set Permissions`.

#. Select the :guilabel:`Open Access` option.

#. Click :guilabel:`Publish Data Source`.

Next Steps
----------

Now that you have established the data source in |charts-short|, you
can now :ref:`Create a New Dashboard <order-data-new-dash>` which will
hold the visualizations.
