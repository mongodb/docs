=========
Snapshots
=========

.. default-domain:: mongodb

This resource allows you to view snapshot metadata and remove existing
snapshots. A snapshot is a complete copy of the data in a ``mongod``
instance at a point in time. To delete a resource, you must issue the request
from an IP address on your user account's :ref:`whitelist
<whitelist-for-api-operations>`.

You can retrieve snapshot metadata for the whole :term:`cluster <sharded
cluster>` or :term:`replica set`, or for a single :term:`config server` in
a cluster.

To restore the snapshot data, you must create a
:doc:`restore job </reference/api/restore-jobs>`.

.. include:: /includes/api/base-api-uri.rst

Endpoints
---------

The following lists the endpoints available for snapshots.

.. list-table::
   :header-rows: 1
   :widths: 10 50 40

   * - Method

     - Endpoint

     - Description

   * - ``GET``

     - :doc:`/api/public/v1.0/groups/{groupId}/clusters/{clusterId}/snapshots </reference/api/snapshots/get-all-snapshots-for-one-cluster>`

     - Get All Snapshots for a Cluster

   * - ``GET``

     - :doc:`/api/public/v1.0/groups/{groupId}/clusters/{clusterId}/snapshots/{snapshotId} </reference/api/snapshots/get-one-snapshot-for-one-cluster>`

     - Get one snapshot for a cluster.

   * - ``PATCH``

     - :doc:`/api/public/v1.0/groups/{groupId}/clusters/{clusterId}/snapshots/{snapshotId} </reference/api/snapshots/change-expiry-for-one-snapshot>`

     - Change expiration date for one snapshot.

   * - ``DELETE``

     - :doc:`/api/public/v1.0/groups/{groupId}/clusters/{clusterId}/snapshots/{snapshotId} </reference/api/snapshots/remove-one-snapshot-from-one-cluster>`

     - Remove one snapshot. 

.. admonition:: Deprecated when using MongoDB 3.4
   :class: important

   As of MongoDB 3.4, :abbr:`SCCC (Sync Cluster Connection Config)` config
   servers are no longer supported. The following API methods work with
   :abbr:`SCCC (Sync Cluster Connection Config)` config servers only. To learn
   how to convert your config servers from :abbr:`SCCC (Sync Cluster
   Connection Config)` to :abbr:`CSRS (Config Server Replica Set)`, see
   :manual:`Upgrade Config Servers to Replica Set 
   </tutorial/upgrade-config-servers-to-replica-set/>` in the MongoDB Server 
   Manual.

.. list-table::
   :header-rows: 1
   :widths: 10 50 40

   * - Method

     - Endpoint

     - Description

   * - ``GET``

     - :doc:`/api/public/v1.0/groups/{groupId}/hosts/{hostId}/snapshots </reference/api/snapshots/get-all-snapshots-for-config-server>`

     - Get all snapshots for a :term:`config server`. 

   * - ``GET``

     - :doc:`/api/public/v1.0/groups/{groupId}/hosts/{hostId}/snapshots/{snapshotId} </reference/api/snapshots/get-one-snapshot-for-config-server>`

     - Get one snapshot for a config server.

.. include:: /includes/extracts/api-toc-snapshots.rst