.. _tag-aware-sharding:

==================
Tag Aware Sharding
==================

.. default-domain:: mongodb

For sharded clusters, MongoDB makes it possible to associate specific
ranges of a :term:`shard key` with a specific :term:`shard` or subset
of shards. This association dictates the policy of the cluster
balancer process as it balances the :term:`chunks <chunk>` around the
cluster. This capability enables the following deployment patterns:

- isolating a specific subset of data on specific set of shards.

- controlling the balancing policy so that in a geographically
  distributed cluster the most relevant portions of the data set
  reside on the shards with greatest proximity to the application
  servers.

This document describes the behavior, operation, and use of tag aware
sharding in MongoDB deployments.

Behavior and Operations
-----------------------

- tags are cluster metadata. (implications.) Shell helpers to set the
  metadata. The balancer does the rest.

- tags are arbitrary. tags are independent of replica-set member
  tags.

- tags only dictate balancing policy, and depending on chunk splits,
  and current distribution of data it may take time for the cluster to
  achieve desired distribution

- (more?)

Administer Shard Tags
---------------------

Tag a Shard Key Range
~~~~~~~~~~~~~~~~~~~~~

Remove a Tag From a Shard Key Range
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

View Existing Shard Tags
~~~~~~~~~~~~~~~~~~~~~~~~
