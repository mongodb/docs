.. _atlas-ui-ai-data-usage:

=============================
AI and Data Usage Information
=============================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1

AI features in |service-fullname| are powered by Generative AI
(Gen AI), and may give inaccurate responses. See our `Generative AI FAQ 
<https://dochub.mongodb.org/core/faq-ai-features>`__ 
for more information about Gen AI in MongoDB products.

AI Features in Data Explorer
----------------------------

The :ref:`intelligent assistant <de-ai-assistant>` is an AI-powered tool designed for 
integrated, expert MongoDB development support in the Atlas UI. 

You can also :ref:`query data with natural language <atlas-ui-query-natural-language>`
in |service-fullname|. |service-fullname| uses AI to generate filter queries and 
aggregations based on the prompts you provide.


Third Party Providers
---------------------

AI features in |service| currently use the 
`Azure OpenAI Service <https://azure.microsoft.com/en-us/products/ai-services/openai-service>`__ 
hosted by Microsoft.  This is subject to change in the future. 

How Your Data is Used
---------------------

When you use AI features in |service|, the following information may be sent 
to MongoDB's backend and/or the third-party AI provider: 

For :ref:`natural language querying <atlas-ui-query-natural-language>`:

- The full text of your natural language prompt.
- The schema of the collection you are querying, 
  including database name, collection name, field names, and types. 
- Sample field values to improve the quality of reccomendations. 

  .. note:: 
   
     You can prevent |service| from sending sample field values in the 
     :ref:`project-level settings <atlas-ui-ai-features-project-level-disable>`. 
     If you disable this setting, you can still use natural language querying, 
     however, responses might be less accurate.

For the :ref:`intelligent assistant <de-ai-assistant>`:

- Explain plan metadata. The "Interpret for me" button uses Explain plan metadata, 
  including the original query, to process requests. The assistant prompts a 
  user to confirm that they're okay with this before proceeding with the request
  each time.
- Sanitized connection information. The "Debug for me" button passes sanitized 
  connection information and error messages to the assistant.

The information that is sent will not be shared with any other third 
parties or stored by the AI provider. We do not send unsanitized 
connection strings, credentials, rows, or documents from your databases. 

Disable AI Features
-------------------

You can disable AI-powered features at the project and organization levels. 

.. _atlas-ui-ai-features-project-level-disable:

Don't Share Sample Field Values 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you want to use AI features in Data Explorer but want to prevent 
|service| from sending sample field values to MongoDB or third-party 
providers, you can opt out from sharing field values within a project. 

.. note:: 

    If you disable this functionality, responses from your natural language 
    queries and other AI features might be less accurate.

.. tabs:: 

   .. tab:: {+atlas-admin-api+}
      :tabid: api

      To opt out from sharing field values with the {+atlas-admin-api+}, 
      send a ``PATCH`` request to the :oas-bump-atlas-op:`settings 
      <updateprojectsettings>`endpoint with the 
      ``isDataExplorerGenAISampleDocumentPassingEnabled`` boolean flag value set 
      to ``false``.

   .. tab:: {+atlas-cli+}
      :tabid: atlascli 

      To opt out from sharing field values with the {+atlas-cli+}, run 
      the following command: 

      .. code-block:: 

         atlas projects settings update --disableDataExplorerGenAISampleDocumentPassing

   .. tab:: {+atlas-ui+}
      :tabid: ui 
      
      .. procedure::
         :style: normal 
         
         .. include:: /includes/nav/steps-project-settings.rst
               
         .. step:: Don't share sample field values. 
               
            Set the 
            :guilabel:`Enable Sending Sample Field Values in Data Explorer Generative AI Features` 
            toggle to :guilabel:`off`.

Disable Natural Language Querying 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you no longer want to use natural language querying on your project, you can 
turn this feature off in the project-level settings.

.. tabs:: 

   .. tab:: {+atlas-admin-api+}
      :tabid: api

      To disable natural language querying with the {+atlas-admin-api+}, 
      send a ``PATCH`` request to the :oas-bump-atlas-op:`settings 
      <updateprojectsettings>`endpoint with the 
      ``isDataExplorerGenAIFeaturesEnabled`` boolean flag value set to 
      ``false``.

   .. tab:: {+atlas-cli+}
      :tabid: atlascli 

      To disable natural language querying with the {+atlas-cli+}, run the 
      following command: 

      .. code-block:: 

         atlas projects settings update --disableDataExplorerGenAIFeatures

   .. tab:: {+atlas-ui+}
      :tabid: ui 
      
      .. procedure::
         :style: normal 

            
         .. include:: /includes/nav/steps-project-settings.rst
               
         .. step:: Disable natural language querying. 
               
            Set the :guilabel:`Enable Data Explorer Generative AI Features`
            toggle to :guilabel:`off`. 

Disable All AI Features on |service|
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you want to prevent users in your organization from using all |service| 
features that use generative AI, you can change this setting at the organization
level.

.. tabs:: 

   .. tab:: {+atlas-admin-api+}
      :tabid: api

      To disable AI features for an organization with the {+atlas-admin-api+}, 
      send a ``PATCH`` request to the :oas-bump-atlas-op:`settings 
      <updateorganization>`endpoint with the 
      ``genAIFeaturesEnabled`` boolean flag value set to ``false``.

   .. tab:: {+atlas-cli+}
      :tabid: atlascli 

      To disable AI features for an organization with the {+atlas-cli+}, specify 
      ``genAIFeaturesEnabled: false`` in a JSON configuration file:

      .. code-block:: json

         {
            "genAIFeaturesEnabled": false
         }
      
      After you update the ``genAIFeaturesEnabled`` field in your configuration 
      file, run the following command to update the organization settings: 

      .. code-block:: 

         atlas api updateOrganizationRoles --file <path-to-config-file>

   .. tab:: {+atlas-ui+}
      :tabid: ui 
      
      .. procedure::
         :style: normal 
         
         .. include:: /includes/nav/steps-org-settings.rst
            
         .. step:: Disable the AI feature. 
            
            Set the :guilabel:`Enable Atlas features that use generative AI` 
            toggle to :guilabel:`off`.
