=======================================
Add Existing MongoDB Processes to |mms|
=======================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Overview
--------

|mms| provides a wizard for adding your existing MongoDB deployments to
monitoring and management. The wizard prompts you to install an Automation
Agent if none exists, and then prompts you to identify the :term:`cluster
<sharded cluster>`, the :term:`replica set`, or the :term:`standalone` to add. You
can choose to add the deployment to :ref:`Monitoring
<monitoring-functional-overview>` or to both :ref:`Monitoring
<monitoring-functional-overview>` and :ref:`Automation
<automation>`.

Considerations
--------------

Authentication
~~~~~~~~~~~~~~

- When adding to Monitoring:
    If your MongoDB deployment requires authentication, you must
    provide the necessary credentials for monitoring when adding the
    deployment to |mms|. For information on configuring authentication,
    see :doc:`/tutorial/edit-host-authentication-credentials`.

- When adding to Automation:
    If the |mms| group has MongoDB authentication settings enabled for
    its deployments, the MongoDB deployment to import must support the
    group's authentication mechanism.

    If either the MongoDB deployment requires authentication or
    the |mms| group has authentication settings enabled, you must add
    an automation user with the appropriate roles to the MongoDB
    process in order to perform the import. If the |mms| group has
    authentication settings enabled, add the |mms| group's automation
    user to the MongoDB process. See
    :ref:`add-existing-mongodb-prerequisites`.

.. _automation-updated-security-settings:

Automation and Updated Security Settings Upon Import
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/fact-imported-users-to-automation.rst

Unique Replica Set Names
~~~~~~~~~~~~~~~~~~~~~~~~

Do not add two different replica sets with the same name. |mms| uses the replica
set name to identify which set a member belongs to.

Preferred Hostnames
~~~~~~~~~~~~~~~~~~~

If the MongoDB process is accessible only by specific hostname or IP
address, or if you need to specify the hostname to use for servers with
multiple aliases, set up a preferred hostname. For details, see the
:guilabel:`Preferred Hostnames` setting in :ref:`group-settings-page`.

.. _add-existing-mongodb-prerequisites:

Prerequisites
-------------

.. note::

   The following prerequisite applies only when adding to Automation.

.. include:: /includes/prerequisite-for-adding-existing-deployment-to-automation.rst

Add MongoDB Processes
---------------------

.. include:: /includes/steps/add-existing-mongodb-processes.rst
