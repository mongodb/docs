.. _atlas-federated-authentication:

==================================
Configure Federated Authentication
==================================

.. default-domain:: mongodb

.. meta::
   :keywords: connect, sso, single sign-on, fim, federated identity management

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. include:: /includes/fact-fed-auth-overview.rst

.. figure:: /images/SAML_Transaction.svg
   :alt: SAML Transaction Diagram
   :figwidth: 600px
   :lightbox:

To link your |idp| to |service| you provide each with the appropriate
metadata. After you link your |idp| to |service|, map domains,
organizations, and roles to your |idp|:

Domain Mapping
  |service| routes users with email addresses that use
  :ref:`mapped domains <atlas-manage-fed-domain-map>` to the associated
  |idp|.

Organization Mapping
  |service| grants users who log in through the |idp| access to
  :ref:`mapped |service| organizations <atlas-manage-fed-org-map>`.

Role Mapping
  As part of the organization mapping, you can choose which
  :ref:`role <organization-roles>` to grant your users. These roles map
  to groups in your |idp|.

Federation Management Access
----------------------------

.. include:: /includes/fact-fed-management-access.rst

Tutorials
---------

To configure federated authentication in |service|, you must:

1. :ref:`Link an Identity Provider to Atlas <atlas-manage-fed-auth>`
   to ensure that your users are authenticated through your trusted
   |idp|.

2. :ref:`Map Domains to your Identity Provider <atlas-manage-fed-domain-map>`
   to streamline the login experience for users from specified domains.
   |service| authenticates users through a mapped |idp| if their email
   address matches a mapped domain.

After federating authentication, you can streamline user authorization.
You can perform one or both of the following activities:

1. :ref:`Map Atlas organizations <atlas-manage-fed-org-map>` to your
   |idp|.
2. :ref:`Map Atlas roles <atlas-manage-fed-auth-roles>` to groups in
   your |idp|.

End-to-end tutorials on implementing federated authentication:

- :ref:`Azure AD <federated-auth-azure-ad>`
- :ref:`Okta <federated-auth-okta>`

.. _fed-auth-2fa:

Consideration for Two-Factor Authentication
-------------------------------------------

When you configure federated authentication and users authenticate
through your |idp|, |service| |2fa| for those users is bypassed. If a
user authenticates through your |idp| and has |2fa| for their |service|
account enabled, |service| does not prompt the user for |2fa|. Instead,
you can configure your trusted |idp| to prompt users for |2fa|.

.. toctree::
  :titlesonly:
  :hidden:

  /security/manage-federated-auth
  Manage Domain Mapping </security/manage-domain-mapping>
  Manage Organization Mapping </security/manage-org-mapping>
  Manage Atlas Role Mapping </security/manage-role-mapping>
  /security/federated-auth-azure-ad
  /security/federated-auth-okta
  /security/federation-advanced-options
