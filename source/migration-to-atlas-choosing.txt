=======================================
Choose a Data Import and Migration Tool
=======================================

.. default-domain:: mongodb


.. _import-strategies:

You can bring data from existing MongoDB deployments, ``JSON``, or ``CSV`` files
into |service| using either:

- live migration tools where |service| assists you, or
- tools for a self-guided migration of data from your
  existing deployments into |service|.

.. include:: /includes/serverless-preview-import.rst

The following table discusses how to choose between different tools for
data import and migration for common cluster configurations.



.. list-table::
   :header-rows: 1
   :widths: 45 55

   * - Cluster Configuration
     - Import Strategy

   * - A :term:`replica set` from a |com| deployment.
     
     - :doc:`Live migrate a replica set from Cloud Manager or Ops
       Manager to Atlas </import/migrate-from-com-rs>`.
       In this Live Migration mode, |com| pushes data to
       |service| using a secure link-token without requiring
       access through the firewall.

   * - A sharded cluster from a |com| deployment.
     
     - :doc:`Live migrate a sharded cluster from Cloud Manager or Ops
       Manager to Atlas </import/migrate-from-com-sharded>`.
       In this Live Migration mode, |com| pushes data to
       |service| using a secure link-token without requiring access
       through the firewall.

   * - A standalone MongoDB node from a |com| deployment.
   
     - :opsmgr:`Convert the standalone to a replica set in Ops Manager </tutorial/convert-standalone-to-replica-set/>`
       or :cloudmgr:`convert the standalone to a replica set in Cloud
       Manager </tutorial/convert-standalone-to-replica-set/>`
       and then :doc:`live migrate <import/migrate-from-com-rs>`
       it to |service|. In this Live Migration mode, |com| pushes data to
       |service| using a secure link-token without requiring access through
       the firewall.

   * - A :term:`replica set` deployment, which allows access through the firewall.

     - :doc:`Live migrate a replica set into Atlas </import/live-import>`.
       In the General Live Migration mode, |service| requires access
       to the source deployment through the deployment's firewall.

       Before you migrate to |service|, upgrade the source cluster to MongoDB 4.0 or later.
       Provide the hostname of the :term:`primary` to the Live Migration service.
       If the cluster runs with authentication, allow read access to the
       primary node's :term:`oplog`. To learn more, see :ref:`live-import-migration-validation`.

   * - A sharded cluster deployment, which allows access through the firewall.

     - Choose a data migration option based on the amount of downtime
       your application can tolerate:
   
       - If the application requres a near-continuous uptime, contact MongoDB Support
         and share your uptime requirements and cluster configuration.

       - If the application can tolerate a short period of downtime,
         :doc:`live migrate  a sharded cluster into Atlas
         </import/live-import-sharded>`. In the General Live Migration
         mode, |service| requires access to the source deployment through
         the deployment's firewall.

       - If the application can tolerate a longer downtime, or if your
         cluster runs a MongoDB version that is no longer supported, use
         :doc:`mongorestore </import/mongorestore>` and
         :manual:`back up the cluster with database dumps
         </tutorial/backup-sharded-cluster-with-database-dumps>`.

   * - A standalone MongoDB deployment, which allows access through the firewall.

     - Choose one of the following data migration options:
  
       - If you can :manual:`convert </tutorial/convert-standalone-to-replica-set>`
         the standalone  to a single-node replica set,
         :doc:`live migrate  a replica set into Atlas </import/live-import>`
         service.
       - If you can't convert the standalone to a replica set, use :doc:`mongorestore </import/mongorestore>`.

       Before you migrate to |service|, upgrade the deployment to MongoDB 4.0 or later.
       If the deployment runs with authentication, allow read access to the
       primary node's :term:`oplog`.

   * - A shared multi-tenant cluster, or a cluster where you have no
       access to the oplog.

     - Use :doc:`mongorestore </import/mongorestore>`.

       If the cluster runs with authentication, allow read access to the primary.

   * - A standard "single :term:`shard`" :term:`sharded cluster` MongoDB
       deployment in ``Compose``.

     - :doc:`Live Migrate the cluster to Atlas </import/live-import>`.

       Before you connect from the Live Migration service, `enable the oplog proxy
       <https://www.compose.com/articles/connecting-to-the-oplog-on-the-new-mongodb/>`_
       and specify the oplog proxy's hostname and credentials to |service|. To learn more,
       see :ref:`live-import-migration-validation`.

       .. seealso::

          `Migrate from Compose to MongoDB Atlas <https://docs.mongodb.com/guides/cloud/migrate-from-compose/>`_

