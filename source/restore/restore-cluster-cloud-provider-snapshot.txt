================================================
Restore a Cluster from a Cloud Provider Snapshot
================================================

.. default-domain:: mongodb

.. include:: /includes/fact-atlas-free-tier-limits.rst

|service| lets you restore data from a scheduled cloud provider 
snapshot. For information on cloud provider snapshot backups, see
:doc:`/backup/cloud-provider-snapshots`.

For instructions on restoring data from a 
:doc:`continuous backup snapshot </backup/continuous-backups>`, see 
:doc:`/restore-cluster`.

Restore a Cluster
-----------------

#. From the :guilabel:`Clusters` view, click :guilabel:`Backup` in the left-hand navigation.

   If the :guilabel:`Status` field for the cluster you want to restore
   a backup for is :guilabel:`Inactive`, then |service| backups are
   disabled for that cluster and no snapshots are available. 

#. Select a cluster's snapshot to restore.

   Hover over the :guilabel:`Active` status of the cluster and click
   :guilabel:`Restore or Download`.

   Alternatively, you can click the ``...`` button for the cluster and
   select the :guilabel:`Restore`.

#. Follow the prompts to restore your cluster. You may choose to:

   - :ref:`Download your snapshot via HTTPS <restore-cloud-provider-snapshot-download>`.

   - :ref:`Restore your snapshot to an Atlas project <restore-cloud-provider-snapshot-atlas>`.

   - :ref:`Restore your snapshot to a Cloud Manager project <restore-cloud-provider-snapshot-mms>`.

.. _restore-cloud-provider-snapshot-download:

Download your Snapshot via HTTPS
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

From the :guilabel:`Restore` dialog, click :guilabel:`Download` to 
retrieve your backup data via HTTPS and restore manually. |service| 
generates a one-time use download link that expires within 4 hours. 

You must add the IP or :abbr:`CIDR (Classless Inter-Domain Routing)`
address of the client to your |service| project 
:ref:`whitelist <whitelist>`. The :guilabel:`Restore` prompt displays 
your :guilabel:`Existing IP Whitelist`.

If the current project whitelist ranges do not cover the target client
IP or :abbr:`CIDR (Classless Inter-Domain Routing)` address, click 
:guilabel:`Add or Modify your IP Addresses` to make changes to your 
|service| project whitelist

.. _restore-cloud-provider-snapshot-atlas:

Restore your Snapshot to an Atlas Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. important::

    The restore process requires **downtime** for the target cluster.

From the :guilabel:`Restore` dialog, click :guilabel:`Restore` to have 
|service| restore to a selected cluster. |service| can only restore to 
a replica set cluster. The target cluster must run the same or newer 
version of MongoDB as the snapshot MongoDB version.

You can restore to any |service| project for which the authenticated
|service| user has the :authrole:`Project Owner` role.

.. _restore-cloud-provider-snapshot-mms:

Restore your Snapshot to a Cloud Manager Project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. important::

    The restore process requires **downtime** for the target cluster.

From the :guilabel:`Restore` dialog, click :guilabel:`Restore` to have 
|service| restore to a selected |mms| project. |service| can only 
restore to a replica set cluster. The target cluster must run the same 
or newer version of MongoDB as the snapshot MongoDB version.

You can restore to any |mms| project for which the authenticated
|service| user has any of the following roles:

- :cloudmgr:`Organization Owner </reference/user-roles/#Organization-Owner>`
- :cloudmgr:`Project Owner </reference/user-roles/#Project-Owner>`
- :cloudmgr:`Project Backup Admin </reference/user-roles/#Project-Backup-Admin>`

You must add the IP or :abbr:`CIDR (Classless Inter-Domain Routing)`
addresses of the target |mms| project to your |service| project 
:ref:`whitelist <whitelist>`. The :guilabel:`Restore` prompt displays 
your :guilabel:`Existing IP Whitelist`.

If the current project whitelist ranges do not cover the target |mms|
project IP or :abbr:`CIDR (Classless Inter-Domain Routing)` addresses,
click  :guilabel:`Add or Modify your IP Addresses` to make changes to 
your |service| project whitelist.
