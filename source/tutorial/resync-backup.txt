=============
Resync Backup
=============

.. default-domain:: mongodb

Overview
--------

If you receive a ``Backup requires resync`` alert, you must resync the
backup for the specified MongoDB instance.

It is also recommended that you resync all backups annually for production
deployments.

During resync, data is read from a :term:`secondary` in each replica set
and no new snapshots are generated.

The ``Backup requires a resync`` alert occurs if the Backup Agent's
:term:`tailing cursor <tailable cursor>` cannot keep up with your
deployment's :term:`oplog`. This is similar to when a secondary falls too
far behind the primary in a replica set.

Considerations
--------------

To ensure the Backup oplog does not fall behind the deployment's oplog, always
provision adequate machine resources for the agent. If you stop your |mms|
agents for maintenance reasons, always restart them in a timely manner.
To provide a buffer for maintenance and for occasional activity bursts,
ensure that the oplog on the :term:`primary` is large enough to contain 24
hours of activity. For more information on the Backup oplog, see the
:ref:`faq-backup`.

Procedures
----------

Use the appropriate procedure below for your deployment type, sharded cluster
or replica set.

Resync a Sharded Cluster
++++++++++++++++++++++++

.. include:: /includes/steps/resync-shard.rst

Resync a Replica Set
++++++++++++++++++++

.. include:: /includes/steps/resync-replica-set.rst
