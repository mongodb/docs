.. _csharp-connection-options:

==========================
Specify Connection Options
==========================

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: connection string, URI, server, Atlas, settings, configure
   :description: Explore MongoDB connection and authentication options in the .NET/C# Driver using connection URI or `MongoClientSettings` for flexible configuration.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. toctree::
   :caption: Specify Connection Options

   Compress Network Traffic </connect/connection-options/network-compression>
   Customize Server Selection </connect/connection-options/server-selection>
   Stable API </connect/connection-options/stable-api>
   Connection Pools </connect/connection-options/connection-pools>
   Connect from AWS Lambda <https://www.mongodb.com/docs/atlas/manage-connections-aws-lambda/>

Overview
--------

This page describes the connection options available in the {+driver-short+} and
explains how to apply them to your MongoDB connection.

How to Specify Connection Options
---------------------------------

The following sections describe the ways in which you can specify connection options.

.. _csharp-connection-uri:

Using the Connection URI
~~~~~~~~~~~~~~~~~~~~~~~~

If you pass a connection URI to the ``MongoClient`` constructor, you can include
connection options in the string as ``<name>=<value>`` pairs. In the following example,
the connection URI contains the ``connectTimeoutMS`` option with a value of ``60000``
and the ``tls`` option with a value of ``true``:

.. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
   :language: csharp
   :dedent:
   :start-after: // start-connection-uri
   :end-before: // end-connection-uri

To learn more about the options that you can specify in a connection URI, see
:manual:`Connection String Options </reference/connection-string-options>` in the
{+mdb-server+} manual.

.. _csharp-mongo-client-settings:

Using MongoClientSettings
~~~~~~~~~~~~~~~~~~~~~~~~~

You can use a ``MongoClientSettings`` object to configure connection settings in code
rather than in a connection URI. Configuring the connection this way makes it easier to
change settings at runtime, helps you catch errors during compilation, and provides
more configuration options than the connection URI.

To set connection options in a ``MongoClientSettings`` object, perform the
following steps:

1. Create an instance of the ``MongoClientSettings`` class
#. Set properties on the instance to configure the connection
#. Pass the instance to the ``MongoClient`` constructor

The following code example shows how to perform the preceding steps:

.. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
   :language: csharp
   :dedent:
   :start-after: // start-mongo-client-settings
   :end-before: // end-mongo-client-settings

You can also create a ``MongoClientSettings`` object from a connection string by calling the
``MongoClientSettings.FromConnectionString()`` method and passing the connection string,
as shown in the following example. This is useful if you already have a connection string
but want to modify some settings programmatically, or if you must specify settings
that aren't available in the connection string.

.. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
   :language: csharp
   :dedent:
   :start-after: // start-from-connection-string
   :end-before: // end-from-connection-string

Alternatively, you can create a ``MongoClientSettings`` object from a ``MongoUrl`` object
by calling the ``MongoClientSettings.FromUrl()`` method and passing the ``MongoUrl``
object, as shown in the following example. This is useful if you already have a ``MongoUrl``
object but want to specify settings that aren't available in the ``MongoUrl`` class.

.. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
   :language: csharp
   :dedent:
   :start-after: // start-from-url
   :end-before: // end-from-url

.. _csharp-mongo-url-builder:

Using MongoUrlBuilder
~~~~~~~~~~~~~~~~~~~~~

You can use a ``MongoUrlBuilder`` object to create and configure connection settings on
a ``MongoUrl`` object. A ``MongoUrl`` is a strongly typed representation of a
connection URI, and is useful when reading a connection URI directly from
another source. Using a ``MongoUrl`` object has many of the same advantages as using
a ``MongoClientSettings`` object, although the two classes contain different properties
and methods.

To use a ``MongoUrlBuilder`` object, create an instance of the class and set the
necessary configuration properties. To create a ``MongoUrl`` object from the
``MongoUrlBuilder``, call the ``MongoUrlBuilder.ToMongoUrl()`` method. You can pass the
``MongoUrl`` object to the ``MongoClient`` constructor. The following code example shows
this process:

.. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
   :language: csharp
   :dedent: 8
   :start-after: // start-mongo-url-builder
   :end-before: // end-mongo-url-builder

Connection Options
------------------

The following sections describe the connection options available in the
{+driver-short+} and how to specify them by using a ``MongoClientSettings`` or
``MongoUrlBuilder`` object.

.. _csharp-replica-set-options:

Replica Set Options
~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      DirectConnection
      ````````````````

      .. include:: /includes/fundamentals/connection-options/directConnection.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-direct-connection
         :end-before: // end-settings-direct-connection

      ReplicaSetName
      ``````````````

      .. include:: /includes/fundamentals/connection-options/replicaSetName.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-replica-set-name
         :end-before: // end-settings-replica-set-name

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      DirectConnection
      ````````````````

      .. include:: /includes/fundamentals/connection-options/directConnection.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-direct-connection
         :end-before: // end-builder-direct-connection

      ReplicaSetName
      ``````````````

      .. include:: /includes/fundamentals/connection-options/replicaSetName.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-replica-set-name
         :end-before: // end-builder-replica-set-name

TLS Options
~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      AllowInsecureTls
      ````````````````

      .. include:: /includes/fundamentals/connection-options/allowInsecureTls.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-allow-insecure-tls
         :end-before: // end-settings-allow-insecure-tls

      SslSettings
      ```````````

      TLS/SSL options, including client certificates, revocation handling, and
      enabled and disabled TLS/SSL protocols. The default value is ``null``.

      If ``SslSettings.CheckCertificateRevocation`` is set to ``false`` and
      ``AllowInsecureTls`` is set to ``true``, the {+driver-short+} throws
      an exception.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-ssl-settings
         :end-before: // end-settings-ssl-settings

      UseTls
      ``````

      .. include:: /includes/fundamentals/connection-options/useTls.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-use-tls
         :end-before: // end-settings-use-tls

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      AllowInsecureTls
      ````````````````

      .. include:: /includes/fundamentals/connection-options/allowInsecureTls.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-allow-insecure-tls
         :end-before: // end-builder-allow-insecure-tls

      TlsDisableCertificateRevocationCheck
      ````````````````````````````````````

      Whether to disable certificate revocation checking during the TLS handshake. The
      default value is ``false``.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-tls-disable
         :end-before: // end-builder-tls-disable

      UseTls
      ``````

      .. include:: /includes/fundamentals/connection-options/useTls.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-use-tls
         :end-before: // end-builder-use-tls

Timeout Options
~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      ConnectTimeout
      ``````````````

      .. include:: /includes/fundamentals/connection-options/connectTimeout.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-connect-timeout
         :end-before: // end-settings-connect-timeout

      SocketTimeout
      `````````````

      .. include:: /includes/fundamentals/connection-options/socketTimeout.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-connect-timeout
         :end-before: // end-settings-connect-timeout

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      ConnectTimeout
      ``````````````

      .. include:: /includes/fundamentals/connection-options/connectTimeout.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-connect-timeout
         :end-before: // end-builder-connect-timeout

      SocketTimeout
      `````````````

      .. include:: /includes/fundamentals/connection-options/socketTimeout.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-socket-timeout
         :end-before: // end-builder-socket-timeout

Compression Options
~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      Compressors
      ```````````

      .. include:: /includes/fundamentals/connection-options/compressors.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-compressors
         :end-before: // end-settings-compressors

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      Compressors
      ```````````

      .. include:: /includes/fundamentals/connection-options/compressors.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-compressors
         :end-before: // end-builder-compressors

Connection Pool Options
~~~~~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      MaxConnecting
      `````````````

      .. include:: /includes/fundamentals/connection-options/maxConnecting.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-max-connecting
         :end-before: // end-settings-max-connecting

      MaxConnectionIdleTime
      `````````````````````

      .. include:: /includes/fundamentals/connection-options/maxConnectionIdleTime.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-max-connection-idle-time
         :end-before: // end-settings-max-connection-idle-time

      MaxConnectionLifeTime
      `````````````````````

      .. include:: /includes/fundamentals/connection-options/maxConnectionLifetime.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-max-connection-life-time
         :end-before: // end-settings-max-connection-life-time

      MaxConnectionPoolSize
      `````````````````````

      .. include:: /includes/fundamentals/connection-options/maxConnectionPoolSize.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-max-connection-pool-size
         :end-before: // end-settings-max-connection-pool-size

      MinConnectionPoolSize
      `````````````````````

      .. include:: /includes/fundamentals/connection-options/minConnectionPoolSize.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-min-connection-pool-size
         :end-before: // end-settings-min-connection-pool-size

      WaitQueueTimeout
      ````````````````

      .. include:: /includes/fundamentals/connection-options/waitQueueTimeout.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-wait-queue-timeout
         :end-before: // end-settings-wait-queue-timeout

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      MaxConnecting
      `````````````

      .. include:: /includes/fundamentals/connection-options/maxConnecting.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-max-connecting
         :end-before: // end-builder-max-connecting

      MaxConnectionIdleTime
      `````````````````````

      .. include:: /includes/fundamentals/connection-options/maxConnectionIdleTime.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-max-connection-idle-time
         :end-before: // end-builder-max-connection-idle-time

      MaxConnectionLifeTime
      `````````````````````

      .. include:: /includes/fundamentals/connection-options/maxConnectionLifetime.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-max-connection-life-time
         :end-before: // end-builder-max-connection-life-time

      MaxConnectionPoolSize
      `````````````````````

      .. include:: /includes/fundamentals/connection-options/maxConnectionPoolSize.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-max-connection-pool-size
         :end-before: // end-builder-max-connection-pool-size

      MinConnectionPoolSize
      `````````````````````

      .. include:: /includes/fundamentals/connection-options/minConnectionPoolSize.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-min-connection-pool-size
         :end-before: // end-builder-min-connection-pool-size

      WaitQueueTimeout
      ````````````````

      .. include:: /includes/fundamentals/connection-options/waitQueueTimeout.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-wait-queue-timeout
         :end-before: // end-builder-wait-queue-timeout

Write Concern Options
~~~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      WriteConcern
      ````````````

      The default write-concern settings, including write timeout and
      journaling, for the client. The default value is ``WriteConcern.Acknowledged``.
      See :manual:`Write Concern <reference/write-concern/>` in the
      {+mdb-server+} manual for more information.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-write-concern
         :end-before: // end-settings-write-concern

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      FSync
      `````

      The FSync component of the write concern. The default value is ``false``. To learn
      more about the ``fsync`` command, see :manual:`fsync </reference/command/fsync/>`
      in the {+mdb-server+} manual.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-fsync
         :end-before: // end-builder-fsync

      Journal
      ```````

      The ``j`` component of the write concern, which requests acknowledgment that the
      MongoDB instances have written to the on-disk journal. The default value depends on
      the value in the ``writeConcernMajorityJournalDefault`` setting. To learn more about the
      ``j`` option, see :manual:`Write Concern </reference/write-concern/#j-option>`
      in the {+mdb-server+} manual.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-journal
         :end-before: // end-builder-journal

      W
      ``

      The ``w`` component of the write concern, which requests acknowledgment that the write
      operation has propagated to a specified number of MongoDB instances. The default
      value is ``"majority"`` or ``1``, depending on the number of arbiters and voting nodes.
      To learn more about the ``w`` option, see :manual:`Write Concern </reference/write-concern/#std-label-wc-w>`
      in the {+mdb-server+} manual.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-w
         :end-before: // end-builder-w

      WTimeout
      ````````

      The ``wtimeout`` component of the write concern, which specifies a time limit for the
      write concern. To learn more about the ``wtimeout`` option, see
      :manual:`Write Concern </reference/write-concern/#wtimeout>`
      in the {+mdb-server+} manual.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-w-timeout
         :end-before: // end-builder-w-timeout

Read Concern Options
~~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      ReadConcern
      ```````````

      The client's read concern. The default value is ``ReadConcern.Default``.
      For more information, see :manual:`Read Concern </reference/read-concern/>` in the
      {+mdb-server+} manual.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-read-concern
         :end-before: // end-settings-read-concern

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      ReadConcernLevel
      ````````````````

      The client's read concern level. The default value is ``ReadConcern.Local``.
      For more information, see :ref:`read concern <read-concern>`.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-read-concern-level
         :end-before: // end-builder-read-concern-level

Read Preference Options
~~~~~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      ReadPreference
      ``````````````

      .. include:: /includes/fundamentals/connection-options/readPreference.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-read-preference
         :end-before: // end-settings-read-preference

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      .. include:: /includes/fundamentals/connection-options/readPreference.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-read-preference
         :end-before: // end-builder-read-preference

Authentication Options
~~~~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      Credential
      ``````````

      Settings for how the driver authenticates to the server. This includes
      authentication credentials, mechanism, source, and other settings. The default
      value is ``null``.

      If you don't specify an authentication mechanism, the driver uses either
      ``SCRAM-SHA-1`` or ``SCRAM-SHA-256``, depending on the server version. See
      :ref:`Authentication Mechanisms <csharp-authentication-mechanisms>` for available
      authentication mechanisms.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-credential
         :end-before: // end-settings-credential

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      AuthenticationMechanism
      ```````````````````````

      The mechanism that the driver uses to authenticate to {+mdb-server+}.
      If you don't specify an authentication mechanism, the driver uses either
      ``SCRAM-SHA-1`` or ``SCRAM-SHA-256``, depending on the server version. See
      :ref:`authentication mechanisms <csharp-authentication-mechanisms>` for available
      authentication mechanisms.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-authentication
         :end-before: // end-builder-authentication
         :emphasize-lines: 3

      AuthenticationMechanismProperties
      `````````````````````````````````

      Configuration settings for the authentication mechanism specified in the
      ``AuthenticationMechanism`` property.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-authentication
         :end-before: // end-builder-authentication
         :emphasize-lines: 4-8

      AuthenticationSource
      ````````````````````

      The source to authenticate the client against.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-authentication
         :end-before: // end-builder-authentication
         :emphasize-lines: 9

      Password
      ````````

      The password to use for authentication.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-username-password
         :end-before: // end-builder-username-password
         :emphasize-lines: 4

      Username
      ````````

      The username to use for authentication.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-username-password
         :end-before: // end-builder-username-password
         :emphasize-lines: 3

Server Selection and Discovery Options
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      HeartbeatInterval
      `````````````````

      .. include:: /includes/fundamentals/connection-options/heartbeatInterval.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-heartbeat-interval
         :end-before: // end-settings-heartbeat-interval

      HeartbeatTimeout
      ````````````````

      .. include:: /includes/fundamentals/connection-options/heartbeatTimeout.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-heartbeat-timeout
         :end-before: // end-settings-heartbeat-timeout

      LocalThreshold
      ``````````````

      .. include:: /includes/fundamentals/connection-options/localThreshold.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-local-threshold
         :end-before: // end-settings-local-threshold

      ServerSelectionTimeout
      ``````````````````````

      .. include:: /includes/fundamentals/connection-options/localThreshold.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-server-selection-timeout
         :end-before: // end-settings-server-selection-timeout

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      HeartbeatInterval
      `````````````````

      .. include:: /includes/fundamentals/connection-options/heartbeatInterval.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-heartbeat-interval
         :end-before: // end-builder-heartbeat-interval

      HeartbeatTimeout
      ````````````````

      .. include:: /includes/fundamentals/connection-options/heartbeatTimeout.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-heartbeat-timeout
         :end-before: // end-builder-heartbeat-timeout

      LocalThreshold
      ``````````````

      .. include:: /includes/fundamentals/connection-options/localThreshold.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-local-threshold
         :end-before: // end-builder-local-threshold

      ServerSelectionTimeout
      ``````````````````````

      .. include:: /includes/fundamentals/connection-options/localThreshold.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-server-selection-timeout
         :end-before: // end-builder-server-selection-timeout

Encoding Options
~~~~~~~~~~~~~~~~

ReadEncoding
````````````

The UTF-8 encoding to use for string deserialization. The default value is
strict encoding, where the driver throws an exception when it encounters an invalid
UTF-8 byte sequence

.. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
   :language: csharp
   :copyable: true
   :dedent: 8
   :start-after: // start-settings-read-encoding
   :end-before: // end-settings-read-encoding

WriteEncoding
`````````````

The UTF-8 encoding to use for string serialization. The default value is
strict encoding, where the driver throws an exception when it encounters an invalid
UTF-8 byte sequence

.. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
   :language: csharp
   :copyable: true
   :dedent: 8
   :start-after: // start-settings-write-encoding
   :end-before: // end-settings-write-encoding

.. note:: MongoClientSettings Only

   The ``ReadEncoding`` and ``WriteEncoding`` properties are available only in the
   ``MongoClientSettings`` class.

Stable API
~~~~~~~~~~

ServerApi
`````````

Allows opting into Stable API versioning. The default value is ``null``. See
:manual:`Stable API </reference/stable-api>` in the {+mdb-server+} manual for more
information about Stable API versioning.

.. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
   :language: csharp
   :copyable: true
   :dedent: 8
   :start-after: // start-settings-server-api
   :end-before: // end-settings-server-api

.. note:: MongoClientSettings Only

   The ``ServerApi`` property is available only in the ``MongoClientSettings`` class.

Retry Options
~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      RetryReads
      ``````````
      
      .. include:: /includes/fundamentals/connection-options/retryReads.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-retry-reads
         :end-before: // end-settings-retry-reads

      RetryWrites
      ```````````
      
      .. include:: /includes/fundamentals/connection-options/retryWrites.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-retry-writes
         :end-before: // end-settings-retry-writes

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      RetryReads
      ``````````
      
      .. include:: /includes/fundamentals/connection-options/retryReads.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-retry-reads
         :end-before: // end-builder-retry-reads

      RetryWrites
      ```````````

      .. include:: /includes/fundamentals/connection-options/retryWrites.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-retry-writes
         :end-before: // end-builder-retry-writes

Miscellaneous Options
~~~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: MongoClientSettings
      :tabid: mongo-client-settings

      ApplicationName
      ```````````````

      .. include:: /includes/fundamentals/connection-options/applicationName.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-application-name
         :end-before: // end-settings-application-name

      AutoEncryptionOptions
      `````````````````````

      Settings for automatic client-side encryption. The default value is ``null``. To
      learn more about client-side encryption, see
      :ref:`In-Use Encryption <csharp-in-use-encryption>`.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-auto-encryption-options
         :end-before: // end-settings-auto-encryption-options

      ClusterConfigurator
      ```````````````````

      Low-level configuration options for sockets, TLS, cluster, and others. The default
      value is ``null``.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-cluster-configurator
         :end-before: // end-settings-cluster-configurator

      IPv6
      ````

      .. include:: /includes/fundamentals/connection-options/ipv6.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-ipv6
         :end-before: // end-settings-ipv6

      IsFrozen
      ````````

      A read-only option that indicates whether the settings have been frozen. You can't
      change frozen settings. The default value is ``false``.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-is-frozen
         :end-before: // end-settings-is-frozen

      .. tip:: Freeze Settings

         You can freeze the settings on a ``MongoClientSettings`` object by calling its
         `Freeze() <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoClientSettings.Freeze.html>`__
         method. This prevents any further changes to the settings.

         Alternatively, you can call the `FrozenCopy()
         <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoClientSettings.FrozenCopy.html>`__
         method to create a new ``MongoClientSettings`` object with the current settings frozen.

      LibraryInfo
      ```````````

      The name and version of a custom library built on the {+driver-short+}. The driver
      sends this information to the server.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-library-info
         :end-before: // end-settings-library-info

      LoadBalanced
      ````````````

      .. include:: /includes/fundamentals/connection-options/loadBalanced.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-load-balanced
         :end-before: // end-settings-load-balanced

      LoggingSettings
      ```````````````

      The settings used for :ref:`logging. <csharp-logging>` The default value is ``null``.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-logging-settings
         :end-before: // end-settings-logging-settings

      Scheme
      ``````

      .. include:: /includes/fundamentals/connection-options/scheme.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-scheme
         :end-before: // end-settings-scheme

      Server
      ``````

      .. include:: /includes/fundamentals/connection-options/server.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-server
         :end-before: // end-settings-server

      ServerMonitoringMode
      ````````````````````

      .. include:: /includes/fundamentals/connection-options/serverMonitoringMode.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-server-monitoring-mode
         :end-before: // end-settings-server-monitoring-mode

      Servers
      ```````

      .. include:: /includes/fundamentals/connection-options/servers.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-servers
         :end-before: // end-settings-servers

      SrvMaxHosts
      ```````````

      .. include:: /includes/fundamentals/connection-options/srvMaxHosts.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-srv-max-hosts
         :end-before: // end-settings-srv-max-hosts

      SrvServiceName
      ``````````````

      .. include:: /includes/fundamentals/connection-options/srvServiceName.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-srv-service-name
         :end-before: // end-settings-srv-service-name

      TranslationOptions
      ``````````````````

      Specifies options, such as the {+mdb-server+} version, for translating LINQ
      queries to the Query API. The default value is ``null``.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-settings-translation-options
         :end-before: // end-settings-translation-options

   .. tab:: MongoUrlBuilder
      :tabid: mongo-url-builder

      ApplicationName
      ```````````````

      .. include:: /includes/fundamentals/connection-options/applicationName.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-application-name
         :end-before: // end-builder-application-name

      DatabaseName
      ````````````

      The name of the database that the client connects to.

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-database-name
         :end-before: // end-builder-database-name

      IPv6
      ````

      .. include:: /includes/fundamentals/connection-options/ipv6.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-ipv6
         :end-before: // end-builder-ipv6

      LoadBalanced
      ````````````

      .. include:: /includes/fundamentals/connection-options/loadBalanced.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-load-balanced
         :end-before: // end-builder-load-balanced

      Scheme
      ``````

      .. include:: /includes/fundamentals/connection-options/scheme.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-scheme
         :end-before: // end-builder-scheme

      Server
      ``````

      .. include:: /includes/fundamentals/connection-options/server.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-server
         :end-before: // end-builder-server

      ServerMonitoringMode
      ````````````````````

      .. include:: /includes/fundamentals/connection-options/serverMonitoringMode.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-server-monitoring-mode
         :end-before: // end-builder-server-monitoring-mode

      Servers
      ```````

      .. include:: /includes/fundamentals/connection-options/servers.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-servers
         :end-before: // end-builder-servers

      SrvMaxHosts
      ```````````

      .. include:: /includes/fundamentals/connection-options/srvMaxHosts.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-srv-max-hosts
         :end-before: // end-builder-srv-max-hosts

      SrvServiceName
      ``````````````

      .. include:: /includes/fundamentals/connection-options/srvServiceName.rst

      .. literalinclude:: /includes/fundamentals/code-examples/connection/ConnectionOptions.cs
         :language: csharp
         :copyable: true
         :dedent: 8
         :start-after: // start-builder-srv-service-name
         :end-before: // end-builder-srv-service-name

Additional Information
----------------------

For more information about the types used on this page, see the
following API documentation:

- `MongoClientSettings <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoClientSettings.html>`__
- `MongoUrl <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoUrl.html>`__
- `MongoUrlBuilder <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoUrlBuilder.html>`__
- `AutoEncryptionOptions <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.AutoEncryptionOptions.html>`__
- `ClusterDescriptionChangedEvent <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.Core.Events.ClusterDescriptionChangedEvent.html>`__
- `ClusterOpenedEvent <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.Core.Events.ClusterOpenedEvent.html>`__
- `CollectionNamespace <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.CollectionNamespace.html>`__
- `CompressorConfiguration <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.Core.Configuration.CompressorConfiguration.html>`__
- `CompressorType <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.Core.Compression.CompressorType.html>`__
- `ConnectionStringScheme <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.Core.Configuration.ConnectionStringScheme.html>`__
- `ExpressionTranslationOptions <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.ExpressionTranslationOptions.html>`__
- `LoggingSettings <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.Core.Configuration.LoggingSettings.html>`__
- `MongoCredential <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.Credential.html>`__
- `MongoServerAddress <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoServerAddress.html>`__
- `ReadConcern <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.ReadConcern.html>`__
- `ReadConcernLevel <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.ReadConcernLevel.html>`__
- `ReadPreference <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.ReadPreference.html>`__
- `ServerApi <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.ServerApi.html>`__
- `WriteConcern <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.WriteConcern.html>`__