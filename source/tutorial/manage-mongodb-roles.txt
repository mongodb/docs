===================
Manage Custom Roles
===================

.. default-domain:: mongodb

Overview
--------

Roles grant users access to MongoDB resources. By default, MongoDB
provides a number of :manual:`built-in roles </reference/built-in-roles>`,
but if these roles cannot describe a desired privilege set, you can create
custom roles.

When you create a role, you specify the database to which it applies. |mms|
stores your custom roles on all MongoDB instances in your |mms| group but
uniquely identifies a role by the combination of the database name and
role name. If a database with that name exists on multiple deployments
within your |mms| group, the role applies to each of those databases. If you
create a role on the ``admin`` database, the role applies to all ``admin``
databases in the deployment.

Roles consist of privileges that grant access to specific actions on
specific resources. On most databases, a resource is the database or a
collection, but on the ``admin`` database a resource can be all databases,
all collections with a given name across databases, or all deployments.

A role can inherit privileges from other roles in its database. A role on
the ``admin`` database can inherit privileges from roles in other
databases.

MongoDB roles are separate from :doc:`|mms| roles </reference/user-roles>`.

Prerequisite
------------

MongoDB access control :doc:`must be enabled
<enable-mongodb-access-control>` to apply roles. You can create roles
before enabling accessing control or after, but they don't go into effect
until you enable access control.

Considerations
--------------

Use only the |mms| interface to manage users and roles. Do not do so through
direct connection to a MongoDB instance.

Procedures
----------

Create a Custom MongoDB Role
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/add-mongodb-role.rst

Edit a Custom Role
~~~~~~~~~~~~~~~~~~

You can change a custom role's privileges. You cannot change its name or
database.

.. include:: /includes/steps/edit-mongodb-role.rst

View Privileges for a Role
~~~~~~~~~~~~~~~~~~~~~~~~~~

To view a role's privileges, select the :guilabel:`Deployment` tab, then
the :guilabel:`Roles` page, and then select :guilabel:`view privileges` next to the
role.

Each privilege pairs a resource with a set of :manual:`Privilege Actions
</reference/privilege-actions>`. All roles are assigned a database. Each
:manual:`built-in role </reference/built-in-roles>` is assigned to either
``admin`` database or every database.

Remove a Custom Role
~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps/remove-mongodb-role.rst
