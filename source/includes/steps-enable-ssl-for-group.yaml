stepnum: 1
level: 4
source:
  file: steps-source-access-control.yaml
  ref: select-auth-page
---
stepnum: 2
level: 4
title: "On the :guilabel:`Select Authentication Mechanisms` screen, click :guilabel:`Next`."
content: |
  If you wish to :doc:`enable one or more Authentication Mechanisms
  </tutorial/edit-host-authentication-credentials>` for your |mms|
  project, select them and then click :guilabel:`Next`.
ref: mechanisms-next
---
stepnum: 3
level: 4
title: "Specify the |ssl| Settings."
ref: specify-ssl-settings
content: |
  
  .. list-table::
     :widths: 30 70
     :header-rows: 1

     * - Field
       - Action

     * - :guilabel:`Enable TLS/SSL`
       - Toggle this slider to :guilabel:`Yes`.

     * - :guilabel:`TLS/SSL CA File Path`
       - The |tls-ssl| :abbr:`CA (Certificate Authority)` file is a 
         ``.pem``-format certificate file that contains the root 
         certificate chain from the :abbr:`CA (Certificate Authority)`. 
         The Monitoring and {+bagent+}s use this same 
         :abbr:`CA (Certificate Authority)` file to connect to every 
         item in your deployment.

         Type the file path to the |ssl| :abbr:`CA (Certificate
         Authority)` file on every host running a MongoDB process:

         - Type the file path on all Linux hosts in the first box.

         - Type the file path on all Windows hosts in the second box.

         This enables the :setting:`net.ssl.CAFile` setting for the 
         MongoDB processes in the project.

     * - :guilabel:`Client Certificate Mode`
       - Specify whether client |tls-ssl| certificates are optional or 
         required for every MongoDB deployment in the project.

         .. note::

            For backward compatibility, |onprem| continues to allow
            you to set the
            :v3.0:`net.ssl.weakCertificateValidation </release-notes/3.0-compatibility#tls-ssl-configuration-option-changes>`
            parameter in the MongoDB configuration file to implement
            |tls-ssl|.


         .. list-table::
            :widths: 25 75
            :stub-columns: 1

            * - :guilabel:`OPTIONAL`
              - You may choose which MongoDB deployments in this 
                project use |tls-ssl|\-encrypted network connections.
                
                - If you start a MongoDB deployment with |tls-ssl|, 
                  all Agents connect to that deployment with |tls-ssl|.
                - If you start a MongoDB deployment without |tls-ssl|,
                  all Agents connect to that deployment without 
                  |tls-ssl|. 
                
            * - :guilabel:`REQUIRED`
              - Every MongoDB deployment in this project starts with 
                |tls-ssl|\-encrypted network connections. All Agents 
                must use |tls-ssl| to connect to any MongoDB 
                deployment.

  Click :guilabel:`Continue`.
    
---
stepnum: 4
level: 4
title: "Configure the |mms| Agents."
ref: agent-ssl-credentials
content: |

  .. list-table::
     :widths: 30 70
     :header-rows: 1

     * - Field
       - Action

     * - :guilabel:`Agent Auth Mechanism`
       - In this list, click :guilabel:`X.509 Client Certificate`.

     * - :guilabel:`{+aagent+} Username`
       - Type the MongoDB user name for the {+aagent+}.

     * - :guilabel:`{+bagent+} Username`
       - Type the MongoDB user name for the {+bagent+}.

     * - :guilabel:`Monitoring Agent Username`
       - Type the MongoDB user name for the Monitoring Agent.

     * - :guilabel:`{+aagent+} PEM Key File`
       - Type the file path on the Agent hosts to the `PEM` key file.

         - The first box is for all Linux Agent hosts.

         - The second box is for all Windows Agent hosts.

     * - :guilabel:`{+aagent+} PEM Key Password`
       - *Optional.* If you encrypted the Agent's  
         :abbr:`PEM (Privacy-enhanced Electronic Mail)` key file, enter 
         its password in this box.

     * - :guilabel:`{+bagent+} PEM Key File`
       - Type the file path on the Agent hosts to the `PEM` key file.

         - The first box is for all Linux Agent hosts.

         - The second box is for all Windows Agent hosts.

     * - :guilabel:`{+bagent+} PEM Key Password`
       - *Optional.* If you encrypted the Agent's  
         :abbr:`PEM (Privacy-enhanced Electronic Mail)` key file, enter 
         its password in this box.

     * - :guilabel:`Monitoring Agent PEM Key File`
       - Type the file path on the Agent hosts to the `PEM` key file.

         - The first box is for all Linux Agent hosts.

         - The second box is for all Windows Agent hosts.

     * - :guilabel:`Monitoring Agent PEM Key Password`
       - *Optional.* If you encrypted the Agent's  
         :abbr:`PEM (Privacy-enhanced Electronic Mail)` key file, enter 
         its password in this box.

  Click :guilabel:`Save`.

---
stepnum: 5
level: 4
source:
  file: steps-source-deployment-page.yaml
  ref: review-deployment
---
stepnum: 6
level: 4
source:
  file: steps-source-deployment-page.yaml
  ref: confirm-deployment
...
