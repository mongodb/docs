stepnum: 1
source:
  file: steps-source-admin-navigation.yaml
  ref:  admin-backup-snapshot
---
title: "Click :guilabel:`Create New S3 Blockstore`."
stepnum: 2
level: 4
ref: create-new-s3-blockstore
---
title: "Provide the S3 blockstore details."
stepnum: 3
level: 4
ref: provide-new-s3-blockstore-details
content: |

   .. list-table::
      :widths: 30 70
      :header-rows: 1

      * - Field
        - Contents

      * - :guilabel:`Name`

        - Type the name for the |s3| blockstore.

      * - :guilabel:`S3 Bucket Name`

        - Type the name of the |s3| bucket where you want to host the
          the |s3| blockstore.

          .. important::

             You cannot move an |s3| blockstore to another |s3| bucket
             after the |s3| blockstore has been created. If you need to
             use a different |s3| bucket to host your |s3| blockstore,
             you need to create a new |s3| blockstore in that different
             |s3| bucket.

      * - :guilabel:`S3 Endpoint`
        - Type the |url| for an |aws| |s3| or |s3|-compatible bucket.

          .. note::

             MongoDB currently supports endpoints for:

             - |aws| |s3| :aws:`API
               </AmazonS3/latest/API/Welcome.html>`,
             - IBM `Cloud Object Storage <https://developer.ibm.com/recipes/tutorials/cloud-object-storage-s3-api-intro/>`_
               `API <https://ibm-public-cos.github.io/crs-docs/index.html>`__ and
             - Dell EMC `Elastic Cloud Storage <https://www.Dell EMC.com/en-us/storage/ecs/index.htm#collapse=>`_
               `API <https://www.emc.com/techpubs/ecs/ecs_s3_supported_features-1.htm>`__.

             IBM and Dell EMC support a subset of the full |aws| |s3|
             |api|.

      * - :guilabel:`Path Style Access`

        - Click if you want your |aws| |s3| or |s3|\-compatible bucket
          to use a path-style |url| endpoint
          (``s3.amazonaws.com/<bucket>``) instead of a
          virtual-host-style |url| endpoint
          (``<bucket>.s3.amazonaws.com``).

          To review the |s3| bucket |url| conventions, see the
          :aws:`AWS S3 documentation
          </AmazonS3/latest/dev/UsingBucket.html#access-bucket-intro>`

      * - :guilabel:`Server Side Encryption`

        - Click to enable :aws:`server-side encryption
          </AmazonS3/latest/dev/UsingServerSideEncryption.html>`.
          Clear to disable server-side encryption.

      * - :guilabel:`AWS Access Key`

        - Type your |aws| Access Key ID.

      * - :guilabel:`AWS Secret Key`

        - Type your |aws| Secret Access Key.

      * - :guilabel:`Datastore Type`

        - Select :guilabel:`Standalone`, :guilabel:`Replica Set` or
          :guilabel:`Sharded Cluster`. This MongoDB database stores
          the metadata for the blockstore.

      * - :guilabel:`MongoDB Host List`
          (:term:`Replica Set` and :term:`Sharded Cluster` only)

        - Type a comma-separated list of |mongod| instances (for a
          Replica Set) or |mongos| instances (for a Sharded Cluster) in
          the ``<hostname:port>`` format that comprise the blockstore
          metadata database.

          .. example::

             ``host1.example.com:27017, host2.example.com:27017, host2.example.com:27018``

      * - :guilabel:`MongoDB Hostname`
          (Standalone only)

        - Type the hostname of the |s3| blockstore metadata database.

      * - :guilabel:`MongoDB Port`
          (Standalone only)

        - Type the port number of the |s3| blockstore metadata
          database.

      * - :guilabel:`Username`

        -

          .. list-table::
             :widths: 25 45 30
             :header-rows: 1

             * - Auth Mechanism
               - Action
               - Configure Instructions

             * - Username and Password (``SCRAM-SHA-1``)
               - Type the name of the user authorized to access the
                 |s3| blockstore metadata database.
               - :ref:`SCRAM <authentication-scram>`

             * - x.509 (``X.509``)
               - Type the :rfc:`RFC2253 <2253>`\-formatted subject
                 from the client certificate of the user authorized to
                 access the |s3| blockstore metadata database.
               - :manual:`x.509 </tutorial/configure-x509-client-authentication>`

             * - Kerberos (``GSSAPI``)
               - Type the |upn| of the user authorized to access the
                 |s3| blockstore metadata database.
               - :manual:`Kerberos </core/kerberos>`

             * - LDAP (``PLAIN``)
               - Type the name of the |ldap| user authorized to access
                 the |s3| blockstore metadata database.
               - :manual:`LDAP </core/security-ldap>`

      * - :guilabel:`Password` (optional)

        -

          .. list-table::
             :widths: 25 45 30
             :header-rows: 1

             * - Auth Mechanism
               - Action
               - Configure Instructions

             * - Username and Password (``SCRAM-SHA-1``)
               - Type the password associated with the username that
                 can access the |s3| blockstore metadata database.
               - :ref:`SCRAM <authentication-scram>`

             * - x.509 (``X.509``)
               - Leave it blank.
               - :manual:`x.509 </tutorial/configure-x509-client-authentication>`

             * - Kerberos (``GSSAPI``)
               - Kerberos retrieves the password from its
                 :doc:`keytab file </tutorial/enable-kerberos-authentication-for-group/>`.
                 You do not need to type a password into this field.
               - :manual:`Kerberos </core/kerberos>`

             * - LDAP (``PLAIN``)
               - Type the password of the |ldap| user authorized to
                 access the |s3| blockstore metadata database.
               - :manual:`LDAP </core/security-ldap>`

      * - :guilabel:`Connection Options` (optional)

        - Type any additional :manual:`configuration file options
          </reference/configuration-options>` for the MongoDB instance.

          This field supports unescaped values only.

          For proper syntax, see :manual:`Connection String URI
          Format </reference/connection-string>` in the MongoDB manual.

      * - :guilabel:`Encrypted Credentials` (optional)

        - Select if the credentials for the database were encrypted using the
          :doc:`credentialstool </tutorial/encrypt-user-credentials>`.
          The credentials include the Username, Password, |aws| Access
          Key ID and |aws| Secret Key.

      * - :guilabel:`Use TLS/SSL` (optional)

        - Select if the |s3| blockstore metadata database only accepts
          connection encrypted using |tls|.

          Beyond this checkbox, to connect this |s3| blockstore using
          |tls|, you must enable:

          - :manual:`TLS on the S3 blockstore database </tutorial/configure-ssl>`.

          - |onprem| to :ref:`use TLS <configure-ssl-backing>` to
            connect to this |s3| blockstore.

            .. note::

               All backing databases share the same |tls| certificates.
               If you have enabled |tls| for another backing database,
               you need only select this checkbox to enable a |tls|
               connection to this |s3| blockstore.

      * - :guilabel:`New Assignment Enabled` (optional)

        - Select if you want to enable this |s3| blockstore after
          creating it. This is selected by default so the |s3|
          blockstore can be assigned backup jobs. If you clear this
          checkbox, the |s3| blockstore is created but you cannot
          assign backups to this |s3| blockstore.

---
title: "Click :guilabel:`Create`."
stepnum: 4
level: 4
ref: create-blockstore
...
