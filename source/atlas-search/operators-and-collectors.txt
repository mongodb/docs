.. _operators-ref:

=============================================
Use Operators and Collectors in |fts| Queries
=============================================

.. default-domain:: mongodb

.. meta::
   :keywords: atlas search, atlas search operators, atlas search collectors, search aggregation pipeline stage, autocomplete operator, compound operator, embedded document operator, equals operator, exists operator, geo shape operator, geo within operator, more like this operator, near operator, phrase operator, query string operator, range operator, regex operator, search operator, span operator, term operator, text operator, wildcard operator, facet collector
   :description: Learn how to perform specific types of searches on your collection and how to group your query results with the $search aggregation pipeline stage.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. _fts-operators:

Operators
---------

The ``$search`` aggregation pipeline stage has the following operators:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Operator
     - Description

   * - :ref:`autocomplete <autocomplete-ref>`
     - Performs a search-as-you-type query from an incomplete input string.

   * - :ref:`compound <compound-ref>`
     - Combines other operators into a single query.

   * - :ref:`embeddedDocument <embedded-document-ref>`
     - Queries fields in embedded documents, which are documents that 
       are elements of an array.

   * - :ref:`equals <equals-ref>`
     - Works in conjunction with the :ref:`boolean <boolean-ref>` and 
       :ref:`objectId <objectId-ref>` data types.

   * - :ref:`exists <exists-ref>`
     - Tests for the presence of a specified field.

   * - :ref:`geoShape <geoshape-ref>`
     - Queries for values with specified geo shapes.

   * - :ref:`geoWithin <geowithin-ref>`
     - Queries for points within specified geographic shapes.

   * - :ref:`in <in-ref>`
     - Queries both single value and array of values.

   * - :ref:`knn-beta-ref`
     - Performs semantic search using |hnsw| algorithm.

   * - :ref:`moreLikeThis <more-like-this-ref>`
     - Queries for similar documents.

   * - :ref:`near <near-ref>`
     - Queries for values near a specified :ref:`number
       <bson-data-types-number>`, :ref:`date <bson-data-types-date>`, or
       :ref:`geo point <bson-data-types-geo>`.

   * - :ref:`phrase <phrase-ref>`
     - Searches documents for terms in an order similar to the query.

   * - :ref:`queryString <querystring-ref>`
     - Supports querying a combination of indexed fields and values.

   * - :ref:`range <range-ref>`
     - Queries for values within a specific numeric or date range.

   * - :ref:`regex <regex-ref>`
     - Interprets the ``query`` field as a regular expression.

   * - :ref:`span <span-ref>`
     - Specifies relative positional requirements for query predicates
       within specified regions of a text field.

   * - :ref:`text <text-ref>`
     - Performs textual analyzed search.

   * - :ref:`wildcard <wildcard-ref>`
     - Supports special characters in the query string that can match 
       any character.

.. _collectors-ref:

Collectors
----------

Collectors return a document representing the metadata :ref:`results 
<fts-metadata-results>`, typically an aggregation over the matching 
search results. 

The |fts| aggregation pipeline stage has the following collector:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - Operator
     - Description

   * - :ref:`facet <fts-facet-ref>`
     - Groups query results by values or ranges in specified, faceted 
       fields and returns the count for each of those groups.

.. toctree::
   :titlesonly:

   /atlas-search/autocomplete
   /atlas-search/compound
   /atlas-search/embedded-document
   /atlas-search/equals
   /atlas-search/exists
   /atlas-search/facet
   /atlas-search/geoShape
   /atlas-search/geoWithin
   /atlas-search/in
   knnBeta (Deprecated) </atlas-search/knn-beta>
   /atlas-search/morelikethis
   /atlas-search/near
   /atlas-search/phrase
   /atlas-search/queryString
   /atlas-search/range
   /atlas-search/regex
   /atlas-search/span
   /atlas-search/text
   /atlas-search/wildcard
