=================================================
db.collection.getShardLocation() (mongosh method)
=================================================

.. meta::
   :description: Get the shards where a collection is located using `db.collection.getShardLocation()`.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Definition
----------

.. method:: db.collection.getShardLocation()

   .. versionadded:: 8.1

   Returns a document containing the shards where the collection is
   located and whether the collection is sharded.

   .. important:: ``mongosh`` Method

      This page documents a :binary:`~bin.mongosh` method. This is *not*
      the documentation for database commands or language-specific
      drivers.
      
      The ``getShardLocation()`` method is a wrapper for the
      :pipeline:`$listClusterCatalog` aggregation stage.

Output
------

The ``getShardLocation()`` method returns a document with the following
fields:

.. list-table::
   :header-rows: 1
   :widths: 10 10 20

   * - Field
     - Type
     - Description
   * - ``shards``
     - Array
     - Shards where the collection's data resides.
   * - ``sharded``
     - Boolean
     - Indicates whether the collection is sharded.

If you run the method on an unsharded deployment:

- The ``shards`` array is empty.
- The ``sharded`` field is ``false``.

Compatibility
-------------

This method is available in deployments hosted in the following
environments:

.. include:: /includes/fact-environments-atlas-only.rst

.. include:: /includes/fact-environments-atlas-support-no-free.rst

.. include:: /includes/fact-environments-onprem-only.rst

Syntax
-------

.. code-block:: javascript

   db.<collection>.getShardLocation()

Examples
--------

Sharded Collection
~~~~~~~~~~~~~~~~~~

The following example shows the shards that contain the data in the
``sample_mflix.movies`` collection:

.. io-code-block::
   :copyable: true

   .. input::
      :language: javascript

      use sample_mflix

      db.movies.getShardLocation()

   .. output::
      :language: javascript

      { shards: [ 'shard01', 'shard02' ], sharded: true }

Unsharded Collection on a Sharded Cluster
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you run the command on a sharded cluster but the collection is not
sharded, the ``sharded`` field is ``false`` and the ``shards`` array
only contains the ``config`` shard:

.. io-code-block::
   :copyable: true

   .. input::
      :language: javascript

      use sample_mflix

      db.movies.getShardLocation()

   .. output::
      :language: javascript

      { shards: [ 'config' ], sharded: false }

Unsharded Deployment
~~~~~~~~~~~~~~~~~~~~

If you run the command on an unsharded deployment, the ``sharded`` field
is ``false`` and the ``shards`` array is empty:

.. io-code-block::
   :copyable: true

   .. input::
      :language: javascript

      use sample_mflix

      db.movies.getShardLocation()

   .. output::
      :language: javascript

      { shards: [], sharded: false }
