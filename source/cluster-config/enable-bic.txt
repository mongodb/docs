.. _create-cluster-enable-bi:

============
Enable |bic|
============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

To enable `BI Connector for Atlas
<https://docs.mongodb.com/bi-connector/master/>`__ for this cluster,
toggle :guilabel:`Enable Business Intelligence Connector (M10 and
up)` to :guilabel:`Yes`.

.. figure:: /images/additional-settings-bic.png
   :figwidth: 720px
   :alt: Image showing bic option

.. note::

   .. include:: /includes/extracts/cluster-option-bi-cluster-requirements.rst

If enabled, select the node type from which |bic|
should read.

Read Preferences
----------------

.. _bic-read-preferences:

The following table describes the available read preferences for
|bic| and their corresponding
:manual:`readPreference </reference/read-preference>` and
:manual:`readPreferenceTag </core/read-preference/#tag-sets>`
connection string options.

.. list-table::
   :header-rows: 1
   :widths: 20 30 20 30

   * - |bic-short| Read Preference
     - Description
     - readPreference
     - readPreferenceTags

   * - Primary
     - Read from the :term:`primary` node.
     - ``primary``
     - None

   * - Secondary
     - Read from :term:`secondary` nodes.
     - ``secondary``
     - ``nodeType:ELECTABLE,nodeType:READ_ONLY``

   * - Analytics
     - |bic| reads from analytics nodes.
     - ``secondary``
     - ``nodeType:ANALYTICS``

Node Types
----------

The ``nodeType`` read preference tag dictates the type of node |bic|
connects to. The possible values for this option are as follows:

- ``ELECTABLE`` restricts |bic-short| to the :term:`primary` and
  electable :term:`secondary` nodes.

- ``READ-ONLY`` restricts |bic-short| to connecting to
  non-electable :term:`secondary` nodes.

- ``ANALYTICS`` restricts |bic-short| to connecting to
  :ref:`analytics nodes <analytics-nodes-overview>`.

  .. tip::

     When using a ``readPreference`` of ``"analytics"``,
     |service| places |bic| on the same hardware
     as the analytics nodes from which |bic| reads.

     By isolating electable data-bearing nodes from the
     |bic|, electable nodes do not compete for resources
     with |bic|, thus improving cluster reliability
     and performance.

For high traffic production environments, connecting to the
:guilabel:`Secondary Node(s)` or :guilabel:`Analytics Node(s)` may
be preferable to connecting to the :guilabel:`Primary Node`.

For clusters with one or more
:ref:`analytics nodes <analytics-nodes-overview>`, select
:guilabel:`Analytics Node` to isolate |bic| queries from
your operational workload and read from dedicated, read-only
analytics nodes. With this option, electable nodes do not compete
for resources with |bic|, thus improving cluster reliability and
performance.

Sampling Settings
-----------------

The BI Connector generates a relational schema by
:bic:`sampling data </schema/cached-sampling/>` from MongoDB. The
following sampling settings are configurable:

.. list-table::
   :widths: 25 10 65
   :header-rows: 1
   :stub-columns: 1

   * - BI Connector Option
     - Type
     - Description

   * - Schema Sample Size
     - integer
     - *Optional.* The number of documents that the BI Connector
       samples for each database when gathering schema information.
       For more information, see the
       :bic:`BI Connector documentation </reference/mongosqld/#cmdoption-mongosqld-samplesize>`.

   * - Sample Refresh Interval
     - integer
     - *Optional.* The frequency, in seconds, at which the BI
       Connector re-samples data to recreate the schema. For more
       information, see the
       :bic:`BI Connector documentation </reference/mongosqld/#cmdoption-mongosqld-samplerefreshintervalsecs>`.