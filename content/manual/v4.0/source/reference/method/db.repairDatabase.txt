===================
db.repairDatabase()
===================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. method:: db.repairDatabase()

   :method:`db.repairDatabase()` provides a wrapper around the database
   command :dbcommand:`repairDatabase`. See :dbcommand:`repairDatabase` for
   full documentation.

Behavior
--------

.. warning::

   - Before using :method:`db.repairDatabase()`, make a backup copy of
     the files in the dbpath directory.

   - If you are running with :term:`journaling <journal>` enabled,
     there is almost never any need to run
     :method:`db.repairDatabase()` after an unclean shutdown since the
     server can use the journal files to restore the data files to a
     clean state automatically. However, you may need to run
     :method:`db.repairDatabase()` in cases where you need to recover
     from a disk-level data corruption.

   - Avoid running :method:`db.repairDatabase()` against a replica set.
     If you are trying to repair a :term:`replica set` member, and you
     have access to an intact copy of your data (e.g. a recent backup
     or an intact member of the :term:`replica set`), you should
     restore from that intact copy (see
     :doc:`/tutorial/resync-replica-set-member`), and **not** use
     :method:`db.repairDatabase()`.

   - You should only use the :method:`db.repairDatabase()` method (and
     related :dbcommand:`repairDatabase` command and the
     :option:`--repair <mongod --repair>` command-line option) if you
     have no other options. These operations remove and do not save any
     corrupt data during the repair process.


.. versionchanged:: 2.6

   The :method:`db.repairDatabase()` is now available for secondary
   as well as primary members of replica sets.
