.. _google-gcp:

===========================
Google Cloud Platform (GCP)
===========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Synopsis
--------

|service| supports deploying clusters onto Google Cloud Platform (GCP).
This page provides reference material related to |service| cluster
deployments on |gcp|.

Depending on your cluster tier, |service| supports the following |gcp|
regions. While all of the following regions support ``M10+`` clusters,
some regions don't support Free or Shared-Tier clusters. A check mark
indicates support for Free or Shared-Tier clusters. The |service|
:doc:`API </api/>` uses the corresponding :guilabel:`Atlas Region`.

.. tabs::

   tabs:
     - id: americas
       name: Americas
       content: |

         .. list-table::
            :header-rows: 1
            :widths: 16 16 16 16 16 16

            * - |gcp| Region
              - Location
              - Atlas Region
              - ``M0`` Support
              - ``M2/M5`` Support
              - {+Serverless-Instance+} Support

            * - ``us-central1``
              - Iowa, USA
              - ``CENTRAL_US``
              - :icon:`check-square`
              - :icon:`check-square`
              - :icon:`check-square`

            * - ``us-east1``
              - South Carolina, USA
              - ``EASTERN_US``
              -
              - 
              -

            * - ``us-east4``
              - North Virginia, USA
              - ``US_EAST_4``
              -
              -
              -

            * - ``northamerica-northeast1``
              - Montreal, Canada
              - ``NORTH_AMERICA_NORTHEAST_1``
              -
              -
              -

            * - ``northamerica-northeast2``
              - Toronto, Canada
              - ``NORTH_AMERICA_NORTHEAST_2``
              -
              -
              -              

            * - ``southamerica-east1``
              - Sao Paulo, Brazil
              - ``SOUTH_AMERICA_EAST_1``
              -
              -
              -

            * - ``southamerica-west1``
              - Santiago, Chile
              - ``SOUTH_AMERICA_WEST_1``
              -
              -
              -

            * - ``us-west1``
              - Oregon, USA
              - ``WESTERN_US``
              -
              -
              -

            * - ``us-west2``
              - Los Angeles, CA, USA
              - ``US_WEST_2``
              -
              -
              -

            * - ``us-west3``
              - Salt Lake City, UT, USA
              - ``US-WEST_3``
              -
              -
              -

            * - ``us-west4``
              - Las Vegas, NV, USA
              - ``US-WEST_4``
              -
              -
              -

     - id: asia-pacific
       name: Asia Pacific
       content: |

         .. list-table::
            :header-rows: 1
            :widths: 16 16 16 16 16 16

            * - GCP Region
              - Location
              - Atlas Region
              - ``M0`` Support
              - ``M2/M5`` Support
              - {+Serverless-Instance+} Support

            * - ``asia-east1``
              - Taiwan
              - ``EASTERN_ASIA_PACIFIC``
              - :icon:`check-square`
              - :icon:`check-square`
              -

            * - ``asia-east2``
              - Hong Kong, China
              - ``ASIA_EAST_2``
              -
              -
              -

            * - ``asia-northeast1``
              - Tokyo, Japan
              - ``NORTHEASTERN_ASIA_PACIFIC``
              - :icon:`check-square`
              - :icon:`check-square`
              -

            * - ``asia-northeast2``
              - Osaka, Japan
              - ``ASIA_NORTHEAST_2``
              -
              -
              -

            * - ``asia-northeast3``
              - Seoul, Korea
              - ``ASIA_NORTHEAST_3``
              - :icon:`check-square`
              - :icon:`check-square`
              -

            * - ``asia-southeast1``
              - Singapore
              - ``SOUTHEASTERN_ASIA_PACIFIC``
              - :icon:`check-square`
              -
              -

            * - ``asia-south1``
              - Mumbai, India
              - ``ASIA_SOUTH_1``
              - :icon:`check-square`
              - :icon:`check-square`
              -

            * - ``asia-south2``
              - Delhi, India
              - ``ASIA_SOUTH_2``
              - 
              - 
              -

            * - ``australia-southeast1``
              - Sydney, Australia
              - ``AUSTRALIA_SOUTHEAST_1``
              -
              -
              -

            * - ``australia-southeast2``
              - Melbourne, Australia
              - ``AUSTRALIA_SOUTHEAST_2``
              -
              -
              -

            * - ``asia-southeast2``
              - Jakarta, Indonesia
              - ``ASIA-SOUTHEAST_2``
              - :icon:`check-square`
              - :icon:`check-square`
              -

     - id: europe
       name: Europe
       content: |

         .. list-table::
            :header-rows: 1
            :widths: 16 16 16 16 16 16

            * - GCP Region
              - Location
              - Atlas Region
              - ``M0`` Support
              - ``M2/M5`` Support
              - {+Serverless-Instance+} Support

            * - ``europe-west1``
              - Belgium
              - ``WESTERN_EUROPE``
              - :icon:`check-square`
              - :icon:`check-square`
              - :icon:`check-square`

            * - ``europe-north1``
              - Finland
              - ``EUROPE_NORTH_1``
              -
              -
              -

            * - ``europe-west2``
              - London, UK
              - ``EUROPE_WEST_2``
              -
              -
              -

            * - ``europe-west3``
              - Frankfurt, Germany
              - ``EUROPE_WEST_3``
              -
              -
              -

            * - ``europe-west4``
              - Netherlands
              - ``EUROPE_WEST_4``
              -
              -
              -

            * - ``europe-west6``
              - Zurich, Switzerland
              - ``EUROPE_WEST_6``
              -
              -
              -
            
            * - ``europe-central2``
              - Warsaw, Poland
              - ``EUROPE_CENTRAL_2``
              -
              -
              -

            * - ``europe-west8``
              - Milan, Italy
              - ``EUROPE_WEST_8``
              -
              -
              -

            * - ``europe-west9``
              - Paris, France
              - ``EUROPE_WEST_9``
              -
              -
              -
            
            * - ``europe-southwest1``
              - Madrid, Spain
              - ``EUROPE_SOUTHWEST_1``
              -
              -
              -
              
.. _google-gcp-configuration-options:

Cluster Configuration Options
-----------------------------

Each |service| cluster tier comes with a default set of resources.
|service| provides the following resource configuration options.

Custom Storage Size
~~~~~~~~~~~~~~~~~~~

Storage size reflects the size of the server root volume. |service|
clusters deployed onto |gcp| use |ssd| persistent storage [#google-disk-docs]_.

.. include:: /includes/note-ram-availability.rst

The following cluster tiers are available:

.. include:: /includes/list-tables/instance-types/gcp.rst

.. include:: /includes/cluster-settings/cluster-naming-conventions.rst

.. include:: /includes/fact-multi-cloud-low-cpu.rst

Workloads typically require less than ``2TB`` of storage.

|service| configures the following resources automatically and does not
allow user modification:

- Storage Speed
- Encrypted Storage Volumes

Storage Speed
`````````````

Storage speed is the number of input/output operations per second
(IOPS) [#google-disk-docs]_ that the system performs. This value is
fixed at: 

- 30 |iops| per GB for reads
- 30 |iops| per GB for writes, for a total of 60 |iops| per GB

For example, an ``M30`` cluster with 40 GB of default storage has a
maximum read speed of 1,200 |iops| and a maximum write speed of 1,200 |iops|.
If you increase the storage size to 100 GB per cluster, this increases
the maximum read speed by 3,000 |iops| and a maximum write speed by
3,000 |iops|.

Encrypted Storage Volumes
`````````````````````````

|gcp| storage volumes are
:gcp:`always encrypted </security/encryption-at-rest/>`.

.. _google-gcp-availability-zones:

GCP Zones
---------

Each |gcp| region includes a set number of independent zones. Each zone
has power, cooling, networking, and control planes that are isolated
from other zones.

For regions that have multiple zones, such as 2Z (for two zones) or 3Z
(for 3 zones), |service| deploys clusters across these zones.

The |service| :doc:`Add New Cluster </tutorial/create-new-cluster>`
form marks regions that support :abbr:`3Z (Three Zone)` clusters as
:guilabel:`Recommended`, as they provide higher availability.

For general information on |gcp| regions and zones, see the Google
documentation on :gcp:`regions and zones
</compute/docs/regions-zones/regions-zones>`.

.. include:: /includes/extracts/fact-no-node-restriction-gcp.rst

Regions with at Least Three Zones
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If the selected |gcp| region has at least three zones, |service|
clusters are split across three zones. For example, a three node
replica set cluster would have one node deployed onto each zone.

.. include:: /images/google-gcp-3az.rst

:abbr:`3Z (Three Zone)` clusters have higher availability
compared to :abbr:`2Z (Two Zone)` clusters. However, not all
regions support :abbr:`3Z (Three Zone)` clusters.

..
   Regions with Only Two Zones
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~

   If the selected |gcp| region has two zones, |service| clusters are
   split across the two zones. For example, a three node replica set
   cluster would have two nodes deployed to one zone and the remaining
   node deployed to the other zone.

   .. include:: /images/google-gcp-2az.rst

   :abbr:`2Z (Two Zone)` clusters have a higher chance of loss of
   availability in the event of the loss of an zone than :abbr:`3Z
   (Three Zone)` clusters. However, where latency or location are a
   priority, a region that supports :abbr:`2Z (Two Zone)` clusters
   may be preferred.

.. [#google-disk-docs]

   For detailed documentation on Google storage options, see
   :gcp:`Storage Options </compute/docs/disks/>`.

.. _gcp-integrations:

Integrations
------------

Along with :ref:`global region support <google-gcp>`, the following
product integrations enable applications running on |gcp|, such as
Google Compute Engine, Google Cloud Functions, Google Cloud Run, and
Google App Engine, to use |service| instances easily and securely.

Networking Services
~~~~~~~~~~~~~~~~~~~

- Google Virtual Private Cloud (VPC): :ref:`Set up network peering connections with GCP <vpc-peering>`

Security and Identity Services
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- Google Identity: :doc:`Sign up and log into Atlas with Google </tutorial/create-atlas-account/>`
- Google Cloud Key Management Service (KMS):

  - :ref:`Configure Atlas disk encryption with KMS <security-kms-encryption>`
  - :manual:`Configure client-side field level encryption with KMS </core/security-client-side-encryption-key-management/>`

Procurement
~~~~~~~~~~~

- GCP Marketplace: `Pay for Atlas usage via GCP <https://console.cloud.google.com/marketplace/product/mongodb/atlas-pro?pli=1>`__

More Information
----------------

For more information on how to use |gcp| with |service| most effectively,
review the following best practices, guides, and case studies:

- Case Study: `Why build apps on a cloud-native database like MongoDB Atlas?
  <https://cloud.google.com/blog/products/databases/why-build-apps-on-cloud-native-database-like-mongodb-atlas>`__

- Google Data Stream: `Streamline your real-time data pipeline with Datastream and MongoDB
  <https://cloud.google.com/blog/products/databases/get-real-time-analytics-data-with-datastream-and-mongodb>`__
