stepnum: 1
level: 4
source:
  file: steps-source-deployment-page.yaml
  ref: click-deployment-processes
---
title: "Choose :guilabel:`New Cluster`."
stepnum: 2
level: 4
ref: add-sc
content: |
  a. Click the :guilabel:`New Deployment` dropdown menu.
  b. Select :guilabel:`New Cluster`.
---
title: "Configure the sharded cluster."
stepnum: 3
level: 4
ref: configure-cluster
content: |

  In the :guilabel:`Cluster Configuration` section, complete the
  following fields.

  .. list-table::
     :widths: 30 70

     * - :guilabel:`Name`
       - Type the name for your standalone MongoDB deployment.
     
     * - :guilabel:`Version`
       - Select the MongoDB version for your standalone MongoDB
         deployment.

         .. note:: 
            If the dropdown menu does not include the MongoDB version
            you want for your deployment, you must enable it in the
            :doc:`Version Manager 
            </tutorial/configure-available-mongodb-version>`.
     
     * - :guilabel:`Auth Schema Version`
       - Select the schema for storing the user data for your
         deployment. MongoDB 3.0 uses a different schema for user data
         than previous versions. For compatibility information, see the
         :ref:`Security Changes <legacy-auth-model-removed>` 
         in the MongoDB 3.0 release notes.
     
     * - :guilabel:`Feature Compatibility` (Optional)
       - Select the :manual:`feature compatibility set
         </reference/command/setFeatureCompatibilityVersion>`. This
         field appears if your deployment MongoDB version is
         ``3.4`` or later.

     * - :guilabel:`Eligible Server RegExp`
       - Type a regular expression that includes the hostnames of the
         servers to which |mms| deploys MongoDB.

         - To use any of your provisioned servers, enter a period
           (\".\").
         - To use a specific set of servers, enter a part of the
           hostnames corresponding to a regular expression you specify.
         - To use your local server, enter its hostname.

         .. example::
            You have provisioned three servers: 

            - ``westdev-01a-mongodb.example.com``
            - ``centraldev-01b-mongodb.example.com``
            - ``eastdev-03e-mongodb.example.com``

            To create one replica set using all of these servers, you
            would enter ``.*\-mongodb\.example\.com``.

     * - :guilabel:`Data Node Eligible Port Range` 
       - Type lower and upper values of :abbr:`IANA (Internet Assigned
         Numbers Authority)` port numbers for your MongoDB deployment.
         |mms| assigns each member of your replica set a port number
         within this range.

     * - :guilabel:`# of Mongos` 
       - Type the number of :program:`mongos` processes you want
         deployed for your cluster.

     * - :guilabel:`Mongos Distribution` 
       - Select how you want your :program:`mongos` processes deployed
         in your cluster:

         :guilabel:`On a data node`
           |mms| deploys the :program:`mongos` on the same servers as
           existing data nodes.

         :guilabel:`On a dedicated node`
           |mms| deploys the :program:`mongos` on their own servers.

         :guilabel:`Regular Expression`
           |mms| deploys the :program:`mongos` on servers corresponding
           to a regular expression you specify.

           If you select :guilabel:`Regular Expression`, another field,
           :guilabel:`Mongos RegExp`, appears. Type the regular
           expression to identify the servers in this field.

     * - :guilabel:`Mongos Eligible Port Range` 
       - Type lower and upper values of :abbr:`IANA (Internet Assigned
         Numbers Authority)` port numbers for your MongoDB deployment.
         |mms| assigns each :program:`mongos` a port number
         within this range. The default port number is ``27017``.

     * - :guilabel:`# of Config Servers` 
       - Type the number of :program:`mongod` processes you want
         deployed for your config server replica set. The default is
         ``3`` and the maximum is ``50``. Set this to an odd
         number to allow a majority vote for 
         :manual:`primary elections </core/replica-set-elections>`.

     * - :guilabel:`Config Server Distribution` 
       - Select how you want your config server :program:`mongod`
         processes deployed in your cluster:

         :guilabel:`On a data node`
           |mms| deploys the config server :program:`mongod` processes
           on the same servers as existing data nodes.

         :guilabel:`On a dedicated node`
           |mms| deploys the config server :program:`mongod` processes
           on their own servers.

         :guilabel:`Regular Expression`
           |mms| deploys the :program:`mongos` on servers corresponding
           to a regular expression you specify.

           If you select :guilabel:`Regular Expression`, another field,
           :guilabel:`Config Server RegExp`, appears. Type the regular
           expression to identify the server in this field.

     * - :guilabel:`Config Server Eligible Port Range` 
       - Type lower and upper values of :abbr:`IANA (Internet Assigned
         Numbers Authority)` port numbers for your MongoDB deployment.
         |mms| assigns each member of your replica set a port number
         within this range. The default port number is ``27019``.

     * - :guilabel:`Config Server Replica Set Name` 
       - Type the name of the replica set.

---
title: "Configure the shards."
stepnum: 4
level: 4
ref: configure-shards
content: |

  In the :guilabel:`Shard Configuration` section, complete the
  following fields.

  .. list-table::
     :widths: 30 70

     * - :guilabel:`Shard Count` 
       - Set the number of shards you want in your cluster. If you want
         to distribute documents across a cluster, you must set this
         number to ``2`` or more.
     
     * - :guilabel:`MongoDs Per Shard`
       - Set the number of :program:`mongod` processes (replica set
         members) you want for each of your shards.
     
     * - :guilabel:`Member Options`

       - Configures replica set members. By default, each member is a
         voting member that bears data. 

         You may select a new member type from the dropdown menu:
         
         - :manual:`arbiter </core/replica-set-arbiter>`
         - :manual:`hidden </core/replica-set-hidden-member>`
         - :manual:`delayed </core/replica-set-delayed-member>`

         You can change the :manual:`election parameters 
         </core/replica-set-elections>` of each member: 

         - Change the number of votes the member has and
         - Change the member's priority.

         Click :guilabel:`Add` to add another member to the shard.

     * - :guilabel:`Shard Name Prefix` 
       - Type the prefix you want each shard name to include.

     * - :guilabel:`DB Directory Path Prefix`
       - Type the beginning of the system path to the 
         :setting:`database directory <storage.dbPath>` for this
         process. The default is ``/data``.
     
---
title: "Set any advanced configuration options for your MongoDB sharded cluster."
stepnum: 5
level: 4
ref: set-advanced
content: |

  In the :guilabel:`Advanced Options` section, add any additional
  runtime options you want to set for your MongoDB deployment.

  To add an option:

  a. Click :guilabel:`Add Option`.
  b. Select a :doc:`Startup Option 
     </reference/deployment-advanced-options>`.
  c. Set an acceptable value for that Startup Option.

  For descriptions of :guilabel:`Advanced Options`, see 
  :doc:`/reference/deployment-advanced-options`.

---
title: "Click :guilabel:`Apply`."
stepnum: 6
level: 4
ref: apply-settings
content: |
---
stepnum: 7
level: 4
source:
  file: steps-source-deployment-page.yaml
  ref: drag
---
stepnum: 8
level: 4
source:
  file: steps-source-deployment-page.yaml
  ref: review-deployment
---
stepnum: 9
level: 4
source:
  file: steps-source-deployment-page.yaml
  ref: confirm-deployment
...
