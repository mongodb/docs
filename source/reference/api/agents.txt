======
Agents
======

Operations
----------

.. code-block:: none

   GET /api/public/v1.0/groups/GROUP-ID/agents

Returns links to the three types of agents.

.. code-block:: none

   GET /api/public/v1.0/groups/GROUP-ID/agents/TYPE

Get all agents of the specified ``TYPE``. You can specify
``monitoring``, ``backup``, or ``automation``, as in:

.. code-block:: none

   GET /api/public/v1.0/groups/GROUP-ID/agents/monitoring
   GET /api/public/v1.0/groups/GROUP-ID/agents/backup
   GET /api/public/v1.0/groups/GROUP-ID/agents/automation

Sample Entity
-------------

Monitoring Agent
~~~~~~~~~~~~~~~~

.. code-block:: json

   {
     "id": "xxx",
     "name": "My Group",
     "agent": {
       "typeName": "MONITORING",
       "hostname": "hostname.example.com",
       "confCount": 29,
       "lastConf": (ISODate("2015-04-29T03:04:05Z"),
       "stateName": 2. // ACTIVE, STANDBY, NO_PROCESSES
       "pingCount": 150,
       "isManaged": true,
       "lastPing": (ISODate("2015-04-29T03:04:05Z")
     },
     "lastActiveAgent": ISODate("2015-04-29T03:04:05Z"),
     "activeAgentCount": 1,
     "replicaSetCount": 3,
     "shardCount": 2,
     "publicApiEnabled": true,
     "agentApiKey": "cbd728abd6a6d6c6b6d7826345dbcff0e",
     "links": [ ... ]
   }

Backup Agent
~~~~~~~~~~~~

.. code-block:: json

   {
     "id": "xxx",
     "name": "My Group",
     "agent": {
       "typeName": "BACKUP",
       "hostname": "hostname.example.com",
       "confCount": 29,
       "lastConf": (ISODate("2015-04-29T03:04:05Z"),
       "stateName": 2. // ACTIVE, STANDBY, NO_PROCESSES
       "isManaged": true,
       "tag": "agent-tag"
     },
     "lastActiveAgent": ISODate("2015-04-29T03:04:05Z"),
     "activeAgentCount": 1,
     "replicaSetCount": 3,
     "shardCount": 2,
     "publicApiEnabled": true,
     "agentApiKey": "cbd728abd6a6d6c6b6d7826345dbcff0e",
     "links": [ ... ]
   }

Automation Agent
~~~~~~~~~~~~~~~~

.. code-block:: json

   {
     "id": "xxx",
     "name": "My Group",
     "agent": {
       "typeName": "AUTOMATION",
       "hostname": "hostname.example.com",
       "confCount": 29,
       "lastConf": (ISODate("2015-04-29T03:04:05Z"),
       "stateName": 2 // ACTIVE, STANDBY, NO_PROCESSES
     },
     "lastActiveAgent": ISODate("2015-04-29T03:04:05Z"),
     "activeAgentCount": 1,
     "replicaSetCount": 3,
     "shardCount": 2,
     "publicApiEnabled": true,
     "agentApiKey": "cbd728abd6a6d6c6b6d7826345dbcff0e",
     "links": [ ... ]
   }

Entity Fields
-------------

.. list-table::
   :widths: 10 10 80
   :header-rows: 1

   * - Name
     - Type
     - Description
   * - ``typeName``
     - string
     - Specifies the type of agent, can be ``MONITORING``, ``BACKUP``, or ``AUTOMATION``.
   * - ``hostname``
     - string
     - Primary hostname. A host typically may have aliases, so the primary 
       is the best available name as decided by |mms|.
   * - ``confCount``
     - integer
     - 
   * - ``lastConf``
     - timestamp
     - 
   * - ``stateName``
     - string
     - The current state of the agent. ``stateName`` can return the following
       values:
    
       - ``ACTIVE``: the agent is active and operating
       - ``STANDBY``: the agent is on standby
       - ``NO_PROCESSES``: the agent is not managing,
         monitoring, or backing up any processes.
    
   * - ``pingCount``
     - integer
     - **Only applicable to Monitoring agents**. The number of pings that
       the Monitoring agent has sent to the ``hostname`` URL.
   * - ``isManaged``
     - Boolean
     - **Only applicable to Monitoring and Backup agents**. Specifies whether
       or not |mms| manages the agent.
   * - ``lastPing``
     - timestamp
     - **Only applicable to the Monitoring agent**. Time of most recent
       ping.
   * - ``tag``
     - string
     - **Only applicable to the Backup agent**. The agent's tag, if there is one.

Links
-----

.. list-table::
   :widths: 10 90
   :header-rows: 1

   * - Relation
     - Description
   * - ``self``
     - Me
   * - ``group``
     - The group the agents belong to
   * - ``monitoringAgents``
     - 
   * - ``backupAgents``
     - 
   * - ``automationAgents``
     - 

Examples
--------

