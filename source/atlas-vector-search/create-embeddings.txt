.. _create-vector-embeddings:

===============================
How to Create Vector Embeddings
===============================

.. default-domain:: mongodb

.. meta::
   :description: How to choose an embedding model and create vector embeddings for semantic and vector search.
   
.. facet::
   :name: genre
   :values: tutorial

.. facet::
   :name: programming_language
   :values: python

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

:term:`Vector embeddings <vector embeddings>` represent 
your data as points in multi-dimensional space. These
embeddings capture meaningful relationships in your data
and enable tasks such as semantic search and retrieval. 
You can store vector embeddings along with your other data
in |service| and use {+avs+} to query your vectorized data.

To perform {+avs+} queries, you must:

1. Choose a method to create vector embeddings.
#. Create vector embeddings from your data and store 
   them in |service|.
#. Create a vector embedding that represents your
   search query and run the query.

{+avs+} returns documents whose vector embeddings are closest 
in distance to the embedding that represents your query.
This indicates that they are similar in meaning. 

.. _create-embeddings:

Choose a Method to Create Embeddings
------------------------------------

To create vector embeddings, you must use 
an :term:`embedding model`. To connect to
an embedding model and create embeddings 
for {+avs+}, use one of the following methods:

- **Call an embedding service.**
  Most AI providers offer |api|\s for their proprietary embedding models 
  that you can use to create vector embeddings. 
  
  For a sample implementation
  with OpenAI, see :ref:`create-embeddings-examples`.

- **Load an open-source model.**
  If you don't have |api| keys or credits with an embedding service,
  you can use an open-source embedding model by loading it locally
  from your application.
  
  For a sample implementation,
  see :ref:`create-embeddings-examples`.

- **Leverage an integration.** You can integrate {+avs+} with
  open-source frameworks like `LangChain <https://langchain.com/>`__ and 
  `LlamaIndex <https://llamaindex.ai/>`__, services like
  `Amazon Bedrock <https://aws.amazon.com/bedrock/>`__, and more.
  These integrations include built-in libraries and tools to help 
  you quickly connect to open-source and proprietary embedding models 
  and generate vector embeddings for {+avs+}.

  To get started, see :ref:`vector-search-integrations`.

.. _create-embeddings-examples:
.. _create-embeddings-from-data:

Create and Store Embeddings From Data
-------------------------------------

The following procedure demonstrates how to 
create vector embeddings and store them in |service| 
by using an open-source or proprietary embedding model and 
the MongoDB :driver:`PyMongo Driver </pymongo/>`.

Prerequisites
~~~~~~~~~~~~~

To run these examples, you must have the following:

- An |service| {+cluster+} running MongoDB version 6.0.11, 7.0.2, or later
  (including :abbr:`RCs (Release Candidates)`). Ensure that your 
  :abbr:`IP address (Internet Protocal address)` is included
  in your |service| project's :ref:`access list <access-list>`.

- An environment to run Python interactive notebooks 
  such as `Colab <https://colab.research.google.com>`__.

Procedure
~~~~~~~~~

Complete the following steps to create vector embeddings
from a sample dataset, and then store them in a
collection in |service|.

.. note::

   This example covers how to create vector embeddings
   from a new dataset. If you want to create embeddings for an 
   existing collection, you must add a new field that contains 
   the embedding and :manual:`update </tutorial/update-documents/>` 
   each document in the collection.

.. tabs::

   .. tab:: Open-Source Example
      :tabid: open-source

      .. include:: /includes/steps-avs-create-embeddings-open-source

   .. tab:: OpenAI Example
      :tabid: openai

      .. include:: /includes/steps-avs-create-embeddings-openai

.. _create-embeddings-for-queries:

Create Embeddings for Queries
-----------------------------

The following procedure demonstrates how to 
create an embedding for {+avs+} queries by using an 
open-source or proprietary embedding model and 
the MongoDB :driver:`PyMongo Driver </pymongo/>`.

Procedure
~~~~~~~~~

Once you've :ref:`created embeddings 
from the sample data <create-embeddings-from-data>`,
complete the following steps to create an {+avs+}
index on your data and create an embedding that you
can use for vector search queries.

.. tabs::

   .. tab:: Open-Source Example
      :tabid: open-source

      .. include:: /includes/steps-avs-query-embedding-open-source.rst

   .. tab:: OpenAI Example
      :tabid: openai

      .. include:: /includes/steps-avs-query-embedding-openai.rst

To learn more about running vector search queries, see 
:ref:`return-vector-search-results`.
