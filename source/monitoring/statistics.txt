===============
Host Statistics
===============

The MMS web console provides an extensive set of features for
analyzing the statistics collected by the MMS agent. For a basic
overview of the console, see the :doc:`usage </monitoring/usage>`
documentation. This document provides a more in-depth guide for the "Host Statistics" page of the MMS
console. 

.. index:: host statistics

Accessing the Host Statistics
-----------------------------
In the "Hosts" section, click any hostname link to view the data
collected from that process. The charts on this "Host Statistics" page
are interactive, and provide tools for navigating and working with the
MMS data. Click on the "info" buttons with an ``i`` in a circle to
raise informational boxes, to explore the functionality of the MMS
console and charts.

.. _chart-controls:

.. index:: page controls

Global Page Controls
--------------------

There are three to five items in the line below the MMS Console's menu
bar. From left to right, these are:

- The hostname and port of the process. This is a link to the raw JSON
  content of the latest information gathered from this host.

- The :ref:`host type <host-types>`. Possible types include:
  "primary," "secondary," "master," "slave," "standalone,"
  "recovering," and "unknown."

- Optionally, the name of the replica set to which this process
  belongs. Only replica set members have this value. The name of the
  set links to a page with all of the charts from all members of a
  set.

- Optionally, the name of the shard cluster to which this process
  belongs. Only shard cluster members have this value.

- The version of MongoDB running on this process.

.. index:: granularity; chart granularity
   single: chart granularity
   single: display; granularity

The second line contains nine links that control the host statistics
page. MMS displays the current selection in a larger font. In the
second line there is a "window" selector that narrows the amount of
data displayed. These options are:

- "by minute," which is the default setting. All charts plot one data
  point per minute. The "window" options are:

  - "one hour," which is the default window for this selection and
    charts 1 hour of data.

  - "six hours," which charts 6 hours of data.

  - "twelve hours," which charts 12 hours of data.

  - "twenty-four hours," which charts 24 hours of data.

- "by 5min," which re-plots all charts with five-minute averages. The
  "window" options are:

  - "six hours," which charts 6 hours of data.

  - "twelve hours," which charts 12 hours of data.

  - "twenty-four hours," which is the default window for this
    selection and charts 24 hours of data.

  - "forty-eight hours," which charts 24 hours of data.

- "by hour," which re-plots all charts with hourly averages. The
  "window" options are:

  - "one day," which charts 1 day of data.

  - "one week," which charts 1 week of data.

  - "two weeks," which charts 2 weeks of data.

  - "one month," which is the default window for this selection and
    charts 1 month of data.

  - "two months," which charts 2 months of data.

- "by day," which re-plots the chart to display a period of time
  greater than 24 hours. The "window" options are:

  - "one week," which charts 1 week of data.

  - "two weeks," which charts 2 weeks of data.

  - "one month," which is the default window for this selection and
    charts 1 month of data

  - "six months," which charts 6 months of data.

  - "one year," which charts 1 year of data.

.. index:: display; range

- "range," which allows you to specify a time rage for the charts to
  display.

- "avg/sec," which is the default setting. When selected, charts
  display the average number of events per second.

- "total," which allows you to re-plot the charts to display the total
  number of events.

- "gmt," which allows you to re-plot the charts to the GMT zone. Use
  this option when correlating MMS data with server logs in GMT rather
  than your local timezone.

- "refresh," which triggers a refresh of all charts.

On the next line, a slider allows you to change the scope of all
charts at once. Move the sliders on either end of this bar to narrow
all of the charts on this page at once.

.. index:: display; defaults

.. note::

   The "Personalization" section of the "Settings" tab provides an
   interface to set a default chart display type (e.g. "avg/sec,")
   epoch type (e.g. "by day,") and window (e.g. "six months.")

.. index:: chart; interaction

Specific Chart Controls
-----------------------

You may also interact with the charts individually. Using the mouse you
can:

- Click-and-drag to select a portion of the chart to zoom into.

- Double-click to revert to the default zoom setting.

- Shift-click-and-drag (i.e. hold the shift key while clicking and
  dragging) to scroll left and right.

.. index:: chart; toolbar

Each MMS chart has several controls at the top right of the chart
container in the "chart toolbar." From left to right, these controls
are:

- "Add To Dashboard," a plus sign, takes you to a dashboard creation
  page where you can create a new dashboard and add a collection of
  charts to the new dashboard.

- "Expand Chart," an icon with two arrows expanding, raises a box with a
  larger version of the chart.

- "Chart Permalink," a chain, links to a page that only displays this chart.

- "Email Chart," an envelope, raises a dialogue box where you can
  input an email address and short message to send the chart to an
  arbitrary email address.

- "View Legend," the character ``i`` in a circle, raises a box with a key to
  the chart.

.. index:: chart; annotations

Chart Annotations
-----------------

Annotations may appear as colored vertical lines on your charts to
indicate various server events. The following color/event combinations
are:

- A *red bar* indicates a server restart.

- A *purple bar* indicates the server is now a primary.

- A *yellow bar* indicates the server is now a secondary.

If you do not wish to see the chart annotations, you can disable them
on the "Setting" page.



