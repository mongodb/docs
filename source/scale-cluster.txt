===============
Scale a Cluster
===============

.. default-domain:: mongodb

For an existing |service| cluster in your group, you can modify:

- the instance size, including upgrading from Free Tier ``M0`` to ``M10+``.

- the replication factor.

- the cluster topology from a replica set to a :manual:`sharded cluster
  </core/sharding>`.

- the number of shards for a sharded cluster.

- the enabling or disabling of backup.

- the MongoDB version of a cluster running 3.2 to 3.4.

Considerations
--------------

Migration, Downtime, and Performance Impact
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Some configuration changes, such as changing the instance size, require
migration to new servers. Depending on the amount of data to migrate,
migrations can take a significant amount of time.

To maximize availability:

- For a replica set, |service| migrates one member at a time, starting
  with the secondary members first and then the primary.

- For a sharded cluster, |service| performs the migration of the shards
  independently of each other. For each shard (i.e. replica set),
  |service| migrates one member at a time, starting with the secondary
  members first and then the primary.

Downtime occurs during the migration of the primary when the current
primary becomes unavailable and lasts until the election of a new
primary, generally under a minute.

Migration can affect performance if your primary is already reaching
operational capacity: each newly migrated replica set member must
perform an :term:`initial sync` from the primary, adding to the
operational load. Migrations can also affect performance if
:manual:`read preferences </core/read-preference>` are set to read from
secondaries: the replica set is down one secondary during the migration.

.. include:: /includes/fact-auto-index.rst

.. Note to writers: beginning in v20160712, an instance size change with no disk
   change does not require an initial sync

Billing
~~~~~~~

As you modify your cluster, you can compare the costs of different
options before applying them. The :guilabel:`Cluster Overview` box displays
the cost of the selected configuration, excluding data transfer.

.. admonition:: Free Tier
   :class: important

   Upgrading an ``M0`` Free Tier cluster to an ``M10`` or greater paid tier
   cluster starts billing for the cluster. See :doc:`billing` for complete
   documentation on |service| billing.

Scale an Existing Cluster
-------------------------

.. include:: /includes/steps/scale-cluster.rst

