======================
Create One Restore Job
======================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/styles/corrections.rst

.. include:: /includes/fact-projects-groups-synonyms.rst

Creates one restore job for the specified cluster.

This endpoint does not support the following:

- Delivering restored snapshots by SCP

- Creating checkpoint restore jobs for sharded clusters with the HTTP
  delivery method

- Creating restore jobs for queryable backup snapshots

.. include:: /includes/fact-restore-cluster-data-warning-api.rst

.. include:: /includes/api-requirements.rst

.. include:: /includes/fact-api-whitelist-required.rst

.. include:: /includes/api-base-url.rst

Resource
--------

.. code-block:: none

   POST /groups/{GROUP-ID}/clusters/{CLUSTER-NAME}/restoreJobs

Request Parameters
------------------

Request Path Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 15 10 10 65

   * - Path Parameter
     - Type
     - Necessity
     - Description

   * - ``GROUP-ID``
     - string
     - Required
     - Unique identifier of the :ref:`project <group-id>` that owns
       the snapshots.

   * - ``CLUSTER-NAME``
     - string
     - Required
     - Name of the cluster that contains the snapshots that you
       want to retrieve.

Request Query Parameters
~~~~~~~~~~~~~~~~~~~~~~~~

This endpoint may use any of the |http| request query parameters
available to all |service| |api| resources. These are all optional.

.. include:: /includes/base-query-parameters-list.rst

Request Body Parameters
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/restore-job-request-documents.rst

Response
--------

.. include:: /includes/list-table-restore-jobs-http-response.rst

Example Requests
----------------

.. tabs::

   tabs:
     - id: http
       name: HTTP Restore
       content: |

         Create a restore job that transfers a compressed snapshot
         using |http|.

         .. literalinclude:: /includes/api/requests/create-one-restore-job-http.sh
            :language: sh

     - id: auto-oplog
       name: Automated Oplog Restore
       content: |

         Create an automated restore from an Oplog timestamp. Valid for
         :term:`replica sets <replica set>` only.

         .. literalinclude:: /includes/api/requests/create-one-restore-job-auto-oplog.sh
            :language: sh

     - id: auto-pit
       name: Automated PIT Restore
       content: |

         Create an automated restore from a specific point in time.
         Valid for :term:`replica sets <replica set>` only.

         .. literalinclude:: /includes/api/requests/create-one-restore-job-auto-pit.sh
            :language: sh

     - id: auto-checkpoint
       name: Automated Checkpoint Restore
       content: |

         Create an automated restore from a checkpoint. Valid for
         :term:`sharded clusters <sharded cluster>` only.

         .. literalinclude:: /includes/api/requests/create-one-restore-job-auto-checkpoint.sh
            :language: sh

Example Responses
-----------------

.. tabs::

   hidden: true

   tabs:
     - id: http
       name: HTTP Restore
       content: |

         .. literalinclude:: /includes/api/responses/create-one-restore-job-http.json
            :language: json

     - id: auto-oplog
       name: Automated Oplog Restore
       content: |

         .. literalinclude:: /includes/api/responses/create-one-restore-job-auto-oplog.json
            :language: json

     - id: auto-pit
       name: Automated PIT Restore
       content: |

         .. literalinclude:: /includes/api/responses/create-one-restore-job-auto-pit.json
            :language: json

     - id: auto-checkpoint
       name: Automated Checkpoint Restore
       content: |

         .. literalinclude:: /includes/api/responses/create-one-restore-job-auto-checkpoint.json
            :language: json

